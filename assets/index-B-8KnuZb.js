var __typeError=e=>{throw TypeError(e)},__accessCheck=(e,t,r)=>t.has(e)||__typeError("Cannot "+r),__privateGet=(e,t,r)=>(__accessCheck(e,t,"read from private field"),r?r.call(e):t.get(e)),__privateAdd=(e,t,r)=>t.has(e)?__typeError("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),__privateSet=(e,t,r,n)=>(__accessCheck(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),__privateMethod=(e,t,r)=>(__accessCheck(e,t,"access private method"),r),__privateWrapper=(e,t,r,n)=>({set _(n){__privateSet(e,t,n,r)},get _(){return __privateGet(e,t,n)}}),_focused,_cleanup,_setup,_a,_online,_cleanup2,_setup2,_b,_gcTimeout,_c,_initialState,_revertState,_cache,_client,_retryer,_defaultOptions,_abortSignalConsumed,_Query_instances,dispatch_fn,_d,_queries,_e2,_observers,_mutationCache,_retryer2,_Mutation_instances,dispatch_fn2,_f,_mutations,_scopes,_mutationId,_g,_queryCache,_mutationCache2,_defaultOptions2,_queryDefaults,_mutationDefaults,_mountCount,_unsubscribeFocus,_unsubscribeOnline,_h,_client2,_currentQuery,_currentQueryInitialState,_currentResult,_currentResultState,_currentResultOptions,_currentThenable,_selectError,_selectFn,_selectResult,_lastQueryWithDefinedData,_staleTimeoutId,_refetchIntervalId,_currentRefetchInterval,_trackedProps,_QueryObserver_instances,executeFetch_fn,updateStaleTimeout_fn,computeRefetchInterval_fn,updateRefetchInterval_fn,updateTimers_fn,clearStaleTimeout_fn,clearRefetchInterval_fn,updateQuery_fn,notify_fn,_i,_client3,_currentResult2,_currentMutation,_mutateOptions,_MutationObserver_instances,updateResult_fn,notify_fn2,_j,createRoot;import{j as jsxRuntimeExports,c as createContextScope,u as useComposedRefs,a as createSlot,P as Primitive,B as Branch,b as useControllableState,d as Presence,e as composeEventHandlers$1,f as useCallbackRef,R as Root$9,g as Portal$3,h as useLayoutEffect2,i as dispatchDiscreteCustomEvent,D as DismissableLayer,k as createSlottable,l as useId,S as Slot$2,m as composeRefs,n as useFocusGuards,o as ReactRemoveScroll,F as FocusScope,p as hideOthers,O as Overlay,q as Portal$4,C as Content$2,r as Close$d,T as Title$1,s as Description$1,t as Root$a,v as Trigger$4,_ as __awaiter}from"./ui-BcGIk8X4.js";import{a as reactDomExports,r as reactExports,b as React$1,d as React$2,c as commonjsGlobal,e as getDefaultExportFromCjs,g as getAugmentedNamespace}from"./vendor-x-MNYqOB.js";import{c as createClient}from"./supabase-CsyjQ5ii.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var m$2=reactDomExports;function parse$2(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,n,s,i,o=[],a="",l=e.split("/");for(l[0]||l.shift();s=l.shift();)"*"===(r=s[0])?(o.push(r),a+="?"===s[1]?"(?:/(.*))?":"/(.*)"):":"===r?(n=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~n?n:~i?i:s.length)),a+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~n?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}createRoot=m$2.createRoot,m$2.hydrateRoot;var shim$1={exports:{}},useSyncExternalStoreShim_production={},React=reactExports;function is(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var objectIs="function"==typeof Object.is?Object.is:is,useState=React.useState,useEffect=React.useEffect,useLayoutEffect=React.useLayoutEffect,useDebugValue=React.useDebugValue;function useSyncExternalStore$2(e,t){var r=t(),n=useState({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return useLayoutEffect(function(){s.value=r,s.getSnapshot=t,checkIfSnapshotChanged(s)&&i({inst:s})},[e,r,t]),useEffect(function(){return checkIfSnapshotChanged(s)&&i({inst:s}),e(function(){checkIfSnapshotChanged(s)&&i({inst:s})})},[e]),useDebugValue(r),r}function checkIfSnapshotChanged(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!objectIs(e,r)}catch(n){return!0}}function useSyncExternalStore$1(e,t){return t()}var shim="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=void 0!==React.useSyncExternalStore?React.useSyncExternalStore:shim,shim$1.exports=useSyncExternalStoreShim_production;var shimExports=shim$1.exports;const useBuiltinInsertionEffect=React$1.useInsertionEffect,canUseDOM=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),useIsomorphicLayoutEffect$3=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect,useInsertionEffect=useBuiltinInsertionEffect||useIsomorphicLayoutEffect$3,useEvent=e=>{const t=reactExports.useRef([e,(...e)=>t[0](...e)]).current;return useInsertionEffect(()=>{t[0]=e}),t[1]},eventPopstate="popstate",eventPushState="pushState",eventReplaceState="replaceState",eventHashchange="hashchange",events=[eventPopstate,eventPushState,eventReplaceState,eventHashchange],subscribeToLocationUpdates=e=>{for(const t of events)addEventListener(t,e);return()=>{for(const t of events)removeEventListener(t,e)}},useLocationProperty=(e,t)=>shimExports.useSyncExternalStore(subscribeToLocationUpdates,e,t),currentSearch=()=>location.search,useSearch=({ssrSearch:e=""}={})=>useLocationProperty(currentSearch,()=>e),currentPathname=()=>location.pathname,usePathname=({ssrPath:e}={})=>useLocationProperty(currentPathname,e?()=>e:currentPathname),navigate=(e,{replace:t=!1,state:r=null}={})=>history[t?eventReplaceState:eventPushState](r,"",e),useBrowserLocation=(e={})=>[usePathname(e),navigate],patchKey=Symbol.for("wouter_v3");if("undefined"!=typeof history&&void 0===window[patchKey]){for(const e of[eventPushState,eventReplaceState]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),n=new Event(e);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,patchKey,{value:!0})}const _relativePath=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",baseDefaults=(e="")=>"/"===e?"":e,absolutePath=(e,t)=>"~"===e[0]?e.slice(1):baseDefaults(t)+e,relativePath=(e="",t)=>_relativePath(unescape$1(baseDefaults(e)),unescape$1(t)),unescape$1=e=>{try{return decodeURI(e)}catch(t){return e}},defaultRouter={hook:useBrowserLocation,searchHook:useSearch,parser:parse$2,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},RouterCtx=reactExports.createContext(defaultRouter),useRouter=()=>reactExports.useContext(RouterCtx),Params0={},ParamsCtx=reactExports.createContext(Params0),useParams=()=>reactExports.useContext(ParamsCtx),useLocationFromRouter=e=>{const[t,r]=e.hook(e);return[relativePath(e.base,t),useEvent((t,n)=>r(absolutePath(t,e.base),n))]},useLocation=()=>useLocationFromRouter(useRouter()),matchRoute=(e,t,r,n)=>{const{pattern:s,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",n),o=s.exec(r)||[],[a,...l]=o;return void 0!==a?[!0,(()=>{const e=!1!==i?Object.fromEntries(i.map((e,t)=>[e,l[t]])):o.groups;let t={...l};return e&&Object.assign(t,e),t})(),...n?[a]:[]]:[!1,null]},Router$1=({children:e,...t})=>{var r,n;const s=useRouter(),i=t.hook?defaultRouter:s;let o=i;const[a,l]=(null==(r=t.ssrPath)?void 0:r.split("?"))??[];l&&(t.ssrSearch=l,t.ssrPath=a),t.hrefs=t.hrefs??(null==(n=t.hook)?void 0:n.hrefs);let c=reactExports.useRef({}),u=c.current,d=u;for(let p in i){const e="base"===p?i[p]+(t[p]||""):t[p]||i[p];u===d&&e!==d[p]&&(c.current=d={...d}),d[p]=e,e===i[p]&&e===o[p]||(o=d)}return reactExports.createElement(RouterCtx.Provider,{value:o,children:e})},h_route=({children:e,component:t},r)=>t?reactExports.createElement(t,{params:r}):"function"==typeof e?e(r):e,useCachedParams=e=>{let t=reactExports.useRef(Params0);const r=t.current;return t.current=Object.keys(e).length!==Object.keys(r).length||Object.entries(e).some(([e,t])=>t!==r[e])?e:r},Route=({path:e,nest:t,match:r,...n})=>{const s=useRouter(),[i]=useLocationFromRouter(s),[o,a,l]=r??matchRoute(s.parser,e,i,t),c=useCachedParams({...useParams(),...a});if(!o)return null;const u=l?reactExports.createElement(Router$1,{base:l},h_route(n,c)):h_route(n,c);return reactExports.createElement(ParamsCtx.Provider,{value:c,children:u})},Link$1=reactExports.forwardRef((e,t)=>{const r=useRouter(),[n,s]=useLocationFromRouter(r),{to:i="",href:o=i,onClick:a,asChild:l,children:c,className:u,replace:d,state:p,...m}=e,x=useEvent(t=>{t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||0!==t.button||(null==a||a(t),t.defaultPrevented||(t.preventDefault(),s(o,e)))}),f=r.hrefs("~"===o[0]?o.slice(1):r.base+o,r);return l&&reactExports.isValidElement(c)?reactExports.cloneElement(c,{onClick:x,href:f}):reactExports.createElement("a",{...m,onClick:x,href:f,className:(null==u?void 0:u.call)?u(n===o):u,children:c,ref:t})}),flattenChildren=e=>Array.isArray(e)?e.flatMap(e=>flattenChildren(e&&e.type===reactExports.Fragment?e.props.children:e)):[e],Switch$2=({children:e,location:t})=>{const r=useRouter(),[n]=useLocationFromRouter(r);for(const s of flattenChildren(e)){let e=0;if(reactExports.isValidElement(s)&&(e=matchRoute(r.parser,s.props.path,t||n,s.props.nest))[0])return reactExports.cloneElement(s,{match:e})}return null},Redirect=e=>{const{to:t,href:r=t}=e,n=useRouter(),[,s]=useLocationFromRouter(n),i=useEvent(()=>s(t||r,e)),{ssrContext:o}=n;return useIsomorphicLayoutEffect$3(()=>{i()},[]),o&&(o.redirectTo=t),null};var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer="undefined"==typeof window||"Deno"in globalThis;function noop$d(){}function functionalUpdate(e,t){return"function"==typeof e?e(t):e}function isValidTimeout(e){return"number"==typeof e&&e>=0&&e!==1/0}function timeUntilStale(e,t){return Math.max(e+(t||0)-Date.now(),0)}function resolveStaleTime(e,t){return"function"==typeof e?e(t):e}function resolveEnabled(e,t){return"function"==typeof e?e(t):e}function matchQuery(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o)if(n){if(t.queryHash!==hashQueryKeyByOptions(o,t.options))return!1}else if(!partialMatchKey(t.queryKey,o))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return("boolean"!=typeof a||t.isStale()===a)&&((!s||s===t.state.fetchStatus)&&!(i&&!i(t)))}function matchMutation(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(hashKey(t.options.mutationKey)!==hashKey(i))return!1}else if(!partialMatchKey(t.options.mutationKey,i))return!1}return(!n||t.state.status===n)&&!(s&&!s(t))}function hashQueryKeyByOptions(e,t){return((null==t?void 0:t.queryKeyHashFn)||hashKey)(e)}function hashKey(e){return JSON.stringify(e,(e,t)=>isPlainObject$6(t)?Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}):t)}function partialMatchKey(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(r=>partialMatchKey(e[r],t[r])))}function replaceEqualDeep(e,t){if(e===t)return e;const r=isPlainArray(e)&&isPlainArray(t);if(r||isPlainObject$6(e)&&isPlainObject$6(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),o=i.length,a=r?[]:{},l=new Set(n);let c=0;for(let u=0;u<o;u++){const n=r?u:i[u];(!r&&l.has(n)||r)&&void 0===e[n]&&void 0===t[n]?(a[n]=void 0,c++):(a[n]=replaceEqualDeep(e[n],t[n]),a[n]===e[n]&&void 0!==e[n]&&c++)}return s===o&&c===s?e:a}return t}function shallowEqualObjects(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function isPlainArray(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function isPlainObject$6(e){if(!hasObjectPrototype(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!hasObjectPrototype(r)&&(!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function hasObjectPrototype(e){return"[object Object]"===Object.prototype.toString.call(e)}function sleep$1(e){return new Promise(t=>{setTimeout(t,e)})}function replaceData(e,t,r){return"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?replaceEqualDeep(e,t):t}function addToEnd(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function addToStart(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var skipToken=Symbol();function ensureQueryFn(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==skipToken?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function shouldThrowError(e,t){return"function"==typeof e?e(...t):!!e}var FocusManager=(_a=class extends Subscribable{constructor(){super(),__privateAdd(this,_focused),__privateAdd(this,_cleanup),__privateAdd(this,_setup),__privateSet(this,_setup,e=>{if(!isServer&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){__privateGet(this,_cleanup)||this.setEventListener(__privateGet(this,_setup))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=__privateGet(this,_cleanup))||e.call(this),__privateSet(this,_cleanup,void 0))}setEventListener(e){var t;__privateSet(this,_setup,e),null==(t=__privateGet(this,_cleanup))||t.call(this),__privateSet(this,_cleanup,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){__privateGet(this,_focused)!==e&&(__privateSet(this,_focused,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return"boolean"==typeof __privateGet(this,_focused)?__privateGet(this,_focused):"hidden"!==(null==(e=globalThis.document)?void 0:e.visibilityState)}},_focused=new WeakMap,_cleanup=new WeakMap,_setup=new WeakMap,_a),focusManager=new FocusManager,OnlineManager=(_b=class extends Subscribable{constructor(){super(),__privateAdd(this,_online,!0),__privateAdd(this,_cleanup2),__privateAdd(this,_setup2),__privateSet(this,_setup2,e=>{if(!isServer&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){__privateGet(this,_cleanup2)||this.setEventListener(__privateGet(this,_setup2))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=__privateGet(this,_cleanup2))||e.call(this),__privateSet(this,_cleanup2,void 0))}setEventListener(e){var t;__privateSet(this,_setup2,e),null==(t=__privateGet(this,_cleanup2))||t.call(this),__privateSet(this,_cleanup2,e(this.setOnline.bind(this)))}setOnline(e){__privateGet(this,_online)!==e&&(__privateSet(this,_online,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return __privateGet(this,_online)}},_online=new WeakMap,_cleanup2=new WeakMap,_setup2=new WeakMap,_b),onlineManager=new OnlineManager;function pendingThenable(){let e,t;const r=new Promise((r,n)=>{e=r,t=n});function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch(()=>{}),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}function defaultRetryDelay(e){return Math.min(1e3*2**e,3e4)}function canFetch(e){return"online"!==(e??"online")||onlineManager.isOnline()}var CancelledError=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function isCancelledError(e){return e instanceof CancelledError}function createRetryer(e){let t,r=!1,n=0,s=!1;const i=pendingThenable(),o=()=>focusManager.isFocused()&&("always"===e.networkMode||onlineManager.isOnline())&&e.canRun(),a=()=>canFetch(e.networkMode)&&e.canRun(),l=r=>{var n;s||(s=!0,null==(n=e.onSuccess)||n.call(e,r),null==t||t(),i.resolve(r))},c=r=>{var n;s||(s=!0,null==(n=e.onError)||n.call(e,r),null==t||t(),i.reject(r))},u=()=>new Promise(r=>{var n;t=e=>{(s||o())&&r(e)},null==(n=e.onPause)||n.call(e)}).then(()=>{var r;t=void 0,s||null==(r=e.onContinue)||r.call(e)}),d=()=>{if(s)return;let t;const i=0===n?e.initialPromise:void 0;try{t=i??e.fn()}catch(a){t=Promise.reject(a)}Promise.resolve(t).then(l).catch(t=>{var i;if(s)return;const a=e.retry??(isServer?0:3),l=e.retryDelay??defaultRetryDelay,p="function"==typeof l?l(n,t):l,m=!0===a||"number"==typeof a&&n<a||"function"==typeof a&&a(n,t);!r&&m?(n++,null==(i=e.onFail)||i.call(e,n,t),sleep$1(p).then(()=>o()?void 0:u()).then(()=>{r?c(t):d()})):c(t)})};return{promise:i,cancel:t=>{var r;s||(c(new CancelledError(t)),null==(r=e.abort)||r.call(e))},continue:()=>(null==t||t(),i),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:a,start:()=>(a()?d():u().then(d),i)}}var defaultScheduler=e=>setTimeout(e,0);function createNotifyManager(){let e=[],t=0,r=e=>{e()},n=e=>{e()},s=defaultScheduler;const i=n=>{t?e.push(n):s(()=>{r(n)})};return{batch:i=>{let o;t++;try{o=i()}finally{t--,t||(()=>{const t=e;e=[],t.length&&s(()=>{n(()=>{t.forEach(e=>{r(e)})})})})()}return o},batchCalls:e=>(...t)=>{i(()=>{e(...t)})},schedule:i,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{s=e}}}var notifyManager=createNotifyManager(),Removable=(_c=class{constructor(){__privateAdd(this,_gcTimeout)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&__privateSet(this,_gcTimeout,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(isServer?1/0:3e5))}clearGcTimeout(){__privateGet(this,_gcTimeout)&&(clearTimeout(__privateGet(this,_gcTimeout)),__privateSet(this,_gcTimeout,void 0))}},_gcTimeout=new WeakMap,_c),Query=(_d=class extends Removable{constructor(e){super(),__privateAdd(this,_Query_instances),__privateAdd(this,_initialState),__privateAdd(this,_revertState),__privateAdd(this,_cache),__privateAdd(this,_client),__privateAdd(this,_retryer),__privateAdd(this,_defaultOptions),__privateAdd(this,_abortSignalConsumed),__privateSet(this,_abortSignalConsumed,!1),__privateSet(this,_defaultOptions,e.defaultOptions),this.setOptions(e.options),this.observers=[],__privateSet(this,_client,e.client),__privateSet(this,_cache,__privateGet(this,_client).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,__privateSet(this,_initialState,getDefaultState$1(this.options)),this.state=e.state??__privateGet(this,_initialState),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=__privateGet(this,_retryer))?void 0:e.promise}setOptions(e){this.options={...__privateGet(this,_defaultOptions),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||__privateGet(this,_cache).remove(this)}setData(e,t){const r=replaceData(this.state.data,e,this.options);return __privateMethod(this,_Query_instances,dispatch_fn).call(this,{data:r,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),r}setState(e,t){__privateMethod(this,_Query_instances,dispatch_fn).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,r;const n=null==(t=__privateGet(this,_retryer))?void 0:t.promise;return null==(r=__privateGet(this,_retryer))||r.cancel(e),n?n.then(noop$d).catch(noop$d):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(__privateGet(this,_initialState))}isActive(){return this.observers.some(e=>!1!==resolveEnabled(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===resolveStaleTime(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!timeUntilStale(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=__privateGet(this,_retryer))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=__privateGet(this,_retryer))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),__privateGet(this,_cache).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(__privateGet(this,_retryer)&&(__privateGet(this,_abortSignalConsumed)?__privateGet(this,_retryer).cancel({revert:!0}):__privateGet(this,_retryer).cancelRetry()),this.scheduleGc()),__privateGet(this,_cache).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||__privateMethod(this,_Query_instances,dispatch_fn).call(this,{type:"invalidate"})}fetch(e,t){var r,n,s;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(__privateGet(this,_retryer))return __privateGet(this,_retryer).continueRetry(),__privateGet(this,_retryer).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const i=new AbortController,o=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(__privateSet(this,_abortSignalConsumed,!0),i.signal)})},a=()=>{const e=ensureQueryFn(this.options,t),r=(()=>{const e={client:__privateGet(this,_client),queryKey:this.queryKey,meta:this.meta};return o(e),e})();return __privateSet(this,_abortSignalConsumed,!1),this.options.persister?this.options.persister(e,r,this):e(r)},l=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:__privateGet(this,_client),state:this.state,fetchFn:a};return o(e),e})();null==(r=this.options.behavior)||r.onFetch(l,this),__privateSet(this,_revertState,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(n=l.fetchOptions)?void 0:n.meta)||__privateMethod(this,_Query_instances,dispatch_fn).call(this,{type:"fetch",meta:null==(s=l.fetchOptions)?void 0:s.meta});const c=e=>{var t,r,n,s;isCancelledError(e)&&e.silent||__privateMethod(this,_Query_instances,dispatch_fn).call(this,{type:"error",error:e}),isCancelledError(e)||(null==(r=(t=__privateGet(this,_cache).config).onError)||r.call(t,e,this),null==(s=(n=__privateGet(this,_cache).config).onSettled)||s.call(n,this.state.data,e,this)),this.scheduleGc()};return __privateSet(this,_retryer,createRetryer({initialPromise:null==t?void 0:t.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:e=>{var t,r,n,s;if(void 0!==e){try{this.setData(e)}catch(i){return void c(i)}null==(r=(t=__privateGet(this,_cache).config).onSuccess)||r.call(t,e,this),null==(s=(n=__privateGet(this,_cache).config).onSettled)||s.call(n,e,this.state.error,this),this.scheduleGc()}else c(new Error(`${this.queryHash} data is undefined`))},onError:c,onFail:(e,t)=>{__privateMethod(this,_Query_instances,dispatch_fn).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{__privateMethod(this,_Query_instances,dispatch_fn).call(this,{type:"pause"})},onContinue:()=>{__privateMethod(this,_Query_instances,dispatch_fn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),__privateGet(this,_retryer).start()}},_initialState=new WeakMap,_revertState=new WeakMap,_cache=new WeakMap,_client=new WeakMap,_retryer=new WeakMap,_defaultOptions=new WeakMap,_abortSignalConsumed=new WeakMap,_Query_instances=new WeakSet,dispatch_fn=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...fetchState(t.data,this.options),fetchMeta:e.meta??null};case"success":return __privateSet(this,_revertState,void 0),{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return isCancelledError(r)&&r.revert&&__privateGet(this,_revertState)?{...__privateGet(this,_revertState),fetchStatus:"idle"}:{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),notifyManager.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),__privateGet(this,_cache).notify({query:this,type:"updated",action:e})})},_d);function fetchState(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function getDefaultState$1(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var QueryCache=(_e2=class extends Subscribable{constructor(e={}){super(),__privateAdd(this,_queries),this.config=e,__privateSet(this,_queries,new Map)}build(e,t,r){const n=t.queryKey,s=t.queryHash??hashQueryKeyByOptions(n,t);let i=this.get(s);return i||(i=new Query({client:e,queryKey:n,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){__privateGet(this,_queries).has(e.queryHash)||(__privateGet(this,_queries).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=__privateGet(this,_queries).get(e.queryHash);t&&(e.destroy(),t===e&&__privateGet(this,_queries).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return __privateGet(this,_queries).get(e)}getAll(){return[...__privateGet(this,_queries).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>matchQuery(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>matchQuery(e,t)):t}notify(e){notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},_queries=new WeakMap,_e2),Mutation=(_f=class extends Removable{constructor(e){super(),__privateAdd(this,_Mutation_instances),__privateAdd(this,_observers),__privateAdd(this,_mutationCache),__privateAdd(this,_retryer2),this.mutationId=e.mutationId,__privateSet(this,_mutationCache,e.mutationCache),__privateSet(this,_observers,[]),this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){__privateGet(this,_observers).includes(e)||(__privateGet(this,_observers).push(e),this.clearGcTimeout(),__privateGet(this,_mutationCache).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){__privateSet(this,_observers,__privateGet(this,_observers).filter(t=>t!==e)),this.scheduleGc(),__privateGet(this,_mutationCache).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){__privateGet(this,_observers).length||("pending"===this.state.status?this.scheduleGc():__privateGet(this,_mutationCache).remove(this))}continue(){var e;return(null==(e=__privateGet(this,_retryer2))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,r,n,s,i,o,a,l,c,u,d,p,m,x,f,h,g,y,j,b;const v=()=>{__privateMethod(this,_Mutation_instances,dispatch_fn2).call(this,{type:"continue"})};__privateSet(this,_retryer2,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{__privateMethod(this,_Mutation_instances,dispatch_fn2).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{__privateMethod(this,_Mutation_instances,dispatch_fn2).call(this,{type:"pause"})},onContinue:v,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>__privateGet(this,_mutationCache).canRun(this)}));const E="pending"===this.state.status,R=!__privateGet(this,_retryer2).canStart();try{if(E)v();else{__privateMethod(this,_Mutation_instances,dispatch_fn2).call(this,{type:"pending",variables:e,isPaused:R}),await(null==(r=(t=__privateGet(this,_mutationCache).config).onMutate)?void 0:r.call(t,e,this));const i=await(null==(s=(n=this.options).onMutate)?void 0:s.call(n,e));i!==this.state.context&&__privateMethod(this,_Mutation_instances,dispatch_fn2).call(this,{type:"pending",context:i,variables:e,isPaused:R})}const m=await __privateGet(this,_retryer2).start();return await(null==(o=(i=__privateGet(this,_mutationCache).config).onSuccess)?void 0:o.call(i,m,e,this.state.context,this)),await(null==(l=(a=this.options).onSuccess)?void 0:l.call(a,m,e,this.state.context)),await(null==(u=(c=__privateGet(this,_mutationCache).config).onSettled)?void 0:u.call(c,m,null,this.state.variables,this.state.context,this)),await(null==(p=(d=this.options).onSettled)?void 0:p.call(d,m,null,e,this.state.context)),__privateMethod(this,_Mutation_instances,dispatch_fn2).call(this,{type:"success",data:m}),m}catch(S){try{throw await(null==(x=(m=__privateGet(this,_mutationCache).config).onError)?void 0:x.call(m,S,e,this.state.context,this)),await(null==(h=(f=this.options).onError)?void 0:h.call(f,S,e,this.state.context)),await(null==(y=(g=__privateGet(this,_mutationCache).config).onSettled)?void 0:y.call(g,void 0,S,this.state.variables,this.state.context,this)),await(null==(b=(j=this.options).onSettled)?void 0:b.call(j,void 0,S,e,this.state.context)),S}finally{__privateMethod(this,_Mutation_instances,dispatch_fn2).call(this,{type:"error",error:S})}}finally{__privateGet(this,_mutationCache).runNext(this)}}},_observers=new WeakMap,_mutationCache=new WeakMap,_retryer2=new WeakMap,_Mutation_instances=new WeakSet,dispatch_fn2=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),notifyManager.batch(()=>{__privateGet(this,_observers).forEach(t=>{t.onMutationUpdate(e)}),__privateGet(this,_mutationCache).notify({mutation:this,type:"updated",action:e})})},_f);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MutationCache=(_g=class extends Subscribable{constructor(e={}){super(),__privateAdd(this,_mutations),__privateAdd(this,_scopes),__privateAdd(this,_mutationId),this.config=e,__privateSet(this,_mutations,new Set),__privateSet(this,_scopes,new Map),__privateSet(this,_mutationId,0)}build(e,t,r){const n=new Mutation({mutationCache:this,mutationId:++__privateWrapper(this,_mutationId)._,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){__privateGet(this,_mutations).add(e);const t=scopeFor(e);if("string"==typeof t){const r=__privateGet(this,_scopes).get(t);r?r.push(e):__privateGet(this,_scopes).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(__privateGet(this,_mutations).delete(e)){const t=scopeFor(e);if("string"==typeof t){const r=__privateGet(this,_scopes).get(t);if(r)if(r.length>1){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&__privateGet(this,_scopes).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=scopeFor(e);if("string"==typeof t){const r=__privateGet(this,_scopes).get(t),n=null==r?void 0:r.find(e=>"pending"===e.state.status);return!n||n===e}return!0}runNext(e){var t;const r=scopeFor(e);if("string"==typeof r){const n=null==(t=__privateGet(this,_scopes).get(r))?void 0:t.find(t=>t!==e&&t.state.isPaused);return(null==n?void 0:n.continue())??Promise.resolve()}return Promise.resolve()}clear(){notifyManager.batch(()=>{__privateGet(this,_mutations).forEach(e=>{this.notify({type:"removed",mutation:e})}),__privateGet(this,_mutations).clear(),__privateGet(this,_scopes).clear()})}getAll(){return Array.from(__privateGet(this,_mutations))}find(e){const t={exact:!0,...e};return this.getAll().find(e=>matchMutation(t,e))}findAll(e={}){return this.getAll().filter(t=>matchMutation(e,t))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(e=>e.continue().catch(noop$d))))}},_mutations=new WeakMap,_scopes=new WeakMap,_mutationId=new WeakMap,_g);function scopeFor(e){var t;return null==(t=e.options.scope)?void 0:t.id}function infiniteQueryBehavior(e){return{onFetch:(t,r)=>{var n,s,i,o,a;const l=t.options,c=null==(i=null==(s=null==(n=t.fetchOptions)?void 0:n.meta)?void 0:s.fetchMore)?void 0:i.direction,u=(null==(o=t.state.data)?void 0:o.pages)||[],d=(null==(a=t.state.data)?void 0:a.pageParams)||[];let p={pages:[],pageParams:[]},m=0;const x=async()=>{let r=!1;const n=ensureQueryFn(t.options,t.fetchOptions),s=async(e,s,i)=>{if(r)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);const o=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:s,direction:i?"backward":"forward",meta:t.options.meta};var n;return n=e,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",()=>{r=!0}),t.signal)}),e})(),a=await n(o),{maxPages:l}=t.options,c=i?addToStart:addToEnd;return{pages:c(e.pages,a,l),pageParams:c(e.pageParams,s,l)}};if(c&&u.length){const e="backward"===c,t={pages:u,pageParams:d},r=(e?getPreviousPageParam:getNextPageParam)(l,t);p=await s(t,r,e)}else{const t=e??u.length;do{const e=0===m?d[0]??l.initialPageParam:getNextPageParam(l,p);if(m>0&&null==e)break;p=await s(p,e),m++}while(m<t)}return p};t.options.persister?t.fetchFn=()=>{var e,n;return null==(n=(e=t.options).persister)?void 0:n.call(e,x,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=x}}}function getNextPageParam(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function getPreviousPageParam(e,{pages:t,pageParams:r}){var n;return t.length>0?null==(n=e.getPreviousPageParam)?void 0:n.call(e,t[0],t,r[0],r):void 0}var QueryClient=(_h=class{constructor(e={}){__privateAdd(this,_queryCache),__privateAdd(this,_mutationCache2),__privateAdd(this,_defaultOptions2),__privateAdd(this,_queryDefaults),__privateAdd(this,_mutationDefaults),__privateAdd(this,_mountCount),__privateAdd(this,_unsubscribeFocus),__privateAdd(this,_unsubscribeOnline),__privateSet(this,_queryCache,e.queryCache||new QueryCache),__privateSet(this,_mutationCache2,e.mutationCache||new MutationCache),__privateSet(this,_defaultOptions2,e.defaultOptions||{}),__privateSet(this,_queryDefaults,new Map),__privateSet(this,_mutationDefaults,new Map),__privateSet(this,_mountCount,0)}mount(){__privateWrapper(this,_mountCount)._++,1===__privateGet(this,_mountCount)&&(__privateSet(this,_unsubscribeFocus,focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),__privateGet(this,_queryCache).onFocus())})),__privateSet(this,_unsubscribeOnline,onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),__privateGet(this,_queryCache).onOnline())})))}unmount(){var e,t;__privateWrapper(this,_mountCount)._--,0===__privateGet(this,_mountCount)&&(null==(e=__privateGet(this,_unsubscribeFocus))||e.call(this),__privateSet(this,_unsubscribeFocus,void 0),null==(t=__privateGet(this,_unsubscribeOnline))||t.call(this),__privateSet(this,_unsubscribeOnline,void 0))}isFetching(e){return __privateGet(this,_queryCache).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return __privateGet(this,_mutationCache2).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const r=this.defaultQueryOptions({queryKey:e});return null==(t=__privateGet(this,_queryCache).get(r.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=__privateGet(this,_queryCache).build(this,t),n=r.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(resolveStaleTime(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return __privateGet(this,_queryCache).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=__privateGet(this,_queryCache).get(n.queryHash),i=functionalUpdate(t,null==s?void 0:s.state.data);if(void 0!==i)return __privateGet(this,_queryCache).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return notifyManager.batch(()=>__privateGet(this,_queryCache).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,r)]))}getQueryState(e){var t;const r=this.defaultQueryOptions({queryKey:e});return null==(t=__privateGet(this,_queryCache).get(r.queryHash))?void 0:t.state}removeQueries(e){const t=__privateGet(this,_queryCache);notifyManager.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const r=__privateGet(this,_queryCache);return notifyManager.batch(()=>(r.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=notifyManager.batch(()=>__privateGet(this,_queryCache).findAll(e).map(e=>e.cancel(r)));return Promise.all(n).then(noop$d).catch(noop$d)}invalidateQueries(e,t={}){return notifyManager.batch(()=>(__privateGet(this,_queryCache).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries({...e,type:(null==e?void 0:e.refetchType)??(null==e?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=notifyManager.batch(()=>__privateGet(this,_queryCache).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(noop$d)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(n).then(noop$d)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const r=__privateGet(this,_queryCache).build(this,t);return r.isStaleByTime(resolveStaleTime(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(noop$d).catch(noop$d)}fetchInfiniteQuery(e){return e.behavior=infiniteQueryBehavior(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(noop$d).catch(noop$d)}ensureInfiniteQueryData(e){return e.behavior=infiniteQueryBehavior(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return onlineManager.isOnline()?__privateGet(this,_mutationCache2).resumePausedMutations():Promise.resolve()}getQueryCache(){return __privateGet(this,_queryCache)}getMutationCache(){return __privateGet(this,_mutationCache2)}getDefaultOptions(){return __privateGet(this,_defaultOptions2)}setDefaultOptions(e){__privateSet(this,_defaultOptions2,e)}setQueryDefaults(e,t){__privateGet(this,_queryDefaults).set(hashKey(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...__privateGet(this,_queryDefaults).values()],r={};return t.forEach(t=>{partialMatchKey(e,t.queryKey)&&Object.assign(r,t.defaultOptions)}),r}setMutationDefaults(e,t){__privateGet(this,_mutationDefaults).set(hashKey(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...__privateGet(this,_mutationDefaults).values()],r={};return t.forEach(t=>{partialMatchKey(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...__privateGet(this,_defaultOptions2).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hashQueryKeyByOptions(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===skipToken&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...__privateGet(this,_defaultOptions2).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){__privateGet(this,_queryCache).clear(),__privateGet(this,_mutationCache2).clear()}},_queryCache=new WeakMap,_mutationCache2=new WeakMap,_defaultOptions2=new WeakMap,_queryDefaults=new WeakMap,_mutationDefaults=new WeakMap,_mountCount=new WeakMap,_unsubscribeFocus=new WeakMap,_unsubscribeOnline=new WeakMap,_h),QueryObserver=(_i=class extends Subscribable{constructor(e,t){super(),__privateAdd(this,_QueryObserver_instances),__privateAdd(this,_client2),__privateAdd(this,_currentQuery),__privateAdd(this,_currentQueryInitialState),__privateAdd(this,_currentResult),__privateAdd(this,_currentResultState),__privateAdd(this,_currentResultOptions),__privateAdd(this,_currentThenable),__privateAdd(this,_selectError),__privateAdd(this,_selectFn),__privateAdd(this,_selectResult),__privateAdd(this,_lastQueryWithDefinedData),__privateAdd(this,_staleTimeoutId),__privateAdd(this,_refetchIntervalId),__privateAdd(this,_currentRefetchInterval),__privateAdd(this,_trackedProps,new Set),this.options=t,__privateSet(this,_client2,e),__privateSet(this,_selectError,null),__privateSet(this,_currentThenable,pendingThenable()),this.options.experimental_prefetchInRender||__privateGet(this,_currentThenable).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(__privateGet(this,_currentQuery).addObserver(this),shouldFetchOnMount(__privateGet(this,_currentQuery),this.options)?__privateMethod(this,_QueryObserver_instances,executeFetch_fn).call(this):this.updateResult(),__privateMethod(this,_QueryObserver_instances,updateTimers_fn).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(__privateGet(this,_currentQuery),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(__privateGet(this,_currentQuery),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,__privateMethod(this,_QueryObserver_instances,clearStaleTimeout_fn).call(this),__privateMethod(this,_QueryObserver_instances,clearRefetchInterval_fn).call(this),__privateGet(this,_currentQuery).removeObserver(this)}setOptions(e){const t=this.options,r=__privateGet(this,_currentQuery);if(this.options=__privateGet(this,_client2).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof resolveEnabled(this.options.enabled,__privateGet(this,_currentQuery)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");__privateMethod(this,_QueryObserver_instances,updateQuery_fn).call(this),__privateGet(this,_currentQuery).setOptions(this.options),t._defaulted&&!shallowEqualObjects(this.options,t)&&__privateGet(this,_client2).getQueryCache().notify({type:"observerOptionsUpdated",query:__privateGet(this,_currentQuery),observer:this});const n=this.hasListeners();n&&shouldFetchOptionally(__privateGet(this,_currentQuery),r,this.options,t)&&__privateMethod(this,_QueryObserver_instances,executeFetch_fn).call(this),this.updateResult(),!n||__privateGet(this,_currentQuery)===r&&resolveEnabled(this.options.enabled,__privateGet(this,_currentQuery))===resolveEnabled(t.enabled,__privateGet(this,_currentQuery))&&resolveStaleTime(this.options.staleTime,__privateGet(this,_currentQuery))===resolveStaleTime(t.staleTime,__privateGet(this,_currentQuery))||__privateMethod(this,_QueryObserver_instances,updateStaleTimeout_fn).call(this);const s=__privateMethod(this,_QueryObserver_instances,computeRefetchInterval_fn).call(this);!n||__privateGet(this,_currentQuery)===r&&resolveEnabled(this.options.enabled,__privateGet(this,_currentQuery))===resolveEnabled(t.enabled,__privateGet(this,_currentQuery))&&s===__privateGet(this,_currentRefetchInterval)||__privateMethod(this,_QueryObserver_instances,updateRefetchInterval_fn).call(this,s)}getOptimisticResult(e){const t=__privateGet(this,_client2).getQueryCache().build(__privateGet(this,_client2),e),r=this.createResult(t,e);return shouldAssignObserverCurrentProperties(this,r)&&(__privateSet(this,_currentResult,r),__privateSet(this,_currentResultOptions,this.options),__privateSet(this,_currentResultState,__privateGet(this,_currentQuery).state)),r}getCurrentResult(){return __privateGet(this,_currentResult)}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),null==t||t(r),Reflect.get(e,r))})}trackProp(e){__privateGet(this,_trackedProps).add(e)}getCurrentQuery(){return __privateGet(this,_currentQuery)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=__privateGet(this,_client2).defaultQueryOptions(e),r=__privateGet(this,_client2).getQueryCache().build(__privateGet(this,_client2),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return __privateMethod(this,_QueryObserver_instances,executeFetch_fn).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),__privateGet(this,_currentResult)))}createResult(e,t){var r;const n=__privateGet(this,_currentQuery),s=this.options,i=__privateGet(this,_currentResult),o=__privateGet(this,_currentResultState),a=__privateGet(this,_currentResultOptions),l=e!==n?e.state:__privateGet(this,_currentQueryInitialState),{state:c}=e;let u,d={...c},p=!1;if(t._optimisticResults){const r=this.hasListeners(),i=!r&&shouldFetchOnMount(e,t),o=r&&shouldFetchOptionally(e,n,t,s);(i||o)&&(d={...d,...fetchState(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(d.fetchStatus="idle")}let{error:m,errorUpdatedAt:x,status:f}=d;u=d.data;let h=!1;if(void 0!==t.placeholderData&&void 0===u&&"pending"===f){let e;(null==i?void 0:i.isPlaceholderData)&&t.placeholderData===(null==a?void 0:a.placeholderData)?(e=i.data,h=!0):e="function"==typeof t.placeholderData?t.placeholderData(null==(r=__privateGet(this,_lastQueryWithDefinedData))?void 0:r.state.data,__privateGet(this,_lastQueryWithDefinedData)):t.placeholderData,void 0!==e&&(f="success",u=replaceData(null==i?void 0:i.data,e,t),p=!0)}if(t.select&&void 0!==u&&!h)if(i&&u===(null==o?void 0:o.data)&&t.select===__privateGet(this,_selectFn))u=__privateGet(this,_selectResult);else try{__privateSet(this,_selectFn,t.select),u=t.select(u),u=replaceData(null==i?void 0:i.data,u,t),__privateSet(this,_selectResult,u),__privateSet(this,_selectError,null)}catch(R){__privateSet(this,_selectError,R)}__privateGet(this,_selectError)&&(m=__privateGet(this,_selectError),u=__privateGet(this,_selectResult),x=Date.now(),f="error");const g="fetching"===d.fetchStatus,y="pending"===f,j="error"===f,b=y&&g,v=void 0!==u,E={status:f,fetchStatus:d.fetchStatus,isPending:y,isSuccess:"success"===f,isError:j,isInitialLoading:b,isLoading:b,data:u,dataUpdatedAt:d.dataUpdatedAt,error:m,errorUpdatedAt:x,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:g,isRefetching:g&&!y,isLoadingError:j&&!v,isPaused:"paused"===d.fetchStatus,isPlaceholderData:p,isRefetchError:j&&v,isStale:isStale(e,t),refetch:this.refetch,promise:__privateGet(this,_currentThenable),isEnabled:!1!==resolveEnabled(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===E.status?e.reject(E.error):void 0!==E.data&&e.resolve(E.data)},r=()=>{const e=__privateSet(this,_currentThenable,E.promise=pendingThenable());t(e)},s=__privateGet(this,_currentThenable);switch(s.status){case"pending":e.queryHash===n.queryHash&&t(s);break;case"fulfilled":"error"!==E.status&&E.data===s.value||r();break;case"rejected":"error"===E.status&&E.error===s.reason||r()}}return E}updateResult(){const e=__privateGet(this,_currentResult),t=this.createResult(__privateGet(this,_currentQuery),this.options);if(__privateSet(this,_currentResultState,__privateGet(this,_currentQuery).state),__privateSet(this,_currentResultOptions,this.options),void 0!==__privateGet(this,_currentResultState).data&&__privateSet(this,_lastQueryWithDefinedData,__privateGet(this,_currentQuery)),shallowEqualObjects(t,e))return;__privateSet(this,_currentResult,t);__privateMethod(this,_QueryObserver_instances,notify_fn).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!__privateGet(this,_trackedProps).size)return!0;const n=new Set(r??__privateGet(this,_trackedProps));return this.options.throwOnError&&n.add("error"),Object.keys(__privateGet(this,_currentResult)).some(t=>{const r=t;return __privateGet(this,_currentResult)[r]!==e[r]&&n.has(r)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&__privateMethod(this,_QueryObserver_instances,updateTimers_fn).call(this)}},_client2=new WeakMap,_currentQuery=new WeakMap,_currentQueryInitialState=new WeakMap,_currentResult=new WeakMap,_currentResultState=new WeakMap,_currentResultOptions=new WeakMap,_currentThenable=new WeakMap,_selectError=new WeakMap,_selectFn=new WeakMap,_selectResult=new WeakMap,_lastQueryWithDefinedData=new WeakMap,_staleTimeoutId=new WeakMap,_refetchIntervalId=new WeakMap,_currentRefetchInterval=new WeakMap,_trackedProps=new WeakMap,_QueryObserver_instances=new WeakSet,executeFetch_fn=function(e){__privateMethod(this,_QueryObserver_instances,updateQuery_fn).call(this);let t=__privateGet(this,_currentQuery).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(noop$d)),t},updateStaleTimeout_fn=function(){__privateMethod(this,_QueryObserver_instances,clearStaleTimeout_fn).call(this);const e=resolveStaleTime(this.options.staleTime,__privateGet(this,_currentQuery));if(isServer||__privateGet(this,_currentResult).isStale||!isValidTimeout(e))return;const t=timeUntilStale(__privateGet(this,_currentResult).dataUpdatedAt,e);__privateSet(this,_staleTimeoutId,setTimeout(()=>{__privateGet(this,_currentResult).isStale||this.updateResult()},t+1))},computeRefetchInterval_fn=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(__privateGet(this,_currentQuery)):this.options.refetchInterval)??!1},updateRefetchInterval_fn=function(e){__privateMethod(this,_QueryObserver_instances,clearRefetchInterval_fn).call(this),__privateSet(this,_currentRefetchInterval,e),!isServer&&!1!==resolveEnabled(this.options.enabled,__privateGet(this,_currentQuery))&&isValidTimeout(__privateGet(this,_currentRefetchInterval))&&0!==__privateGet(this,_currentRefetchInterval)&&__privateSet(this,_refetchIntervalId,setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&__privateMethod(this,_QueryObserver_instances,executeFetch_fn).call(this)},__privateGet(this,_currentRefetchInterval)))},updateTimers_fn=function(){__privateMethod(this,_QueryObserver_instances,updateStaleTimeout_fn).call(this),__privateMethod(this,_QueryObserver_instances,updateRefetchInterval_fn).call(this,__privateMethod(this,_QueryObserver_instances,computeRefetchInterval_fn).call(this))},clearStaleTimeout_fn=function(){__privateGet(this,_staleTimeoutId)&&(clearTimeout(__privateGet(this,_staleTimeoutId)),__privateSet(this,_staleTimeoutId,void 0))},clearRefetchInterval_fn=function(){__privateGet(this,_refetchIntervalId)&&(clearInterval(__privateGet(this,_refetchIntervalId)),__privateSet(this,_refetchIntervalId,void 0))},updateQuery_fn=function(){const e=__privateGet(this,_client2).getQueryCache().build(__privateGet(this,_client2),this.options);if(e===__privateGet(this,_currentQuery))return;const t=__privateGet(this,_currentQuery);__privateSet(this,_currentQuery,e),__privateSet(this,_currentQueryInitialState,e.state),this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))},notify_fn=function(e){notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(__privateGet(this,_currentResult))}),__privateGet(this,_client2).getQueryCache().notify({query:__privateGet(this,_currentQuery),type:"observerResultsUpdated"})})},_i);function shouldLoadOnMount(e,t){return!1!==resolveEnabled(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}function shouldFetchOnMount(e,t){return shouldLoadOnMount(e,t)||void 0!==e.state.data&&shouldFetchOn(e,t,t.refetchOnMount)}function shouldFetchOn(e,t,r){if(!1!==resolveEnabled(t.enabled,e)&&"static"!==resolveStaleTime(t.staleTime,e)){const n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&isStale(e,t)}return!1}function shouldFetchOptionally(e,t,r,n){return(e!==t||!1===resolveEnabled(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&isStale(e,r)}function isStale(e,t){return!1!==resolveEnabled(t.enabled,e)&&e.isStaleByTime(resolveStaleTime(t.staleTime,e))}function shouldAssignObserverCurrentProperties(e,t){return!shallowEqualObjects(e.getCurrentResult(),t)}var MutationObserver$1=(_j=class extends Subscribable{constructor(e,t){super(),__privateAdd(this,_MutationObserver_instances),__privateAdd(this,_client3),__privateAdd(this,_currentResult2),__privateAdd(this,_currentMutation),__privateAdd(this,_mutateOptions),__privateSet(this,_client3,e),this.setOptions(t),this.bindMethods(),__privateMethod(this,_MutationObserver_instances,updateResult_fn).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=__privateGet(this,_client3).defaultMutationOptions(e),shallowEqualObjects(this.options,r)||__privateGet(this,_client3).getMutationCache().notify({type:"observerOptionsUpdated",mutation:__privateGet(this,_currentMutation),observer:this}),(null==r?void 0:r.mutationKey)&&this.options.mutationKey&&hashKey(r.mutationKey)!==hashKey(this.options.mutationKey)?this.reset():"pending"===(null==(t=__privateGet(this,_currentMutation))?void 0:t.state.status)&&__privateGet(this,_currentMutation).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=__privateGet(this,_currentMutation))||e.removeObserver(this)}onMutationUpdate(e){__privateMethod(this,_MutationObserver_instances,updateResult_fn).call(this),__privateMethod(this,_MutationObserver_instances,notify_fn2).call(this,e)}getCurrentResult(){return __privateGet(this,_currentResult2)}reset(){var e;null==(e=__privateGet(this,_currentMutation))||e.removeObserver(this),__privateSet(this,_currentMutation,void 0),__privateMethod(this,_MutationObserver_instances,updateResult_fn).call(this),__privateMethod(this,_MutationObserver_instances,notify_fn2).call(this)}mutate(e,t){var r;return __privateSet(this,_mutateOptions,t),null==(r=__privateGet(this,_currentMutation))||r.removeObserver(this),__privateSet(this,_currentMutation,__privateGet(this,_client3).getMutationCache().build(__privateGet(this,_client3),this.options)),__privateGet(this,_currentMutation).addObserver(this),__privateGet(this,_currentMutation).execute(e)}},_client3=new WeakMap,_currentResult2=new WeakMap,_currentMutation=new WeakMap,_mutateOptions=new WeakMap,_MutationObserver_instances=new WeakSet,updateResult_fn=function(){var e;const t=(null==(e=__privateGet(this,_currentMutation))?void 0:e.state)??getDefaultState();__privateSet(this,_currentResult2,{...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset})},notify_fn2=function(e){notifyManager.batch(()=>{var t,r,n,s,i,o,a,l;if(__privateGet(this,_mutateOptions)&&this.hasListeners()){const c=__privateGet(this,_currentResult2).variables,u=__privateGet(this,_currentResult2).context;"success"===(null==e?void 0:e.type)?(null==(r=(t=__privateGet(this,_mutateOptions)).onSuccess)||r.call(t,e.data,c,u),null==(s=(n=__privateGet(this,_mutateOptions)).onSettled)||s.call(n,e.data,null,c,u)):"error"===(null==e?void 0:e.type)&&(null==(o=(i=__privateGet(this,_mutateOptions)).onError)||o.call(i,e.error,c,u),null==(l=(a=__privateGet(this,_mutateOptions)).onSettled)||l.call(a,void 0,e.error,c,u))}this.listeners.forEach(e=>{e(__privateGet(this,_currentResult2))})})},_j),QueryClientContext=reactExports.createContext(void 0),useQueryClient=e=>{const t=reactExports.useContext(QueryClientContext);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},QueryClientProvider=({client:e,children:t})=>(reactExports.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:e,children:t})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);function createValue(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}IsRestoringContext.Provider;var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext),ensurePreventErrorBoundaryRetry=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},useClearResetErrorBoundary=e=>{reactExports.useEffect(()=>{e.clearReset()},[e])},getHasError=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&void 0===e.data||shouldThrowError(r,[e.error,n])),ensureSuspenseTimers=e=>{if(e.suspense){const t=e=>"static"===e?e:Math.max(e??1e3,1e3),r=e.staleTime;e.staleTime="function"==typeof r?(...e)=>t(r(...e)):t(r),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}},willFetch=(e,t)=>e.isLoading&&e.isFetching&&!t,shouldSuspend=(e,t)=>(null==e?void 0:e.suspense)&&t.isPending,fetchOptimistic=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function useBaseQuery(e,t,r){var n,s,i,o,a;const l=useIsRestoring(),c=useQueryErrorResetBoundary(),u=useQueryClient(),d=u.defaultQueryOptions(e);null==(s=null==(n=u.getDefaultOptions().queries)?void 0:n._experimental_beforeQuery)||s.call(n,d),d._optimisticResults=l?"isRestoring":"optimistic",ensureSuspenseTimers(d),ensurePreventErrorBoundaryRetry(d,c),useClearResetErrorBoundary(c);const p=!u.getQueryCache().get(d.queryHash),[m]=reactExports.useState(()=>new t(u,d)),x=m.getOptimisticResult(d),f=!l&&!1!==e.subscribed;if(reactExports.useSyncExternalStore(reactExports.useCallback(e=>{const t=f?m.subscribe(notifyManager.batchCalls(e)):noop$d;return m.updateResult(),t},[m,f]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),reactExports.useEffect(()=>{m.setOptions(d)},[d,m]),shouldSuspend(d,x))throw fetchOptimistic(d,m,c);if(getHasError({result:x,errorResetBoundary:c,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw x.error;if(null==(o=null==(i=u.getDefaultOptions().queries)?void 0:i._experimental_afterQuery)||o.call(i,d,x),d.experimental_prefetchInRender&&!isServer&&willFetch(x,l)){const e=p?fetchOptimistic(d,m,c):null==(a=u.getQueryCache().get(d.queryHash))?void 0:a.promise;null==e||e.catch(noop$d).finally(()=>{m.updateResult()})}return d.notifyOnChangeProps?x:m.trackResult(x)}function useQuery(e,t){return useBaseQuery(e,QueryObserver)}function useMutation(e,t){const r=useQueryClient(),[n]=reactExports.useState(()=>new MutationObserver$1(r,e));reactExports.useEffect(()=>{n.setOptions(e)},[n,e]);const s=reactExports.useSyncExternalStore(reactExports.useCallback(e=>n.subscribe(notifyManager.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=reactExports.useCallback((e,t)=>{n.mutate(e,t).catch(noop$d)},[n]);if(s.error&&shouldThrowError(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const supabaseUrl=void 0,supabaseAnonKey=void 0;throw new Error("Missing VITE_SUPABASE_URL environment variable");async function throwIfResNotOk(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function getAuthHeaders(){const{data:{session:e}}=await supabase.auth.getSession(),t={};return(null==e?void 0:e.access_token)&&(t.Authorization=`Bearer ${e.access_token}`),t}async function apiRequest(e,t,r){const n=r instanceof FormData,s=await getAuthHeaders(),i=t.startsWith("http")?t:`${API_BASE_URL}${t}`,o=await fetch(i,{method:e,headers:{...s,...n?{}:r?{"Content-Type":"application/json"}:{}},body:n?r:r?JSON.stringify(r):void 0,credentials:"include"});await throwIfResNotOk(o);const a=o.headers.get("content-type");return a&&a.includes("application/json")?await o.json():null}function genId(){return count=(count+1)%Number.MAX_SAFE_INTEGER,count.toString()}function dispatch(e){memoryState=reducer$1(memoryState,e),listeners.forEach(e=>{e(memoryState)})}function toast({...e}){const t=genId(),r=()=>dispatch({type:"DISMISS_TOAST",toastId:t});return dispatch({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>dispatch({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function useToast(){const[e,t]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(t),()=>{const e=listeners.indexOf(t);e>-1&&listeners.splice(e,1)}),[e]),{...e,toast:toast,dismiss:e=>dispatch({type:"DISMISS_TOAST",toastId:e})}}function createCollection(e){const t=e+"CollectionProvider",[r,n]=createContextScope(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:r}=e,n=React$2.useRef(null),i=React$2.useRef(new Map).current;return jsxRuntimeExports.jsx(s,{scope:t,itemMap:i,collectionRef:n,children:r})};o.displayName=t;const a=e+"CollectionSlot",l=createSlot(a),c=React$2.forwardRef((e,t)=>{const{scope:r,children:n}=e,s=i(a,r),o=useComposedRefs(t,s.collectionRef);return jsxRuntimeExports.jsx(l,{ref:o,children:n})});c.displayName=a;const u=e+"CollectionItemSlot",d="data-radix-collection-item",p=createSlot(u),m=React$2.forwardRef((e,t)=>{const{scope:r,children:n,...s}=e,o=React$2.useRef(null),a=useComposedRefs(t,o),l=i(u,r);return React$2.useEffect(()=>(l.itemMap.set(o,{ref:o,...s}),()=>{l.itemMap.delete(o)})),jsxRuntimeExports.jsx(p,{[d]:"",ref:a,children:n})});return m.displayName=u,[{Provider:o,Slot:c,ItemSlot:m},function(t){const r=i(e+"CollectionConsumer",t);return React$2.useCallback(()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},n]}var VISUALLY_HIDDEN_STYLES,NAME$3,VisuallyHidden,Root$8,PROVIDER_NAME$1,Collection$3,useCollection$3,createCollectionScope$3,createToastContext,createToastScope,ToastProviderProvider,useToastProviderContext,ToastProvider$1,VIEWPORT_NAME$2,VIEWPORT_DEFAULT_HOTKEY,VIEWPORT_PAUSE,VIEWPORT_RESUME,ToastViewport$1,FOCUS_PROXY_NAME,FocusProxy,TOAST_NAME,TOAST_SWIPE_START,TOAST_SWIPE_MOVE,TOAST_SWIPE_CANCEL,TOAST_SWIPE_END,Toast$1,ToastInteractiveProvider,useToastInteractiveContext,ToastImpl,ToastAnnounce,TITLE_NAME,ToastTitle$1,DESCRIPTION_NAME,ToastDescription$1,ACTION_NAME,ToastAction$1,CLOSE_NAME,ToastClose$1,ToastAnnounceExclude,isDeltaInDirection,Provider$1,Viewport$2,Root2$4,Title,Description,Action,Close$c,defaultAttributes,index$3,NAME$2,Arrow$1,Root$7,POPPER_NAME,createPopperContext,createPopperScope,PopperProvider,usePopperContext,Popper,ANCHOR_NAME$1,PopperAnchor,CONTENT_NAME$5,PopperContentProvider,useContentContext,PopperContent,ARROW_NAME$4,OPPOSITE_SIDE,PopperArrow,transformOrigin,Root2$3,Anchor$1,Content$1,Arrow,createTooltipContext,createTooltipScope,usePopperScope$2,PROVIDER_NAME,DEFAULT_DELAY_DURATION,TOOLTIP_OPEN,TooltipProviderContextProvider,useTooltipProviderContext,TooltipProvider$1,TOOLTIP_NAME,TooltipContextProvider,useTooltipContext,Tooltip$2,TRIGGER_NAME$4,TooltipTrigger$1,PORTAL_NAME$3,PortalProvider$1,usePortalContext$1,CONTENT_NAME$4,TooltipContent$1,TooltipContentHoverable,VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext,Slottable,TooltipContentImpl,ARROW_NAME$3,TooltipArrow,Provider,Root3$1,Trigger$3,Content2$3,DirectionContext,ENTRY_FOCUS,EVENT_OPTIONS,GROUP_NAME$3,Collection$2,useCollection$2,createCollectionScope$2,createRovingFocusGroupContext,createRovingFocusGroupScope,RovingFocusProvider,useRovingFocusContext,RovingFocusGroup,RovingFocusGroupImpl,ITEM_NAME$3,RovingFocusGroupItem,MAP_KEY_TO_FOCUS_INTENT,Root$6,Item$2,TABS_NAME,createTabsContext,createTabsScope,useRovingFocusGroupScope$1,TabsProvider,useTabsContext,Tabs$1,TAB_LIST_NAME,TabsList$1,TRIGGER_NAME$3,TabsTrigger$1,CONTENT_NAME$3,TabsContent$1,Root2$2,List,Trigger$2,Content,PacketType,PacketType2,SELECTION_KEYS$1,FIRST_KEYS,LAST_KEYS,FIRST_LAST_KEYS,SUB_OPEN_KEYS,SUB_CLOSE_KEYS,MENU_NAME,Collection$1,useCollection$1,createCollectionScope$1,createMenuContext,createMenuScope,usePopperScope$1,useRovingFocusGroupScope,MenuProvider,useMenuContext,MenuRootProvider,useMenuRootContext,Menu$c,ANCHOR_NAME,MenuAnchor,PORTAL_NAME$2,PortalProvider,usePortalContext,MenuPortal,CONTENT_NAME$2,MenuContentProvider,useMenuContentContext,MenuContent,MenuRootContentModal,MenuRootContentNonModal,Slot$1,MenuContentImpl,GROUP_NAME$2,MenuGroup,LABEL_NAME$2,MenuLabel,ITEM_NAME$2,ITEM_SELECT,MenuItem,MenuItemImpl,CHECKBOX_ITEM_NAME$1,MenuCheckboxItem,RADIO_GROUP_NAME$1,RadioGroupProvider,useRadioGroupContext,MenuRadioGroup,RADIO_ITEM_NAME$1,MenuRadioItem,ITEM_INDICATOR_NAME$1,ItemIndicatorProvider,useItemIndicatorContext,MenuItemIndicator,SEPARATOR_NAME$2,MenuSeparator,ARROW_NAME$2,MenuArrow,SUB_NAME,MenuSubProvider,useMenuSubContext,SUB_TRIGGER_NAME$1,MenuSubTrigger,SUB_CONTENT_NAME$1,MenuSubContent,Root3,Anchor2,Portal$2,Content2$2,Group,Label$4,Item2$1,CheckboxItem,RadioGroup,RadioItem,ItemIndicator$1,Separator$3,Arrow2,SubTrigger,SubContent,DROPDOWN_MENU_NAME,createDropdownMenuContext,createDropdownMenuScope,useMenuScope,DropdownMenuProvider,useDropdownMenuContext,DropdownMenu$1,TRIGGER_NAME$2,DropdownMenuTrigger$1,PORTAL_NAME$1,DropdownMenuPortal,CONTENT_NAME$1,DropdownMenuContent$1,GROUP_NAME$1,DropdownMenuGroup,LABEL_NAME$1,DropdownMenuLabel$1,ITEM_NAME$1,DropdownMenuItem$1,CHECKBOX_ITEM_NAME,DropdownMenuCheckboxItem$1,RADIO_GROUP_NAME,DropdownMenuRadioGroup,RADIO_ITEM_NAME,DropdownMenuRadioItem$1,INDICATOR_NAME$2,DropdownMenuItemIndicator,SEPARATOR_NAME$1,DropdownMenuSeparator$1,ARROW_NAME$1,DropdownMenuArrow,SUB_TRIGGER_NAME,DropdownMenuSubTrigger$1,SUB_CONTENT_NAME,DropdownMenuSubContent$1,Root2$1,Trigger$1,Portal2,Content2$1,Label2,Item2,CheckboxItem2,RadioItem2,ItemIndicator2,Separator2,SubTrigger2,SubContent2,AVATAR_NAME,createAvatarContext,createAvatarScope,AvatarProvider,useAvatarContext,Avatar$2,IMAGE_NAME,AvatarImage$1,FALLBACK_NAME,AvatarFallback$1,Root$5,Image$1,Fallback,OPEN_KEYS,SELECTION_KEYS,SELECT_NAME,Collection,useCollection,createCollectionScope,createSelectContext,createSelectScope,usePopperScope,SelectProvider,useSelectContext,SelectNativeOptionsProvider,useSelectNativeOptionsContext,Select$1,TRIGGER_NAME$1,SelectTrigger$1,VALUE_NAME,SelectValue$1,ICON_NAME,SelectIcon,PORTAL_NAME,SelectPortal,CONTENT_NAME,SelectContent$1,CONTENT_MARGIN,SelectContentProvider,useSelectContentContext,CONTENT_IMPL_NAME,Slot,SelectContentImpl,ITEM_ALIGNED_POSITION_NAME,SelectItemAlignedPosition,POPPER_POSITION_NAME,SelectPopperPosition,SelectViewportProvider,useSelectViewportContext,VIEWPORT_NAME$1,SelectViewport,GROUP_NAME,SelectGroupContextProvider,useSelectGroupContext,SelectGroup,LABEL_NAME,SelectLabel$1,ITEM_NAME,SelectItemContextProvider,useSelectItemContext,SelectItem$1,ITEM_TEXT_NAME,SelectItemText,ITEM_INDICATOR_NAME,SelectItemIndicator,SCROLL_UP_BUTTON_NAME,SelectScrollUpButton$1,SCROLL_DOWN_BUTTON_NAME,SelectScrollDownButton$1,SelectScrollButtonImpl,SEPARATOR_NAME,SelectSeparator$1,ARROW_NAME,SelectArrow,BUBBLE_INPUT_NAME$2,SelectBubbleInput,Root2,Trigger,Value,Icon$2,Portal$1,Content2,Viewport$1,Label$3,Item$1,ItemText,ItemIndicator,ScrollUpButton,ScrollDownButton,Separator$2,NAME$1,Label$2,Root$4,CHECKBOX_NAME,createCheckboxContext,createCheckboxScope,CheckboxProviderImpl,useCheckboxContext,TRIGGER_NAME,CheckboxTrigger,Checkbox$1,INDICATOR_NAME$1,CheckboxIndicator,BUBBLE_INPUT_NAME$1,CheckboxBubbleInput,PROGRESS_NAME,DEFAULT_MAX,createProgressContext,createProgressScope,ProgressProvider,useProgressContext,Progress$1,INDICATOR_NAME,ProgressIndicator,Root$3,Indicator,SWITCH_NAME,createSwitchContext,createSwitchScope,SwitchProvider,useSwitchContext,Switch$1,THUMB_NAME$1,SwitchThumb,BUBBLE_INPUT_NAME,SwitchBubbleInput,Root$2,Thumb,isArray$h,isArray_1,freeGlobal$3,_freeGlobal,freeGlobal$2,freeSelf$2,root$e,_root,root$d,Symbol$7,_Symbol,Symbol$6,objectProto$e,hasOwnProperty$c,nativeObjectToString$1,symToStringTag$1,_getRawTag,objectProto$d,nativeObjectToString,_objectToString,Symbol$5,getRawTag,objectToString$2,nullTag,undefinedTag,symToStringTag,_baseGetTag,isObjectLike_1,baseGetTag$8,isObjectLike$a,symbolTag$3,isSymbol_1,isArray$g,isSymbol$7,reIsDeepProp,reIsPlainProp,_isKey,isObject_1,baseGetTag$7,isObject$b,asyncTag,funcTag$1,genTag,proxyTag,isFunction_1,root$c,coreJsData$1,_coreJsData,coreJsData,maskSrcKey,uid,_isMasked,funcProto$2,funcToString$2,_toSource,isFunction$3,isMasked,isObject$a,toSource$1,reRegExpChar,reIsHostCtor,funcProto$1,objectProto$c,funcToString$1,hasOwnProperty$b,reIsNative,_baseIsNative,_getValue,baseIsNative,getValue$1,_getNative,getNative$6,nativeCreate$4,_nativeCreate,nativeCreate$3,_hashClear,_hashDelete,nativeCreate$2,HASH_UNDEFINED$2,objectProto$b,hasOwnProperty$a,_hashGet,nativeCreate$1,objectProto$a,hasOwnProperty$9,_hashHas,nativeCreate,HASH_UNDEFINED$1,_hashSet,hashClear,hashDelete,hashGet,hashHas,hashSet,_Hash,_listCacheClear,eq_1,eq$2,_assocIndexOf,assocIndexOf$3,arrayProto,splice$1,_listCacheDelete,assocIndexOf$2,_listCacheGet,assocIndexOf$1,_listCacheHas,assocIndexOf,_listCacheSet,listCacheClear,listCacheDelete,listCacheGet,listCacheHas,listCacheSet,_ListCache,getNative$5,root$b,Map$4,_Map,Hash,ListCache$3,Map$3,_mapCacheClear,_isKeyable,isKeyable,_getMapData,getMapData$3,_mapCacheDelete,getMapData$2,_mapCacheGet,getMapData$1,_mapCacheHas,getMapData,_mapCacheSet,mapCacheClear,mapCacheDelete,mapCacheGet,mapCacheHas,mapCacheSet,_MapCache,MapCache$2,FUNC_ERROR_TEXT$4,memoize_1,memoize$1,MAX_MEMOIZE_SIZE,_memoizeCapped,memoizeCapped,rePropName,reEscapeChar,stringToPath$2,_stringToPath,_arrayMap,Symbol$4,arrayMap$2,isArray$f,isSymbol$6,symbolProto$1,symbolToString,_baseToString,baseToString,toString_1,isArray$e,isKey$3,stringToPath$1,toString$5,_castPath,isSymbol$5,_toKey,castPath$1,toKey$3,_baseGet,baseGet$3,get_1,isNil_1,baseGetTag$6,isArray$d,isObjectLike$9,stringTag$2,isString_1,reactIs,reactIs_production_min,b$1,c$2,d$1,e,f$1,g$1,h$1,k$2,l,m$1,n$1,p$1,q$1,t$1,u$1,reactIsExports,baseGetTag$5,isObjectLike$8,numberTag$2,isNumber_1,isNumber$2,_isNaN,mathSign,isPercent,isNumber$1,isNullish$1,isNumOrStr,idCounter,uniqueId,getPercentValue,getAnyElementOfObject,hasDuplicate,interpolateNumber$2,compareValues,SVGContainerPropKeys,SVGElementPropKeys,PolyElementKeys,FilteredElementKeyMap,EventKeys,adaptEventHandlers,getEventHandlerOfChild,adaptEventsOfChild,_excluded$l,_excluded2$8,REACT_BROWSER_EVENT_MAP,getDisplayName,lastChildren,lastResult,toArray$1,validateWidthHeight,SVG_TAGS,isSvgElement,hasClipDot,isValidSpreadableProp,filterProps$1,isChildrenEqual,isSingleChildEqual,renderByOrder,getReactEventByType,parseChildIndex,_excluded$k,_excluded$j,Layer,warn,_baseSlice,baseSlice,_castSlice,rsAstralRange$1,rsComboMarksRange$1,reComboHalfMarksRange$1,rsComboSymbolsRange$1,rsComboRange$1,rsVarRange$1,rsZWJ$1,reHasUnicode,_hasUnicode,_asciiToArray,rsAstralRange,rsComboMarksRange,reComboHalfMarksRange,rsComboSymbolsRange,rsComboRange,rsVarRange,rsAstral,rsCombo,rsFitz,rsModifier,rsNonAstral,rsRegional,rsSurrPair,rsZWJ,reOptMod,rsOptVar,rsOptJoin,rsSeq,rsSymbol,reUnicode,_unicodeToArray,asciiToArray,hasUnicode$1,unicodeToArray,_stringToArray,castSlice,hasUnicode,stringToArray$2,toString$4,_createCaseFirst,createCaseFirst,upperFirst,upperFirst_1,_excluded$i,symbolFactories,RADIAN$1,getSymbolFactory,calculateAreaSize,registerSymbol,Symbols,SIZE,DefaultLegendContent,ListCache$2,_stackClear,_stackDelete,_stackGet,_stackHas,ListCache$1,Map$2,MapCache$1,LARGE_ARRAY_SIZE$1,_stackSet,ListCache,stackClear,stackDelete,stackGet,stackHas,stackSet,_Stack,HASH_UNDEFINED,_setCacheAdd,_setCacheHas,MapCache,setCacheAdd,setCacheHas,_SetCache,_arraySome,_cacheHas,SetCache$1,arraySome$1,cacheHas$1,COMPARE_PARTIAL_FLAG$5,COMPARE_UNORDERED_FLAG$3,_equalArrays,root$a,Uint8Array$2,_Uint8Array,_mapToArray,_setToArray,Symbol$2,Uint8Array$1,eq$1,equalArrays$1,mapToArray,setToArray$2,COMPARE_PARTIAL_FLAG$4,COMPARE_UNORDERED_FLAG$2,boolTag$2,dateTag$1,errorTag$1,mapTag$2,numberTag$1,regexpTag$1,setTag$2,stringTag$1,symbolTag$2,arrayBufferTag$1,dataViewTag$2,symbolProto,symbolValueOf,_equalByTag,_arrayPush,arrayPush$1,isArray$c,_baseGetAllKeys,_arrayFilter,stubArray_1,arrayFilter,stubArray,objectProto$9,propertyIsEnumerable$1,nativeGetSymbols,getSymbols$1,_getSymbols,_baseTimes,baseGetTag$4,isObjectLike$7,argsTag$2,_baseIsArguments,baseIsArguments,isObjectLike$6,objectProto$8,hasOwnProperty$8,propertyIsEnumerable,isArguments$3,isArguments_1,isBuffer$3,stubFalse_1,module,exports,root2,stubFalse2,freeExports,freeModule,Buffer2,isBuffer3,isBufferExports,MAX_SAFE_INTEGER$2,reIsUint,_isIndex,MAX_SAFE_INTEGER$1,isLength_1,baseGetTag$3,isLength$2,isObjectLike$5,argsTag$1,arrayTag$1,boolTag$1,dateTag,errorTag,funcTag,mapTag$1,numberTag,objectTag$3,regexpTag,setTag$1,stringTag,weakMapTag$1,arrayBufferTag,dataViewTag$1,float32Tag,float64Tag,int8Tag,int16Tag,int32Tag,uint8Tag,uint8ClampedTag,uint16Tag,uint32Tag,typedArrayTags,_baseIsTypedArray,_baseUnary,_nodeUtil,_nodeUtilExports,baseIsTypedArray,baseUnary$1,nodeUtil,nodeIsTypedArray,isTypedArray$4,isTypedArray_1,baseTimes,isArguments$2,isArray$b,isBuffer$2,isIndex$2,isTypedArray$3,objectProto$7,hasOwnProperty$7,_arrayLikeKeys,objectProto$6,_isPrototype,_overArg,overArg$1,nativeKeys$1,_nativeKeys,isPrototype,nativeKeys,objectProto$5,hasOwnProperty$6,_baseKeys,isFunction$2,isLength$1,isArrayLike_1,arrayLikeKeys,baseKeys,isArrayLike$4,keys_1,baseGetAllKeys,getSymbols,keys$6,_getAllKeys,getAllKeys,COMPARE_PARTIAL_FLAG$3,objectProto$4,hasOwnProperty$5,_equalObjects,getNative$4,root$9,DataView$2,_DataView,getNative$3,root$8,Promise$2,_Promise,getNative$2,root$7,Set$3,_Set,getNative$1,root$6,WeakMap$2,_WeakMap,DataView$1,Map$1,Promise$1,Set$2,WeakMap$1,baseGetTag$2,toSource,mapTag,objectTag$2,promiseTag,setTag,weakMapTag,dataViewTag,dataViewCtorString,mapCtorString,promiseCtorString,setCtorString,weakMapCtorString,getTag$2,_getTag,Stack$1,equalArrays,equalByTag,equalObjects,getTag$1,isArray$a,isBuffer$1,isTypedArray$2,COMPARE_PARTIAL_FLAG$2,argsTag,arrayTag,objectTag$1,objectProto$3,hasOwnProperty$4,_baseIsEqualDeep,baseIsEqualDeep,isObjectLike$4,_baseIsEqual,Stack,baseIsEqual$2,COMPARE_PARTIAL_FLAG$1,COMPARE_UNORDERED_FLAG$1,_baseIsMatch,isObject$9,_isStrictComparable,isStrictComparable$1,keys$5,_getMatchData,_matchesStrictComparable,baseIsMatch,getMatchData,matchesStrictComparable$1,_baseMatches,_baseHasIn,castPath,isArguments$1,isArray$9,isIndex$1,isLength,toKey$2,_hasPath,baseHasIn,hasPath,hasIn_1,baseIsEqual$1,get$3,hasIn,isKey$2,isStrictComparable,matchesStrictComparable,toKey$1,COMPARE_PARTIAL_FLAG,COMPARE_UNORDERED_FLAG,_baseMatchesProperty,identity_1,_baseProperty,baseGet$2,_basePropertyDeep,baseProperty,basePropertyDeep,isKey$1,toKey,property_1,baseMatches,baseMatchesProperty,identity$a,isArray$8,property,_baseIteratee,_baseFindIndex,_baseIsNaN,_strictIndexOf,baseFindIndex$1,baseIsNaN,strictIndexOf,_baseIndexOf,baseIndexOf,_arrayIncludes,_arrayIncludesWith,noop_1,Set$1,noop$a,setToArray$1,INFINITY$1,createSet$1,_createSet,SetCache,arrayIncludes,arrayIncludesWith,cacheHas,createSet,setToArray,LARGE_ARRAY_SIZE,_baseUniq,baseIteratee$7,baseUniq,uniqBy_1,_excluded$h,EPS$1,Legend,Symbol$1,isArguments,isArray$7,spreadableSymbol,_isFlattenable,arrayPush,isFlattenable,_baseFlatten,_createBaseFor,createBaseFor,baseFor$1,_baseFor,baseFor,keys$4,_baseForOwn,isArrayLike$3,_createBaseEach,baseForOwn$1,createBaseEach,baseEach$3,_baseEach,baseEach$2,isArrayLike$2,_baseMap,_baseSortBy,isSymbol$4,_compareAscending,compareAscending,_compareMultiple,arrayMap$1,baseGet$1,baseIteratee$6,baseMap$1,baseSortBy,baseUnary,compareMultiple,identity$9,isArray$6,_baseOrderBy,_apply,apply,nativeMax$5,_overRest,constant_1,getNative,defineProperty$3,_defineProperty$G,constant$1,defineProperty$2,identity$8,baseSetToString$1,_baseSetToString,HOT_COUNT,HOT_SPAN,nativeNow,_shortOut,baseSetToString,shortOut,setToString$1,_setToString,identity$7,overRest,setToString,_baseRest,eq,isArrayLike$1,isIndex,isObject$8,_isIterateeCall,baseFlatten$1,baseOrderBy,baseRest,isIterateeCall$3,sortBy,sortBy_1,DefaultTooltipContent,CSS_CLASS_PREFIX,TOOLTIP_HIDDEN,EPSILON,TooltipBoundingBox,parseIsSsrByDefault,Global,Tooltip,root$5,now$4,now_1,reWhitespace,_trimmedEndIndex,trimmedEndIndex,reTrimStart,_baseTrim,baseTrim,isObject$7,isSymbol$3,NAN$2,reIsBadHex$2,reIsBinary$2,reIsOctal$2,freeParseInt$2,toNumber_1,isObject$6,now$3,toNumber$3,FUNC_ERROR_TEXT$3,nativeMax$4,nativeMin$2,debounce_1,debounce$5,isObject$5,FUNC_ERROR_TEXT$2,throttle_1,ResponsiveContainer,Cell,stringCache,MAX_CACHE_NUM,SPAN_STYLE,MEASUREMENT_SPAN_ID,getStringSize,getOffset,MULTIPLY_OR_DIVIDE_REGEX,ADD_OR_SUBTRACT_REGEX,CSS_LENGTH_UNIT_REGEX,NUM_SPLIT_REGEX,CONVERSION_RATES,FIXED_CSS_LENGTH_UNITS,STR_NAN,DecimalCSS,PARENTHESES_REGEX,_excluded$g,_excluded2$7,BREAKING_SPACES,calculateWordWidths,calculateWordsByLines,getWordsWithoutCalculate,getWordsByLines,DEFAULT_FILL,Text$2,darker,brighter,reI,reN,reP,reHex,reRgbInteger,reRgbPercent,reRgbaInteger,reRgbaPercent,reHslPercent,reHslaPercent,named,reA,reB,unit,re$2,prefixExponent,map$7,prefixes,locale$1,format,formatPrefix,pads,numberRe,percentRe,requoteRe,locale,timeFormat,utcFormat,isSymbol$2,_baseExtremum,_baseGt,baseExtremum$1,baseGt,identity$3,max_1,_baseLt,baseExtremum,baseLt,identity$2,min_1,arrayMap,baseIteratee$5,baseMap,isArray$5,map_1,baseFlatten,map$5,flatMap_1,baseIsEqual,isEqual_1,MAX_DIGITS,defaults$2,Decimal,external,decimalError,invalidArgument,exponentOutOfRange,mathfloor,mathpow,isDecimal,ONE,BASE,LOG_BASE,MAX_SAFE_INTEGER,MAX_E,P$1,divide,Decimal,identity$1,PLACE_HOLDER,isPlaceHolder,curry0,curryN,curry,range$2,map$4,compose$1,reverse,memoize,interpolateNumber,uninterpolateNumber,uninterpolateTruncation,getNiceTickValues,getTickValuesFixedDomain,prefix,_excluded$f,ErrorBar,getLegendProps,calculateActiveTickIndex,getMainColorOfGraphicItem,getBarSizeList,getBarPosition,appendOffsetOfLegend,isErrorBarRelevantForAxis,getDomainOfErrorBars,parseErrorBarsOfAxis,getDomainOfItemsWithSameAxis,isCategoricalAxis,getCoordinatesOfGrid,getTicksOfAxis,handlerWeakMap,combineEventHandlers,parseScale,EPS,checkDomainOfScale,findPositionOfBar,truncateByDomain,offsetSign,offsetPositive,STACK_OFFSET_MAP,getStackedData,getStackGroupsByAxisId,getTicksOfScale,getCateCoordinateOfBar,getBaseValueOfBar,getStackedDataOfItem,getDomainOfSingle,getDomainOfStackGroups,MIN_VALUE_REG,MAX_VALUE_REG,parseSpecifiedDomain,getBandSizeOfAxis,parseDomainOfCategoryAxis,getTooltipItem,RADIAN,radianToDegree,polarToCartesian,distanceBetweenPoints,getAngleOfPoint,formatAngleOfSector,reverseFormatAngleOfSetor,inRangeOfSector,_excluded$e,getLabel,getDeltaAngle$1,renderRadialLabel,getAttrsOfPolarLabel,getAttrsOfCartesianLabel,isPolar,parseViewBox,parseLabel,renderCallByParent$1,last_1,_excluded$d,_excluded2$6,defaultAccessor,getDeltaAngle,getTangentCircle,getSectorPath,getSectorWithCorner,defaultProps$5,Sector,CURVE_FACTORIES,defined,getX,getY,getCurveFactory,getPath$2,Curve,propTypes$1,ReactPropTypesSecret$1,ReactPropTypesSecret_1,ReactPropTypesSecret,factoryWithThrowingShims,propTypesExports,getOwnPropertyNames,getOwnPropertySymbols,hasOwnProperty$3,hasOwn$1,PREACT_VNODE,PREACT_OWNER,REACT_OWNER,getOwnPropertyDescriptor,keys$3,areNumbersEqual,ARGUMENTS_TAG,BOOLEAN_TAG,DATE_TAG,ERROR_TAG,MAP_TAG,NUMBER_TAG,OBJECT_TAG,REG_EXP_TAG,SET_TAG,STRING_TAG,URL_TAG,isArray$4,isTypedArray$1,assign$2,getTag,deepEqual$1,getIntersectionKeys,identity,getDashCase,mapObject,getTransitionVal,ACCURACY,cubicBezierFactor,multyTime,cubicBezier$1,derivativeCubicBezier,configBezier,configSpring,configEasing,alpha$3,needContinue,calStepperVals,_excluded$c,Animate,getRectanglePath,isInRectangle,defaultProps$4,Rectangle,Dot,_excluded$b,getPath$1,Cross,overArg,getPrototype$1,_getPrototype,baseGetTag$1,getPrototype,isObjectLike$3,objectTag,funcProto,objectProto$2,funcToString,hasOwnProperty$2,objectCtorString,isPlainObject_1,baseGetTag,isObjectLike$2,boolTag,isBoolean_1,getTrapezoidPath,defaultProps$3,Trapezoid,_excluded$a,nativeCeil,nativeMax$3,_baseRange,toNumber$2,INFINITY,MAX_INTEGER,toFinite_1,baseRange,isIterateeCall$2,toFinite$1,_createRange,createRange,range,range_1,PREFIX_LIST,generatePrefixStyle,createScale,isTouch,Brush,baseEach$1,_baseSome,arraySome,baseIteratee$4,baseSome,isArray$3,isIterateeCall$1,some_1,ifOverflowMatches,defineProperty$1,_baseAssignValue,baseAssignValue,baseForOwn,baseIteratee$3,mapValues_1,_arrayEvery,baseEach,_baseEvery,arrayEvery,baseEvery,baseIteratee$2,isArray$2,isIterateeCall,every_1,_excluded$9,minPointSizeCallback,_excluded$8,_Bar,Bar,formatAxisMap,rectWithPoints,rectWithCoords,ScaleHelper,createLabeledScales,getAngledRectangleWidth,baseIteratee$1,isArrayLike,keys$2,_createFind,toFinite,toInteger_1,baseFindIndex,baseIteratee,toInteger,nativeMax$2,findIndex_1,createFind,findIndex,find$3,find_1,calculateViewBox,XAxisContext,YAxisContext,ViewBoxContext,OffsetContext,ClipPathIdContext,ChartHeightContext,ChartWidthContext,ChartLayoutContextProvider,useClipPathId,useXAxisOrThrow,useArbitraryXAxis,useYAxisWithFiniteDomainOrRandom,useYAxisOrThrow,useViewBox,useOffset,useChartWidth,useChartHeight,renderLine,getEndPoints,ReferenceLine,getCoordinate,ReferenceDot,getRect,ReferenceArea,_excluded$7,_excluded2$5,_excluded3$1,CartesianAxis,_excluded$6,_excluded2$4,Background,defaultVerticalCoordinatesGenerator,defaultHorizontalCoordinatesGenerator,defaultProps$2,_excluded$5,_excluded2$3,Line,_excluded$4,_excluded2$2,_Area,Area,XAxis,YAxisImpl,YAxis,detectReferenceElementsDomain,eventemitter3,eventemitter3Exports,eventCenter,SYNC_EVENT,AccessibilityManager,_excluded$3,_excluded2$1,ORIENT_MAP,FULL_WIDTH_AND_HEIGHT,originCoordinate,calculateTooltipPos,getActiveCoordinate,getDisplayedData,getTooltipContent,getTooltipData,getAxisMapByAxes,getAxisMapByItems,getAxisMap,tooltipTicksGenerator,createDefaultState,hasGraphicalBarItem,getAxisNameByLayout,calculateOffset,getCartesianAxisSize,generateCategoricalChart,LineChart,BarChart,AreaChart,NAME,DEFAULT_ORIENTATION,ORIENTATIONS,Separator$1,Root$1,SCROLL_AREA_NAME,createScrollAreaContext,createScrollAreaScope,ScrollAreaProvider,useScrollAreaContext,ScrollArea$1,VIEWPORT_NAME,ScrollAreaViewport,SCROLLBAR_NAME,ScrollAreaScrollbar,ScrollAreaScrollbarHover,ScrollAreaScrollbarScroll,ScrollAreaScrollbarAuto,ScrollAreaScrollbarVisible,ScrollAreaScrollbarX,ScrollAreaScrollbarY,ScrollbarProvider,useScrollbarContext,ScrollAreaScrollbarImpl,THUMB_NAME,ScrollAreaThumb,ScrollAreaThumbImpl,CORNER_NAME,ScrollAreaCorner,ScrollAreaCornerImpl,addUnlinkedScrollListener,Root,Viewport,Corner,isCheckBoxInput,isDateObject,isNullOrUndefined,isObject$4,getEventValue,getNodeParentName,isNameInFieldArray,isPlainObject$3,isWeb,compact,isUndefined$1,get$2,isBoolean$1,isKey,stringToPath,set,getProxyFormState,isString$2,generateWatchOutput,appendErrors,convertToArrayPayload,createSubject,isPrimitive,isEmptyObject,isFileInput,isFunction$1,isHTMLElement$1,isMultipleSelect,isRadioInput,isRadioOrCheckbox,live$c,objectHasFunction,getDirtyFields,getCheckboxValue,getFieldValueAs,getRadioValue,getResolverOptions,isRegex,getRuleValue,getValidationModes,hasPromiseValidation,hasValidation,isWatched,shouldRenderFormState,shouldSubscribeByName,skipValidation,unsetEmptyArray,updateFieldArrayRootError,isMessage,getValueAndMessage,validateField,n,t,util,util2,objectUtil,errorUtil,errorUtil2,_ZodEnum_cache,_ZodNativeEnum_cache,ZodFirstPartyTypeKind,ZodFirstPartyTypeKind2,z$1,define_process_env_default,__create,__defProp,__getOwnPropDesc,__getOwnPropNames,__getProtoOf,__hasOwnProp,__commonJS,__copyProps,__toESM,require_base64_js,require_https,require_browser,require_jsonwebtoken,require_crypto,import_base64_js,encodeBase64,decodeBase64,Campaign,toString$2,getPrototypeOf,kindOf,kindOfTest,typeOfTest,isArray$1,isUndefined,isArrayBuffer,isString2,isFunction,isNumber,isObject$3,isBoolean,isPlainObject$2,isDate$1,isFile,isBlob,isFileList,isStream,isFormData,isURLSearchParams,trim$1,_global,isContextDefined,extend$2,stripBOM,inherits,toFlatObject,endsWith,toArray,isTypedArray,forEachEntry,matchAll,isHTMLForm,toCamelCase,hasOwnProperty$1,isRegExp,reduceDescriptors,freezeMethods,toObjectSet,noop$8,toFiniteNumber,ALPHA,DIGIT$1,ALPHABET,generateString,toJSONObject,isAsyncFn,isThenable,utils_default,prototype,descriptors,AxiosError_default,null_default,predicates,toFormData_default,prototype2,AxiosURLSearchParams_default,InterceptorManager,InterceptorManager_default,transitional_default,URLSearchParams_default,FormData_default,Blob_default,isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,browser_default,formDataToJSON_default,defaults$1,defaults_default,ignoreDuplicateOf,parseHeaders_default,$internals,isValidHeaderName,AxiosHeaders,AxiosHeaders_default,CanceledError_default,cookies_default,isURLSameOrigin_default,speedometer_default,isXHRAdapterSupported,xhr_default,knownAdapters,renderReason,isResolvedHandle,adapters_default,headersToObject,VERSION,validators,deprecatedWarnings,validator_default,validators2,Axios,Axios_default,CancelToken,CancelToken_default,HttpStatusCode,HttpStatusCode_default,axios,axios_default,Axios2,AxiosError2,CanceledError2,isCancel2,CancelToken2,VERSION2,all2,Cancel$c,isAxiosError2,spread2,toFormData2,AxiosHeaders2,HttpStatusCode2,formToJSON,getAdapter,mergeConfig2,import_https,import_form_data,DEFAULT_QUERY_CHANNELS_MESSAGE_LIST_PAGE_SIZE,DEFAULT_QUERY_CHANNEL_MESSAGE_LIST_PAGE_SIZE,DEFAULT_MESSAGE_SET_PAGINATION,DEFAULT_UPLOAD_SIZE_LIMIT_BYTES,API_MAX_FILES_ALLOWED_PER_MESSAGE,MAX_CHANNEL_MEMBER_COUNT_IN_CHANNEL_QUERY,RESERVED_UPDATED_MESSAGE_FIELDS,LOCAL_MESSAGE_FIELDS,DEFAULT_QUERY_CHANNELS_RETRY_COUNT,DEFAULT_QUERY_CHANNELS_MS_BETWEEN_RETRIES,sleep,chatCodes,getRandomValues,axiosParamsSerializer,localMessageToNewMessagePayload,toUpdatedMessagePayload,findIndexInSortedArray,debounce$4,throttle$2,get$1,uniqBy$1,messagePaginationCreatedAtAround,messagePaginationIdAround,messagePaginationLinear,messageSetPagination,WATCH_QUERY_IN_PROGRESS_FOR_CHANNEL$1,getAndWatchChannel,generateChannelTempCid$1,isChannelPinned$1,isChannelArchived$1,shouldConsiderArchivedChannels$1,extractSortValue$1,shouldConsiderPinnedChannels$1,findPinnedAtSortOrder,findLastPinnedChannelIndex$1,promoteChannel,isDate2,isLocalMessage$1,ChannelState,isScrapedContent,isLocalAttachment,isLocalUploadAttachment,isFileAttachment,isLocalFileAttachment,isImageAttachment,isLocalImageAttachment,isAudioAttachment,isLocalAudioAttachment,isVoiceRecordingAttachment,isLocalVoiceRecordingAttachment,isVideoAttachment,isLocalVideoAttachment,isUploadedAttachment,isFile2,isFileList2,isBlobButNotFile,isFileReference,createFileFromBlobs$1,getExtensionFromMimeType$1,generateFileName,isImageFile,getAttachmentTypeFromMimeType,ensureIsLocalAttachment,isPatch,noop2,StateStore,MergedStateStore,isClassInstance,isEqual$2,initState,AttachmentManager,encodedTlds$1,encodedUtlds$1,assign$1,numeric$1,ascii$1,alpha$1,asciinumeric$1,alphanumeric$1,domain$2,emoji$1,scheme$1,slashscheme$1,whitespace$2,ta$1,tr$2,ts$1,tt$2,WORD$1,UWORD$1,ASCIINUMERICAL$1,ALPHANUMERICAL$1,LOCALHOST$1,TLD$1,UTLD$1,SCHEME$1,SLASH_SCHEME$1,NUM$1,WS$1,NL$1,OPENBRACE$1,CLOSEBRACE$1,OPENBRACKET$1,CLOSEBRACKET$1,OPENPAREN$1,CLOSEPAREN$1,OPENANGLEBRACKET$1,CLOSEANGLEBRACKET$1,FULLWIDTHLEFTPAREN$1,FULLWIDTHRIGHTPAREN$1,LEFTCORNERBRACKET$1,RIGHTCORNERBRACKET$1,LEFTWHITECORNERBRACKET$1,RIGHTWHITECORNERBRACKET$1,FULLWIDTHLESSTHAN$1,FULLWIDTHGREATERTHAN$1,AMPERSAND$1,APOSTROPHE$1,ASTERISK$2,AT$1,BACKSLASH$1,BACKTICK$1,CARET$1,COLON$1,COMMA$1,DOLLAR$1,DOT$1,EQUALS$1,EXCLAMATION$1,HYPHEN$1,PERCENT$1,PIPE$1,PLUS$1,POUND$1,QUERY$1,QUOTE$1,FULLWIDTHMIDDLEDOT$1,SEMI$1,SLASH$1,TILDE$1,UNDERSCORE$1,EMOJI$1$1,SYM$1,tk$1,ASCII_LETTER$1,LETTER$1,EMOJI$2,DIGIT2,SPACE$1,CR$1,LF$1,EMOJI_VARIATION$1,EMOJI_JOINER$1,OBJECT_REPLACEMENT$1,tlds$1,utlds$1,defaults2,Email$1,Text$1,Nl$1,Url$1,makeState$1,INIT$1,DEFAULT_LINK_PREVIEW_MANAGER_CONFIG,DEFAULT_ATTACHMENT_MANAGER_CONFIG,DEFAULT_TEXT_COMPOSER_CONFIG,DEFAULT_COMPOSER_CONFIG,initState2,CustomDataManager,linkPreviewArrayToMap,initState3,_LinkPreviewsManager,LinkPreviewsManager,withCancellation,pendingPromises,MiddlewareExecutor,VALID_MAX_VOTES_VALUE_REGEX,MAX_POLL_OPTIONS$1,textFieldIsEmpty,pollStateChangeValidators,defaultPollFieldChangeEventValidators,defaultPollFieldBlurEventValidators,isTargetedOptionTextUpdate,pollCompositionStateProcessors,createPollComposerStateMiddleware,createPollCompositionValidationMiddleware,PollComposerCompositionMiddlewareExecutor,PollComposerStateMiddlewareExecutor,ErrorFromResponse,VotingVisibility,PollComposer,localAttachmentToAttachment,createAttachmentsCompositionMiddleware,createDraftAttachmentsCompositionMiddleware,createCompositionDataCleanupMiddleware,createCustomDataCompositionMiddleware,createDraftCustomDataCompositionMiddleware,createCompositionValidationMiddleware,createDraftCompositionValidationMiddleware,createLinkPreviewsCompositionMiddleware,createDraftLinkPreviewsCompositionMiddleware,createTextComposerCompositionMiddleware,createDraftTextComposerCompositionMiddleware,createMessageComposerStateCompositionMiddleware,createDraftMessageComposerStateCompositionMiddleware,createUserDataInjectionMiddleware,pollLocalMessageNullifiedFields,createPollOnlyCompositionMiddleware,MessageComposerMiddlewareExecutor,MessageDraftComposerMiddlewareExecutor,DEFAULT_SEARCH_SOURCE_OPTIONS,BaseSearchSourceBase,BaseSearchSource,BaseSearchSourceSync,SearchController,UserSearchSource,ChannelSearchSource,MessageSearchSource,getTriggerCharWithToken,getCompleteCommandInString,insertItemWithTrigger,getTokenizedSuggestionDisplayName,CommandSearchSource,DEFAULT_OPTIONS$2,createCommandsMiddleware,accentsMap,removeDiacritics,calculateLevenshtein,MentionsSearchSource,DEFAULT_OPTIONS2,userSuggestionToUserResponse,createMentionsMiddleware,createTextComposerPreValidationMiddleware,TextComposerMiddlewareExecutor,textIsEmpty,initState4,TextComposer,_WithSubscriptions,WithSubscriptions,DEFAULT_PAGE_LIMIT,DEFAULT_SORT$1,MARK_AS_READ_THROTTLE_TIMEOUT,THREAD_RESPONSE_RESERVED_KEYS,constructCustomDataObject,Thread$d,formatReadState,repliesPaginationFromInitialThread,ownUnreadCountSelector,compositionIsDraftResponse,initEditingAuditState,initState5,_MessageComposer,MessageComposer,Channel$1,ClientState,ws,browser_default2,InsightMetrics,postInsights,isCloseEvent,isErrorEvent,StableWSConnection,import_jsonwebtoken,import_crypto,TokenManager,APIErrorCodes,WSConnectionFallback,Segment,MODERATION_ENTITY_TYPES,Moderation,DEFAULT_CONNECTION_RECOVERY_THROTTLE_DURATION,MAX_QUERY_THREADS_LIMIT,THREAD_MANAGER_INITIAL_STATE,ThreadManager,isPollUpdatedEvent,isPollClosedEventEvent,isPollVoteCastedEvent,isPollVoteChangedEvent,isPollVoteRemovedEvent,isVoteAnswer,Poll$d,PollManager,channelManagerEventToHandlerMapping,DEFAULT_CHANNEL_MANAGER_OPTIONS,DEFAULT_CHANNEL_MANAGER_PAGINATION_OPTIONS,ChannelManager,DURATION_MS,DEFAULT_NOTIFICATION_MANAGER_CONFIG,NotificationManager,oneMinute,oneHour,oneDay,oneWeek,GROUP_BOUNDS,DEFAULT_STOP_REFRESH_BOUNDARY_MS,ReminderTimer,timeLeftMs,_Reminder,Reminder,DEFAULT_PAGINATION_OPTIONS,BasePaginator,ReminderPaginator,oneMinute2,oneHour2,oneDay2,DEFAULT_REMINDER_MANAGER_CONFIG,isReminderExistsError,isReminderDoesNotExistError,_ReminderManager,ReminderManager,StreamChat,FixedSizeQueueCache,lib,players,utils,loadScript,isMergeableObject,canUseSymbol,REACT_ELEMENT_TYPE,deepmerge_1,cjs$2,_loadScript,_deepmerge$1,MATCH_START_QUERY,MATCH_END_QUERY,MATCH_START_STAMP,MATCH_NUMERIC,requests,patterns,_utils$1,MATCH_URL_YOUTUBE,MATCH_URL_SOUNDCLOUD,MATCH_URL_VIMEO,MATCH_URL_FACEBOOK,MATCH_URL_FACEBOOK_WATCH,MATCH_URL_STREAMABLE,MATCH_URL_WISTIA,MATCH_URL_TWITCH_VIDEO,MATCH_URL_TWITCH_CHANNEL,MATCH_URL_DAILYMOTION,MATCH_URL_MIXCLOUD,MATCH_URL_VIDYARD,MATCH_URL_KALTURA,AUDIO_EXTENSIONS,VIDEO_EXTENSIONS,HLS_EXTENSIONS,DASH_EXTENSIONS,FLV_EXTENSIONS,canPlayFile,canPlay,YouTube,hasRequiredYouTube,SoundCloud,hasRequiredSoundCloud,Vimeo,hasRequiredVimeo,Facebook,hasRequiredFacebook,Streamable,hasRequiredStreamable,Wistia,hasRequiredWistia,Twitch,hasRequiredTwitch,DailyMotion,hasRequiredDailyMotion,Mixcloud,hasRequiredMixcloud,Vidyard,hasRequiredVidyard,Kaltura,hasRequiredKaltura,FilePlayer,hasRequiredFilePlayer,ReactPlayer$1,safeIsNaN,hasElementType,hasMap,hasSet,hasArrayBuffer,reactFastCompare,props,_propTypes,string$2,bool,number$1,array,oneOfType,shape,object,func,node$1,propTypes,noop$7,defaultProps$1,Player,Preview$1,hasRequiredPreview,_react,_deepmerge,_memoizeOne,_reactFastCompare,_props,_utils,_Player3,Preview,IS_BROWSER,IS_GLOBAL,SUPPORTED_PROPS,UniversalSuspense,customPlayers,createReactPlayer,tk,dayjs_min,dayjs_minExports,calendar$1,calendarExports,localizedFormat,e3,localizedFormatExports,dist,FUNC_ERROR_TEXT$1,NAN$1,symbolTag$1,reTrim$1,reIsBadHex$1,reIsBinary$1,reIsOctal$1,freeParseInt$1,freeGlobal$1,freeSelf$1,root$4,objectProto$1,objectToString$1,nativeMax$1,nativeMin$1,now$1,lodash_throttle,PUBLISH,SUBSCRIBE,RESET,VALUE,id,_excluded$2,useIsomorphicLayoutEffect$1,p,h,g,t2,v,S,y,H,K,ot,rt,it$1,lt,st,ut,ct,mt,dt,pt$1,gt,Tt,wt,yt,Ht,Et,Rt,Lt,Ft,zt,Bt,Pt,Ot,Mt,Vt,Ut,At,Wt,Nt,Gt,_t,jt,Kt,qt,Jt,$t,Qt,Xt,te,ee,ne,oe,ie,ae,ue,ce,me,de$1,fe,pe,he,ge,ve,Se,Ie,Ce,Te,we,xe,be,ye,Re,ze,Be,Pe,Oe,Me,Ve,Ue,We,Ne,De,Ge,_e,Ke,Ye,qe,Ze,Je,$e,Qe,Xe,en$1,nn,on,rn,an,ln,lodash_uniqby,lodash_uniqbyExports,FUNC_ERROR_TEXT,NAN,symbolTag,reTrim,reIsBadHex,reIsBinary,reIsOctal,freeParseInt,freeGlobal,freeSelf,root$3,objectProto,objectToString,nativeMax,nativeMin,now,lodash_debounce,cjs$1,COMMENT_REGEX,NEWLINE_REGEX,WHITESPACE_REGEX,PROPERTY_REGEX,COLON_REGEX,VALUE_REGEX,SEMICOLON_REGEX,TRIM_REGEX,NEWLINE,FORWARD_SLASH,ASTERISK,EMPTY_STRING,TYPE_COMMENT,TYPE_DECLARATION,inlineStyleParser,__importDefault$1,inline_style_parser_1,utilities,CUSTOM_PROPERTY_REGEX,HYPHEN_REGEX,NO_HYPHEN_REGEX,VENDOR_PREFIX_REGEX,MS_VENDOR_PREFIX_REGEX,skipCamelCase,capitalize,trimHyphen,camelCase,__importDefault,style_to_object_1,utilities_1,cjs,hasOwn,toStr,defineProperty,gOPD,isArray,isPlainObject$1,setProperty,getProperty,extend,MessageDeliveryStatus,MessageDeliveryStatus2,emojiRegex,imageGallery,imageGalleryExports,fromEntries,useIsomorphicLayoutEffect,top,bottom,right,left,auto,basePlacements,start,end,clippingParents,viewport,popper,reference,variationPlacements,placements,beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite,modifierPhases,max,min,round,toPaddingObject,unsetSides,passive,hash$1,hash,DEFAULT_OPTIONS,defaultModifiers,createPopper,EMPTY_MODIFIERS,usePopper,_entityMap,baseLogger,postProcessor,updateLocale$1,updateLocaleExports,localeData$1,localeDataExports,relativeTime$1,relativeTimeExports,duration$1,durationExports,utc$1,utcExports,timezone$1,timezoneExports,de,es,fr,hi,it,ja,ko,nl,pt,ru,tr,en,RecordingPermission,RecordingPermission2,fixWebmDuration$1,fixWebmDurationExports,lodash_mergewith,lodash_mergewithExports,AmplitudeRecorderState,AmplitudeRecorderState2,MediaRecordingState,MediaRecordingState2,RecordingAttachmentType,index$1,useLatest,updateRef,useComposedRef,HIDDEN_TEXTAREA_STYLE,forceHiddenStyles,forceHiddenStyles$1,hiddenTextarea,getHeight,noop$1,pick,SIZING_STYLE,isIE,getSizingData,getSizingData$1,useFormResetListener,useWindowResizeListener,useFontsLoadedListener,_excluded$1,TextareaAutosize,index,_default,accepts,FILE_INVALID_TYPE,FILE_TOO_LARGE,FILE_TOO_SMALL,TOO_MANY_FILES,getInvalidTypeRejectionErr,getTooLargeRejectionErr,getTooSmallRejectionErr,TOO_MANY_FILES_REJECTION,_excluded,_excluded2,_excluded3,_excluded4,Dropzone,defaultProps,initialState$1,lodash_defaultsdeep,lodash_defaultsdeepExports;function getAnnounceTextContent(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),isHTMLElement$3(e)){const r=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!r)if(n){const r=e.dataset.radixToastAnnounceAlt;r&&t.push(r)}else t.push(...getAnnounceTextContent(e))}}),t}function handleAndDispatchCustomEvent(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?dispatchDiscreteCustomEvent(s,i):s.dispatchEvent(i)}function useNextFrame(e=()=>{}){const t=useCallbackRef(e);useLayoutEffect2(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}function isHTMLElement$3(e){return e.nodeType===e.ELEMENT_NODE}function getTabbableCandidates(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function focusFirst$2(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}function r$1(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=r$1(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function clsx(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=r$1(e))&&(n&&(n+=" "),n+=t);return n}function twJoin(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=toValue(e))&&(n&&(n+=" "),n+=t);return n}function createTailwindMerge(e,...t){let r,n,s,i=function(a){const l=t.reduce((e,t)=>t(e),e());return r=createConfigUtils(l),n=r.cache.get,s=r.cache.set,i=o,o(a)};function o(e){const t=n(e);if(t)return t;const i=mergeClassList(e,r);return s(e,i),i}return function(){return i(twJoin.apply(null,arguments))}}function cn(...e){return twMerge(clsx(e))}function Toaster(){const{toasts:e}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[e.map(function({id:e,title:t,description:r,action:n,...s}){return jsxRuntimeExports.jsxs(Toast,{...s,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[t&&jsxRuntimeExports.jsx(ToastTitle,{children:t}),r&&jsxRuntimeExports.jsx(ToastDescription,{children:r})]}),n,jsxRuntimeExports.jsx(ToastClose,{})]},e)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}function clamp$2(e,t,r){return max$4(e,min$4(t,r))}function evaluate(e,t){return"function"==typeof e?e(t):e}function getSide(e){return e.split("-")[0]}function getAlignment(e){return e.split("-")[1]}function getOppositeAxis(e){return"x"===e?"y":"x"}function getAxisLength(e){return"y"===e?"height":"width"}function getSideAxis(e){return["top","bottom"].includes(getSide(e))?"y":"x"}function getAlignmentAxis(e){return getOppositeAxis(getSideAxis(e))}function getAlignmentSides(e,t,r){void 0===r&&(r=!1);const n=getAlignment(e),s=getAlignmentAxis(e),i=getAxisLength(s);let o="x"===s?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=getOppositePlacement$1(o)),[o,getOppositePlacement$1(o)]}function getExpandedPlacements(e){const t=getOppositePlacement$1(e);return[getOppositeAlignmentPlacement(e),t,getOppositeAlignmentPlacement(t)]}function getOppositeAlignmentPlacement(e){return e.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(e,t,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?i:o;default:return[]}}function getOppositeAxisPlacements(e,t,r,n){const s=getAlignment(e);let i=getSideList(getSide(e),"start"===r,n);return s&&(i=i.map(e=>e+"-"+s),t&&(i=i.concat(i.map(getOppositeAlignmentPlacement)))),i}function getOppositePlacement$1(e){return e.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(e){return{top:0,right:0,bottom:0,left:0,...e}}function getPaddingObject(e){return"number"!=typeof e?expandPaddingObject(e):{top:e,right:e,bottom:e,left:e}}function rectToClientRect$1(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function computeCoordsFromPlacement(e,t,r){let{reference:n,floating:s}=e;const i=getSideAxis(t),o=getAlignmentAxis(t),a=getAxisLength(o),l=getSide(t),c="y"===i,u=n.x+n.width/2-s.width/2,d=n.y+n.height/2-s.height/2,p=n[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:n.y-s.height};break;case"bottom":m={x:u,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:d};break;case"left":m={x:n.x-s.width,y:d};break;default:m={x:n.x,y:n.y}}switch(getAlignment(t)){case"start":m[o]-=p*(r&&c?-1:1);break;case"end":m[o]+=p*(r&&c?-1:1)}return m}async function detectOverflow$1(e,t){var r;void 0===t&&(t={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=evaluate(t,e),x=getPaddingObject(m),f=a[p?"floating"===d?"reference":"floating":d],h=rectToClientRect$1(await i.getClippingRect({element:null==(r=await(null==i.isElement?void 0:i.isElement(f)))||r?f:f.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),g="floating"===d?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(a.floating)),j=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},b=rectToClientRect$1(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:g,offsetParent:y,strategy:l}):g);return{top:(h.top-b.top+x.top)/j.y,bottom:(b.bottom-h.bottom+x.bottom)/j.y,left:(h.left-b.left+x.left)/j.x,right:(b.right-h.right+x.right)/j.x}}function getSideOffsets$1(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function isAnySideFullyClipped$1(e){return sides.some(t=>e[t]>=0)}async function convertValueToCoords(e,t){const{placement:r,platform:n,elements:s}=e,i=await(null==n.isRTL?void 0:n.isRTL(s.floating)),o=getSide(r),a=getAlignment(r),l="y"===getSideAxis(r),c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,d=evaluate(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:x}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof x&&(m="end"===a?-1*x:x),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}function hasWindow(){return"undefined"!=typeof window}function getNodeName$1(e){return isNode(e)?(e.nodeName||"").toLowerCase():"#document"}function getWindow$1(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function getDocumentElement$1(e){var t;return null==(t=(isNode(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function isNode(e){return!!hasWindow()&&(e instanceof Node||e instanceof getWindow$1(e).Node)}function isElement$1(e){return!!hasWindow()&&(e instanceof Element||e instanceof getWindow$1(e).Element)}function isHTMLElement$2(e){return!!hasWindow()&&(e instanceof HTMLElement||e instanceof getWindow$1(e).HTMLElement)}function isShadowRoot$1(e){return!(!hasWindow()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof getWindow$1(e).ShadowRoot)}function isOverflowElement(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=getComputedStyle$3(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function isTableElement$1(e){return["table","td","th"].includes(getNodeName$1(e))}function isTopLayer(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(e3){return!1}})}function isContainingBlock(e){const t=isWebKit(),r=isElement$1(e)?getComputedStyle$3(e):e;return["transform","translate","scale","rotate","perspective"].some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","translate","scale","rotate","perspective","filter"].some(e=>(r.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(r.contain||"").includes(e))}function getContainingBlock$1(e){let t=getParentNode$1(e);for(;isHTMLElement$2(t)&&!isLastTraversableNode(t);){if(isContainingBlock(t))return t;if(isTopLayer(t))return null;t=getParentNode$1(t)}return null}function isWebKit(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(e){return["html","body","#document"].includes(getNodeName$1(e))}function getComputedStyle$3(e){return getWindow$1(e).getComputedStyle(e)}function getNodeScroll$1(e){return isElement$1(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function getParentNode$1(e){if("html"===getNodeName$1(e))return e;const t=e.assignedSlot||e.parentNode||isShadowRoot$1(e)&&e.host||getDocumentElement$1(e);return isShadowRoot$1(t)?t.host:t}function getNearestOverflowAncestor(e){const t=getParentNode$1(e);return isLastTraversableNode(t)?e.ownerDocument?e.ownerDocument.body:e.body:isHTMLElement$2(t)&&isOverflowElement(t)?t:getNearestOverflowAncestor(t)}function getOverflowAncestors(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const s=getNearestOverflowAncestor(e),i=s===(null==(n=e.ownerDocument)?void 0:n.body),o=getWindow$1(s);if(i){const e=getFrameElement(o);return t.concat(o,o.visualViewport||[],isOverflowElement(s)?s:[],e&&r?getOverflowAncestors(e):[])}return t.concat(s,getOverflowAncestors(s,[],r))}function getFrameElement(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function getCssDimensions(e){const t=getComputedStyle$3(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=isHTMLElement$2(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,a=round$2(r)!==i||round$2(n)!==o;return a&&(r=i,n=o),{width:r,height:n,$:a}}function unwrapElement(e){return isElement$1(e)?e:e.contextElement}function getScale(e){const t=unwrapElement(e);if(!isHTMLElement$2(t))return createCoords(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=getCssDimensions(t);let o=(i?round$2(r.width):r.width)/n,a=(i?round$2(r.height):r.height)/s;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function getVisualOffsets(e){const t=getWindow$1(e);return isWebKit()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:noOffsets}function shouldAddVisualOffsets(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==getWindow$1(e))&&t}function getBoundingClientRect$1(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const s=e.getBoundingClientRect(),i=unwrapElement(e);let o=createCoords(1);t&&(n?isElement$1(n)&&(o=getScale(n)):o=getScale(e));const a=shouldAddVisualOffsets(i,r,n)?getVisualOffsets(i):createCoords(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const e=getWindow$1(i),t=n&&isElement$1(n)?getWindow$1(n):n;let r=e,s=getFrameElement(r);for(;s&&n&&t!==r;){const e=getScale(s),t=s.getBoundingClientRect(),n=getComputedStyle$3(s),i=t.left+(s.clientLeft+parseFloat(n.paddingLeft))*e.x,o=t.top+(s.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=i,c+=o,r=getWindow$1(s),s=getFrameElement(r)}}return rectToClientRect$1({width:u,height:d,x:l,y:c})}function getWindowScrollBarX$1(e,t){const r=getNodeScroll$1(e).scrollLeft;return t?t.left+r:getBoundingClientRect$1(getDocumentElement$1(e)).left+r}function getHTMLOffset(e,t,r){void 0===r&&(r=!1);const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:getWindowScrollBarX$1(e,n)),y:n.top+t.scrollTop}}function convertOffsetParentRelativeRectToViewportRelativeRect(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i="fixed"===s,o=getDocumentElement$1(n),a=!!t&&isTopLayer(t.floating);if(n===o||a&&i)return r;let l={scrollLeft:0,scrollTop:0},c=createCoords(1);const u=createCoords(0),d=isHTMLElement$2(n);if((d||!d&&!i)&&(("body"!==getNodeName$1(n)||isOverflowElement(o))&&(l=getNodeScroll$1(n)),isHTMLElement$2(n))){const e=getBoundingClientRect$1(n);c=getScale(n),u.x=e.x+n.clientLeft,u.y=e.y+n.clientTop}const p=!o||d||i?createCoords(0):getHTMLOffset(o,l,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:r.y*c.y-l.scrollTop*c.y+u.y+p.y}}function getClientRects(e){return Array.from(e.getClientRects())}function getDocumentRect$1(e){const t=getDocumentElement$1(e),r=getNodeScroll$1(e),n=e.ownerDocument.body,s=max$4(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=max$4(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+getWindowScrollBarX$1(e);const a=-r.scrollTop;return"rtl"===getComputedStyle$3(n).direction&&(o+=max$4(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}function getViewportRect$1(e,t){const r=getWindow$1(e),n=getDocumentElement$1(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const e=isWebKit();(!e||e&&"fixed"===t)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function getInnerBoundingClientRect$1(e,t){const r=getBoundingClientRect$1(e,!0,"fixed"===t),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=isHTMLElement$2(e)?getScale(e):createCoords(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:s*i.x,y:n*i.y}}function getClientRectFromClippingAncestor(e,t,r){let n;if("viewport"===t)n=getViewportRect$1(e,r);else if("document"===t)n=getDocumentRect$1(getDocumentElement$1(e));else if(isElement$1(t))n=getInnerBoundingClientRect$1(t,r);else{const r=getVisualOffsets(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return rectToClientRect$1(n)}function hasFixedPositionAncestor(e,t){const r=getParentNode$1(e);return!(r===t||!isElement$1(r)||isLastTraversableNode(r))&&("fixed"===getComputedStyle$3(r).position||hasFixedPositionAncestor(r,t))}function getClippingElementAncestors(e,t){const r=t.get(e);if(r)return r;let n=getOverflowAncestors(e,[],!1).filter(e=>isElement$1(e)&&"body"!==getNodeName$1(e)),s=null;const i="fixed"===getComputedStyle$3(e).position;let o=i?getParentNode$1(e):e;for(;isElement$1(o)&&!isLastTraversableNode(o);){const t=getComputedStyle$3(o),r=isContainingBlock(o);r||"fixed"!==t.position||(s=null);(i?!r&&!s:!r&&"static"===t.position&&!!s&&["absolute","fixed"].includes(s.position)||isOverflowElement(o)&&!r&&hasFixedPositionAncestor(e,o))?n=n.filter(e=>e!==o):s=t,o=getParentNode$1(o)}return t.set(e,n),n}function getClippingRect$1(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[..."clippingAncestors"===r?isTopLayer(t)?[]:getClippingElementAncestors(t,this._c):[].concat(r),n],o=i[0],a=i.reduce((e,r)=>{const n=getClientRectFromClippingAncestor(t,r,s);return e.top=max$4(n.top,e.top),e.right=min$4(n.right,e.right),e.bottom=min$4(n.bottom,e.bottom),e.left=max$4(n.left,e.left),e},getClientRectFromClippingAncestor(t,o,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function getDimensions(e){const{width:t,height:r}=getCssDimensions(e);return{width:t,height:r}}function getRectRelativeToOffsetParent(e,t,r){const n=isHTMLElement$2(t),s=getDocumentElement$1(t),i="fixed"===r,o=getBoundingClientRect$1(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=createCoords(0);if(n||!n&&!i)if(("body"!==getNodeName$1(t)||isOverflowElement(s))&&(a=getNodeScroll$1(t)),n){const e=getBoundingClientRect$1(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else s&&(l.x=getWindowScrollBarX$1(s));const c=!s||n||i?createCoords(0):getHTMLOffset(s,a);return{x:o.left+a.scrollLeft-l.x-c.x,y:o.top+a.scrollTop-l.y-c.y,width:o.width,height:o.height}}function isStaticPositioned(e){return"static"===getComputedStyle$3(e).position}function getTrueOffsetParent$1(e,t){if(!isHTMLElement$2(e)||"fixed"===getComputedStyle$3(e).position)return null;if(t)return t(e);let r=e.offsetParent;return getDocumentElement$1(e)===r&&(r=r.ownerDocument.body),r}function getOffsetParent$1(e,t){const r=getWindow$1(e);if(isTopLayer(e))return r;if(!isHTMLElement$2(e)){let t=getParentNode$1(e);for(;t&&!isLastTraversableNode(t);){if(isElement$1(t)&&!isStaticPositioned(t))return t;t=getParentNode$1(t)}return r}let n=getTrueOffsetParent$1(e,t);for(;n&&isTableElement$1(n)&&isStaticPositioned(n);)n=getTrueOffsetParent$1(n,t);return n&&isLastTraversableNode(n)&&isStaticPositioned(n)&&!isContainingBlock(n)?r:n||getContainingBlock$1(e)||r}function isRTL(e){return"rtl"===getComputedStyle$3(e).direction}function rectsAreEqual(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function observeMove(e,t){let r,n=null;const s=getDocumentElement$1(e);function i(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:d,width:p,height:m}=c;if(a||t(),!p||!m)return;const x={rootMargin:-floor(d)+"px "+-floor(s.clientWidth-(u+p))+"px "+-floor(s.clientHeight-(d+m))+"px "+-floor(u)+"px",threshold:max$4(0,min$4(1,l))||1};let f=!0;function h(t){const n=t[0].intersectionRatio;if(n!==l){if(!f)return o();n?o(!1,n):r=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==n||rectsAreEqual(c,e.getBoundingClientRect())||o(),f=!1}try{n=new IntersectionObserver(h,{...x,root:s.ownerDocument})}catch(e3){n=new IntersectionObserver(h,x)}n.observe(e)}(!0),i}function autoUpdate(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=unwrapElement(e),u=s||i?[...c?getOverflowAncestors(c):[],...getOverflowAncestors(t)]:[];u.forEach(e=>{s&&e.addEventListener("scroll",r,{passive:!0}),i&&e.addEventListener("resize",r)});const d=c&&a?observeMove(c,r):null;let p,m=-1,x=null;o&&(x=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&x&&(x.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=x)||e.observe(t)})),r()}),c&&!l&&x.observe(c),x.observe(t));let f=l?getBoundingClientRect$1(e):null;return l&&function t(){const n=getBoundingClientRect$1(e);f&&!rectsAreEqual(f,n)&&r();f=n,p=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{s&&e.removeEventListener("scroll",r),i&&e.removeEventListener("resize",r)}),null==d||d(),null==(e=x)||e.disconnect(),x=null,l&&cancelAnimationFrame(p)}}function deepEqual$2(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!==n--;)if(!deepEqual$2(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;0!==n--;){const r=s[n];if(("_owner"!==r||!e.$$typeof)&&!deepEqual$2(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function getDPR(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(e,t){const r=getDPR(e);return Math.round(t*r)/r}function useLatestRef(e){const t=reactExports.useRef(e);return index$3(()=>{t.current=e}),t}function useFloating(e){void 0===e&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=reactExports.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=reactExports.useState(n);deepEqual$2(p,n)||m(n);const[x,f]=reactExports.useState(null),[h,g]=reactExports.useState(null),y=reactExports.useCallback(e=>{e!==E.current&&(E.current=e,f(e))},[]),j=reactExports.useCallback(e=>{e!==R.current&&(R.current=e,g(e))},[]),b=i||x,v=o||h,E=reactExports.useRef(null),R=reactExports.useRef(null),S=reactExports.useRef(u),w=null!=l,$=useLatestRef(l),N=useLatestRef(s),_=useLatestRef(c),C=reactExports.useCallback(()=>{if(!E.current||!R.current)return;const e={placement:t,strategy:r,middleware:p};N.current&&(e.platform=N.current),computePosition(E.current,R.current,e).then(e=>{const t={...e,isPositioned:!1!==_.current};O.current&&!deepEqual$2(S.current,t)&&(S.current=t,reactDomExports.flushSync(()=>{d(t)}))})},[p,t,r,N,_]);index$3(()=>{!1===c&&S.current.isPositioned&&(S.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[c]);const O=reactExports.useRef(!1);index$3(()=>(O.current=!0,()=>{O.current=!1}),[]),index$3(()=>{if(b&&(E.current=b),v&&(R.current=v),b&&v){if($.current)return $.current(b,v,C);C()}},[b,v,C,$,w]);const T=reactExports.useMemo(()=>({reference:E,floating:R,setReference:y,setFloating:j}),[y,j]),P=reactExports.useMemo(()=>({reference:b,floating:v}),[b,v]),A=reactExports.useMemo(()=>{const e={position:r,left:0,top:0};if(!P.floating)return e;const t=roundByDPR(P.floating,u.x),n=roundByDPR(P.floating,u.y);return a?{...e,transform:"translate("+t+"px, "+n+"px)",...getDPR(P.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,a,P.floating,u.x,u.y]);return reactExports.useMemo(()=>({...u,update:C,refs:T,elements:P,floatingStyles:A}),[u,C,T,P,A])}function useSize(e){const[t,r]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let s,i;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,i=t.blockSize}else s=e.offsetWidth,i=e.offsetHeight;r({width:s,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}function isNotNull$1(e){return null!==e}function getSideAndAlignFromPlacement(e){const[t,r="center"]=e.split("-");return[t,r]}function getExitSideFromRect(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}function getPointsFromRect(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function isPointInPolygon$1(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const e=t[i],a=t[o],l=e.x,c=e.y,u=a.x,d=a.y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function getHull(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),getHullPresorted(t)}function getHullPresorted(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const r=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x)))break;t.pop()}t.push(r)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;r.length>=2;){const e=r[r.length-1],n=r[r.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;r.pop()}r.push(t)}return r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}function LoadingSpinner({size:e="md",className:t}){return jsxRuntimeExports.jsx(LoaderCircle,{className:cn("animate-spin text-gray-600 dark:text-gray-400",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[e],t)})}function LoadingState({text:e="Loading...",size:t="md",className:r}){return jsxRuntimeExports.jsx("div",{className:cn("flex items-center justify-center p-8",r),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-3",children:[jsxRuntimeExports.jsx(LoadingSpinner,{size:t}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e})]})})}function useDirection(e){const t=reactExports.useContext(DirectionContext);return e||t||"ltr"}function getDirectionAwareKey(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}function getFocusIntent(e,t,r){const n=getDirectionAwareKey(e.key,r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return MAP_KEY_TO_FOCUS_INTENT[n]}function focusFirst$1(e,t=!1){const r=document.activeElement;for(const n of e){if(n===r)return;if(n.focus({preventScroll:t}),document.activeElement!==r)return}}function wrapArray$2(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function makeTriggerId(e,t){return`${e}-trigger-${t}`}function makeContentId(e,t){return`${e}-content-${t}`}function Badge({className:e,variant:t,...r}){return jsxRuntimeExports.jsx("div",{className:cn(badgeVariants({variant:t}),e),...r})}function toDate(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function constructFrom(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function addDays(e,t){const r=toDate(e);return isNaN(t)?constructFrom(e,NaN):t?(r.setDate(r.getDate()+t),r):r}function addMonths(e,t){const r=toDate(e);if(isNaN(t))return constructFrom(e,NaN);if(!t)return r;const n=r.getDate(),s=constructFrom(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);return n>=s.getDate()?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}function getDefaultOptions(){return defaultOptions$1}function startOfWeek(e,t){var r,n,s,i;const o=getDefaultOptions(),a=(null==t?void 0:t.weekStartsOn)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.weekStartsOn)??o.weekStartsOn??(null==(i=null==(s=o.locale)?void 0:s.options)?void 0:i.weekStartsOn)??0,l=toDate(e),c=l.getDay(),u=(c<a?7:0)+c-a;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function startOfISOWeek(e){return startOfWeek(e,{weekStartsOn:1})}function getISOWeekYear(e){const t=toDate(e),r=t.getFullYear(),n=constructFrom(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=startOfISOWeek(n),i=constructFrom(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=startOfISOWeek(i);return t.getTime()>=s.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function startOfDay(e){const t=toDate(e);return t.setHours(0,0,0,0),t}function getTimezoneOffsetInMilliseconds(e){const t=toDate(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function differenceInCalendarDays(e,t){const r=startOfDay(e),n=startOfDay(t),s=+r-getTimezoneOffsetInMilliseconds(r),i=+n-getTimezoneOffsetInMilliseconds(n);return Math.round((s-i)/millisecondsInDay)}function startOfISOWeekYear(e){const t=getISOWeekYear(e),r=constructFrom(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),startOfISOWeek(r)}function compareAsc(e,t){const r=toDate(e),n=toDate(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function constructNow(e){return constructFrom(e,Date.now())}function isDate$2(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function isValid$1(e){if(!isDate$2(e)&&"number"!=typeof e)return!1;const t=toDate(e);return!isNaN(Number(t))}function differenceInCalendarMonths(e,t){const r=toDate(e),n=toDate(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}function getRoundingMethod(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return 0===r?0:r}}function differenceInMilliseconds(e,t){return+toDate(e)-+toDate(t)}function endOfDay(e){const t=toDate(e);return t.setHours(23,59,59,999),t}function endOfMonth(e){const t=toDate(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function isLastDayOfMonth(e){const t=toDate(e);return+endOfDay(t)===+endOfMonth(t)}function differenceInMonths(e,t){const r=toDate(e),n=toDate(t),s=compareAsc(r,n),i=Math.abs(differenceInCalendarMonths(r,n));let o;if(i<1)o=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);let t=compareAsc(r,n)===-s;isLastDayOfMonth(toDate(e))&&1===i&&1===compareAsc(e,n)&&(t=!1),o=s*(i-Number(t))}return 0===o?0:o}function differenceInSeconds(e,t,r){const n=differenceInMilliseconds(e,t)/1e3;return getRoundingMethod(null==r?void 0:r.roundingMethod)(n)}function startOfYear(e){const t=toDate(e),r=constructFrom(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function buildFormatLongFn(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}function buildLocalizeFn(e){return(t,r)=>{let n;if("formatting"===((null==r?void 0:r.context)?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=(null==r?void 0:r.width)?String(r.width):t;n=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=(null==r?void 0:r.width)?String(r.width):e.defaultWidth;n=e.values[s]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function buildMatchFn(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?findIndex$2(a,e=>e.test(o)):findKey$1(a,e=>e.test(o));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(o.length)}}}function findKey$1(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function findIndex$2(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function buildMatchPatternFn(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;return{value:o,rest:t.slice(s.length)}}}function getDayOfYear(e){const t=toDate(e);return differenceInCalendarDays(t,startOfYear(t))+1}function getISOWeek(e){const t=toDate(e),r=+startOfISOWeek(t)-+startOfISOWeekYear(t);return Math.round(r/millisecondsInWeek)+1}function getWeekYear(e,t){var r,n,s,i;const o=toDate(e),a=o.getFullYear(),l=getDefaultOptions(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(i=null==(s=l.locale)?void 0:s.options)?void 0:i.firstWeekContainsDate)??1,u=constructFrom(e,0);u.setFullYear(a+1,0,c),u.setHours(0,0,0,0);const d=startOfWeek(u,t),p=constructFrom(e,0);p.setFullYear(a,0,c),p.setHours(0,0,0,0);const m=startOfWeek(p,t);return o.getTime()>=d.getTime()?a+1:o.getTime()>=m.getTime()?a:a-1}function startOfWeekYear(e,t){var r,n,s,i;const o=getDefaultOptions(),a=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.firstWeekContainsDate)??o.firstWeekContainsDate??(null==(i=null==(s=o.locale)?void 0:s.options)?void 0:i.firstWeekContainsDate)??1,l=getWeekYear(e,t),c=constructFrom(e,0);c.setFullYear(l,0,a),c.setHours(0,0,0,0);return startOfWeek(c,t)}function getWeek(e,t){const r=toDate(e),n=+startOfWeek(r,t)-+startOfWeekYear(r,t);return Math.round(n/millisecondsInWeek)+1}function addLeadingZeros(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}function formatTimezoneShort(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return 0===i?r+String(s):r+String(s)+t+addLeadingZeros(i,2)}function formatTimezoneWithOptionalMinutes(e,t){if(e%60==0){return(e>0?"-":"+")+addLeadingZeros(Math.abs(e)/60,2)}return formatTimezone(e,t)}function formatTimezone(e,t=""){const r=e>0?"-":"+",n=Math.abs(e);return r+addLeadingZeros(Math.trunc(n/60),2)+t+addLeadingZeros(n%60,2)}function isProtectedDayOfYearToken(e){return dayOfYearTokenRE.test(e)}function isProtectedWeekYearToken(e){return weekYearTokenRE.test(e)}function warnOrThrowProtectedError(e,t,r){const n=message(e,t,r);if(console.warn(n),throwTokens.includes(e))throw new RangeError(n)}function message(e,t,r){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function format$1(e,t,r){var n,s,i,o;const a=getDefaultOptions(),l=a.locale??enUS,c=a.firstWeekContainsDate??(null==(s=null==(n=a.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??1,u=a.weekStartsOn??(null==(o=null==(i=a.locale)?void 0:i.options)?void 0:o.weekStartsOn)??0,d=toDate(e);if(!isValid$1(d))throw new RangeError("Invalid time value");let p=t.match(longFormattingTokensRegExp).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,longFormatters[t])(e,l.formatLong)}return e}).join("").match(formattingTokensRegExp).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:cleanEscapedString(e)};if(formatters[t])return{isToken:!0,value:e};if(t.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});l.localize.preprocessor&&(p=l.localize.preprocessor(d,p));const m={firstWeekContainsDate:c,weekStartsOn:u,locale:l};return p.map(r=>{if(!r.isToken)return r.value;const n=r.value;(isProtectedWeekYearToken(n)||isProtectedDayOfYearToken(n))&&warnOrThrowProtectedError(n,t,String(e));return(0,formatters[n[0]])(d,n,l.localize,m)}).join("")}function cleanEscapedString(e){const t=e.match(escapedStringRegExp);return t?t[1].replace(doubleQuoteRegExp,"'"):e}function formatDistance(e,t,r){const n=getDefaultOptions(),s=(null==r?void 0:r.locale)??n.locale??enUS,i=compareAsc(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:null==r?void 0:r.addSuffix,comparison:i});let a,l;i>0?(a=toDate(t),l=toDate(e)):(a=toDate(e),l=toDate(t));const c=differenceInSeconds(l,a),u=(getTimezoneOffsetInMilliseconds(l)-getTimezoneOffsetInMilliseconds(a))/1e3,d=Math.round((c-u)/60);let p;if(d<2)return(null==r?void 0:r.includeSeconds)?c<5?s.formatDistance("lessThanXSeconds",5,o):c<10?s.formatDistance("lessThanXSeconds",10,o):c<20?s.formatDistance("lessThanXSeconds",20,o):c<40?s.formatDistance("halfAMinute",0,o):c<60?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",1,o):0===d?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",d,o);if(d<45)return s.formatDistance("xMinutes",d,o);if(d<90)return s.formatDistance("aboutXHours",1,o);if(d<minutesInDay){const e=Math.round(d/60);return s.formatDistance("aboutXHours",e,o)}if(d<2520)return s.formatDistance("xDays",1,o);if(d<minutesInMonth){const e=Math.round(d/minutesInDay);return s.formatDistance("xDays",e,o)}if(d<2*minutesInMonth)return p=Math.round(d/minutesInMonth),s.formatDistance("aboutXMonths",p,o);if(p=differenceInMonths(l,a),p<12){const e=Math.round(d/minutesInMonth);return s.formatDistance("xMonths",e,o)}{const e=p%12,t=Math.trunc(p/12);return e<3?s.formatDistance("aboutXYears",t,o):e<9?s.formatDistance("overXYears",t,o):s.formatDistance("almostXYears",t+1,o)}}function formatDistanceToNow(e,t){return formatDistance(e,constructNow(e),t)}function subDays(e,t){return addDays(e,-t)}function subMonths(e,t){return addMonths(e,-t)}function toArray$2(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function encodePacketToBinary(e,t){return withNativeBlob$1&&e.data instanceof Blob?e.data.arrayBuffer().then(toArray$2).then(t):withNativeArrayBuffer$2&&(e.data instanceof ArrayBuffer||isView$1(e.data))?t(toArray$2(e.data)):void encodePacket(e,!1,e=>{TEXT_ENCODER||(TEXT_ENCODER=new TextEncoder),t(TEXT_ENCODER.encode(e))})}function createPacketEncoderStream(){return new TransformStream({transform(e,t){encodePacketToBinary(e,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const e=new DataView(s.buffer);e.setUint8(0,126),e.setUint16(1,n)}else{s=new Uint8Array(9);const e=new DataView(s.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(n))}e.data&&"string"!=typeof e.data&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}function totalLength(e){return e.reduce((e,t)=>e+t.length,0)}function concatChunks(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let s=0;s<t;s++)r[s]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function createPacketDecoderStream(e,t){TEXT_DECODER||(TEXT_DECODER=new TextDecoder);const r=[];let n=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(r.push(o);;){if(0===n){if(totalLength(r)<1)break;const e=concatChunks(r,1);i=!(128&~e[0]),s=127&e[0],n=s<126?3:126===s?1:2}else if(1===n){if(totalLength(r)<2)break;const e=concatChunks(r,2);s=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),n=3}else if(2===n){if(totalLength(r)<8)break;const e=concatChunks(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),i=t.getUint32(0);if(i>Math.pow(2,21)-1){a.enqueue(ERROR_PACKET);break}s=i*Math.pow(2,32)+t.getUint32(4),n=3}else{if(totalLength(r)<s)break;const e=concatChunks(r,s);a.enqueue(decodePacket(i?e:TEXT_DECODER.decode(e),t)),n=0}if(0===s||s>e){a.enqueue(ERROR_PACKET);break}}}})}function Emitter(e){if(e)return mixin(e)}function mixin(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}function createCookieJar(){}function pick$1(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}function installTimerFunctions(e,t){t.useNativeTimers?(e.setTimeoutFn=NATIVE_SET_TIMEOUT.bind(globalThisShim),e.clearTimeoutFn=NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)):(e.setTimeoutFn=globalThisShim.setTimeout.bind(globalThisShim),e.clearTimeoutFn=globalThisShim.clearTimeout.bind(globalThisShim))}function byteLength(e){return"string"==typeof e?utf8Length(e):Math.ceil((e.byteLength||e.size)*BASE64_OVERHEAD)}function utf8Length(e){let t=0,r=0;for(let n=0,s=e.length;n<s;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function randomString$1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function encode$1(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function decode$1(e){let t={},r=e.split("&");for(let n=0,s=r.length;n<s;n++){let e=r[n].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}function empty$2(){}function unloadHandler(){for(let e in Request.requests)Request.requests.hasOwnProperty(e)&&Request.requests[e].abort()}function newRequest(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||hasCORS))return new XMLHttpRequest}catch(e3){}if(!t)try{return new(globalThisShim[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e3){}}function parse$1(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let s=re$3.exec(e||""),i={},o=14;for(;o--;)i[parts[o]]=s[o]||"";return-1!=r&&-1!=n&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=pathNames(i,i.path),i.queryKey=queryKey(i,i.query),i}function pathNames(e,t){const r=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}function queryKey(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(r[t]=n)}),r}function url(e,t="",r){let n=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),n=parse$1(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}function isBinary(e){return withNativeArrayBuffer&&(e instanceof ArrayBuffer||isView(e))||withNativeBlob&&e instanceof Blob||withNativeFile&&e instanceof File}function hasBinary(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(hasBinary(e[t]))return!0;return!1}if(isBinary(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return hasBinary(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&hasBinary(e[r]))return!0;return!1}function deconstructPacket(e){const t=[],r=e.data,n=e;return n.data=_deconstructPacket(r,t),n.attachments=t.length,{packet:n,buffers:t}}function _deconstructPacket(e,t){if(!e)return e;if(isBinary(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=_deconstructPacket(e[n],t);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=_deconstructPacket(e[n],t));return r}return e}function reconstructPacket(e,t){return e.data=_reconstructPacket(e.data,t),delete e.attachments,e}function _reconstructPacket(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=_reconstructPacket(e[r],t);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=_reconstructPacket(e[r],t));return e}function isObject$e(e){return"[object Object]"===Object.prototype.toString.call(e)}function on$1(e,t,r){return e.on(t,r),function(){e.off(t,r)}}function Backoff(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function lookup(e,t){"object"==typeof e&&(t=e,e=void 0);const r=url(e,(t=t||{}).path||"/socket.io"),n=r.source,s=r.id,i=r.path,o=cache[s]&&i in cache[s].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new Manager(n,t):(cache[s]||(cache[s]=new Manager(n,t)),a=cache[s]),r.query&&!t.query&&(t.query=r.queryKey),a.socket(r.path,t)}function LiveChatHub({onChannelSelect:e,selectedChannel:t}){const[r,n]=reactExports.useState([]),[s,i]=reactExports.useState(null),{user:o}=useAuth();reactExports.useEffect(()=>{if(!o)return;const e=lookup(`${window.location.protocol}//${window.location.host}`,{transports:["polling","websocket"],upgrade:!0,rememberUpgrade:!1});i(e);const r=CHAT_CHANNELS.filter(e=>!e.permission||!!(null==o?void 0:o.permissions)&&o.permissions.includes(e.permission)).map(e=>({...e,unreadCount:0,lastMessage:void 0,activeUsers:[],messages:[]}));return n(r),r.forEach(t=>{e.emit("join-channel",{channel:t.id,userId:o.id,userName:o.firstName||o.email||"User"})}),e.on("message-history",e=>{if(e.length>0){const t=e[0].channel;n(r=>r.map(r=>{if(r.id===t){const t=e.map(e=>({...e,timestamp:new Date(e.timestamp||e.createdAt)}));return{...r,messages:t,lastMessage:t[t.length-1]}}return r}))}}),e.on("new-message",e=>{const r={...e,timestamp:new Date(e.timestamp)};n(n=>n.map(n=>{if(n.id===e.channel){const e=[...n.messages,r];return{...n,messages:e,lastMessage:r,unreadCount:t===n.id?0:n.unreadCount+1}}return n}))}),()=>{e.disconnect()}},[o,t]),reactExports.useEffect(()=>{if(!t&&r.length>0){r.find(e=>"general"===e.id)&&e("general")}},[r,t,e]);const a=e=>{if(!e)return"No messages yet";try{return formatDistanceToNow(e.timestamp,{addSuffix:!0})}catch{return"Recently"}};return jsxRuntimeExports.jsxs("div",{className:"w-80 bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex flex-col h-full",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Chat Channels"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Real-time team communication"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:r.map(r=>{const s=t===r.id,i="core-team"===r.id;return jsxRuntimeExports.jsx(Card$1,{className:"cursor-pointer transition-all duration-200 hover:shadow-md "+(s?i?"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-amber-200 dark:border-amber-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-750"),onClick:()=>(async t=>{n(e=>e.map(e=>e.id===t?{...e,unreadCount:0}:e)),e(t);try{const e=await fetch("/api/message-notifications/mark-chat-read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel:t}),credentials:"include"});if(e.ok){console.log(`Successfully marked ${t} chat messages as read`);const e=new CustomEvent("refreshNotifications");window.dispatchEvent(e)}else console.error("Failed to mark chat messages as read:",e.status)}catch(r){console.error("Error marking chat messages as read:",r)}})(r.id),children:jsxRuntimeExports.jsxs(CardContent$1,{className:"p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:""+(s?i?"text-amber-600 dark:text-amber-400":"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"),children:r.icon}),jsxRuntimeExports.jsx("span",{className:"font-medium "+(s?i?"text-amber-900 dark:text-amber-100":"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100"),children:r.name})]}),r.unreadCount>0&&jsxRuntimeExports.jsx(Badge,{variant:"destructive",className:"text-xs px-1.5 py-0.5",children:r.unreadCount})]}),r.lastMessage?jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[r.lastMessage.userName,":"]})," ",r.lastMessage.content]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:a(r.lastMessage)})]}):jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No messages yet  Click to start the conversation"}),r.activeUsers.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Users,{className:"h-3 w-3 mr-1"}),r.activeUsers.length," active"]})]})},r.id)})}),jsxRuntimeExports.jsxs("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400",children:["Connected as ",(null==o?void 0:o.firstName)||(null==o?void 0:o.email)||"User"]})]})}function getOpenState(e){return e?"open":"closed"}function isIndeterminate$1(e){return"indeterminate"===e}function getCheckedState(e){return isIndeterminate$1(e)?"indeterminate":e?"checked":"unchecked"}function focusFirst(e){const t=document.activeElement;for(const r of e){if(r===t)return;if(r.focus(),document.activeElement!==t)return}}function wrapArray$1(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function getNextMatch(e,t,r){const n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let i=wrapArray$1(e,Math.max(s,0));1===n.length&&(i=i.filter(e=>e!==r));const o=i.find(e=>e.toLowerCase().startsWith(n.toLowerCase()));return o!==r?o:void 0}function isPointInPolygon(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const e=t[i],a=t[o],l=e.x,c=e.y,u=a.x,d=a.y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function isPointerInGraceArea(e,t){if(!t)return!1;return isPointInPolygon({x:e.clientX,y:e.clientY},t)}function whenMouse(e){return t=>"mouse"===t.pointerType?e(t):void 0}function ChatMessageComponent({message:e,onEdit:t,onDelete:r}){var n;const{user:s}=useAuth(),[i,o]=reactExports.useState(!1),[a,l]=reactExports.useState(e.content),c=(null==s?void 0:s.id)===e.userId,u=(null==(n=null==s?void 0:s.permissions)?void 0:n.includes("MANAGE_USERS"))||"admin"===(null==s?void 0:s.role)||"super_admin"===(null==s?void 0:s.role),d=c,p=c||u,m=()=>{a.trim()&&a!==e.content&&t(e.id,a.trim()),o(!1)},x=()=>{l(e.content),o(!1)};return jsxRuntimeExports.jsxs("div",{className:"flex gap-3 py-2 px-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 group",children:[jsxRuntimeExports.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-semibold ${(e=>{const t=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],r=e.split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e,0);return t[Math.abs(r)%t.length]})(e.userId)}`,children:(f=e.userName,f.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:e.userName}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[formatDistanceToNow(e.timestamp,{addSuffix:!0}),e.edited&&jsxRuntimeExports.jsx("span",{className:"ml-1 text-gray-400",children:"(edited)"})]})]}),i?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Textarea,{value:a,onChange:e=>l(e.target.value),className:"min-h-[60px] text-sm",onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey?m():"Escape"===e.key&&x()}}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:m,disabled:!a.trim(),children:[jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 mr-1"}),"Save"]}),jsxRuntimeExports.jsxs(Button,{size:"sm",variant:"outline",onClick:x,children:[jsxRuntimeExports.jsx(X$1,{className:"w-3 h-3 mr-1"}),"Cancel"]})]})]}):jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap break-words",children:e.content})]}),(d||p)&&!i&&jsxRuntimeExports.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(Ellipsis,{className:"w-3 h-3"})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[d&&jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>o(!0),children:[jsxRuntimeExports.jsx(Pen,{className:"w-3 h-3 mr-2"}),"Edit message"]}),p&&jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>r(e.id),className:"text-red-600 dark:text-red-400",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3 mr-2"}),"Delete message"]})]})]})})]});var f}function EnhancedChat(){const[e,t]=reactExports.useState("general"),[r,n]=reactExports.useState([]),[s,i]=reactExports.useState(""),[o,a]=reactExports.useState(null),[l,c]=reactExports.useState(!1),[u,d]=reactExports.useState(!1),p=reactExports.useRef(null),{user:m}=useAuth(),{toast:x}=useToast(),f=CHANNEL_INFO[e];reactExports.useEffect(()=>{if(!m)return;const t=lookup(`${window.location.protocol}//${window.location.host}`,{transports:["polling","websocket"],upgrade:!0,rememberUpgrade:!1});return a(t),t.on("connect",()=>{c(!0),console.log("Chat connected to Socket.IO")}),t.on("disconnect",()=>{c(!1),d(!1),console.log("Chat disconnected from Socket.IO")}),t.on("joined-channel",({channel:t})=>{t===e&&(d(!0),console.log(`Successfully joined channel: ${t}`))}),t.on("new-message",t=>{t.channel===e&&n(e=>[...e,{...t,timestamp:new Date(t.timestamp)}])}),t.on("message-history",e=>{const t=e.map(e=>({...e,timestamp:new Date(e.timestamp||e.createdAt)}));n(t)}),t.on("message-edited",t=>{t.channel===e&&(n(e=>e.map(e=>e.id===t.id?{...t,timestamp:new Date(t.timestamp)}:e)),x({title:"Message edited",description:"The message has been updated."}))}),t.on("message-deleted",({messageId:e,deletedBy:t})=>{n(t=>t.filter(t=>t.id!==e)),x({title:"Message deleted",description:`Message was deleted by ${t}`})}),t.on("error",({message:e})=>{x({title:"Error",description:e,variant:"destructive"})}),()=>{t.disconnect()}},[m,e]),reactExports.useEffect(()=>{if(o&&l&&m&&e){d(!1),n([]);const t=m.displayName||m.firstName||m.email||"User";console.log("Chat sending user data:",{displayName:m.displayName,firstName:m.firstName,email:m.email,finalName:t}),o.emit("join-channel",{channel:e,userId:m.id,userName:t}),h(e)}},[o,l,m,e]);const h=async e=>{try{const t=await fetch("/api/message-notifications/mark-chat-read",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({channel:e})});t.ok?(console.log(`Marked all messages in ${e} as read`),window.dispatchEvent(new CustomEvent("refreshNotifications"))):console.warn(`Failed to mark ${e} messages as read:`,t.statusText)}catch(t){console.error(`Error marking ${e} messages as read:`,t)}};reactExports.useEffect(()=>{var e;null==(e=p.current)||e.scrollIntoView({behavior:"smooth"})},[r]);const g=()=>{o&&s.trim()&&e&&(o.emit("send-message",{channel:e,content:s.trim()}),i(""))},y=(e,t)=>{o&&o.emit("edit-message",{messageId:parseInt(e),newContent:t})},j=e=>{o&&window.confirm("Are you sure you want to delete this message?")&&o.emit("delete-message",{messageId:parseInt(e)})};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-200px)] bg-white dark:bg-gray-900 rounded-lg shadow-lg overflow-hidden relative z-10",children:[jsxRuntimeExports.jsx("div",{className:"md:block",children:jsxRuntimeExports.jsx(LiveChatHub,{onChannelSelect:t,selectedChannel:e})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[jsxRuntimeExports.jsx("div",{className:"px-3 sm:px-4 md:px-6 py-3 sm:py-4 "+("core-team"===e?"bg-gradient-to-r from-amber-500 to-orange-500 text-white":"bg-[#236383] text-white"),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:null==f?void 0:f.icon}),jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-base sm:text-lg font-semibold truncate",children:null==f?void 0:f.name}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm opacity-90 truncate hidden sm:block",children:null==f?void 0:f.description})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 flex-shrink-0",children:[(null==f?void 0:f.isPrivate)&&jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"bg-white/20 text-white text-xs hidden sm:inline-flex",children:"Private"}),jsxRuntimeExports.jsxs(Badge,{variant:l?"default":"destructive",className:"text-xs "+(l?"bg-green-500":""),children:[jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:l?"Connected":"Disconnected"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:l?"":""})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-2 sm:p-3 md:p-4 space-y-2 sm:space-y-4 bg-gray-50 dark:bg-gray-800 min-h-0",children:u?0===r.length?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full px-4",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl sm:text-4xl mb-3 sm:mb-4",children:null==f?void 0:f.icon}),jsxRuntimeExports.jsxs("h4",{className:"text-base sm:text-lg font-medium mb-2",children:["Welcome to ",null==f?void 0:f.name,"!"]}),jsxRuntimeExports.jsx("p",{className:"text-sm sm:text-base",children:"This is the beginning of your conversation."}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm mt-2",children:"Send a message to get started."})]})}):jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[r.map(e=>jsxRuntimeExports.jsx(ChatMessageComponent,{message:e,onEdit:y,onDelete:j},e.id)),jsxRuntimeExports.jsx("div",{ref:p})]}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-[#236383] mx-auto mb-3 sm:mb-4"}),jsxRuntimeExports.jsxs("p",{className:"text-sm sm:text-base",children:["Joining ",null==f?void 0:f.name,"..."]})]})})}),jsxRuntimeExports.jsxs("div",{className:"p-3 sm:p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx(Input,{value:s,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:`Message ${(null==f?void 0:f.name)||"chat"}...`,disabled:!l||!u,className:"flex-1 text-sm sm:text-base h-10 sm:h-11"}),jsxRuntimeExports.jsx(Button,{onClick:g,disabled:!l||!u||!s.trim(),className:"bg-[#236383] hover:bg-[#1a4d66] text-white h-10 sm:h-11 w-10 sm:w-11 p-0",children:jsxRuntimeExports.jsx(Send$c,{className:"h-4 w-4"})})]}),!l&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Disconnected - trying to reconnect..."})]})]})]})}function useIsHydrated(){return shimExports.useSyncExternalStore(subscribe$1,()=>!0,()=>!1)}function subscribe$1(){return()=>{}}function resolveLoadingStatus(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function useImageLoadingStatus(e,{referrerPolicy:t,crossOrigin:r}){const n=useIsHydrated(),s=reactExports.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[o,a]=reactExports.useState(()=>resolveLoadingStatus(i,e));return useLayoutEffect2(()=>{a(resolveLoadingStatus(i,e))},[i,e]),useLayoutEffect2(()=>{const e=e=>()=>{a(e)};if(!i)return;const n=e("loaded"),s=e("error");return i.addEventListener("load",n),i.addEventListener("error",s),t&&(i.referrerPolicy=t),"string"==typeof r&&(i.crossOrigin=r),()=>{i.removeEventListener("load",n),i.removeEventListener("error",s)}},[i,r,t]),o}function useMessageReads(){const{user:e}=useAuth(),t=useMutation({mutationFn:async({committee:e,messageIds:t})=>apiRequest("POST","/api/message-notifications/mark-chat-read",{channel:e,messageIds:t}),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/message-notifications/unread-counts"]})},onError:e=>{console.error("Failed to mark messages as read:",e)}}),r=r=>{e&&t.mutate({committee:r})};return{markCommitteeAsRead:r,markSpecificMessagesAsRead:(r,n)=>{e&&0!==n.length&&t.mutate({committee:r,messageIds:n})},useAutoMarkAsRead:(t,n,s=!0)=>{reactExports.useEffect(()=>{if(!s||!e||!n||0===n.length)return;if(0===n.filter(t=>t.userId!==e.id).length)return;const i=()=>!document.hidden,o=setTimeout(()=>{i()&&r(t)},1500),a=()=>{i()&&r(t)};return document.addEventListener("visibilitychange",a),()=>{clearTimeout(o),document.removeEventListener("visibilitychange",a)}},[t,n,s,e])},isMarkingAsRead:t.isPending}}function MessageLikeButton({messageId:e,className:t=""}){const{user:r}=useAuth(),n=useQueryClient(),s=Number(e);console.log("MessageLikeButton rendered:",{messageId:e,numericMessageId:s,user:null==r?void 0:r.id});const{data:i=[],isLoading:o}=useQuery({queryKey:["message-likes",s],queryFn:()=>apiRequest("GET",`/api/messages/${s}/likes`),staleTime:3e4}),a=i.some(e=>e.userId===(null==r?void 0:r.id)),l=i.length,c=useMutation({mutationFn:async()=>apiRequest(a?"DELETE":"POST",`/api/messages/${s}/like`),onSuccess:()=>{n.invalidateQueries({queryKey:["message-likes",s]})},onError:e=>{console.error("Error toggling message like:",e)}});return o?jsxRuntimeExports.jsx("div",{className:`flex items-center space-x-1 ${t}`,children:jsxRuntimeExports.jsx(Heart,{className:"w-4 h-4 text-gray-300"})}):jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(Tooltip$1,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:()=>{r&&c.mutate()},disabled:c.isPending||!r,className:`h-6 px-2 py-1 transition-colors ${t}`,children:[jsxRuntimeExports.jsx(Heart,{className:"w-4 h-4 mr-1 transition-colors "+(a?"text-red-500 fill-red-500":"text-gray-400 hover:text-red-400")}),l>0&&jsxRuntimeExports.jsx("span",{className:"text-xs "+(a?"text-red-500":"text-gray-500"),children:l})]})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{className:"text-sm",children:(()=>{if(0===l)return"Be the first to like this message";if(1===l)return`Liked by ${i[0].userName}`;if(2===l)return`Liked by ${i[0].userName} and ${i[1].userName}`;{const e=i.slice(0,2).map(e=>e.userName).join(", "),t=l-2;return`Liked by ${e} and ${t} other${t>1?"s":""}`}})()})})]})})}function CommitteeChat(){const{toast:e}=useToast(),{user:t}=useAuth(),[r,n]=reactExports.useState(null),[s,i]=reactExports.useState(""),o=reactExports.useRef(null),{useAutoMarkAsRead:a}=useMessageReads(),{data:l}=useQuery({queryKey:["/api/auth/profile"],enabled:!!t}),c=()=>{if(l&&"object"==typeof l){const e=l;if(e.displayName)return e.displayName;if(e.firstName)return e.firstName}return t&&"object"==typeof t&&"email"in t&&t.email?String(t.email).split("@")[0]:"Team Member"},{data:u}=useQuery({queryKey:["/api/conversations/committee",null==r?void 0:r.id],queryFn:async()=>{if(!r)return null;return await apiRequest("POST","/api/conversations",{type:"channel",name:`${r.name}`})},enabled:!!r}),{data:d=[]}=useQuery({queryKey:["/api/conversations",null==u?void 0:u.id,"messages"],enabled:!!u,refetchInterval:12e4}),[p,m]=reactExports.useState(null),x=p||d;a((null==r?void 0:r.id)||"",d,!!r),reactExports.useEffect(()=>{m(null),(null==u?void 0:u.id)&&queryClient.invalidateQueries({queryKey:["/api/conversations",u.id,"messages"]})},[null==u?void 0:u.id]),reactExports.useEffect(()=>{d.length>0&&r&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("refreshNotifications"))},500)},[d.length,r]);const f=useMutation({mutationFn:async e=>{if(!u)throw new Error("No conversation available");return await apiRequest("POST",`/api/conversations/${u.id}/messages`,{content:e.content})},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/conversations",null==u?void 0:u.id,"messages"]}),i("")},onError:()=>{e({title:"Error",description:"Failed to send message",variant:"destructive"})}}),h=useMutation({mutationFn:async e=>await apiRequest("DELETE",`/api/messages/${e}`),onMutate:async e=>{m(t=>(t||d).filter(t=>t.id!==e))},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/conversations",null==u?void 0:u.id,"messages"]}),m(null),e({title:"Message deleted",description:"The message has been removed"})},onError:()=>{m(null),queryClient.invalidateQueries({queryKey:["/api/conversations",null==u?void 0:u.id,"messages"]}),e({title:"Error",description:"Failed to delete message",variant:"destructive"})}}),g=()=>{s.trim()&&f.mutate({content:s.trim()})};return reactExports.useEffect(()=>{var e;null==(e=o.current)||e.scrollIntoView({behavior:"smooth"})},[d]),r?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-[600px] bg-white dark:bg-gray-900 border rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"border-b p-4 flex items-center",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>n(null),className:"mr-3",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Users,{className:"w-8 h-8 text-blue-500 mr-3"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold",children:r.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600",children:"Committee Chat"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[0===x.length?jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-500 py-8",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),jsxRuntimeExports.jsx("p",{children:"No messages yet. Start the conversation!"})]}):x.map(e=>{var t;return jsxRuntimeExports.jsxs("div",{className:"flex space-x-3 group",children:[jsxRuntimeExports.jsx(Avatar$1,{className:"w-8 h-8",children:jsxRuntimeExports.jsx(AvatarFallback,{className:"bg-gray-500 text-white text-xs",children:(null==(t=e.sender)?void 0:t.split(" ").map(e=>e[0]).join("").slice(0,2))||"TM"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-sm",children:e.sender}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:e.timestamp&&!isNaN(new Date(e.timestamp).getTime())?new Date(e.timestamp).toLocaleTimeString():"Just now"})]}),e.sender===c()&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>h.mutate(e.id),className:"opacity-0 group-hover:opacity-100 transition-opacity h-6 w-6 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",disabled:h.isPending,children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-3",children:jsxRuntimeExports.jsx("p",{className:"text-sm",children:e.content})}),jsxRuntimeExports.jsx("div",{className:"flex items-center mt-1 space-x-2",children:jsxRuntimeExports.jsx(MessageLikeButton,{messageId:e.id})})]})]},e.id)}),jsxRuntimeExports.jsx("div",{ref:o})]})}),jsxRuntimeExports.jsxs("div",{className:"border-t p-4 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Posting as:"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-gray-800",children:c()})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx(Input,{value:s,onChange:e=>i(e.target.value),placeholder:`Message ${r.name}...`,onKeyPress:e=>"Enter"===e.key&&g(),disabled:f.isPending}),jsxRuntimeExports.jsx(Button,{onClick:g,disabled:!s.trim()||f.isPending,children:jsxRuntimeExports.jsx(Send$c,{className:"w-4 h-4"})})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center",children:[jsxRuntimeExports.jsx(Users,{className:"w-6 h-6 mr-2"}),"Committee Chat"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:committees.map(e=>jsxRuntimeExports.jsx("div",{onClick:()=>n(e),className:"p-6 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[jsxRuntimeExports.jsx(Users,{className:"w-8 h-8 text-blue-500 mr-3"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold",children:e.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]})]})},e.id))})]})}function getDefaultPermissionsForRole(e){switch(e){case USER_ROLES.SUPER_ADMIN:return Object.values(PERMISSIONS);case USER_ROLES.ADMIN:return Object.values(PERMISSIONS).filter(e=>e!==PERMISSIONS.MODERATE_MESSAGES);case USER_ROLES.COMMITTEE_MEMBER:return[PERMISSIONS.ACCESS_DIRECTORY,PERMISSIONS.ACCESS_COLLECTIONS,PERMISSIONS.ACCESS_CHAT,PERMISSIONS.ACCESS_MESSAGES,PERMISSIONS.ACCESS_TOOLKIT,PERMISSIONS.ACCESS_MEETINGS,PERMISSIONS.ACCESS_ANALYTICS,PERMISSIONS.ACCESS_REPORTS,PERMISSIONS.ACCESS_ROLE_DEMO,PERMISSIONS.ACCESS_SUGGESTIONS,PERMISSIONS.ACCESS_SANDWICH_DATA,PERMISSIONS.ACCESS_GOVERNANCE,PERMISSIONS.ACCESS_PROJECTS,PERMISSIONS.GENERAL_CHAT,PERMISSIONS.COMMITTEE_CHAT,PERMISSIONS.EXPORT_DATA,PERMISSIONS.CREATE_SUGGESTIONS];case USER_ROLES.HOST:return[PERMISSIONS.ACCESS_DIRECTORY,PERMISSIONS.ACCESS_COLLECTIONS,PERMISSIONS.ACCESS_CHAT,PERMISSIONS.ACCESS_MESSAGES,PERMISSIONS.ACCESS_TOOLKIT,PERMISSIONS.ACCESS_REPORTS,PERMISSIONS.ACCESS_PROJECTS,PERMISSIONS.ACCESS_SUGGESTIONS,PERMISSIONS.ACCESS_SANDWICH_DATA,PERMISSIONS.GENERAL_CHAT,PERMISSIONS.HOST_CHAT,PERMISSIONS.CREATE_COLLECTIONS,PERMISSIONS.CREATE_PROJECTS,PERMISSIONS.CREATE_SUGGESTIONS];case USER_ROLES.DRIVER:return[PERMISSIONS.ACCESS_DIRECTORY,PERMISSIONS.ACCESS_COLLECTIONS,PERMISSIONS.ACCESS_CHAT,PERMISSIONS.ACCESS_MESSAGES,PERMISSIONS.ACCESS_TOOLKIT,PERMISSIONS.ACCESS_REPORTS,PERMISSIONS.ACCESS_PROJECTS,PERMISSIONS.ACCESS_SUGGESTIONS,PERMISSIONS.ACCESS_SANDWICH_DATA,PERMISSIONS.GENERAL_CHAT,PERMISSIONS.DRIVER_CHAT,PERMISSIONS.CREATE_SUGGESTIONS];case USER_ROLES.VOLUNTEER:return[PERMISSIONS.ACCESS_COLLECTIONS,PERMISSIONS.ACCESS_CHAT,PERMISSIONS.ACCESS_MESSAGES,PERMISSIONS.ACCESS_TOOLKIT,PERMISSIONS.ACCESS_REPORTS,PERMISSIONS.ACCESS_PROJECTS,PERMISSIONS.ACCESS_SUGGESTIONS,PERMISSIONS.GENERAL_CHAT,PERMISSIONS.CREATE_COLLECTIONS,PERMISSIONS.CREATE_PROJECTS,PERMISSIONS.CREATE_SUGGESTIONS];case USER_ROLES.RECIPIENT:return[PERMISSIONS.ACCESS_COLLECTIONS,PERMISSIONS.ACCESS_CHAT,PERMISSIONS.ACCESS_MESSAGES,PERMISSIONS.ACCESS_SUGGESTIONS,PERMISSIONS.GENERAL_CHAT,PERMISSIONS.RECIPIENT_CHAT,PERMISSIONS.CREATE_SUGGESTIONS];case USER_ROLES.VIEWER:return[PERMISSIONS.ACCESS_DIRECTORY,PERMISSIONS.ACCESS_COLLECTIONS,PERMISSIONS.ACCESS_MESSAGES,PERMISSIONS.ACCESS_TOOLKIT,PERMISSIONS.ACCESS_REPORTS,PERMISSIONS.ACCESS_PROJECTS,PERMISSIONS.ACCESS_SUGGESTIONS,PERMISSIONS.ACCESS_SANDWICH_DATA,PERMISSIONS.CREATE_SUGGESTIONS];case USER_ROLES.WORK_LOGGER:return[PERMISSIONS.ACCESS_DIRECTORY,PERMISSIONS.ACCESS_COLLECTIONS,PERMISSIONS.ACCESS_CHAT,PERMISSIONS.ACCESS_MESSAGES,PERMISSIONS.ACCESS_TOOLKIT,PERMISSIONS.ACCESS_REPORTS,PERMISSIONS.ACCESS_PROJECTS,PERMISSIONS.GENERAL_CHAT,"log_work"];default:return[]}}function hasPermission(e,t){return!(!e||!e.permissions)&&e.permissions.includes(t)}function canEditCollection(e,t){return!(!e||!e.permissions)&&(!("super_admin"!==e.role&&!e.permissions.includes(PERMISSIONS.EDIT_ALL_COLLECTIONS))||!(!e.permissions.includes(PERMISSIONS.CREATE_COLLECTIONS)||(null==t?void 0:t.createdBy)!==e.id&&(null==t?void 0:t.created_by)!==e.id))}function canDeleteCollection(e,t){return!(!e||!e.permissions)&&(!("super_admin"!==e.role&&!e.permissions.includes(PERMISSIONS.DELETE_ALL_COLLECTIONS))||!(!e.permissions.includes(PERMISSIONS.CREATE_COLLECTIONS)||(null==t?void 0:t.createdBy)!==e.id&&(null==t?void 0:t.created_by)!==e.id))}function canEditProject(e,t){if(!e||!e.permissions)return!1;if("super_admin"===e.role||e.permissions.includes(PERMISSIONS.EDIT_ALL_PROJECTS))return!0;if(e.permissions.includes(PERMISSIONS.CREATE_PROJECTS)&&((null==t?void 0:t.createdBy)===e.id||(null==t?void 0:t.created_by)===e.id))return!0;if(e.permissions.includes(PERMISSIONS.CREATE_PROJECTS)){if((null==t?void 0:t.assigneeIds)&&Array.isArray(t.assigneeIds)&&t.assigneeIds.includes(e.id))return!0;if((null==t?void 0:t.assigneeId)===e.id)return!0;if(null==t?void 0:t.assigneeName){const r=e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.email;if(t.assigneeName===r||t.assigneeName===e.email)return!0}}return!1}function getRoleDisplayName(e){switch(e){case USER_ROLES.SUPER_ADMIN:return"Super Administrator";case USER_ROLES.ADMIN:return"Administrator";case USER_ROLES.COMMITTEE_MEMBER:return"Committee Member";case USER_ROLES.HOST:return"Host Location";case USER_ROLES.DRIVER:return"Delivery Driver";case USER_ROLES.VOLUNTEER:return"Volunteer";case USER_ROLES.RECIPIENT:return"Recipient Organization";case USER_ROLES.VIEWER:return"Viewer";case USER_ROLES.WORK_LOGGER:return"Work Logger";default:return e.charAt(0).toUpperCase()+e.slice(1).replace("_"," ")}}function DocumentPreviewModal({isOpen:e,onClose:t,documentPath:r,documentName:n,documentType:s}){const[i,o]=reactExports.useState(!0),a=()=>{const e=document.createElement("a");e.href=r,e.download=n,document.body.appendChild(e),e.click(),document.body.removeChild(e)},l=()=>{window.open(r,"_blank")};return jsxRuntimeExports.jsx(Dialog,{open:e,onOpenChange:t,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-4xl max-h-[90vh] p-0",children:[jsxRuntimeExports.jsx(DialogHeader,{className:"px-6 py-4 border-b border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-gray-600"}),jsxRuntimeExports.jsx(DialogTitle,{className:"text-lg font-semibold text-gray-900",children:n})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:a,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Download"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:l,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"h-4 w-4"}),"New Tab"]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:t,className:"p-2",children:jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 overflow-auto",style:{maxHeight:"calc(90vh - 100px)"},children:[i&&"pdf"===(null==s?void 0:s.toLowerCase())&&jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(FileText,{className:"w-12 h-12 text-gray-400 mx-auto mb-4 animate-pulse"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Loading document..."})]})}),(()=>{switch(null==s?void 0:s.toLowerCase()){case"pdf":default:return jsxRuntimeExports.jsx("iframe",{src:r,className:"w-full h-full border-0 rounded-lg",onLoad:()=>o(!1),title:n,style:{minHeight:"600px"}});case"docx":return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-96 p-8 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx(FileText,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-2",children:n}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Word documents require download to view. Click the download button to save the file to your device."})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:a,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Download Document"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:l,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Open in New Tab"]})]})]});case"xlsx":return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-96 p-8 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx(FileText,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-2",children:n}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Excel files require download to view. Click the download button to save the file to your device."})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:a,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Download Document"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:l,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Open in New Tab"]})]})]})}})()]})]})})}function clamp$1(e,[t,r]){return Math.min(r,Math.max(t,e))}function usePrevious(e){const t=reactExports.useRef({value:e,previous:e});return reactExports.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function shouldShowPlaceholder(e){return""===e||void 0===e}function useTypeaheadSearch(e){const t=useCallbackRef(e),r=reactExports.useRef(""),n=reactExports.useRef(0),s=reactExports.useCallback(e=>{const s=r.current+e;t(s),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(s)},[t]),i=reactExports.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function findNextItem(e,t,r){const n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let i=wrapArray(e,Math.max(s,0));1===n.length&&(i=i.filter(e=>e!==r));const o=i.find(e=>e.textValue.toLowerCase().startsWith(n.toLowerCase()));return o!==r?o:void 0}function wrapArray(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function CompactCollectionForm({onSuccess:e}){const t=new Date,r=new Date(t.getTime()-6e4*t.getTimezoneOffset()),[n,s]=reactExports.useState(r.toISOString().split("T")[0]),[i,o]=reactExports.useState(""),[a,l]=reactExports.useState(0),[c,u]=reactExports.useState([]),[d,p]=reactExports.useState(""),[m,x]=reactExports.useState(0),{toast:f}=useToast(),h=useQueryClient(),{data:g=[]}=useQuery({queryKey:["/api/hosts"]}),y=g.filter(e=>"active"===e.status),j=useMutation({mutationFn:async e=>{const t=await fetch("/api/sandwich-collections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to submit");return t.json()},onSuccess:()=>{f({title:"Collection submitted successfully!"}),h.invalidateQueries({queryKey:["/api/sandwich-collections"]}),null==e||e(),l(0),u([]),o("")},onError:()=>{f({title:"Failed to submit collection",variant:"destructive"})}}),b=a+c.reduce((e,t)=>e+t.count,0);console.log("Calculation Debug:",{individualCount:a,groupCollections:c,groupTotal:c.reduce((e,t)=>e+t.count,0),totalSandwiches:b});return jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs("div",{className:"max-w-sm mx-auto bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-[#236383] to-[#007E8C] text-white text-center py-4 px-4",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl md:text-lg font-semibold mb-1",children:"Submit Collection"}),jsxRuntimeExports.jsx("p",{className:"text-lg md:text-base opacity-90",children:"Record a sandwich collection log"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[jsxRuntimeExports.jsx("label",{className:"text-base md:text-sm font-medium text-[#236383]",children:"Date"}),jsxRuntimeExports.jsxs(Tooltip$1,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{children:jsxRuntimeExports.jsx(CircleHelp,{className:"h-5 w-5 md:h-4 md:w-4 text-gray-400"})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Enter the Wednesday on which you collected the sandwiches"})})]})]}),jsxRuntimeExports.jsx(Input,{type:"date",value:n,onChange:e=>s(e.target.value),className:"h-12 md:h-10 text-lg md:text-base"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[jsxRuntimeExports.jsx("label",{className:"text-base md:text-sm font-medium text-[#236383]",children:"Location"}),jsxRuntimeExports.jsxs(Tooltip$1,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{children:jsxRuntimeExports.jsx(CircleHelp,{className:"h-5 w-5 md:h-4 md:w-4 text-gray-400"})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Select the location where you collected the sandwiches"})})]})]}),jsxRuntimeExports.jsxs(Select,{value:i,onValueChange:o,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-12 md:h-10 text-lg md:text-base",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Choose location..."})}),jsxRuntimeExports.jsx(SelectContent,{children:y.map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.name,children:e.name},e.id))})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[jsxRuntimeExports.jsx("label",{className:"text-base md:text-sm font-medium text-[#236383]",children:"Individual Sandwiches"}),jsxRuntimeExports.jsxs(Tooltip$1,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{children:jsxRuntimeExports.jsx(CircleHelp,{className:"h-5 w-5 md:h-4 md:w-4 text-gray-400"})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Please subtract sandwiches made by a group from your total count and report those along with the name of each group in the section below."})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx(Input,{type:"number",value:a,onChange:e=>{const t=parseInt(e.target.value)||0;l(t)},className:"h-12 md:h-10 text-lg md:text-base flex-1",placeholder:"0"}),jsxRuntimeExports.jsxs(Tooltip$1,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",className:"h-10 md:h-8 px-3 md:px-2",children:jsxRuntimeExports.jsx(Calculator,{className:"h-4 w-4 md:h-3 md:w-3"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Need help counting? Use this calculator"})})]})]}),jsxRuntimeExports.jsx("p",{className:"text-base md:text-sm text-gray-600 mt-1",children:"Don't include group totals"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("label",{className:"text-base md:text-sm font-medium text-[#236383]",children:"Group Collections"}),jsxRuntimeExports.jsxs(Tooltip$1,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{children:jsxRuntimeExports.jsx(CircleHelp,{className:"h-5 w-5 md:h-4 md:w-4 text-gray-400"})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"If any groups brought sandwiches to your location this week, do not include their # in your individual sandwiches count. Instead log them here, enter the name of each group and the # of sandwiches they brought."})})]})]}),jsxRuntimeExports.jsxs(Tooltip$1,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{onClick:()=>{d&&m>0&&(u([...c,{name:d,count:Number(m)}]),p(""),x(0))},size:"sm",className:"h-5 w-5 p-0 bg-[#47B3CB] hover:bg-[#236383] rounded-md shadow-sm",children:jsxRuntimeExports.jsx(Plus,{className:"h-2 w-2"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Click to add the group you entered above"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 mb-3",children:[jsxRuntimeExports.jsx(Input,{placeholder:"e.g. 'Smith Family'",value:d,onChange:e=>p(e.target.value),className:"h-12 md:h-10 text-lg md:text-base"}),jsxRuntimeExports.jsx(Input,{type:"number",placeholder:"Enter count (e.g. 25)",value:m||"",onChange:e=>{const t=parseInt(e.target.value)||0;x(t)},className:"h-12 md:h-10 text-lg md:text-base"})]}),0===c.length?jsxRuntimeExports.jsx("p",{className:"text-lg md:text-base text-gray-500 italic text-center py-2",children:"No groups added"}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:c.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200 shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"text-lg md:text-base font-medium text-[#236383] mb-1",children:e.name}),jsxRuntimeExports.jsx("div",{className:"text-3xl md:text-2xl font-bold text-gray-800",children:e.count})]},t))})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{if(!i)return void f({title:"Please select a location",variant:"destructive"});y.find(e=>e.name===i);const e={collectionDate:n,hostName:i,individualSandwiches:a};c.length>0&&(e.group1Name=c[0].name,e.group1Count=c[0].count,c.length>1&&(e.group2Name=c[1].name,e.group2Count=c[1].count)),j.mutate(e)},disabled:j.isPending,className:"flex-1 h-14 md:h-12 bg-gradient-to-r from-[#FBAD3F] to-[#e89b2e] hover:from-[#e89b2e] hover:to-[#FBAD3F] text-white font-semibold text-xl md:text-lg",children:j.isPending?"Saving...":"Save My Collection"}),jsxRuntimeExports.jsxs(Tooltip$1,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{children:jsxRuntimeExports.jsx(CircleHelp,{className:"h-6 w-6 md:h-4 md:w-4 text-gray-400"})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Click to save your sandwich count. You can always edit or delete it after saving or add another entry for more sandwiches/more groups."})})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-lg md:text-base font-medium text-[#236383]",children:"Total Sandwiches:"}),jsxRuntimeExports.jsx("span",{className:"text-3xl md:text-2xl font-bold text-[#FBAD3F]",children:b})]})})]})]})})}function AnimatedCounter({value:e,duration:t=2e3,className:r="",prefix:n="",suffix:s=""}){const[i,o]=reactExports.useState(0),[a,l]=reactExports.useState(!1),c="string"==typeof e?parseFloat(e.replace(/,/g,""))||0:e;reactExports.useEffect(()=>{if(l(!0),0===c)return void o(0);const e=Date.now(),r=c,n=()=>{const s=Date.now()-e,i=Math.min(s/t,1),a=1-Math.pow(1-i,4),l=0+(r-0)*a;o(Math.floor(l)),i<1?requestAnimationFrame(n):o(r)},s=setTimeout(()=>{requestAnimationFrame(n)},100);return()=>clearTimeout(s)},[c,t]);const u=i.toLocaleString();return jsxRuntimeExports.jsxs("span",{className:`${r} ${a?"animate-count-up":"opacity-0"}`,children:[n,u,s]})}function DarkModeToggle(){const[e,t]=reactExports.useState(!1);reactExports.useEffect(()=>{const e=localStorage.getItem("theme"),r=window.matchMedia("(prefers-color-scheme: dark)").matches;"dark"===e||!e&&r?(t(!0),document.documentElement.classList.add("dark")):(t(!1),document.documentElement.classList.remove("dark"))},[]);return jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{const r=!e;t(r),r?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},className:"rounded-full w-10 h-10 p-0 bg-white/80 backdrop-blur-sm border-white/20 hover:bg-white/90 dark:bg-gray-800/80 dark:border-gray-700/50 dark:hover:bg-gray-800/90 transition-all duration-300",children:e?jsxRuntimeExports.jsx(Sun,{className:"h-4 w-4 text-yellow-500"}):jsxRuntimeExports.jsx(Moon,{className:"h-4 w-4 text-gray-600"})})}function DashboardOverview({onSectionChange:e}){var t,r,n;const{user:s}=useAuth(),i=useQueryClient(),[o,a]=reactExports.useState(!1),[l,c]=reactExports.useState({isOpen:!1,documentPath:"",documentName:"",documentType:""}),{data:u}=useQuery({queryKey:["/api/sandwich-collections/stats"],queryFn:async()=>{const e=await fetch("/api/sandwich-collections/stats");if(!e.ok)throw new Error("Failed to fetch stats");return e.json()},staleTime:0,refetchOnWindowFocus:!0}),d=(u&&(null==(t=u.completeTotalSandwiches)||t.toLocaleString()),"38,828"),p="~450,000",m="6,000-12,000",x="25,000-40,000";null==(r=null==u?void 0:u.individualSandwiches)||r.toLocaleString(),u&&((u.completeTotalSandwiches||0)-(u.individualSandwiches||0)).toLocaleString(),null==(n=null==u?void 0:u.totalEntries)||n.toLocaleString();return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-4 z-50",children:jsxRuntimeExports.jsx(DarkModeToggle,{})}),jsxRuntimeExports.jsxs("div",{className:"space-y-8 pb-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl mx-4 mt-8 p-8 text-center shadow-[0_2px_4px_rgba(0,0,0,0.05)]",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("img",{src:tspLogo,alt:"The Sandwich Project",className:"w-[250px] md:w-[400px] mb-6 mx-auto"})}),jsxRuntimeExports.jsx("p",{className:"text-lg md:text-xl text-[#236383] font-medium",children:"Community Impact Through Coordinated Action"})]}),(hasPermission(s,PERMISSIONS.CREATE_COLLECTIONS)||hasPermission(s,PERMISSIONS.MANAGE_COLLECTIONS))&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl mx-4 p-6 shadow-[0_2px_4px_rgba(0,0,0,0.05)]",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-[#236383] mb-2",children:"Record Collection Data"}),o&&jsxRuntimeExports.jsx("p",{className:"text-gray-700",children:"Submit your sandwich contributions to help our community"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[jsxRuntimeExports.jsx(Button,{className:"bg-[#FBAD3F] hover:bg-[#e09a36] text-white font-medium py-4 px-8 rounded-lg transition-colors !text-lg sm:!text-sm min-h-[56px] sm:min-h-[40px]",onClick:()=>a(!o),children:o?"Hide Form":"Enter New Collection Data"}),jsxRuntimeExports.jsx(Button,{className:"bg-white border border-[#47B3CB] text-[#47B3CB] hover:bg-[#47B3CB] hover:text-white font-medium py-4 px-8 rounded-lg transition-colors shadow-sm !text-lg sm:!text-sm min-h-[56px] sm:min-h-[40px]",onClick:()=>null==e?void 0:e("collections"),children:"View Collection History"})]})]}),o&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(CompactCollectionForm,{onSuccess:()=>{a(!1),i.invalidateQueries({queryKey:["/api/sandwich-collections"]}),i.invalidateQueries({queryKey:["/api/sandwich-collections/stats"]})}})})]}),jsxRuntimeExports.jsx("div",{className:"mx-4 mb-12",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-12 text-center shadow-[0_2px_4px_rgba(0,0,0,0.05)]",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("h1",{className:"text-7xl md:text-8xl font-black text-[#FBAD3F] tracking-tight",children:jsxRuntimeExports.jsx(AnimatedCounter,{value:(null==u?void 0:u.completeTotalSandwiches)||0})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-[#47B3CB] rounded-full"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-[#236383] font-medium",children:"Total sandwiches distributed since 2020"}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-[#47B3CB] rounded-full"})]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 border-t border-gray-200 pt-6 mt-6",children:"Real data from verified collection records"})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mx-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-[0_2px_4px_rgba(0,0,0,0.05)] hover:shadow-[0_4px_8px_rgba(0,0,0,0.1)] transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-[#236383] uppercase tracking-wide",children:"Individual Collections"}),jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-[#FBAD3F] rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})]}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-[#FBAD3F] mb-2",children:jsxRuntimeExports.jsx(AnimatedCounter,{value:(null==u?void 0:u.individualSandwiches)||0})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Personal contributions"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-[0_2px_4px_rgba(0,0,0,0.05)] hover:shadow-[0_4px_8px_rgba(0,0,0,0.1)] transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-[#236383] uppercase tracking-wide",children:"Group Collections"}),jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-[#47B3CB] rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})]}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-[#47B3CB] mb-2",children:jsxRuntimeExports.jsx(AnimatedCounter,{value:u?(u.completeTotalSandwiches||0)-(u.individualSandwiches||0):0})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Organization donations"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-[0_2px_4px_rgba(0,0,0,0.05)] hover:shadow-[0_4px_8px_rgba(0,0,0,0.1)] transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-[#236383] uppercase tracking-wide",children:"Collection Records"}),jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-[#236383] rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})]}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-[#236383] mb-2",children:jsxRuntimeExports.jsx(AnimatedCounter,{value:(null==u?void 0:u.totalEntries)||0})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Data submissions"})]})]}),jsxRuntimeExports.jsx("div",{className:"mx-4 mb-8",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-[0_2px_4px_rgba(0,0,0,0.05)]",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-[#236383] mb-6",children:"Operational Capacity"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-[#A31C41] mb-1",children:d}),jsxRuntimeExports.jsx("div",{className:"text-sm text-[#236383] font-medium",children:"Peak Week"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Nov 15, 2023"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-[#FBAD3F] mb-1",children:p}),jsxRuntimeExports.jsx("div",{className:"text-sm text-[#236383] font-medium",children:"Annual Target"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Current year"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-[#47B3CB] mb-1",children:m}),jsxRuntimeExports.jsx("div",{className:"text-sm text-[#236383] font-medium",children:"Weekly Baseline"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Regular ops"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-[#007E8C] mb-1",children:x}),jsxRuntimeExports.jsx("div",{className:"text-sm text-[#236383] font-medium",children:"Surge Capacity"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Peak mobilization"})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mx-4 mt-8",children:[jsxRuntimeExports.jsxs("button",{className:"bg-white rounded-xl p-4 text-left group cursor-pointer shadow-[0_2px_4px_rgba(0,0,0,0.05)] hover:shadow-[0_4px_8px_rgba(0,0,0,0.1)] transition-all",onClick:()=>null==e?void 0:e("collections"),children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-[#47B3CB] rounded-lg flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:jsxRuntimeExports.jsx(ChartColumn,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-[#236383]",children:"Collections"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"View all data"})]}),jsxRuntimeExports.jsxs("button",{className:"bg-white rounded-xl p-4 text-left group cursor-pointer shadow-[0_2px_4px_rgba(0,0,0,0.05)] hover:shadow-[0_4px_8px_rgba(0,0,0,0.1)] transition-all",onClick:()=>null==e?void 0:e("analytics"),children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-[#FBAD3F] rounded-lg flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-[#236383]",children:"Analytics"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Deep insights"})]}),jsxRuntimeExports.jsxs("button",{className:"bg-white rounded-xl p-4 text-left group cursor-pointer shadow-[0_2px_4px_rgba(0,0,0,0.05)] hover:shadow-[0_4px_8px_rgba(0,0,0,0.1)] transition-all",onClick:()=>null==e?void 0:e("phone-directory"),children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-[#007E8C] rounded-lg flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:jsxRuntimeExports.jsx(Users,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-[#236383]",children:"Directory"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Contact info"})]}),jsxRuntimeExports.jsxs("button",{className:"bg-white rounded-xl p-4 text-left group cursor-pointer shadow-[0_2px_4px_rgba(0,0,0,0.05)] hover:shadow-[0_4px_8px_rgba(0,0,0,0.1)] transition-all",onClick:()=>null==e?void 0:e("messages"),children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-[#A31C41] rounded-lg flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-[#236383]",children:"Messages"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Communication"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl mx-4 mt-8 p-6 shadow-[0_2px_4px_rgba(0,0,0,0.05)]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-[#FBAD3F] rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-[#236383]",children:"Important Documents"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Key organizational resources"})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[{title:"Key Findings: Peak Collection Weeks",description:"Comprehensive analysis of peak performance and organizational growth",category:"Strategy",path:"/attached_assets/Key Findings_ Peak Sandwich Collection Weeks_1753498455636.pdf"},{title:"Food Safety Guidelines",description:"Essential safety protocols for volunteers",category:"Operations",path:"/attached_assets/20230525-TSP-Food Safety Volunteers_1749341933308.pdf"},{title:"Volunteer Driver Agreement",description:"Required agreement form for volunteer drivers",category:"Forms",path:"/attached_assets/TSP Volunteer Driver Agreement (1).pdf"},{title:"Community Service Hours Form",description:"Form for tracking and documenting community service hours",category:"Forms",path:"/attached_assets/TSP COMMUNITY SERVICE HOURS (1) (1) (1).pdf"}].map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 group hover:bg-gray-100 transition-colors cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-[#47B3CB] rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4 text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-gray-600 bg-white px-2 py-0.5 rounded",children:e.category})]}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-sm text-[#236383] mb-1 group-hover:text-[#FBAD3F] transition-colors line-clamp-2",children:e.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-1",children:e.description}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsxs(Button,{size:"sm",className:"bg-[#47B3CB] hover:bg-[#3a9bb4] text-white text-xs px-2 py-1 h-7 flex-1",onClick:()=>{return t=e.path,r=e.title,void c({isOpen:!0,documentPath:t,documentName:r,documentType:"pdf"});var t,r},children:[jsxRuntimeExports.jsx(Eye,{className:"w-3 h-3 mr-1"}),"View"]}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",className:"border-gray-300 text-gray-600 hover:bg-gray-50 text-xs px-2 py-1 h-7",onClick:()=>window.open(e.path,"_blank"),children:jsxRuntimeExports.jsx(ExternalLink,{className:"w-3 h-3"})})]})]},t))})]}),jsxRuntimeExports.jsx("div",{className:"mx-4 mt-8",children:jsxRuntimeExports.jsx(HelpBubble$1,{title:"Dashboard Overview",content:"This dashboard shows your impact at a glance! These numbers represent real meals provided to community members in your area. Use the forms above to submit new collection data or browse documents for guidance.",character:"sandy",position:"top",trigger:"hover",children:jsxRuntimeExports.jsx("div",{className:"text-center text-sm text-gray-500 cursor-help",children:"Need help? Hover here for guidance"})})})]}),jsxRuntimeExports.jsx(DocumentPreviewModal,{isOpen:l.isOpen,onClose:()=>{c({isOpen:!1,documentPath:"",documentName:"",documentType:""})},documentPath:l.documentPath,documentName:l.documentName,documentType:l.documentType})]})}function CheckboxProvider(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=e,[p,m]=useControllableState({prop:r,defaultProp:s??!1,onChange:l,caller:CHECKBOX_NAME}),[x,f]=reactExports.useState(null),[h,g]=reactExports.useState(null),y=reactExports.useRef(!1),j=!x||(!!o||!!x.closest("form")),b={checked:p,disabled:i,setChecked:m,control:x,setControl:f,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:!isIndeterminate(s)&&s,isFormControl:j,bubbleInput:h,setBubbleInput:g};return jsxRuntimeExports.jsx(CheckboxProviderImpl,{scope:t,...b,children:isFunction$6(d)?d(b):n})}function isFunction$6(e){return"function"==typeof e}function isIndeterminate(e){return"indeterminate"===e}function getState$1(e){return isIndeterminate(e)?"indeterminate":e?"checked":"unchecked"}function defaultGetValueLabel(e,t){return`${Math.round(e/t*100)}%`}function getProgressState(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function isNumber$5(e){return"number"==typeof e}function isValidMaxNumber(e){return isNumber$5(e)&&!isNaN(e)&&e>0}function isValidValueNumber(e,t){return isNumber$5(e)&&!isNaN(e)&&e<=t&&e>=0}function getInvalidMaxError(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DEFAULT_MAX}\`.`}function getInvalidValueError(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or ${DEFAULT_MAX} if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}function BulkDataManager({onImportCSV:e,onExportCSV:t,onCheckDuplicates:r,onCleanOGDuplicates:n}={}){var s,i,o;const{toast:a}=useToast(),l=useQueryClient(),{user:c}=useAuth(),[u,d]=reactExports.useState("overview"),[p,m]=reactExports.useState(null),[x,f]=reactExports.useState(!1),h=hasPermission(c,PERMISSIONS.IMPORT_DATA),g=hasPermission(c,PERMISSIONS.EXPORT_DATA),{data:y,isLoading:j}=useQuery({queryKey:["/api/collection-stats"],refetchInterval:12e4}),{data:b,isLoading:v}=useQuery({queryKey:["/api/host-mapping-stats"],refetchInterval:12e4}),{data:E,isLoading:R}=useQuery({queryKey:["/api/collections-by-host",p],queryFn:async()=>{if(!p)return[];const e=await fetch(`/api/collections-by-host/${encodeURIComponent(p)}`);if(!e.ok)throw new Error("Failed to fetch host collections");return e.json()},enabled:!!p}),S=useMutation({mutationFn:async()=>(await apiRequest("POST","/api/bulk-map-hosts",{})).json(),onSuccess:e=>{l.invalidateQueries({queryKey:["/api/collection-stats"]}),l.invalidateQueries({queryKey:["/api/host-mapping-stats"]}),l.invalidateQueries({queryKey:["/api/sandwich-collections"]}),a({title:"Bulk mapping completed",description:`Updated ${e.updatedRecords} collection records`})},onError:e=>{a({title:"Mapping failed",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}}),w=useMutation({mutationFn:async()=>await apiRequest("PATCH","/api/sandwich-collections/fix-data-corruption",{}),onSuccess:e=>{a({title:"Data Issues Fixed",description:`Successfully fixed ${e.fixedCount} data corruption issues out of ${e.totalChecked} records checked.`}),l.invalidateQueries({queryKey:["/api/collection-stats"]}),l.invalidateQueries({queryKey:["/api/sandwich-collections"]})},onError:e=>{console.error("Data fix failed:",e),a({title:"Fix Failed",description:"There was an error fixing data issues. Please try again.",variant:"destructive"})}}),$=y?Math.round(y.mappedRecords/y.totalRecords*100):0;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Data Management Center"}),jsxRuntimeExports.jsx("p",{className:"text-slate-600",children:"Monitor and manage your collection data import and mapping"})]}),jsxRuntimeExports.jsxs(Tabs,{value:u,onValueChange:d,children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-3",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"overview",children:"Overview"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"mapping",children:"Host Mapping"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"actions",children:"Bulk Actions"})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"overview",className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium",children:"Total Collections"}),jsxRuntimeExports.jsx(Database,{className:"h-4 w-4 text-muted-foreground"})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:j?"...":(null==(s=null==y?void 0:y.totalRecords)?void 0:s.toLocaleString())||"0"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Historical sandwich collection records"})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium",children:"Mapped Records"}),jsxRuntimeExports.jsx(MapPin,{className:"h-4 w-4 text-muted-foreground"})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:j?"...":(null==(i=null==y?void 0:y.mappedRecords)?void 0:i.toLocaleString())||"0"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Connected to host locations"})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium",children:"Unmapped Records"}),jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4 text-muted-foreground"})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-amber-600",children:j?"...":(null==(o=null==y?void 0:y.unmappedRecords)?void 0:o.toLocaleString())||"0"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending host assignment"})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium",children:"Completion"}),jsxRuntimeExports.jsx(ChartColumn,{className:"h-4 w-4 text-muted-foreground"})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold",children:[$,"%"]}),jsxRuntimeExports.jsx(Progress,{value:$,className:"mt-2"})]})]})]}),y&&y.totalRecords>0&&jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsx(CardTitle,{children:"Import Progress"})}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{children:"Data Import & Mapping Progress"}),jsxRuntimeExports.jsxs("span",{children:[y.mappedRecords," of ",y.totalRecords," records"]})]}),jsxRuntimeExports.jsx(Progress,{value:$,className:"h-2"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx("span",{children:"Started"}),jsxRuntimeExports.jsxs("span",{children:[$,"% Complete"]}),jsxRuntimeExports.jsx("span",{children:"Target: 100%"})]})]})})]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"mapping",className:"space-y-4",children:jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Host Distribution"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Collection records grouped by host location"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:v?jsxRuntimeExports.jsx("div",{className:"text-center py-4",children:"Loading mapping statistics..."}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:null==b?void 0:b.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{return t=e.hostName,m(t),void f(!0);var t},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--tsp-teal)"}}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:e.hostName}),e.mapped&&jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-green-600",children:"Mapped"})]}),jsxRuntimeExports.jsxs(Badge,{variant:"secondary",children:[e.count.toLocaleString()," records"]})]},t))})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"actions",className:"space-y-4",children:jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Data Operations"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Import, export, and manage your collection data"})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-3",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Import Data"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload CSV files to add collection records"})]})}),jsxRuntimeExports.jsxs(Button,{onClick:e,disabled:!h,className:"w-full flex items-center space-x-2",variant:"outline",children:[jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Import CSV"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-3",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Export Data"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Download all collection records as CSV"})]})}),jsxRuntimeExports.jsxs(Button,{onClick:t,disabled:!g,className:"w-full flex items-center space-x-2",variant:"outline",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Export CSV"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-3",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Check Duplicates"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyze and identify duplicate entries"})]})}),jsxRuntimeExports.jsxs(Button,{onClick:r,className:"w-full flex items-center space-x-2",variant:"outline",children:[jsxRuntimeExports.jsx(Scan,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Check Duplicates"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-3",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Clean OG Duplicates"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Remove original sandwich project duplicates"})]})}),jsxRuntimeExports.jsxs(Button,{onClick:n,className:"w-full flex items-center space-x-2 bg-amber-50 border-amber-300 text-amber-800 hover:bg-amber-100",variant:"outline",children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:""}),jsxRuntimeExports.jsx("span",{children:"Clean OG Duplicates"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-3",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Fix Data Issues"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Fix duplicated totals and misplaced group data"})]})}),jsxRuntimeExports.jsx(Button,{onClick:()=>w.mutate(),disabled:w.isPending,className:"w-full flex items-center space-x-2 bg-blue-50 border-blue-300 text-blue-700 hover:bg-blue-100",variant:"outline",children:w.isPending?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4 animate-spin"}),jsxRuntimeExports.jsx("span",{children:"Fixing..."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Database,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Fix Data Issues"})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Run Host Mapping"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Map collection records to their appropriate host locations"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>S.mutate(),disabled:S.isPending,className:"flex items-center space-x-2",children:[S.isPending&&jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4 animate-spin"}),jsxRuntimeExports.jsx("span",{children:S.isPending?"Mapping...":"Run Mapping"})]})]})}),jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4 bg-blue-50",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx(Database,{className:"w-5 h-5 text-blue-600 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-blue-900",children:"Data Import Status"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Your CSV data import is running in the background. The system automatically maps new records as they're imported. You can manually trigger mapping above if needed."})]})]})})]})]})})]}),jsxRuntimeExports.jsx(Dialog,{open:x,onOpenChange:f,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>f(!1),className:"p-1",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs(DialogTitle,{children:["Records for ",p]})]})}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:R?jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:"Loading records..."}):jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[null==E?void 0:E.map((e,t)=>jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-600",children:"Date:"}),jsxRuntimeExports.jsx("div",{children:e.collectionDate})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-600",children:"Host:"}),jsxRuntimeExports.jsx("div",{children:e.hostName})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-600",children:"Individual:"}),jsxRuntimeExports.jsx("div",{children:e.individualSandwiches||0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-600",children:"Groups:"}),jsxRuntimeExports.jsx("div",{children:(e.group1Count||0)+(e.group2Count||0)})]}),e.notes&&jsxRuntimeExports.jsxs("div",{className:"col-span-2 md:col-span-4",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-600",children:"Notes:"}),jsxRuntimeExports.jsx("div",{className:"text-gray-700",children:e.notes})]})]})},e.id||t)),E&&0===E.length&&jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500",children:"No records found for this host"})]})})]})})]})}function SandwichCollectionForm({onSuccess:onSuccess}){const[date,setDate]=reactExports.useState((new Date).toISOString().split("T")[0]),[location,setLocation]=reactExports.useState(""),[customLocation,setCustomLocation]=reactExports.useState(""),[showCustomLocation,setShowCustomLocation]=reactExports.useState(!1),[individualCount,setIndividualCount]=reactExports.useState(""),[groups,setGroups]=reactExports.useState([]),[showCalculator,setShowCalculator]=reactExports.useState(!1),[calcDisplay,setCalcDisplay]=reactExports.useState(""),queryClient=useQueryClient(),{toast:toast}=useToast(),{data:hosts=[]}=useQuery({queryKey:["/api/hosts"],select:e=>e.filter(e=>"active"===e.status)}),createHostMutation=useMutation({mutationFn:async e=>{const t=await fetch("/api/hosts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,status:"active",email:"",phone:"",address:"",notes:`Created from collection form on ${(new Date).toLocaleDateString()}`})});if(!t.ok)throw new Error("Failed to create host");return t.json()},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/hosts"]})}}),submitMutation=useMutation({mutationFn:async e=>{const t=await fetch("/api/sandwich-collections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to submit collection");return t.json()},onSuccess:e=>{const t=(parseInt(individualCount)||0)+groups.reduce((e,t)=>e+(t.count||0),0);toast({title:"Collection Submitted Successfully! ",description:`Recorded ${t} sandwiches from ${location||customLocation} on ${new Date(date).toLocaleDateString()}. Thank you for your contribution!`,duration:5e3}),setDate((new Date).toISOString().split("T")[0]),setLocation(""),setCustomLocation(""),setShowCustomLocation(!1),setIndividualCount(""),setGroups([]),queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]}),queryClient.invalidateQueries({queryKey:["/api/sandwich-collections/stats"]}),onSuccess&&onSuccess()},onError:e=>{toast({title:"Submission Failed",description:"There was a problem submitting your collection. Please try again or contact support if the issue persists.",variant:"destructive",duration:7e3})}}),handleLocationChange=e=>{setLocation(e),setShowCustomLocation("other"===e),"other"!==e&&setCustomLocation("")},calculateTotal=()=>(parseInt(individualCount)||0)+groups.reduce((e,t)=>e+(parseInt(t.count)||0),0),addGroup=()=>{groups.length<2&&setGroups([...groups,{id:Date.now().toString(),name:"",count:0}])},removeGroup=e=>{setGroups(groups.filter(t=>t.id!==e))},handleCalcInput=value=>{if("="===value)try{const result=eval(calcDisplay);setCalcDisplay(result.toString())}catch{setCalcDisplay("Error")}else setCalcDisplay("C"===value?"":""===value?calcDisplay.slice(0,-1):calcDisplay+value)},useCalcResult=()=>{calcDisplay&&!isNaN(Number(calcDisplay))&&(setIndividualCount(calcDisplay),setShowCalculator(!1),setCalcDisplay(""))},handleSubmit=async()=>{var e,t,r,n;let s=location;if("other"===location&&customLocation.trim())try{await createHostMutation.mutateAsync(customLocation.trim()),s=customLocation.trim()}catch(a){return void console.error("Failed to create new host:",a)}const i=groups.filter(e=>e.name.trim()&&e.count>0),o={collectionDate:date,hostName:s,individualSandwiches:parseInt(individualCount)||0,group1Name:(null==(e=i[0])?void 0:e.name)||null,group1Count:(null==(t=i[0])?void 0:t.count)||null,group2Name:(null==(r=i[1])?void 0:r.name)||null,group2Count:(null==(n=i[1])?void 0:n.count)||null,submissionMethod:"web_form",createdBy:"web_user",createdByName:"Web Form User"};submitMutation.mutate(o)},containerStyle={background:"white",borderRadius:"8px",border:"1px solid #e2e8f0",overflow:"hidden"},accentBarStyle={width:"3px",height:"16px",background:"#FBAD3F",borderRadius:"2px",position:"absolute",left:0},headerStyle={background:"linear-gradient(135deg, #236383 0%, #007E8C 100%)",borderBottom:"1px solid #e2e8f0",padding:"8px 0",display:"flex",flexDirection:"column",gap:"4px",alignItems:"center",textAlign:"center"},headerLeftStyle={flex:1},h1Style={fontSize:"18px",fontWeight:"600",margin:0,marginBottom:"2px",color:"white",fontFamily:"Roboto, sans-serif"},headerPStyle={fontSize:"12px",fontWeight:"400",opacity:.9,margin:0,color:"white",fontFamily:"Roboto, sans-serif"},totalBadgeStyle={background:"linear-gradient(135deg, #FBAD3F 0%, #F7931E 100%)",borderRadius:"6px",padding:"6px 12px",textAlign:"center",minWidth:"70px",color:"white",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 1px 4px rgba(0,0,0,0.1)"},totalLabelStyle={fontSize:"11px",opacity:.9,marginBottom:"1px",fontWeight:"500"},totalNumberStyle={fontSize:"16px",fontWeight:"700"},formContainerStyle={padding:"0",background:"white"},formSectionStyle={background:"#f8fafc",borderRadius:"8px",padding:"8px",marginBottom:"8px",marginLeft:"8px",marginRight:"8px",border:"1px solid #e2e8f0"},sectionTitleStyle={fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",position:"relative",paddingLeft:"13px",fontFamily:"Roboto, sans-serif"},formRowStyle={display:"flex",flexDirection:"column",gap:"16px","@media (min-width: 768px)":{display:"grid",gridTemplateColumns:"160px 1fr",flexDirection:"row"}},formGroupStyle={display:"flex",flexDirection:"column",gap:"5px"},labelStyle={fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px",fontFamily:"Roboto, sans-serif"},inputStyle={height:"48px",padding:"0 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"18px",fontFamily:"Roboto, sans-serif",transition:"all 0.2s ease",background:"white",color:"#1f2937",width:"100%",boxSizing:"border-box"},individualInputStyle={...inputStyle,width:"120px",fontWeight:"600",color:"#236383",fontSize:"22px",textAlign:"center",minWidth:"120px"},selectStyle={...inputStyle,appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%23989393' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 16px center",paddingRight:"48px",cursor:"pointer"},groupsContainerStyle={background:"#ffffff",borderRadius:"8px",padding:"16px",border:"1px solid #e2e8f0",marginTop:"12px"},groupsHeaderStyle={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},groupItemStyle={display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},groupInputStyle={...inputStyle,height:"48px",padding:"0 16px",fontSize:"16px"},removeBtnStyle={width:"40px",height:"40px",background:"#FFE5E5",border:"none",borderRadius:"8px",color:"#E74C3C",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",transition:"all 0.2s ease",alignSelf:"flex-end"},addGroupBtnStyle={padding:"12px 20px",background:"transparent",border:"2px dashed #236383",borderRadius:"8px",color:"#236383",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"Roboto, sans-serif",minHeight:"48px"},submitSectionStyle={padding:"12px 0",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"center",background:"linear-gradient(135deg, #e1f3f7 0%, #cfe9f0 100%)"},submitBtnStyle={background:"linear-gradient(135deg, #FBAD3F 0%, #e89b2e 100%)",color:"white",border:"none",padding:"12px 32px",borderRadius:"8px",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"Roboto, sans-serif",boxShadow:"0 2px 4px rgba(251, 173, 63, 0.25)",minHeight:"44px",width:"100%",maxWidth:"280px"},helperTextStyle={fontSize:"14px",color:"#6b7280",marginTop:"4px",fontFamily:"Roboto, sans-serif"},customLocationInputStyle={...inputStyle,marginTop:"6px"},calculatorOverlayStyle={position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},calculatorStyle={background:"white",borderRadius:"8px",padding:"20px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)",width:"240px",fontFamily:"Roboto, sans-serif"},calcDisplayStyle={width:"100%",height:"40px",padding:"0 12px",border:"1px solid #E9E6E6",borderRadius:"4px",fontSize:"16px",textAlign:"right",marginBottom:"12px",background:"#f8f9fa"},calcButtonGridStyle={display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px",marginBottom:"12px"},calcButtonStyle={height:"36px",border:"1px solid #E9E6E6",borderRadius:"4px",background:"white",fontSize:"14px",cursor:"pointer",fontFamily:"Roboto, sans-serif"},calcActionButtonStyle={...calcButtonStyle,background:"#236383",color:"white",border:"1px solid #236383"},collapsedGroupSectionStyle={background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"6px",padding:"12px",textAlign:"center"},instructionTextStyle={fontSize:"16px",color:"#64748b",marginBottom:"8px",lineHeight:"1.4"},addGroupButtonStyle={...addGroupBtnStyle,marginRight:"8px"},calcButtonSmallStyle={padding:"4px 8px",background:"#f1f5f9",border:"1px solid #cbd5e1",borderRadius:"4px",color:"#475569",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"Roboto, sans-serif",display:"inline-flex",alignItems:"center",gap:"4px"},handleInputFocus=e=>{e.currentTarget.style.outline="none",e.currentTarget.style.borderColor="#236383"},handleInputBlur=e=>{e.currentTarget.style.borderColor="#E9E6E6"};return jsxRuntimeExports.jsxs("div",{style:containerStyle,children:[jsxRuntimeExports.jsxs("div",{style:headerStyle,children:[jsxRuntimeExports.jsxs("div",{style:headerLeftStyle,children:[jsxRuntimeExports.jsx("h1",{style:h1Style,children:"Submit Collection"}),jsxRuntimeExports.jsx("p",{style:headerPStyle,children:"Record today's sandwich distribution"})]}),jsxRuntimeExports.jsxs("div",{style:totalBadgeStyle,children:[jsxRuntimeExports.jsx("div",{style:totalLabelStyle,children:"Total"}),jsxRuntimeExports.jsx("div",{style:totalNumberStyle,children:calculateTotal()})]})]}),jsxRuntimeExports.jsxs("div",{style:formContainerStyle,children:[jsxRuntimeExports.jsxs("div",{style:formSectionStyle,children:[jsxRuntimeExports.jsxs("h3",{style:sectionTitleStyle,children:[jsxRuntimeExports.jsx("span",{style:accentBarStyle}),"Collection Details"]}),jsxRuntimeExports.jsxs("div",{style:formRowStyle,children:[jsxRuntimeExports.jsxs("div",{style:formGroupStyle,children:[jsxRuntimeExports.jsx("label",{htmlFor:"date",style:labelStyle,children:"Date"}),jsxRuntimeExports.jsx("input",{type:"date",id:"date",value:date,onChange:e=>setDate(e.target.value),style:inputStyle,onFocus:handleInputFocus,onBlur:handleInputBlur,required:!0})]}),jsxRuntimeExports.jsxs("div",{style:formGroupStyle,children:[jsxRuntimeExports.jsx("label",{htmlFor:"location",style:labelStyle,children:"Location"}),jsxRuntimeExports.jsxs("select",{id:"location",value:location,onChange:e=>handleLocationChange(e.target.value),style:selectStyle,onFocus:handleInputFocus,onBlur:handleInputBlur,required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select location"}),hosts.map(e=>jsxRuntimeExports.jsx("option",{value:e.name,children:e.name},e.id)),jsxRuntimeExports.jsx("option",{value:"other",children:"Other"})]})]})]}),showCustomLocation&&jsxRuntimeExports.jsxs("div",{style:formGroupStyle,children:[jsxRuntimeExports.jsx("label",{htmlFor:"custom-location",style:labelStyle,children:"New Location Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"custom-location",value:customLocation,onChange:e=>setCustomLocation(e.target.value),placeholder:"Enter new location name",style:customLocationInputStyle,onFocus:handleInputFocus,onBlur:handleInputBlur,required:showCustomLocation})]})]}),jsxRuntimeExports.jsxs("div",{style:formSectionStyle,children:[jsxRuntimeExports.jsxs("h3",{style:sectionTitleStyle,children:[jsxRuntimeExports.jsx("span",{style:accentBarStyle}),"Individual Sandwiches"]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",justifyContent:"center"},children:[jsxRuntimeExports.jsx("input",{type:"number",id:"individual-count",min:"0",placeholder:"0",value:individualCount,onChange:e=>setIndividualCount(e.target.value),style:individualInputStyle,onFocus:handleInputFocus,onBlur:handleInputBlur}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>setShowCalculator(!0),style:calcButtonSmallStyle,onMouseEnter:e=>{e.currentTarget.style.background="#e2e8f0"},onMouseLeave:e=>{e.currentTarget.style.background="#f1f5f9"},children:[jsxRuntimeExports.jsx(Calculator,{style:{width:"14px",height:"14px"}}),"Calculator"]})]}),jsxRuntimeExports.jsx("p",{style:helperTextStyle,children:"Count only individual sandwiches here (don't include group totals)"})]})]}),jsxRuntimeExports.jsx("div",{style:{...formSectionStyle,marginBottom:0},children:0===groups.length?jsxRuntimeExports.jsxs("div",{style:collapsedGroupSectionStyle,children:[jsxRuntimeExports.jsxs("p",{style:instructionTextStyle,children:[jsxRuntimeExports.jsx("strong",{children:"Group Collections:"})," If you collected sandwiches from groups/organizations, record their totals separately with their group name. Don't add these to your individual count above."]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:addGroup,disabled:groups.length>=2,style:{...addGroupButtonStyle,opacity:groups.length>=2?.5:1,cursor:groups.length>=2?"not-allowed":"pointer"},onMouseEnter:e=>{groups.length<2&&(e.currentTarget.style.borderColor="#236383",e.currentTarget.style.background="rgba(35, 99, 131, 0.05)")},onMouseLeave:e=>{groups.length<2&&(e.currentTarget.style.borderColor="#236383",e.currentTarget.style.background="transparent")},children:["+ Add Group ",groups.length>=2?"(Max 2)":""]})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:groupsHeaderStyle,children:[jsxRuntimeExports.jsxs("h3",{style:{...sectionTitleStyle,marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[jsxRuntimeExports.jsx("span",{style:accentBarStyle}),"Group Collections"]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:addGroup,disabled:groups.length>=2,style:{...addGroupBtnStyle,opacity:groups.length>=2?.5:1,cursor:groups.length>=2?"not-allowed":"pointer"},onMouseEnter:e=>{groups.length<2&&(e.currentTarget.style.borderColor="#236383",e.currentTarget.style.background="rgba(35, 99, 131, 0.05)")},onMouseLeave:e=>{groups.length<2&&(e.currentTarget.style.borderColor="#236383",e.currentTarget.style.background="transparent")},children:["+ Add Group ",groups.length>=2?"(Max 2)":""]})]}),jsxRuntimeExports.jsx("div",{style:groupsContainerStyle,children:jsxRuntimeExports.jsx("div",{children:groups.map((e,t)=>jsxRuntimeExports.jsxs("div",{style:groupItemStyle,children:[jsxRuntimeExports.jsx("label",{style:{...labelStyle,marginBottom:"4px"},children:"Group Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter group or organization name",value:e.name,onChange:e=>{const r=[...groups];r[t].name=e.target.value,setGroups(r)},style:groupInputStyle,onFocus:handleInputFocus,onBlur:handleInputBlur}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"8px"},children:[jsxRuntimeExports.jsxs("div",{style:{flex:1},children:[jsxRuntimeExports.jsx("label",{style:{...labelStyle,marginBottom:"4px"},children:"Sandwich Count"}),jsxRuntimeExports.jsx("input",{type:"number",placeholder:"0",min:"0",value:0===e.count?"":e.count,onChange:e=>{const r=[...groups],n=e.target.value;r[t].count=""===n||"0"===n?0:parseInt(n)||0,setGroups(r)},onFocus:e=>{"0"===e.target.value&&(e.target.value=""),handleInputFocus(e)},style:{...groupInputStyle,textAlign:"center",fontWeight:"600",color:"#236383",fontSize:"20px"},onBlur:handleInputBlur})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>removeGroup(e.id),style:{...removeBtnStyle,marginTop:"24px"},onMouseEnter:e=>{e.currentTarget.style.background="#E74C3C",e.currentTarget.style.color="white"},onMouseLeave:e=>{e.currentTarget.style.background="#FFE5E5",e.currentTarget.style.color="#E74C3C"},title:"Remove this group",children:""})]})]},e.id))})})]})})]}),jsxRuntimeExports.jsx("div",{style:submitSectionStyle,children:jsxRuntimeExports.jsx("button",{style:{...submitBtnStyle,opacity:submitMutation.isPending||createHostMutation.isPending?.6:1,cursor:submitMutation.isPending||createHostMutation.isPending?"not-allowed":"pointer"},onClick:handleSubmit,disabled:submitMutation.isPending||createHostMutation.isPending,onMouseEnter:e=>{submitMutation.isPending||createHostMutation.isPending||(e.currentTarget.style.background="#F39C12",e.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:e=>{submitMutation.isPending||createHostMutation.isPending||(e.currentTarget.style.background="#FBAD3F",e.currentTarget.style.transform="translateY(0)")},children:submitMutation.isPending||createHostMutation.isPending?"Submitting...":"Submit Collection"})}),showCalculator&&jsxRuntimeExports.jsx("div",{style:calculatorOverlayStyle,onClick:()=>setShowCalculator(!1),children:jsxRuntimeExports.jsxs("div",{style:calculatorStyle,onClick:e=>e.stopPropagation(),children:[jsxRuntimeExports.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"600",color:"#236383"},children:"Calculator Helper"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"13px",color:"#64748b",margin:"0 0 12px 0"},children:"Calculate your individual count (e.g., 150 - 25 - 30 = 95)"}),jsxRuntimeExports.jsx("input",{type:"text",value:calcDisplay,readOnly:!0,style:calcDisplayStyle,placeholder:"Enter calculation..."}),jsxRuntimeExports.jsxs("div",{style:calcButtonGridStyle,children:[jsxRuntimeExports.jsx("button",{style:calcActionButtonStyle,onClick:()=>handleCalcInput("C"),children:"C"}),jsxRuntimeExports.jsx("button",{style:calcActionButtonStyle,onClick:()=>handleCalcInput(""),children:""}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("/"),children:"/"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("*"),children:""}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("7"),children:"7"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("8"),children:"8"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("9"),children:"9"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("-"),children:"-"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("4"),children:"4"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("5"),children:"5"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("6"),children:"6"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("+"),children:"+"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("1"),children:"1"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("2"),children:"2"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("3"),children:"3"}),jsxRuntimeExports.jsx("button",{style:{...calcActionButtonStyle,gridRow:"span 2"},onClick:()=>handleCalcInput("="),children:"="}),jsxRuntimeExports.jsx("button",{style:{...calcButtonStyle,gridColumn:"span 2"},onClick:()=>handleCalcInput("0"),children:"0"}),jsxRuntimeExports.jsx("button",{style:calcButtonStyle,onClick:()=>handleCalcInput("."),children:"."})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{style:{flex:1,padding:"8px",background:"#FBAD3F",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},onClick:useCalcResult,children:"Use Result"}),jsxRuntimeExports.jsx("button",{style:{flex:1,padding:"8px",background:"#f8f9fa",color:"#6c757d",border:"1px solid #dee2e6",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},onClick:()=>setShowCalculator(!1),children:"Cancel"})]})]})})]})}function SandwichCollectionLog(){const{toast:e}=useToast(),{user:t}=useAuth(),r=reactExports.useRef(null),n=hasPermission(t,PERMISSIONS.CREATE_COLLECTIONS)||hasPermission(t,PERMISSIONS.MANAGE_COLLECTIONS),s=hasPermission(t,PERMISSIONS.EDIT_ALL_COLLECTIONS);hasPermission(t,PERMISSIONS.DELETE_ALL_COLLECTIONS);const i=hasPermission(t,PERMISSIONS.CREATE_COLLECTIONS)||hasPermission(t,PERMISSIONS.EDIT_ALL_COLLECTIONS),o=hasPermission(t,PERMISSIONS.CREATE_COLLECTIONS)||hasPermission(t,PERMISSIONS.DELETE_ALL_COLLECTIONS),[a,l]=reactExports.useState(null),[c,u]=reactExports.useState(!1),[d,p]=reactExports.useState(null),[m,x]=reactExports.useState(new Set),[f,h]=reactExports.useState(new Set),[g,y]=reactExports.useState(!1),[j,b]=reactExports.useState(!1),[v,E]=reactExports.useState({hostName:"",collectionDate:""}),[R,S]=reactExports.useState({hostName:"",collectionDateFrom:"",collectionDateTo:"",createdAtFrom:"",createdAtTo:""}),[w,$]=reactExports.useState({hostName:"",collectionDateFrom:"",collectionDateTo:"",createdAtFrom:"",createdAtTo:""}),[N,_]=reactExports.useState({field:"collectionDate",direction:"desc"}),[C,O]=reactExports.useState(!1),[T,P]=reactExports.useState(1),[A,k]=reactExports.useState(50),[I,D]=reactExports.useState({collectionDate:"",hostName:"",individualSandwiches:"",groupCollections:""}),[M,L]=reactExports.useState([]),[F,B]=reactExports.useState(!1),[U,H]=reactExports.useState(!1),[V,q]=reactExports.useState({collectionDate:"",hostName:"",individualSandwiches:"",groupCollections:""}),[W,G]=reactExports.useState([{id:Math.random().toString(36),groupName:"",sandwichCount:0}]),[z,K]=reactExports.useState(!1),Q=e=>(e.group1Count||0)+(e.group2Count||0),Y=e=>Number(e.individualSandwiches||0)+Q(e);reactExports.useEffect(()=>{const e=()=>{b(!0)};return window.addEventListener("openCollectionForm",e),()=>window.removeEventListener("openCollectionForm",e)},[]),reactExports.useEffect(()=>{const e=setTimeout(()=>{console.log("Setting debounced filters:",R),$(R)},500);return()=>clearTimeout(e)},[R]);const X=reactExports.useMemo(()=>C||Object.values(w).some(e=>e),[C,w]),J=reactExports.useMemo(()=>["/api/sandwich-collections",X?"all":T,X?"all":A,T,w,N],[X,T,A,w,N]),{data:Z,isLoading:ee}=useQuery({queryKey:J,queryFn:reactExports.useCallback(async()=>{if(X){console.log("Fetching all data for filtering with filters:",w);const{data:{session:e}}=await supabase.auth.getSession(),t={"Content-Type":"application/json"};(null==e?void 0:e.access_token)&&(t.Authorization=`Bearer ${e.access_token}`);const r=await fetch("/api/sandwich-collections?limit=10000",{headers:t,credentials:"include"});if(!r.ok)throw new Error("Failed to fetch collections");let n=(await r.json()).collections||[];if(console.log("Initial collections count:",n.length),w.hostName){const e=w.hostName.toLowerCase();n=n.filter(t=>{var r;return null==(r=t.hostName)?void 0:r.toLowerCase().includes(e)}),console.log(`Host name filter '${e}' applied: ${n.length} results`)}if(w.collectionDateFrom){const e=new Date(w.collectionDateFrom);n=n.filter(t=>new Date(t.collectionDate)>=e),console.log(`Date from filter '${w.collectionDateFrom}' applied: ${n.length} results`)}if(w.collectionDateTo){const e=new Date(w.collectionDateTo);e.setHours(23,59,59,999),n=n.filter(t=>new Date(t.collectionDate)<=e)}if(w.createdAtFrom){const e=new Date(w.createdAtFrom);n=n.filter(t=>t.submittedAt&&new Date(t.submittedAt)>=e)}if(w.createdAtTo){const e=new Date(w.createdAtTo);e.setHours(23,59,59,999),n=n.filter(t=>t.submittedAt&&new Date(t.submittedAt)<=e)}n.sort((e,t)=>{const r=e[N.field],n=t[N.field];if(r===n)return 0;if(null==r)return 1;if(null==n)return-1;const s=r<n?-1:1;return"asc"===N.direction?s:-s});const s=(T-1)*A,i=s+A,o=n.slice(s,i);return console.log("Pagination debug:",{currentPage:T,itemsPerPage:A,startIndex:s,endIndex:i,totalFiltered:n.length,resultCount:o.length}),{collections:o,pagination:{currentPage:T,totalPages:Math.ceil(n.length/A),totalItems:n.length,itemsPerPage:A}}}{const{data:{session:e}}=await supabase.auth.getSession(),t={"Content-Type":"application/json"};(null==e?void 0:e.access_token)&&(t.Authorization=`Bearer ${e.access_token}`);const r=`&sort=${N.field}&order=${N.direction}`,n=await fetch(`/api/sandwich-collections?page=${T}&limit=${A}${r}`,{headers:t,credentials:"include"});if(!n.ok)throw new Error("Failed to fetch collections");return n.json()}},[X,T,A,w,N])}),te=(null==Z?void 0:Z.collections)||[],re=null==Z?void 0:Z.pagination,ne=(null==re?void 0:re.totalItems)||(null==re?void 0:re.total)||0,se=(null==re?void 0:re.totalPages)||Math.ceil(ne/A)||1;(null==re?void 0:re.currentPage)||null==re||re.page,null==re||re.hasNext,null==re||re.hasPrev;const{data:ie=[]}=useQuery({queryKey:["/api/hosts"]}),{data:oe}=useQuery({queryKey:["/api/sandwich-collections/stats"],queryFn:async()=>{const{data:{session:e}}=await supabase.auth.getSession(),t={"Content-Type":"application/json"};(null==e?void 0:e.access_token)&&(t.Authorization=`Bearer ${e.access_token}`);const r=await fetch("/api/sandwich-collections/stats",{headers:t,credentials:"include"});if(!r.ok)throw new Error("Failed to fetch stats");return r.json()}}),ae=te,le=se,ce=ae;React$2.useEffect(()=>{P(1)},[R,N]);const ue=({position:e})=>{const t=(()=>{const e=le,t=T;let r=[];e>0&&r.push(1);let n=Math.max(2,t-2),s=Math.min(e-1,t+2);n>2&&r.push("...");for(let i=n;i<=s;i++)1!==i&&i!==e&&r.push(i);return s<e-1&&r.push("..."),e>1&&r.push(e),r})();return jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center p-4 bg-white border-t border-slate-200 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-600",children:"Per page:"}),jsxRuntimeExports.jsxs(Select,{value:A.toString(),onValueChange:e=>{k(parseInt(e)),P(1)},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-20 h-8",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"25",children:"25"}),jsxRuntimeExports.jsx(SelectItem,{value:"50",children:"50"}),jsxRuntimeExports.jsx(SelectItem,{value:"100",children:"100"}),jsxRuntimeExports.jsx(SelectItem,{value:"200",children:"200"})]})]})]}),le>1&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>P(T-1),disabled:1===T,className:"px-3 py-2 bg-white border-gray-300 hover:bg-gray-50 text-gray-700 disabled:opacity-50",children:"Previous"}),t.map((e,t)=>{if("..."===e)return jsxRuntimeExports.jsx("span",{className:"px-2 py-2 text-slate-400",children:"..."},`ellipsis-${t}`);const r=e;return jsxRuntimeExports.jsx(Button,{variant:r===T?"default":"outline",size:"sm",onClick:()=>P(r),className:"w-10 h-10 "+(r===T?"bg-blue-600 text-white":"bg-white border-gray-300 hover:bg-gray-50 text-gray-700"),children:r},r)}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>P(T+1),disabled:T===le,className:"px-3 py-2 bg-white border-gray-300 hover:bg-gray-50 text-gray-700 disabled:opacity-50",children:"Next"}),T<le-2&&jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>P(le),disabled:T===le,className:"px-3 py-2 bg-white border-gray-300 hover:bg-gray-50 text-gray-700 disabled:opacity-50",children:"Last"})]})]})};Array.from(new Set(te.map(e=>e.hostName))).sort();const de=[...ie.filter(e=>"Groups"!==e.name).map(e=>e.name),"Other"],pe=e=>{const[t,r,n]=e.split("-").map(Number);return new Date(t,r-1,n).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})},me=e=>{const t=[],r=e.group1Name,n=e.group1Count,s=e.group2Name,i=e.group2Count;return r&&n>0&&t.push({groupName:r,sandwichCount:n}),s&&i>0&&t.push({groupName:s,sandwichCount:i}),t},xe=useMutation({mutationFn:async e=>await apiRequest("PATCH",`/api/sandwich-collections/${e.id}`,e.updates),onSuccess:(t,r)=>{queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]}),queryClient.invalidateQueries({queryKey:["/api/sandwich-collections/stats"]}),l(null),e({title:"Collection Updated Successfully! ",description:"Your changes have been saved and the collection data has been updated.",duration:4e3})},onError:()=>{e({title:"Error",description:"Failed to update collection. Please try again.",variant:"destructive"})}}),fe=useMutation({mutationFn:async e=>await apiRequest("DELETE",`/api/sandwich-collections/${e}`),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]}),queryClient.invalidateQueries({queryKey:["/api/sandwich-collections/stats"]}),e({title:"Collection Deleted Successfully ",description:"The sandwich collection record has been permanently removed from the system.",duration:4e3})},onError:t=>{console.error("Delete collection error:",t),queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]});const r=(null==t?void 0:t.message)||"Unknown error occurred";r.includes("401")||r.includes("Unauthorized")?e({title:"Authentication Error",description:"Your session may have expired. Please refresh the page and try again.",variant:"destructive"}):e({title:"Delete Error",description:"Failed to delete collection. Please refresh the page to check if it was actually deleted.",variant:"destructive"})}});useMutation({mutationFn:async e=>await apiRequest("POST","/api/sandwich-collections",e),onSuccess:(t,r)=>{const n=(r.individualSandwiches||0)+(r.groupSandwiches||0);queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]}),queryClient.invalidateQueries({queryKey:["/api/sandwich-collections/stats"]}),B(!1),q({collectionDate:"",hostName:"",individualSandwiches:"",groupCollections:""}),G([{id:Math.random().toString(36),groupName:"",sandwichCount:0}]),K(!1),e({title:"Collection Successfully Added! ",description:`Recorded ${n} sandwiches from ${r.hostName} on ${new Date(r.collectionDate).toLocaleDateString()}. Thank you for your contribution!`,duration:5e3})},onError:()=>{e({title:"Submission Failed",description:"Failed to add the collection. Please check your permissions and try again.",variant:"destructive",duration:7e3})}}),useMutation({mutationFn:async e=>{const t=new FormData;t.append("csvFile",e);const r=await fetch("/api/import-collections",{method:"POST",body:t});if(!r.ok)throw new Error("Upload failed");return r.json()},onSuccess:t=>{queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]}),e({title:"Import completed",description:`Successfully imported ${t.successCount} of ${t.totalRecords} records.`}),t.errorCount>0&&console.log("Import errors:",t.errors),r.current&&(r.current.value="")},onError:t=>{e({title:"Import failed",description:t instanceof Error?t.message:"Failed to import CSV file",variant:"destructive"})}});const he=useMutation({mutationFn:async()=>apiRequest("GET","/api/sandwich-collections/analyze-duplicates"),onSuccess:t=>{p(t),u(!0),e({title:"Analysis complete",description:`Found ${t.totalDuplicateEntries} duplicate entries and ${t.suspiciousPatterns} suspicious patterns.`})},onError:()=>{e({title:"Analysis failed",description:"Failed to analyze duplicates. Please try again.",variant:"destructive"})}}),ge=useMutation({mutationFn:async e=>apiRequest("DELETE","/api/sandwich-collections/clean-duplicates",{mode:e}),onSuccess:t=>{queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]}),u(!1),p(null),h(new Set),e({title:"Cleanup completed",description:`Successfully cleaned ${t.deletedCount} duplicate entries.`})},onError:()=>{e({title:"Cleanup failed",description:"Failed to clean duplicates. Please try again.",variant:"destructive"})}}),ye=useMutation({mutationFn:async e=>apiRequest("DELETE","/api/sandwich-collections/clean-selected",{ids:e}),onSuccess:t=>{queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]}),u(!1),p(null),h(new Set),e({title:"Selected entries deleted",description:`Successfully deleted ${t.deletedCount} selected entries.`})},onError:()=>{e({title:"Deletion failed",description:"Failed to delete selected entries. Please try again.",variant:"destructive"})}}),je=useMutation({mutationFn:async e=>{console.log("Batch edit request:",e);const{data:{session:t}}=await supabase.auth.getSession(),r={"Content-Type":"application/json"};(null==t?void 0:t.access_token)&&(r.Authorization=`Bearer ${t.access_token}`);const n=await fetch("/api/sandwich-collections/batch-edit",{headers:r,credentials:"include",method:"PATCH",body:JSON.stringify(e)});if(!n.ok){const e=await n.json();throw console.error("Batch edit error response:",e),new Error(e.message||"Failed to update collections")}const s=await n.json();return console.log("Batch edit success response:",s),s},onSuccess:t=>{queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]}),x(new Set),y(!1),E({hostName:"",collectionDate:""}),e({title:"Batch edit completed",description:`Successfully updated ${t.updatedCount} of ${t.totalRequested} collections.`})},onError:t=>{console.error("Batch edit mutation error:",t),e({title:"Batch edit failed",description:t.message||"Failed to update collections. Please try again.",variant:"destructive"})}}),be=useMutation({mutationFn:async e=>{const{data:{session:t}}=await supabase.auth.getSession(),r={"Content-Type":"application/json"};(null==t?void 0:t.access_token)&&(r.Authorization=`Bearer ${t.access_token}`);return(await fetch("/api/sandwich-collections/batch-delete",{headers:r,credentials:"include",method:"DELETE",body:JSON.stringify({ids:e})})).json()},onSuccess:t=>{queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]}),x(new Set),e({title:"Batch delete completed",description:`Successfully deleted ${t.deletedCount} collections.`})},onError:()=>{e({title:"Batch delete failed",description:"Failed to delete collections. Please try again.",variant:"destructive"})}}),ve=(e,t,r)=>{L(M.map(n=>n.id===e?{...n,[t]:r}:n))},Ee=e=>{console.log("Filter change:",e),S(t=>{const r={...t,...e};return console.log("New search filters:",r),r}),P(1)};return ee?jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:jsxRuntimeExports.jsx("div",{className:"h-6 bg-slate-200 rounded animate-pulse"})}),jsxRuntimeExports.jsx("div",{className:"p-6 space-y-4",children:[1,2,3].map(e=>jsxRuntimeExports.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"h-4 bg-slate-200 rounded animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"h-3 bg-slate-100 rounded animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"h-3 bg-slate-100 rounded animate-pulse w-2/3"})]},e))})]}):jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"px-3 sm:px-6 py-4 border-b border-slate-200",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-slate-900 flex items-center",children:[jsxRuntimeExports.jsx("img",{src:squareSandwichLogo,alt:"Sandwich Logo",className:"mr-2 w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"truncate",children:"Collections"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm text-slate-500 mt-1",children:"Manage collection data and bulk operations"})]}),i&&jsxRuntimeExports.jsxs(Button,{onClick:()=>H(!0),variant:"outline",size:"sm",className:"flex items-center space-x-2 w-full sm:w-auto btn-outline-tsp h-10 text-sm",style:{borderColor:"var(--tsp-teal)",color:"var(--tsp-teal)"},children:[jsxRuntimeExports.jsx(Database,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Data Management"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Data"})]})]})}),jsxRuntimeExports.jsx("div",{className:"px-3 sm:px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[ne," entries"]}),oe&&jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-xl sm:text-2xl font-black text-transparent bg-gradient-to-r from-amber-500 to-orange-600 bg-clip-text drop-shadow-sm",children:oe.completeTotalSandwiches.toLocaleString()}),jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-amber-700 uppercase tracking-wide",children:"Total Sandwiches"})]})]}),oe&&jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-8 bg-gradient-to-r from-teal-50 to-amber-50 rounded-xl py-4 px-6 border border-amber-200 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-lg sm:text-xl font-bold text-teal-700 drop-shadow-sm",children:oe.individualSandwiches.toLocaleString()}),jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-teal-600 uppercase tracking-wide mt-1",children:"Individual"})]}),jsxRuntimeExports.jsx("div",{className:"w-px bg-gradient-to-b from-teal-300 to-amber-300"}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-lg sm:text-xl font-bold text-orange-600 drop-shadow-sm",children:(oe.completeTotalSandwiches-oe.individualSandwiches).toLocaleString()}),jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-orange-600 uppercase tracking-wide mt-1",children:"Groups"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n&&jsxRuntimeExports.jsx(HelpBubble$1,{title:"Recording Collections",content:"Click here to submit new sandwich collection data. Fill in the host location, date, and sandwich counts to track your impact!",character:"sandy",position:"bottom",trigger:"hover",children:jsxRuntimeExports.jsxs(Button,{onClick:()=>b(!j),variant:"default",size:"sm",className:"flex items-center justify-center space-x-2 w-full sm:w-auto bg-[#236383] hover:bg-[#1d5470] py-4 px-6 !text-lg sm:!text-sm min-h-[56px] sm:min-h-[40px]",children:[jsxRuntimeExports.jsx(Sandwich,{className:"w-5 h-5 sm:w-4 sm:h-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:j?"Hide Form":"Enter New Collection Data"})]})}),jsxRuntimeExports.jsx(HelpBubble$1,{title:"Filter Collections",content:"Use these filters to search and sort your collection data by date, host, or other criteria. Perfect for finding specific entries!",character:"guide",position:"bottom",trigger:"hover",children:jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>O(!C),className:"flex items-center space-x-1 w-full sm:w-auto justify-center py-2.5 bg-white border-gray-300 hover:bg-gray-50 text-gray-700",children:[jsxRuntimeExports.jsx(Filter,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Filter"})]})}),i&&jsxRuntimeExports.jsxs(Button,{onClick:()=>H(!0),variant:"outline",size:"sm",className:"flex items-center space-x-2 w-full sm:w-auto justify-center py-2.5 bg-white border-teal-400 text-teal-600 hover:bg-teal-50",children:[jsxRuntimeExports.jsx(Database,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Data Management"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Data"})]}),m.size>0&&i&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 w-full mt-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{0!==m.size?y(!0):e({title:"No collections selected",description:"Please select collections to edit.",variant:"destructive"})},className:"flex items-center flex-1 justify-center py-2.5 bg-white border-gray-300 hover:bg-gray-50 text-gray-700",children:[jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsxs("span",{children:["Edit (",m.size,")"]})]}),o&&jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{0!==m.size?confirm(`Are you sure you want to delete ${m.size} selected collections? This action cannot be undone.`)&&be.mutate(Array.from(m)):e({title:"No collections selected",description:"Please select collections to delete.",variant:"destructive"})},className:"flex items-center flex-1 justify-center py-2.5 text-red-600 hover:text-red-700 hover:bg-red-50 bg-white border-gray-300",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsxs("span",{children:["Delete (",m.size,")"]})]})]})]})]})}),j&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx(SandwichCollectionForm,{onSuccess:()=>{b(!1),queryClient.invalidateQueries({queryKey:["/api/sandwich-collections"]})}})}),C&&jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 bg-slate-50",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"hostFilter",className:"text-sm font-medium text-slate-700",children:"Host/Location Name"}),jsxRuntimeExports.jsx(Input,{id:"hostFilter",placeholder:"Search by host name...",value:R.hostName,onChange:e=>Ee({hostName:e.target.value}),className:"mt-1"}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ee({hostName:"OG Sandwich Project"}),className:"px-3 py-1 text-xs bg-amber-100 text-amber-800 border border-amber-300 rounded-full hover:bg-amber-200 transition-colors",children:" Historical OG Project"}),jsxRuntimeExports.jsx("button",{onClick:()=>Ee({hostName:""}),className:"px-3 py-1 text-xs bg-slate-100 text-slate-700 border border-slate-300 rounded-full hover:bg-slate-200 transition-colors",children:"All Locations"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"collectionFromDate",className:"text-sm font-medium text-slate-700",children:"Collection Date From"}),jsxRuntimeExports.jsx(Input,{id:"collectionFromDate",type:"date",value:R.collectionDateFrom,onChange:e=>Ee({collectionDateFrom:e.target.value}),className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"collectionToDate",className:"text-sm font-medium text-slate-700",children:"Collection Date To"}),jsxRuntimeExports.jsx(Input,{id:"collectionToDate",type:"date",value:R.collectionDateTo,onChange:e=>Ee({collectionDateTo:e.target.value}),className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"createdFromDate",className:"text-sm font-medium text-slate-700",children:"Created Date From"}),jsxRuntimeExports.jsx(Input,{id:"createdFromDate",type:"date",value:R.createdAtFrom,onChange:e=>Ee({createdAtFrom:e.target.value}),className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"createdToDate",className:"text-sm font-medium text-slate-700",children:"Created Date To"}),jsxRuntimeExports.jsx(Input,{id:"createdToDate",type:"date",value:R.createdAtTo,onChange:e=>Ee({createdAtTo:e.target.value}),className:"mt-1"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mt-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",(T-1)*A+1,"-",Math.min(T*A,ne)," of ",ne," entries"]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium text-slate-700",children:"Sort by:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsxs(Select,{value:N.field,onValueChange:e=>{return t=e,_(e=>({...e,field:t})),void P(1);var t},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-full sm:w-40",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"collectionDate",children:"Collection Date"}),jsxRuntimeExports.jsx(SelectItem,{value:"hostName",children:"Host Name"}),jsxRuntimeExports.jsx(SelectItem,{value:"individualSandwiches",children:"Sandwich Count"}),jsxRuntimeExports.jsx(SelectItem,{value:"submittedAt",children:"Created Date"})]})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{_(e=>({...e,direction:"asc"===e.direction?"desc":"asc"})),P(1)},className:"flex items-center space-x-1",children:["asc"===N.direction?"":"",jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"asc"===N.direction?"Asc":"Desc"})]})]})]})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{const e={hostName:"",collectionDateFrom:"",collectionDateTo:"",createdAtFrom:"",createdAtTo:""};S(e),$(e),_({field:"collectionDate",direction:"desc"}),P(1),O(!1)},className:"flex items-center space-x-1 w-full sm:w-auto bg-white border-gray-300 hover:bg-gray-50 text-gray-700",children:[jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Clear Filters"})]})]})]}),ne>0&&jsxRuntimeExports.jsx(ue,{position:"top"}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[ce.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-4 pb-3 border-b border-slate-200",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{return e=!m.size||m.size<ae.length,void x(e?new Set(ae.map(e=>e.id)):new Set);var e},className:"flex items-center space-x-2 text-sm text-slate-600 hover:text-slate-900",children:[m.size===ae.length?jsxRuntimeExports.jsx(SquareCheckBig,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Square,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Select All"})]}),m.size>0&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-slate-500",children:[m.size," of ",ae.length," selected"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[ce.map(e=>{const r=me(e),n=Y(e),i=m.has(Number(e.id)),o=ie.find(t=>t.name===e.hostName),a="inactive"===(null==o?void 0:o.status);return jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-3 sm:p-4 "+(i?"bg-blue-50 border-blue-200":a?"bg-gray-100 border-gray-400 opacity-70":"border-slate-200"),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[(s||canEditCollection(t,{...e,id:Number(e.id)}))&&jsxRuntimeExports.jsx("button",{onClick:()=>((e,t)=>{const r=new Set(m);t?r.add(e):r.delete(e),x(r)})(Number(e.id),!i),className:"flex items-center w-4 h-4 shrink-0",children:i?jsxRuntimeExports.jsx(SquareCheckBig,{className:"w-4 h-4 text-blue-600"}):jsxRuntimeExports.jsx(Square,{className:"w-4 h-4 text-slate-400 hover:text-slate-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center "+(a?"text-gray-600":"text-slate-700"),children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-1 "+(a?"text-gray-500":"")}),jsxRuntimeExports.jsx("span",{className:"font-medium text-sm sm:text-base",children:pe(e.collectionDate)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center "+(a?"text-gray-500":"text-slate-600"),children:[jsxRuntimeExports.jsx(User,{className:"w-4 h-4 mr-1 "+(a?"text-gray-400":"")}),jsxRuntimeExports.jsx("span",{className:"text-sm sm:text-base truncate max-w-[200px] sm:max-w-none",children:e.hostName}),"OG Sandwich Project"===e.hostName&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs bg-gradient-to-r from-amber-100 to-orange-100 text-amber-800 px-2 py-0.5 rounded-full font-medium border border-amber-300 hidden sm:inline",children:" HISTORICAL"}),a&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs bg-gray-300 text-gray-800 px-2 py-0.5 rounded-full font-medium hidden sm:inline",children:"INACTIVE HOST"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1 mt-1 sm:hidden",children:["OG Sandwich Project"===e.hostName&&jsxRuntimeExports.jsx("span",{className:"text-xs bg-gradient-to-r from-amber-100 to-orange-100 text-amber-800 px-2 py-0.5 rounded-full font-medium border border-amber-300",children:" HISTORICAL"}),a&&jsxRuntimeExports.jsx("span",{className:"text-xs bg-gray-300 text-gray-800 px-2 py-0.5 rounded-full font-medium",children:"INACTIVE HOST"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end gap-2 ml-3 shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-xl sm:text-2xl font-bold "+(a?"text-gray-700":"text-slate-900"),children:n}),jsxRuntimeExports.jsx("div",{className:"text-xs "+(a?"text-gray-500":"text-slate-500"),children:"total"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[canEditCollection(t,{...e,id:Number(e.id)})&&jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>(e=>{l(e),D({collectionDate:e.collectionDate,hostName:e.hostName,individualSandwiches:e.individualSandwiches.toString(),groupCollections:""});const t=[],r=e;r.group1Name&&r.group1Count?t.push({id:"edit-1",groupName:r.group1Name,sandwichCount:r.group1Count}):r.group1_name&&r.group1_count&&t.push({id:"edit-1",groupName:r.group1_name,sandwichCount:r.group1_count}),r.group2Name&&r.group2Count?t.push({id:"edit-2",groupName:r.group2Name,sandwichCount:r.group2Count}):r.group2_name&&r.group2_count&&t.push({id:"edit-2",groupName:r.group2_name,sandwichCount:r.group2_count}),t.length>0?L(t):L([{id:"edit-1",groupName:"",sandwichCount:0}])})(e),className:"h-7 w-7 p-0 sm:h-8 sm:w-8 bg-white border-gray-300 hover:bg-gray-50 text-gray-700",children:jsxRuntimeExports.jsx(SquarePen,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),canDeleteCollection(t,{...e,id:Number(e.id)})&&jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{return t=Number(e.id),void(confirm("Are you sure you want to delete this collection? This action cannot be undone.")&&fe.mutate(t));var t},className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50 sm:h-8 sm:w-8 bg-white border-gray-300",children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-4",children:[jsxRuntimeExports.jsx("div",{className:"bg-slate-50 rounded-lg p-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(User,{className:"w-4 h-4 mr-2 text-slate-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Individual"})]}),jsxRuntimeExports.jsx("span",{className:"text-lg font-bold text-slate-900",children:e.individualSandwiches})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Users,{className:"w-4 h-4 mr-2 text-slate-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Groups"})]}),jsxRuntimeExports.jsx("span",{className:"text-lg font-bold text-slate-900",children:Q(e)})]}),Array.isArray(r)&&r.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-1 max-h-16 overflow-y-auto",children:r.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-xs bg-white rounded px-2 py-1",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-600 truncate max-w-[120px] sm:max-w-none",children:e.groupName}),jsxRuntimeExports.jsx("span",{className:"text-slate-700 font-medium ml-2",children:e.sandwichCount})]},t))}),(!Array.isArray(r)||0===r.length)&&jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500 italic",children:"No group collections"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1",children:jsxRuntimeExports.jsxs("span",{children:["Submitted ",e.submittedAt?(c=e.submittedAt,new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"})+" at "+new Date(c).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})):"Unknown",e.createdByName&&jsxRuntimeExports.jsxs("span",{className:"text-slate-600 font-medium ml-1",children:["by ",e.createdByName]})]})})})]},e.id);var c}),0===te.length&&jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-slate-500",children:"No collection entries found. Use the form above to record sandwich collections."}),te.length>0&&0===ae.length&&jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-slate-500",children:"No entries match the current filters. Try adjusting your search criteria."})]})]}),ne>0&&jsxRuntimeExports.jsx(ue,{position:"bottom"}),jsxRuntimeExports.jsx(Dialog,{open:c,onOpenChange:u,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsxs(DialogTitle,{className:"flex items-center",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-5 h-5 mr-2 text-amber-500"}),"Duplicate Analysis Results"]})}),d&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-slate-900",children:d.totalCollections}),jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-600",children:"Total Collections"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-red-600",children:d.totalDuplicateEntries}),jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-600",children:"Duplicate Entries"})]})]}),d.totalDuplicateEntries>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-slate-900",children:"Exact Duplicates"}),d.duplicates.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"border border-slate-200 rounded-lg p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[e.entries[0].hostName," - ",e.entries[0].collectionDate]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-slate-600",children:[e.count," entries"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-slate-600",children:["Will keep newest entry (ID: ",String(e.keepNewest.id),") and remove ",e.toDelete.length," duplicates"]})]},t))]}),d.suspiciousPatterns>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h3",{className:"font-medium text-slate-900",children:["Suspicious Patterns (",d.suspiciousPatterns,")"]}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{const e=new Set(d.suspiciousEntries.map(e=>Number(e.id)));h(f.size===e.size?new Set:e)},className:"text-xs",children:f.size===d.suspiciousEntries.length?"Deselect All":"Select All"})})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-600 mb-2",children:"Review and select specific entries to delete. These entries have problematic host names or data entry errors."}),jsxRuntimeExports.jsx("div",{className:"max-h-64 overflow-y-auto border border-slate-200 rounded-lg",children:jsxRuntimeExports.jsx("div",{className:"space-y-1 p-2",children:d.suspiciousEntries.map(e=>{const t=me(e),r=Y(e);return jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 p-2 border border-slate-100 rounded hover:bg-slate-50",children:[jsxRuntimeExports.jsx(Checkbox,{id:`suspicious-${String(e.id)}`,checked:f.has(Number(e.id)),onCheckedChange:t=>{const r=new Set(f);t?r.add(Number(e.id)):r.delete(Number(e.id)),h(r)}}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium text-sm",children:['"',e.hostName||"No Host",'"']}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-slate-500",children:["ID: ",String(e.id)]})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium text-slate-900",children:[r," sandwiches"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600 mt-1",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Calendar,{className:"w-3 h-3 inline mr-1"}),e.collectionDate||"No Date"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsxs("span",{children:[e.individualSandwiches," individual"]}),t.length>0&&jsxRuntimeExports.jsxs("span",{children:[t.reduce((e,t)=>e+(Number(t.sandwichCount)||0),0)," group"]})]})]}),t.length>0&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Groups: ",t.map(e=>`${e.groupName||e.name}: ${e.sandwichCount||e.count}`).join(", ")]})]})]},e.id)})})}),f.size>0&&jsxRuntimeExports.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-amber-800",children:[f.size," entr",1===f.size?"y":"ies"," selected for deletion"]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 pt-4 border-t",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{u(!1),h(new Set)},className:"w-full sm:w-auto",children:"Cancel"}),f.size>0&&jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>ye.mutate(Array.from(f)),disabled:ye.isPending,className:"text-red-600 hover:text-red-700 border-red-300 w-full sm:w-auto",children:ye.isPending?"Deleting...":`Delete Selected (${f.size})`}),d.suspiciousPatterns>0&&jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>ge.mutate("suspicious"),disabled:ge.isPending,className:"text-amber-600 hover:text-amber-700 border-amber-300 w-full sm:w-auto",children:ge.isPending?"Cleaning...":`Delete All Suspicious (${d.suspiciousPatterns})`}),d.totalDuplicateEntries>0&&jsxRuntimeExports.jsx(Button,{onClick:()=>ge.mutate("exact"),disabled:ge.isPending,className:"bg-red-600 hover:bg-red-700 w-full sm:w-auto",children:ge.isPending?"Cleaning...":`Clean Duplicates (${d.totalDuplicateEntries})`})]})]})]})}),jsxRuntimeExports.jsx(Dialog,{open:!!a,onOpenChange:e=>!e&&l(null),children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Edit Collection"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-date",children:"Collection Date"}),jsxRuntimeExports.jsx(Input,{id:"edit-date",type:"date",value:I.collectionDate,onChange:e=>D({...I,collectionDate:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-host",children:"Host Name"}),jsxRuntimeExports.jsxs(Select,{value:I.hostName,onValueChange:e=>D({...I,hostName:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select host"})}),jsxRuntimeExports.jsx(SelectContent,{children:de.map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e,children:e},e))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-individual",children:"Individual Sandwiches"}),jsxRuntimeExports.jsx(Input,{id:"edit-individual",type:"number",min:"0",value:I.individualSandwiches,onChange:e=>D({...I,individualSandwiches:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{children:"Group Collections"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 mt-2",children:[M.map(e=>{var t;return jsxRuntimeExports.jsxs("div",{className:"flex gap-3 items-center",children:[jsxRuntimeExports.jsx(Input,{placeholder:"Group name",value:e.groupName||"",onChange:t=>ve(e.id,"groupName",t.target.value),className:"flex-1",required:!0}),jsxRuntimeExports.jsx(Input,{type:"number",min:"0",placeholder:"Count",value:0===e.sandwichCount?"":(null==(t=e.sandwichCount)?void 0:t.toString())||"",onChange:t=>{const r=t.target.value;ve(e.id,"sandwichCount",""===r||"0"===r?0:parseInt(r)||0)},onFocus:e=>{"0"===e.target.value&&(e.target.value="")},className:"w-24"}),M.length>1&&jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{return t=e.id,void(M.length>1&&L(M.filter(e=>e.id!==t)));var t},className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]},e.id)}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{if(M.length<2){const e=`edit-${Date.now()}`;L([...M,{id:e,groupName:"",sandwichCount:0}])}},children:" Add Another Group"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>l(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{var e,t,r,n;if(!a)return;const s=M.filter(e=>e.groupName.trim()&&e.sandwichCount>0),i={collectionDate:I.collectionDate,hostName:I.hostName,individualSandwiches:parseInt(I.individualSandwiches)||0,group1Name:(null==(e=s[0])?void 0:e.groupName)||null,group1Count:(null==(t=s[0])?void 0:t.sandwichCount)||null,group2Name:(null==(r=s[1])?void 0:r.groupName)||null,group2Count:(null==(n=s[1])?void 0:n.sandwichCount)||null};xe.mutate({id:Number(a.id),updates:i})},disabled:xe.isPending,children:xe.isPending?"Updating...":"Update Collection"})]})]})]})}),jsxRuntimeExports.jsx(Dialog,{open:g,onOpenChange:y,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Batch Edit Collections"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-600",children:["Editing ",m.size," selected collections. Leave fields empty to keep existing values."]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"batch-date",children:"Collection Date"}),jsxRuntimeExports.jsx(Input,{id:"batch-date",type:"date",value:v.collectionDate,onChange:e=>E({...v,collectionDate:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"batch-host",children:"Host Name"}),jsxRuntimeExports.jsxs(Select,{value:v.hostName,onValueChange:e=>E({...v,hostName:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select host (optional)"})}),jsxRuntimeExports.jsx(SelectContent,{children:de.map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e,children:e},e))})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{console.log("submitBatchEdit called with batchEditData:",v),console.log("selectedCollections:",Array.from(m));const t={};if(v.hostName&&(t.hostName=v.hostName),v.collectionDate&&(t.collectionDate=v.collectionDate),console.log("Prepared updates:",t),0===Object.keys(t).length)return console.log("No updates to apply"),void e({title:"No changes specified",description:"Please specify at least one field to update.",variant:"destructive"});console.log("Submitting batch edit with:",{ids:Array.from(m),updates:t}),je.mutate({ids:Array.from(m),updates:t})},disabled:je.isPending,children:je.isPending?"Updating...":"Update Collections"})]})]})]})}),jsxRuntimeExports.jsx(Dialog,{open:U,onOpenChange:H,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Data Management Center"})}),jsxRuntimeExports.jsx(BulkDataManager,{onExportCSV:async()=>{try{const{data:{session:t}}=await supabase.auth.getSession(),r={"Content-Type":"application/json"};(null==t?void 0:t.access_token)&&(r.Authorization=`Bearer ${t.access_token}`);const n=await fetch("/api/sandwich-collections?limit=10000",{headers:r,credentials:"include"});if(!n.ok)throw new Error("Failed to fetch all collections");const s=(await n.json()).collections||[];if(0===s.length)return void e({title:"No data to export",description:"There are no collections to export.",variant:"destructive"});const i=e=>{const t=me(e);return 0===t.length?"":t.map(e=>`${e.groupName}: ${e.sandwichCount}`).join("; ")},o=e=>Q(e),a=e=>Y(e),l=[["ID","Host Name","Collection Date","Individual Sandwiches","Group Sandwiches","Group Collections Detail","Total Sandwiches","Submitted At","Created By"].join(","),...s.map(e=>[e.id,`"${e.hostName}"`,`"${e.collectionDate}"`,e.individualSandwiches||0,o(e),`"${i(e)}"`,a(e),`"${e.submittedAt?new Date(e.submittedAt).toLocaleString():""}"`,'"Unknown"'].join(","))].join("\n"),c=new Blob([l],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),d=URL.createObjectURL(c);u.setAttribute("href",d),u.setAttribute("download",`sandwich-collections-complete-${(new Date).toISOString().split("T")[0]}.csv`),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u),e({title:"Export successful",description:`All ${s.length} collections exported to CSV with complete data including group totals.`})}catch(t){console.error("CSV Export Error:",t),e({title:"Export failed",description:"Failed to export collections data. Please try again.",variant:"destructive"})}},onImportCSV:()=>{var e;return null==(e=r.current)?void 0:e.click()},onCheckDuplicates:()=>he.mutate(),onCleanOGDuplicates:()=>ge.mutate("og-duplicates")})]})})]})}function RecipientsManagement(){const{toast:e}=useToast(),{user:t}=useAuth(),r=hasPermission(t,PERMISSIONS.MANAGE_RECIPIENTS),[n,s]=reactExports.useState(!1),[i,o]=reactExports.useState(!1),[a,l]=reactExports.useState(null),[c,u]=reactExports.useState(null),[d,p]=reactExports.useState(null),[m,x]=reactExports.useState({name:"",phone:"",email:"",address:"",preferences:"",status:"active"}),{data:f=[],isLoading:h}=useQuery({queryKey:["/api/recipients"],staleTime:3e5}),g=useMutation({mutationFn:e=>apiRequest("POST","/api/recipients",e),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/recipients"]}),s(!1),x({name:"",phone:"",email:"",address:"",preferences:"",status:"active"}),e({title:"Success",description:"Recipient added successfully"})},onError:()=>{e({title:"Error",description:"Failed to add recipient",variant:"destructive"})}}),y=useMutation({mutationFn:({id:e,...t})=>apiRequest("PUT",`/api/recipients/${e}`,t),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/recipients"]}),l(null),e({title:"Success",description:"Recipient updated successfully"})},onError:()=>{e({title:"Error",description:"Failed to update recipient",variant:"destructive"})}}),j=useMutation({mutationFn:e=>apiRequest("DELETE",`/api/recipients/${e}`),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/recipients"]}),e({title:"Success",description:"Recipient deleted successfully"})},onError:()=>{e({title:"Error",description:"Failed to delete recipient",variant:"destructive"})}}),b=useMutation({mutationFn:e=>{const t=new FormData;return t.append("file",e),fetch("/api/recipients/import",{method:"POST",body:t}).then(e=>e.json())},onSuccess:t=>{queryClient.invalidateQueries({queryKey:["/api/recipients"]}),p(t),u(null),e({title:"Import Complete",description:`Successfully imported ${t.imported} recipients`})},onError:()=>{e({title:"Import Error",description:"Failed to import recipients",variant:"destructive"})}});return h?jsxRuntimeExports.jsx("div",{className:"p-6",children:"Loading recipients..."}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[jsxRuntimeExports.jsx(Users,{className:"text-blue-500 mr-3 w-6 h-6"}),"Recipients Management"]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Dialog,{open:i,onOpenChange:o,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),"Import CSV/XLSX"]})}),jsxRuntimeExports.jsxs(DialogContent,{"aria-describedby":"import-recipients-description",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Import Recipients from CSV/XLSX"})}),jsxRuntimeExports.jsx("p",{id:"import-recipients-description",className:"text-sm text-slate-600 mb-4",children:"Upload a CSV or Excel file with recipient data. Required columns: name, phone. Optional: email, address, preferences, status."}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"file-upload",children:"Select File"}),jsxRuntimeExports.jsx(Input,{id:"file-upload",type:"file",accept:".csv,.xlsx,.xls",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];r&&(u(r),p(null))},className:"mt-1"}),c&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["Selected: ",c.name]})]}),d&&jsxRuntimeExports.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-green-800",children:"Import Results"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Successfully imported ",d.imported," recipients",d.skipped>0&&`, skipped ${d.skipped} duplicates`]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{o(!1),u(null),p(null)},children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{c&&b.mutate(c)},disabled:!c||b.isPending,children:b.isPending?"Importing...":"Import"})]})]})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:n,onOpenChange:s,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{disabled:!r,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Add Recipient"]})}),jsxRuntimeExports.jsxs(DialogContent,{"aria-describedby":"add-recipient-description",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Add New Recipient"})}),jsxRuntimeExports.jsx("p",{id:"add-recipient-description",className:"text-sm text-slate-600 mb-4",children:"Add a new recipient to the system for sandwich deliveries."}),jsxRuntimeExports.jsxs("form",{onSubmit:t=>{t.preventDefault(),m.name&&m.phone?g.mutate(m):e({title:"Validation Error",description:"Name and phone are required",variant:"destructive"})},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"name",children:"Name *"}),jsxRuntimeExports.jsx(Input,{id:"name",value:m.name,onChange:e=>x({...m,name:e.target.value}),placeholder:"Enter recipient name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"phone",children:"Phone Number *"}),jsxRuntimeExports.jsx(Input,{id:"phone",value:m.phone,onChange:e=>x({...m,phone:e.target.value}),placeholder:"(555) 123-4567"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"email",children:"Email"}),jsxRuntimeExports.jsx(Input,{id:"email",type:"email",value:m.email,onChange:e=>x({...m,email:e.target.value}),placeholder:"email@example.com"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"address",children:"Address"}),jsxRuntimeExports.jsx(Input,{id:"address",value:m.address,onChange:e=>x({...m,address:e.target.value}),placeholder:"123 Main St, City, State 12345"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"preferences",children:"Preferences"}),jsxRuntimeExports.jsx(Input,{id:"preferences",value:m.preferences,onChange:e=>x({...m,preferences:e.target.value}),placeholder:"Dietary restrictions or preferences"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:g.isPending,children:g.isPending?"Adding...":"Add Recipient"})]})]})]})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[f.map(e=>jsxRuntimeExports.jsxs(Card$1,{className:"border border-slate-200",children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:e.name}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mt-1",children:jsxRuntimeExports.jsx(Badge,{variant:"active"===e.status?"default":"secondary",children:e.status})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",disabled:!r,onClick:()=>(e=>{l(e)})(e),children:jsxRuntimeExports.jsx(SquarePen,{className:"w-3 h-3"})}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",disabled:!r,onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this recipient?")&&j.mutate(t));var t},className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})]})]})}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(Phone,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:e.phone})]}),e.email&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(Mail,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:e.email})]}),e.address&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:e.address})]}),e.preferences&&jsxRuntimeExports.jsxs("div",{className:"text-sm text-slate-600",children:[jsxRuntimeExports.jsx("strong",{children:"Preferences:"})," ",e.preferences]})]})]},e.id)),0===f.length&&jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-slate-500",children:"No recipients found. Add a new recipient to get started."})]}),a&&jsxRuntimeExports.jsx(Dialog,{open:!!a,onOpenChange:()=>l(null),children:jsxRuntimeExports.jsxs(DialogContent,{"aria-describedby":"edit-recipient-description",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Edit Recipient"})}),jsxRuntimeExports.jsx("p",{id:"edit-recipient-description",className:"text-sm text-slate-600 mb-4",children:"Update recipient information."}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-name",children:"Name"}),jsxRuntimeExports.jsx(Input,{id:"edit-name",value:a.name,onChange:e=>l({...a,name:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-phone",children:"Phone"}),jsxRuntimeExports.jsx(Input,{id:"edit-phone",value:a.phone,onChange:e=>l({...a,phone:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-email",children:"Email"}),jsxRuntimeExports.jsx(Input,{id:"edit-email",type:"email",value:a.email,onChange:e=>l({...a,email:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-address",children:"Address"}),jsxRuntimeExports.jsx(Input,{id:"edit-address",value:a.address,onChange:e=>l({...a,address:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-preferences",children:"Preferences"}),jsxRuntimeExports.jsx(Input,{id:"edit-preferences",value:a.preferences,onChange:e=>l({...a,preferences:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>l(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{a&&y.mutate(a)},disabled:y.isPending,children:y.isPending?"Updating...":"Update Recipient"})]})]})]})})]})}function DriversManagement(){const{toast:e}=useToast(),{user:t}=useAuth(),r=hasPermission(t,PERMISSIONS.EDIT_COLLECTIONS),n=hasPermission(t,PERMISSIONS.EXPORT_DATA),s=useQueryClient(),[i,o]=reactExports.useState(!1),[a,l]=reactExports.useState(!1),[c,u]=reactExports.useState(!1),[d,p]=reactExports.useState(null),[m,x]=reactExports.useState(null),[f,h]=reactExports.useState({vanDriversOnly:!1,missingAgreementsOnly:!1,selectedZone:"all"}),[g,y]=reactExports.useState({name:"",phone:"",email:"",vehicleType:"",licenseNumber:"",availability:"available",zone:"",routeDescription:"",hostId:void 0}),[j,b]=reactExports.useState({submittedBy:"",phone:"",email:"",licenseNumber:"",vehicleInfo:"",emergencyContact:"",emergencyPhone:"",agreementAccepted:!1}),[v,E]=reactExports.useState(null),{data:R=[],isLoading:S}=useQuery({queryKey:["/api/drivers"]}),{data:w=[]}=useQuery({queryKey:["/api/hosts"]}),$=useMutation({mutationFn:e=>apiRequest("POST","/api/drivers",e),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/drivers"]}),y({name:"",phone:"",email:"",vehicleType:"",licenseNumber:"",availability:"available",zone:"",routeDescription:"",hostId:void 0}),o(!1),e({title:"Driver added successfully"})},onError:()=>{e({title:"Failed to add driver",variant:"destructive"})}}),N=useMutation({mutationFn:({id:e,updates:t})=>apiRequest("PATCH",`/api/drivers/${e}`,t),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/drivers"]}),p(null),e({title:"Driver updated successfully"})},onError:()=>{e({title:"Failed to update driver",variant:"destructive"})}}),_=(e,t)=>{const r="signed"===t?`${e.notes||""} AGREEMENT RECEIVED`:`${e.notes||""} AGREEMENT MISSING`;N.mutate({id:e.id,updates:{notes:r}})},C=useMutation({mutationFn:e=>apiRequest("DELETE",`/api/drivers/${e}`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/drivers"]}),x(null),e({title:"Driver deleted successfully"})},onError:()=>{e({title:"Failed to delete driver",variant:"destructive"})}}),O=useMutation({mutationFn:async e=>{const t=new FormData;return t.append("agreement",e),apiRequest("POST","/api/driver-agreement/upload",t)},onSuccess:()=>{E(null),l(!1),e({title:"Agreement template uploaded successfully"})},onError:()=>{e({title:"Failed to upload agreement",variant:"destructive"})}}),T=useMutation({mutationFn:e=>apiRequest("POST","/api/driver-agreement/submit",e),onSuccess:()=>{b({submittedBy:"",phone:"",email:"",licenseNumber:"",vehicleInfo:"",emergencyContact:"",emergencyPhone:"",agreementAccepted:!1}),u(!1),e({title:"Volunteer agreement submitted successfully"})},onError:()=>{e({title:"Failed to submit volunteer agreement",variant:"destructive"})}}),P=useMutation({mutationFn:({driverId:e,status:t})=>{const r=null==R?void 0:R.find(t=>t.id===e);if(!r)throw new Error("Driver not found");const n=M(r.notes,t);return apiRequest("PATCH",`/api/drivers/${e}`,{notes:n})},onMutate:async({driverId:e,status:t})=>{await s.cancelQueries({queryKey:["/api/drivers"]});const r=s.getQueryData(["/api/drivers"]);return s.setQueryData(["/api/drivers"],r=>r?r.map(r=>{if(r.id===e){const e=M(r.notes,t);return{...r,notes:e}}return r}):r),{previousDrivers:r}},onSuccess:(t,{status:r})=>{s.invalidateQueries({queryKey:["/api/drivers"]}),e({title:`Agreement marked as ${r}`,description:"Driver agreement status updated successfully"})},onError:(t,r,n)=>{(null==n?void 0:n.previousDrivers)&&s.setQueryData(["/api/drivers"],n.previousDrivers),e({title:"Failed to update agreement status",variant:"destructive"})},onSettled:()=>{s.invalidateQueries({queryKey:["/api/drivers"]})}}),A=e=>{p({...e})},k=e=>{x(e)},I=e=>{if(!e)return!1;const t=e.toLowerCase();return t.includes("agreement: yes")||t.includes("agreement: signed")||t.includes("agreement: true")||t.includes("agreement received")},D=(e,t)=>{if(!e)return null;const r=e.split(";").map(e=>e.trim()).filter(e=>{if(!e)return!1;if(e.toLowerCase().startsWith("area:"))return!1;const t=e.toLowerCase();return!(t.includes("agreement: yes")||t.includes("agreement: no")||t.includes("agreement: signed")||t.includes("agreement received"))&&!t.includes("van approved")}).map(e=>e.replace(/^notes:\s*/i,""));return r.length>0?r.join("; "):null},M=(e="",t)=>{let r=e.replace(/Agreement:\s*(yes|signed|true|no|missing|false)/gi,"").trim();r=r.replace(/[;,]\s*$/,"").trim();const n=`Agreement: ${t}`;return r?`${r}; ${n}`:n},L=e=>e.filter(e=>!(f.vanDriversOnly&&!e.vanApproved)&&((!f.missingAgreementsOnly||!I(e.notes))&&("all"===f.selectedZone||e.zone===f.selectedZone))),F=[];R.forEach(e=>{e.zone&&!F.includes(e.zone)&&F.push(e.zone)});const B=F.sort(),U=R.filter(e=>e.isActive).sort((e,t)=>e.name.localeCompare(t.name)),H=R.filter(e=>!e.isActive).sort((e,t)=>e.name.localeCompare(t.name)),V=L(U),q=L(H),W=f.vanDriversOnly||f.missingAgreementsOnly||"all"!==f.selectedZone;return S?jsxRuntimeExports.jsx("div",{className:"p-6",children:"Loading drivers..."}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm",children:jsxRuntimeExports.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-slate-200",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[jsxRuntimeExports.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900 flex items-center",children:[jsxRuntimeExports.jsx(Car,{className:"text-blue-500 mr-2 sm:mr-3 w-5 h-5 sm:w-6 sm:h-6"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Drivers Management"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Drivers"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:()=>{if(!R||0===R.length)return;const t=[["Name","Phone","Email","Zone","Active","Agreement","Van Approved","Home Address","Availability","Email Sent","Voicemail Left","Inactive Reason","Notes"].join(","),...R.map(e=>{const t=I(e.notes);return[`"${e.name}"`,`"${e.phone||""}"`,`"${e.email||""}"`,`"${e.zone||""}"`,e.isActive?"Yes":"No",t?"Yes":"No",e.vanApproved?"Yes":"No",`"${e.homeAddress||""}"`,`"${e.availabilityNotes||""}"`,e.emailAgreementSent?"Yes":"No",e.voicemailLeft?"Yes":"No",`"${e.inactiveReason||""}"`,`"${e.notes||""}"`].join(",")})].join("\n"),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");if(void 0!==n.download){const e=URL.createObjectURL(r);n.setAttribute("href",e),n.setAttribute("download",`drivers_export_${(new Date).toISOString().split("T")[0]}.csv`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}e({title:"Export Complete",description:`Exported ${R.length} drivers to CSV file`})},disabled:!n||!R||0===R.length,className:"text-xs sm:text-sm",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Export"})]}),jsxRuntimeExports.jsxs(Dialog,{open:a,onOpenChange:l,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{disabled:!r,variant:"outline",className:"flex items-center gap-2 text-xs sm:text-sm",children:[jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Upload Agreement"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Upload"})]})}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Upload Driver Agreement Template"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"agreement-file",children:"Agreement PDF"}),jsxRuntimeExports.jsx(Input,{id:"agreement-file",type:"file",accept:".pdf",onChange:e=>{var t;return E((null==(t=e.target.files)?void 0:t[0])||null)}})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{v?O.mutate(v):e({title:"Please select a file",variant:"destructive"})},disabled:O.isPending,children:O.isPending?"Uploading...":"Upload"})]})]})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:c,onOpenChange:u,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{disabled:!r,variant:"outline",className:"flex items-center gap-2 text-xs sm:text-sm",children:[jsxRuntimeExports.jsx(Send$c,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden lg:inline",children:"Submit Volunteer Agreement"}),jsxRuntimeExports.jsx("span",{className:"lg:hidden hidden sm:inline",children:"Submit Agreement"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Submit"})]})}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Submit Volunteer Driver Agreement"})}),jsxRuntimeExports.jsxs("form",{className:"space-y-4",onSubmit:t=>{t.preventDefault(),j.submittedBy&&j.phone&&j.email&&j.agreementAccepted?T.mutate(j):e({title:"Please fill in all required fields and accept the agreement",variant:"destructive"})},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"volunteer-name",children:"Full Name *"}),jsxRuntimeExports.jsx(Input,{id:"volunteer-name",value:j.submittedBy,onChange:e=>b({...j,submittedBy:e.target.value}),placeholder:"Enter your full name",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"volunteer-phone",children:"Phone Number *"}),jsxRuntimeExports.jsx(Input,{id:"volunteer-phone",value:j.phone,onChange:e=>b({...j,phone:e.target.value}),placeholder:"(555) 123-4567",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"volunteer-email",children:"Email Address *"}),jsxRuntimeExports.jsx(Input,{id:"volunteer-email",type:"email",value:j.email,onChange:e=>b({...j,email:e.target.value}),placeholder:"email@example.com",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"volunteer-license",children:"Driver's License Number"}),jsxRuntimeExports.jsx(Input,{id:"volunteer-license",value:j.licenseNumber,onChange:e=>b({...j,licenseNumber:e.target.value}),placeholder:"License number"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"volunteer-vehicle",children:"Vehicle Information"}),jsxRuntimeExports.jsx(Input,{id:"volunteer-vehicle",value:j.vehicleInfo,onChange:e=>b({...j,vehicleInfo:e.target.value}),placeholder:"Year, Make, Model, Color"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"emergency-contact",children:"Emergency Contact Name"}),jsxRuntimeExports.jsx(Input,{id:"emergency-contact",value:j.emergencyContact,onChange:e=>b({...j,emergencyContact:e.target.value}),placeholder:"Emergency contact name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"emergency-phone",children:"Emergency Contact Phone"}),jsxRuntimeExports.jsx(Input,{id:"emergency-phone",value:j.emergencyPhone,onChange:e=>b({...j,emergencyPhone:e.target.value}),placeholder:"Emergency contact phone"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"agreement-accepted",checked:j.agreementAccepted,onChange:e=>b({...j,agreementAccepted:e.target.checked}),required:!0}),jsxRuntimeExports.jsx(Label$1,{htmlFor:"agreement-accepted",className:"text-sm",children:"I have read and agree to the volunteer driver agreement terms *"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:T.isPending,children:T.isPending?"Submitting...":"Submit Agreement"})]})]})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:i,onOpenChange:o,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{disabled:!r,className:"flex items-center gap-2 text-xs sm:text-sm",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Add Driver"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Add"})]})}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Add New Driver"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"name",children:"Driver Name *"}),jsxRuntimeExports.jsx(Input,{id:"name",value:g.name,onChange:e=>y({...g,name:e.target.value}),placeholder:"Enter driver name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"phone",children:"Phone Number *"}),jsxRuntimeExports.jsx(Input,{id:"phone",value:g.phone,onChange:e=>y({...g,phone:e.target.value}),placeholder:"(555) 123-4567"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"email",children:"Email"}),jsxRuntimeExports.jsx(Input,{id:"email",type:"email",value:g.email,onChange:e=>y({...g,email:e.target.value}),placeholder:"email@example.com"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"vehicle-type",children:"Vehicle Type *"}),jsxRuntimeExports.jsxs(Select,{value:g.vehicleType,onValueChange:e=>y({...g,vehicleType:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select vehicle type"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"Car",children:"Car"}),jsxRuntimeExports.jsx(SelectItem,{value:"Van",children:"Van"}),jsxRuntimeExports.jsx(SelectItem,{value:"Truck",children:"Truck"}),jsxRuntimeExports.jsx(SelectItem,{value:"Motorcycle",children:"Motorcycle"}),jsxRuntimeExports.jsx(SelectItem,{value:"Bicycle",children:"Bicycle"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"license",children:"License Number"}),jsxRuntimeExports.jsx(Input,{id:"license",value:g.licenseNumber,onChange:e=>y({...g,licenseNumber:e.target.value}),placeholder:"License number"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"host",children:"Host Location"}),jsxRuntimeExports.jsxs(Select,{value:g.hostId?g.hostId.toString():"none",onValueChange:e=>y({...g,hostId:"none"===e?void 0:parseInt(e)}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select a host location"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"none",children:"No host assigned"}),w.filter(e=>"active"===e.status).map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"route-description",children:"Route Description"}),jsxRuntimeExports.jsx(Input,{id:"route-description",value:g.routeDescription||"",onChange:e=>y({...g,routeDescription:e.target.value}),placeholder:"e.g., SS to Dunwoody, East Cobb to anywhere"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{g.name&&g.phone&&g.vehicleType?$.mutate(g):e({title:"Please fill in required fields",variant:"destructive"})},disabled:$.isPending,children:$.isPending?"Adding...":"Add Driver"})]})]})]})]})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Filter,{className:"w-4 h-4 text-slate-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filters:"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"van-drivers",checked:f.vanDriversOnly,onChange:e=>h(t=>({...t,vanDriversOnly:e.target.checked})),className:"rounded border-slate-300"}),jsxRuntimeExports.jsx("label",{htmlFor:"van-drivers",className:"text-sm text-slate-600 cursor-pointer",children:"Van Drivers Only"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"missing-agreements",checked:f.missingAgreementsOnly,onChange:e=>h(t=>({...t,missingAgreementsOnly:e.target.checked})),className:"rounded border-slate-300"}),jsxRuntimeExports.jsx("label",{htmlFor:"missing-agreements",className:"text-sm text-slate-600 cursor-pointer",children:"Missing Agreements Only"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"zone-filter",className:"text-sm text-slate-600",children:"Zone:"}),jsxRuntimeExports.jsxs(Select,{value:f.selectedZone,onValueChange:e=>h(t=>({...t,selectedZone:e})),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-40",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"All Zones"}),B.map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e,children:e},e))]})]})]}),W&&jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{h({vanDriversOnly:!1,missingAgreementsOnly:!1,selectedZone:"all"})},className:"flex items-center gap-1 text-slate-600",children:[jsxRuntimeExports.jsx(X$1,{className:"w-3 h-3"}),"Clear Filters"]})]}),W&&jsxRuntimeExports.jsxs("div",{className:"mt-3 text-sm text-slate-500",children:["Showing ",V.length," active and ",q.length," ","inactive drivers",f.vanDriversOnly&&" (van drivers only)",f.missingAgreementsOnly&&" (missing agreements only)","all"!==f.selectedZone&&` (${f.selectedZone} zone)`]})]}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"active",className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-2",children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"active",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4"}),"Active Drivers (",V.length,")"]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"inactive",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleX,{className:"w-4 h-4"}),"Inactive Drivers (",q.length,")"]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"active",className:"mt-6",children:jsxRuntimeExports.jsx("div",{className:"grid gap-4",children:V.map(e=>{var t;return jsxRuntimeExports.jsxs(Card$1,{className:"border border-slate-200",children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:e.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[jsxRuntimeExports.jsxs(Badge,{variant:"default",className:"bg-green-100 text-green-800 flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-3 h-3"}),"Active"]}),e.vanApproved&&jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Truck,{className:"w-3 h-3"}),"Van Driver"]}),jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs("button",{disabled:!r||P.isPending,className:`cursor-pointer transition-all duration-200 hover:shadow-sm flex items-center gap-1 rounded-full border px-2 py-1 text-xs font-semibold\n                                ${I(e.notes)?"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100":"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100"}\n                                ${r?"":"cursor-not-allowed opacity-50"}\n                                ${P.isPending?"animate-pulse":""}`,children:[P.isPending?jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3 animate-spin"}):I(e.notes)?jsxRuntimeExports.jsx(FileCheck,{className:"w-3 h-3"}):jsxRuntimeExports.jsx(TriangleAlert,{className:"w-3 h-3"}),I(e.notes)?"Signed Agreement":"Missing Agreement"]})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{children:[jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>_(e,"signed"),children:"Mark as Signed"}),jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>_(e,"missing"),children:"Mark as Missing"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 shrink-0 self-start",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:!r,onClick:()=>A(e),className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Pen,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden xs:inline",children:"Edit"})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:!r,onClick:()=>k(e),className:"flex items-center gap-1 text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:[jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden xs:inline",children:"Delete"})]})]})]})}),jsxRuntimeExports.jsxs(CardContent$1,{className:"pt-0",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-slate-600",children:[e.phone&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Phone,{className:"w-4 h-4"}),e.phone]}),e.email&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Mail,{className:"w-4 h-4"}),e.email]})]}),e.availabilityNotes&&jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"Availability:"})," ",e.availabilityNotes]})]})}),e.homeAddress&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"Address:"})," ",e.homeAddress]})]})}),e.routeDescription&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"Route:"})," ",e.routeDescription]})]})}),e.hostId&&w.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(Truck,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"Host:"})," ",(null==(t=w.find(t=>t.id===e.hostId))?void 0:t.name)||"Unknown"]})]})}),D(e.notes,e.zone)&&jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(FileCheck,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"Notes:"})," ",D(e.notes,e.zone)]})]})})]})]},e.id)})})}),jsxRuntimeExports.jsx(TabsContent,{value:"inactive",className:"mt-6",children:jsxRuntimeExports.jsx("div",{className:"grid gap-4",children:q.map(e=>{var t;return jsxRuntimeExports.jsxs(Card$1,{className:"border border-slate-200",children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:e.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"bg-gray-100 text-gray-600 flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleX,{className:"w-3 h-3"}),"Inactive"]}),e.vanApproved&&jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Truck,{className:"w-3 h-3"}),"Van Driver"]}),jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs("button",{disabled:!r||P.isPending,className:`cursor-pointer transition-all duration-200 hover:shadow-sm flex items-center gap-1 rounded-full border px-2 py-1 text-xs font-semibold\n                                ${I(e.notes)?"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100":"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100"}\n                                ${r?"":"cursor-not-allowed opacity-50"}\n                                ${P.isPending?"animate-pulse":""}`,children:[P.isPending?jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3 animate-spin"}):I(e.notes)?jsxRuntimeExports.jsx(FileCheck,{className:"w-3 h-3"}):jsxRuntimeExports.jsx(TriangleAlert,{className:"w-3 h-3"}),I(e.notes)?"Signed Agreement":"Missing Agreement"]})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{children:[jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>P.mutate({driverId:e.id,status:"signed"}),disabled:P.isPending,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileCheck,{className:"w-4 h-4 text-blue-600"})," Mark as Signed"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>P.mutate({driverId:e.id,status:"missing"}),disabled:P.isPending,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-4 h-4 text-orange-600"})," Mark as Missing"]})]})]}),e.inactiveReason&&jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-gray-50 text-gray-600 border-gray-200 flex items-center gap-1",children:e.inactiveReason})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 shrink-0 self-start",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:!r,onClick:()=>A(e),className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Pen,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden xs:inline",children:"Edit"})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:!r,onClick:()=>k(e),className:"flex items-center gap-1 text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:[jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden xs:inline",children:"Delete"})]})]})]})}),jsxRuntimeExports.jsxs(CardContent$1,{className:"pt-0",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-slate-600",children:[e.phone&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Phone,{className:"w-4 h-4"}),e.phone]}),e.email&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Mail,{className:"w-4 h-4"}),e.email]})]}),e.availabilityNotes&&jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"Availability:"})," ",e.availabilityNotes]})]})}),e.homeAddress&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"Address:"})," ",e.homeAddress]})]})}),e.routeDescription&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"Route:"})," ",e.routeDescription]})]})}),e.hostId&&w.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(Truck,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"Host:"})," ",(null==(t=w.find(t=>t.id===e.hostId))?void 0:t.name)||"Unknown"]})]})}),D(e.notes,e.zone)&&jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx(FileCheck,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"Notes:"})," ",D(e.notes,e.zone)]})]})})]})]},e.id)})})})]}),d&&jsxRuntimeExports.jsx(Dialog,{open:!!d,onOpenChange:()=>p(null),children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Edit Driver"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-name",children:"Driver Name *"}),jsxRuntimeExports.jsx(Input,{id:"edit-name",value:d.name??"",onChange:e=>p({...d,name:e.target.value}),placeholder:"Full name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-phone",children:"Phone Number *"}),jsxRuntimeExports.jsx(Input,{id:"edit-phone",value:d.phone??"",onChange:e=>p({...d,phone:e.target.value}),placeholder:"(555) 123-4567"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-email",children:"Email Address"}),jsxRuntimeExports.jsx(Input,{id:"edit-email",type:"email",value:d.email??"",onChange:e=>p({...d,email:e.target.value}),placeholder:"email@example.com"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-status",children:"Status"}),jsxRuntimeExports.jsxs(Select,{value:d.isActive?"active":"inactive",onValueChange:e=>p({...d,isActive:"active"===e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"active",children:"Active"}),jsxRuntimeExports.jsx(SelectItem,{value:"inactive",children:"Inactive"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-van-approved",children:"Van Driver Status"}),jsxRuntimeExports.jsxs(Select,{value:d.vanApproved?"approved":"not_approved",onValueChange:e=>p({...d,vanApproved:"approved"===e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"approved",children:"Van Driver Approved"}),jsxRuntimeExports.jsx(SelectItem,{value:"not_approved",children:"Not Van Approved"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-agreement",children:"Agreement Status"}),jsxRuntimeExports.jsxs(Select,{value:I(d.notes)?"signed":"missing",onValueChange:e=>{let t=d.notes||"";t=t.replace(/agreement:\s*(yes|no|signed|missing|true|false)/gi,"").replace(/\s+/g," ").trim(),t="signed"===e?t?`${t} Agreement: signed`:"Agreement: signed":t?`${t} Agreement: missing`:"Agreement: missing",p({...d,notes:t.trim(),emailAgreementSent:"signed"===e})},children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"signed",children:"Signed Agreement"}),jsxRuntimeExports.jsx(SelectItem,{value:"missing",children:"Missing Agreement"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-availability-notes",children:"Availability Notes"}),jsxRuntimeExports.jsx(Input,{id:"edit-availability-notes",value:d.availabilityNotes??"",onChange:e=>p({...d,availabilityNotes:e.target.value}),placeholder:"e.g., M-F after 3; weekends; unavailable until June"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-route-description",children:"Route Description"}),jsxRuntimeExports.jsx(Input,{id:"edit-route-description",value:d.routeDescription??d.zone??"",onChange:e=>p({...d,routeDescription:e.target.value}),placeholder:"e.g., SS to Dunwoody, East Cobb to anywhere"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-host",children:"Associated Host/Organization"}),jsxRuntimeExports.jsxs(Select,{value:d.hostId?d.hostId.toString():"none",onValueChange:e=>p({...d,hostId:"none"===e?void 0:parseInt(e)}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select host for directory connection"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"none",children:"No host assigned"}),null==w?void 0:w.filter(e=>"active"===e.status).map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-home-address",children:"Home Address"}),jsxRuntimeExports.jsx(Input,{id:"edit-home-address",value:d.homeAddress??"",onChange:e=>p({...d,homeAddress:e.target.value}),placeholder:"Full home address"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-notes",children:"Additional Notes"}),jsxRuntimeExports.jsx("textarea",{id:"edit-notes",className:"w-full p-2 border border-gray-300 rounded-md",rows:3,value:d.notes??"",onChange:e=>p({...d,notes:e.target.value}),placeholder:"Additional information, special instructions, etc."})]}),!d.isActive&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-inactive-reason",children:"Inactive Reason"}),jsxRuntimeExports.jsx(Input,{id:"edit-inactive-reason",value:d.inactiveReason??"",onChange:e=>p({...d,inactiveReason:e.target.value}),placeholder:"Reason for inactive status"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>p(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{d&&N.mutate({id:d.id,updates:d})},disabled:N.isPending,children:N.isPending?"Updating...":"Update Driver"})]})]})]})}),m&&jsxRuntimeExports.jsx(Dialog,{open:!!m,onOpenChange:()=>x(null),children:jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Delete Driver"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-gray-700",children:["Are you sure you want to permanently delete"," ",jsxRuntimeExports.jsx("strong",{children:m.name}),"? This action cannot be undone."]}),jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:jsxRuntimeExports.jsxs("p",{className:"text-red-800 text-sm",children:[jsxRuntimeExports.jsx("strong",{children:"Warning:"})," This will permanently remove all driver information including contact details, route assignments, and availability data."]})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>x(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{variant:"destructive",onClick:()=>{m&&C.mutate(m.id)},disabled:C.isPending,children:C.isPending?"Deleting...":"Delete Driver"})]})]})]})})]})}function getState(e){return e?"checked":"unchecked"}function HostsManagementConsolidated(){const{toast:e}=useToast(),{user:t}=useAuth(),r=hasPermission(t,PERMISSIONS.EDIT_ALL_COLLECTIONS),[n,s]=reactExports.useState(!1),[i,o]=reactExports.useState(null),[a,l]=reactExports.useState(null),[c,u]=reactExports.useState(!1),[d,p]=reactExports.useState(null),[m,x]=reactExports.useState(new Set),f=e=>[...e].sort((e,t)=>"lead"===e.role&&"lead"!==t.role?-1:"lead"===t.role&&"lead"!==e.role?1:e.isPrimary&&!t.isPrimary?-1:t.isPrimary&&!e.isPrimary?1:"primary"===e.role&&"primary"!==t.role?-1:"primary"===t.role&&"primary"!==e.role?1:e.name.localeCompare(t.name)),[h,g]=reactExports.useState({name:"",address:"",status:"active",notes:""}),[y,j]=reactExports.useState({name:"",role:"",phone:"",email:"",isPrimary:!1,notes:""}),{data:b=[],isLoading:v}=useQuery({queryKey:["/api/hosts-with-contacts"]}),E=useMutation({mutationFn:async e=>await apiRequest("POST","/api/hosts",e),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/hosts-with-contacts"]}),g({name:"",address:"",status:"active",notes:""}),s(!1),e({title:"Host added",description:"New host has been added successfully."})},onError:t=>{e({title:"Error",description:`Failed to add host: ${t.message}`,variant:"destructive"})}}),R=useMutation({mutationFn:async e=>await apiRequest("PATCH",`/api/hosts/${e.id}`,e.updates),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/hosts-with-contacts"]}),o(null),e({title:"Host updated",description:"Host has been updated successfully."})},onError:t=>{e({title:"Error",description:`Failed to update host: ${t.message}`,variant:"destructive"})}}),S=useMutation({mutationFn:async e=>await apiRequest("DELETE",`/api/hosts/${e}`),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/hosts-with-contacts"]}),queryClient.invalidateQueries({queryKey:["/api/hosts"]}),e({title:"Host deleted",description:"Host has been deleted successfully."})},onError:t=>{const r=(null==t?void 0:t.message)||"Failed to delete host";e({title:"Cannot delete host",description:r,variant:"destructive"})}}),w=useMutation({mutationFn:async e=>await apiRequest("POST","/api/host-contacts",e),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/hosts-with-contacts"]}),j({name:"",role:"",phone:"",email:"",isPrimary:!1,notes:""}),u(!1),e({title:"Contact added",description:"New contact has been added successfully."})},onError:t=>{e({title:"Error",description:`Failed to add contact: ${t.message}`,variant:"destructive"})}}),$=useMutation({mutationFn:async e=>await apiRequest("PATCH",`/api/host-contacts/${e.id}`,e.updates),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/hosts-with-contacts"]}),p(null),e({title:"Contact updated",description:"Contact has been updated successfully."})},onError:t=>{e({title:"Error",description:`Failed to update contact: ${t.message}`,variant:"destructive"})}}),N=useMutation({mutationFn:async e=>await apiRequest("DELETE",`/api/host-contacts/${e}`),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/hosts-with-contacts"]}),e({title:"Contact deleted",description:"Contact has been deleted successfully."})},onError:t=>{e({title:"Error",description:`Failed to delete contact: ${t.message}`,variant:"destructive"})}}),_=()=>{i&&R.mutate({id:i.id,updates:{name:i.name,address:i.address,status:i.status,notes:i.notes}})},C=()=>{d&&$.mutate({id:d.id,updates:d})},O=({role:e})=>"lead"===e.toLowerCase()?jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:jsxRuntimeExports.jsxs(Badge,{className:"bg-gradient-to-r from-amber-400 to-orange-500 text-white font-semibold shadow-md border-0 flex items-center gap-1 px-2 py-1",children:[jsxRuntimeExports.jsx(Crown,{className:"w-3 h-3"}),"LEAD"]})}):jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:e});if(v)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("div",{className:"text-slate-600",children:"Loading hosts..."})});const T=b.filter(e=>"active"===e.status),P=b.filter(e=>"inactive"===e.status),A=({hostList:e})=>jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>jsxRuntimeExports.jsxs(Card$1,{className:"hover:shadow-md transition-shadow "+("inactive"===e.status?"bg-gray-100 border-gray-400 opacity-70":""),children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Building2,{className:"w-5 h-5 "+("inactive"===e.status?"text-gray-400":"text-slate-600")}),jsxRuntimeExports.jsx(CardTitle,{className:"text-base "+("inactive"===e.status?"text-gray-600":""),children:e.name})]}),jsxRuntimeExports.jsx(Badge,{variant:"active"===e.status?"default":"secondary",className:"active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:e.status})]})}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-3",children:[e.address&&jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsx("span",{className:"truncate",children:e.address})]}),e.contacts&&e.contacts.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-slate-700",children:"Contacts:"}),(()=>{const t=f(e.contacts),r=m.has(e.id),n=r?t:t.slice(0,2);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[n.map(e=>jsxRuntimeExports.jsxs("div",{className:"space-y-1 border-l-2 border-blue-200 pl-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-slate-700",children:e.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:["lead"===e.role&&jsxRuntimeExports.jsx(Crown,{className:"w-3 h-3 text-purple-600 fill-current"}),e.isPrimary&&jsxRuntimeExports.jsx(Star,{className:"w-3 h-3 text-yellow-500 fill-current"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx(O,{role:e.role})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-xs text-slate-600",children:[jsxRuntimeExports.jsx(Phone,{className:"w-3 h-3 mr-1"}),e.phone]}),e.email&&jsxRuntimeExports.jsxs("div",{className:"flex items-center text-xs text-slate-600",children:[jsxRuntimeExports.jsx(Mail,{className:"w-3 h-3 mr-1"}),e.email]})]},e.id)),t.length>2&&jsxRuntimeExports.jsx("button",{onClick:()=>{return t=e.id,void x(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r});var t},className:"text-xs text-blue-600 hover:text-blue-800 hover:underline cursor-pointer",children:r?"Show less":`+${t.length-2} more contacts`})]})})()]}),e.notes&&jsxRuntimeExports.jsxs("div",{className:"flex items-start text-sm text-slate-600",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-4 h-4 mr-2 mt-0.5"}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:e.notes})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-2 pt-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>l(e),className:"w-full",children:[jsxRuntimeExports.jsx(Users,{className:"w-3 h-3 mr-1"}),"View Details"]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsxs(Dialog,{open:(null==i?void 0:i.id)===e.id,onOpenChange:e=>!e&&o(null),children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:!r,onClick:()=>o(e),className:"flex-1",children:[jsxRuntimeExports.jsx(SquarePen,{className:"w-3 h-3 mr-1"}),"Edit"]})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-md sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{className:"text-lg sm:text-xl",children:"Edit Host"})}),i&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-name",children:"Name *"}),jsxRuntimeExports.jsx(Input,{id:"edit-name",value:i.name,onChange:e=>o({...i,name:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-address",children:"Host Location"}),jsxRuntimeExports.jsx(Input,{id:"edit-address",value:i.address||"",onChange:e=>o({...i,address:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-status",children:"Status"}),jsxRuntimeExports.jsxs(Select,{value:i.status,onValueChange:e=>o({...i,status:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"active",children:"Active"}),jsxRuntimeExports.jsx(SelectItem,{value:"inactive",children:"Inactive"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-notes",children:"Notes"}),jsxRuntimeExports.jsx(Textarea,{id:"edit-notes",value:i.notes||"",onChange:e=>o({...i,notes:e.target.value}),rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>o(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:_,disabled:!i.name.trim()||R.isPending,children:R.isPending?"Updating...":"Update Host"})]})]})]})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",disabled:!r,onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this host? This will also delete all associated contacts.")&&S.mutate(t));var t},className:"flex-1 text-red-600 hover:text-red-700",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})]})]},e.id))});return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-slate-900 flex items-center",children:[jsxRuntimeExports.jsx(Building2,{className:"w-6 h-6 mr-2"}),"Host Management"]}),jsxRuntimeExports.jsx("p",{className:"text-slate-600 mt-1",children:"Manage collection hosts and their contact information"})]}),jsxRuntimeExports.jsxs(Dialog,{open:n,onOpenChange:s,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{disabled:!r,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Add Host"]})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-md sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{className:"text-lg sm:text-xl",children:"Add New Host"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"name",children:"Host Name *"}),jsxRuntimeExports.jsx(Input,{id:"name",value:h.name,onChange:e=>g({...h,name:e.target.value}),placeholder:"Enter host location name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"address",children:"Host Location"}),jsxRuntimeExports.jsx(Input,{id:"address",value:h.address||"",onChange:e=>g({...h,address:e.target.value}),placeholder:"Enter host location"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"status",children:"Status"}),jsxRuntimeExports.jsxs(Select,{value:h.status,onValueChange:e=>g({...h,status:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"active",children:"Active"}),jsxRuntimeExports.jsx(SelectItem,{value:"inactive",children:"Inactive"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"notes",children:"Notes"}),jsxRuntimeExports.jsx(Textarea,{id:"notes",value:h.notes||"",onChange:e=>g({...h,notes:e.target.value}),placeholder:"Enter any additional notes",rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{h.name.trim()&&E.mutate(h)},disabled:!h.name.trim()||E.isPending,children:E.isPending?"Adding...":"Add Host"})]})]})]})]})]}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"active",className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-2",children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"active",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Building2,{className:"w-4 h-4"}),"Active Locations (",T.length,")"]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"inactive",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-4 h-4"}),"Inactive Locations (",P.length,")"]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"active",className:"mt-6",children:0===T.length?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(Building2,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No active hosts found"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500",children:"Add a new host to get started."})]}):jsxRuntimeExports.jsx(A,{hostList:T})}),jsxRuntimeExports.jsx(TabsContent,{value:"inactive",className:"mt-6",children:0===P.length?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No inactive hosts"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500",children:"All host locations are currently active."})]}):jsxRuntimeExports.jsx(A,{hostList:P})})]}),jsxRuntimeExports.jsx(Dialog,{open:!!a,onOpenChange:e=>!e&&l(null),children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsxs(DialogTitle,{className:"flex items-center",children:[jsxRuntimeExports.jsx(Building2,{className:"w-5 h-5 mr-2"}),null==a?void 0:a.name]})}),a&&jsxRuntimeExports.jsxs(Tabs,{defaultValue:"contacts",className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"contacts",children:"Contacts"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"details",children:"Details"})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"contacts",className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold",children:["Contacts for ",a.name]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-600",children:"Manage contact information for this host"})]}),jsxRuntimeExports.jsxs(Dialog,{open:c,onOpenChange:u,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{size:"sm",disabled:!r,children:[jsxRuntimeExports.jsx(UserPlus,{className:"w-4 h-4 mr-2"}),"Add Contact"]})}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Add New Contact"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"contact-name",children:"Name *"}),jsxRuntimeExports.jsx(Input,{id:"contact-name",value:y.name,onChange:e=>j({...y,name:e.target.value}),placeholder:"Enter contact name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"contact-role",children:"Role"}),jsxRuntimeExports.jsx(Input,{id:"contact-role",value:y.role,onChange:e=>j({...y,role:e.target.value}),placeholder:"e.g., Manager, Coordinator, Volunteer"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"contact-phone",children:"Phone *"}),jsxRuntimeExports.jsx(Input,{id:"contact-phone",value:y.phone,onChange:e=>j({...y,phone:e.target.value}),placeholder:"Enter phone number"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"contact-email",children:"Email"}),jsxRuntimeExports.jsx(Input,{id:"contact-email",type:"email",value:y.email,onChange:e=>j({...y,email:e.target.value}),placeholder:"Enter email address"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Switch,{id:"contact-primary",checked:y.isPrimary,onCheckedChange:e=>j({...y,isPrimary:e})}),jsxRuntimeExports.jsx(Label$1,{htmlFor:"contact-primary",children:"Primary Contact"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"contact-notes",children:"Notes"}),jsxRuntimeExports.jsx(Textarea,{id:"contact-notes",value:y.notes,onChange:e=>j({...y,notes:e.target.value}),placeholder:"Additional notes",rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{a&&y.name.trim()&&y.phone.trim()&&w.mutate({...y,hostId:a.id})},disabled:!y.name.trim()||!y.phone.trim()||w.isPending,children:w.isPending?"Adding...":"Add Contact"})]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f(a.contacts).map(e=>jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:e.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:["lead"===e.role&&jsxRuntimeExports.jsx(Crown,{className:"w-3 h-3 text-purple-600 fill-current"}),e.isPrimary&&jsxRuntimeExports.jsx(Star,{className:"w-3 h-3 text-yellow-500 fill-current"})]})]}),jsxRuntimeExports.jsx(O,{role:e.role}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[jsxRuntimeExports.jsx(Phone,{className:"w-4 h-4 mr-2"}),e.phone]}),e.email&&jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[jsxRuntimeExports.jsx(Mail,{className:"w-4 h-4 mr-2"}),e.email]}),e.notes&&jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-600 mt-2",children:e.notes})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-1",children:[jsxRuntimeExports.jsxs(Dialog,{open:(null==d?void 0:d.id)===e.id,onOpenChange:e=>!e&&p(null),children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",disabled:!r,onClick:()=>p(e),children:jsxRuntimeExports.jsx(SquarePen,{className:"w-3 h-3"})})}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Edit Contact"})}),d&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-contact-name",children:"Name *"}),jsxRuntimeExports.jsx(Input,{id:"edit-contact-name",value:d.name,onChange:e=>p({...d,name:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-contact-role",children:"Role"}),jsxRuntimeExports.jsx(Input,{id:"edit-contact-role",value:d.role,onChange:e=>p({...d,role:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-contact-phone",children:"Phone *"}),jsxRuntimeExports.jsx(Input,{id:"edit-contact-phone",value:d.phone,onChange:e=>p({...d,phone:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-contact-email",children:"Email"}),jsxRuntimeExports.jsx(Input,{id:"edit-contact-email",type:"email",value:d.email||"",onChange:e=>p({...d,email:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Switch,{id:"edit-contact-primary",checked:d.isPrimary,onCheckedChange:e=>p({...d,isPrimary:e})}),jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-contact-primary",children:"Primary Contact"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-contact-notes",children:"Notes"}),jsxRuntimeExports.jsx(Textarea,{id:"edit-contact-notes",value:d.notes||"",onChange:e=>p({...d,notes:e.target.value}),rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>p(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:C,disabled:!d.name.trim()||!d.phone.trim()||$.isPending,children:$.isPending?"Updating...":"Update Contact"})]})]})]})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",disabled:!r,onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this contact?")&&N.mutate(t));var t},className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})]})]})})},e.id)),0===a.contacts.length&&jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Users,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-slate-600",children:"No contacts found for this host."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Add a contact to get started."})]})]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"details",className:"space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium text-slate-700",children:"Host Name"}),jsxRuntimeExports.jsx("p",{className:"text-slate-900",children:a.name})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium text-slate-700",children:"Status"}),jsxRuntimeExports.jsx(Badge,{variant:"active"===a.status?"default":"secondary",className:"active"===a.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:a.status})]}),a.address&&jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium text-slate-700",children:"Host Location"}),jsxRuntimeExports.jsx("p",{className:"text-slate-900",children:a.address})]}),a.notes&&jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium text-slate-700",children:"Notes"}),jsxRuntimeExports.jsx("p",{className:"text-slate-900",children:a.notes})]})]})})]})]})})]})}function PhoneDirectoryFixed(){const[e,t]=reactExports.useState(""),{user:r}=useAuth(),n=hasPermission(r,PERMISSIONS.ACCESS_HOSTS),s=hasPermission(r,PERMISSIONS.ACCESS_RECIPIENTS),i=hasPermission(r,PERMISSIONS.ACCESS_DRIVERS),o=React$2.useCallback(()=>n?"hosts":s?"recipients":i?"drivers":"contacts",[n,s,i]),[a,l]=reactExports.useState(()=>o()),{data:c=[]}=useQuery({queryKey:["/api/hosts-with-contacts"]}),{data:u=[]}=useQuery({queryKey:["/api/recipients"]}),{data:d=[]}=useQuery({queryKey:["/api/contacts"]}),{data:p=[]}=useQuery({queryKey:["/api/drivers"]}),m=[{id:"contacts",label:"Contacts",icon:Phone,enabled:!0},{id:"hosts",label:"Hosts",icon:Users,enabled:n},{id:"recipients",label:"Recipients",icon:User,enabled:s},{id:"drivers",label:"Drivers",icon:User,enabled:i}].filter(e=>e.enabled);React$2.useEffect(()=>{const e=o();m.find(e=>e.id===a)||l(e)},[m,a,o]);const x=c.filter(t=>{if(!e)return!0;const r=e.toLowerCase();return t.name.toLowerCase().includes(r)||t.address&&t.address.toLowerCase().includes(r)}),f=u.filter(t=>{if(!e)return!0;const r=e.toLowerCase();return t.name.toLowerCase().includes(r)||t.phone.includes(e)}),h=d.filter(t=>{if(!e)return!0;const r=e.toLowerCase();return t.name.toLowerCase().includes(r)||t.phone.includes(e)}),g=p.filter(t=>{if(!e)return!0;const r=e.toLowerCase();return t.name.toLowerCase().includes(r)||t.phone.includes(e)||t.zone.toLowerCase().includes(r)});return jsxRuntimeExports.jsxs("div",{className:"space-y-8 p-6 font-['Roboto',sans-serif]",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:"Phone Directory"}),jsxRuntimeExports.jsx("p",{className:"text-lg mt-2",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:"Contact information for team members and organizations"})]}),jsxRuntimeExports.jsx(Card$1,{className:"border-2",style:{borderColor:"#e6f3f7"},children:jsxRuntimeExports.jsx(CardContent$1,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search$c,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5",style:{color:"#646464"}}),jsxRuntimeExports.jsx(Input,{placeholder:"Search contacts...",value:e,onChange:e=>t(e.target.value),className:"pl-12 h-12 text-base border-2 focus:ring-2",style:{borderColor:"#236383",fontFamily:"Roboto, sans-serif"}})]})})})]}),jsxRuntimeExports.jsxs(Tabs,{value:a,onValueChange:l,children:[jsxRuntimeExports.jsx(TabsList,{className:"grid w-full h-14 p-1 rounded-lg "+(1===m.length?"grid-cols-1":2===m.length?"grid-cols-2":3===m.length?"grid-cols-3":"grid-cols-4"),style:{backgroundColor:"#e6f3f7"},children:m.map(e=>{const t=e.icon;let r=0;return"contacts"===e.id?r=h.length:"hosts"===e.id?r=x.length:"recipients"===e.id?r=f.length:"drivers"===e.id&&(r=g.length),jsxRuntimeExports.jsxs(TabsTrigger,{value:e.id,className:"flex items-center gap-2 h-12 text-base font-medium rounded-md transition-all duration-200 data-[state=active]:shadow-sm",style:{fontFamily:"Roboto, sans-serif",color:"#646464"},"data-active-style":{backgroundColor:"#236383",color:"white"},children:[jsxRuntimeExports.jsx(t,{className:"w-5 h-5"}),e.label," (",r,")"]},e.id)})}),jsxRuntimeExports.jsx(TabsContent,{value:"contacts",className:"space-y-6 mt-6",children:jsxRuntimeExports.jsxs(Card$1,{className:"border-2 shadow-sm",style:{borderColor:"#e6f3f7"},children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"pb-4",style:{backgroundColor:"#e6f3f7"},children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-3 text-xl font-bold",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx(Phone,{className:"w-6 h-6",style:{color:"#236383"}}),"General Contacts"]}),jsxRuntimeExports.jsx(CardDescription,{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:"Contact information for general contacts and volunteers"})]}),jsxRuntimeExports.jsx(CardContent$1,{className:"pt-6",children:0===h.length?jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:e?"No contacts found matching your search.":"No contacts found."}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:h.map(e=>jsxRuntimeExports.jsxs("div",{className:"p-5 border-2 rounded-lg hover:shadow-md transition-shadow duration-200",style:{borderColor:"#e6f3f7"},children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg mb-2",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:e.name}),jsxRuntimeExports.jsx("p",{className:"text-base mb-1",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:e.phone}),e.email&&jsxRuntimeExports.jsx("p",{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:e.email})]},e.id))})})]})}),n&&jsxRuntimeExports.jsx(TabsContent,{value:"hosts",className:"space-y-6 mt-6",children:jsxRuntimeExports.jsxs(Card$1,{className:"border-2 shadow-sm",style:{borderColor:"#e6f3f7"},children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"pb-4",style:{backgroundColor:"#e6f3f7"},children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-3 text-xl font-bold",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx(Users,{className:"w-6 h-6",style:{color:"#236383"}}),"Host Directory"]}),jsxRuntimeExports.jsx(CardDescription,{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:"Contact information for sandwich collection hosts"})]}),jsxRuntimeExports.jsx(CardContent$1,{className:"pt-6",children:0===x.length?jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:e?"No hosts found matching your search.":"No hosts found."}):jsxRuntimeExports.jsx("div",{className:"space-y-6",children:x.map(e=>jsxRuntimeExports.jsxs("div",{className:"p-5 border-2 rounded-lg hover:shadow-md transition-shadow duration-200",style:{borderColor:"#e6f3f7"},children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg mb-3",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:e.name}),e.address&&jsxRuntimeExports.jsxs("p",{className:"text-base mb-4",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Address:"})," ",e.address]}),e.contacts&&e.contacts.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-base",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:"Contacts:"}),e.contacts.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"ml-4 p-3 rounded-md",style:{backgroundColor:"#f8fbfc"},children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-base mb-1",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:e.name}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("p",{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Phone:"})," ",e.phone]}),e.email&&jsxRuntimeExports.jsxs("p",{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Email:"})," ",e.email]}),e.role&&jsxRuntimeExports.jsxs("p",{className:"text-base italic",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Role:"})," ",e.role]})]})]},t))]}),(!e.contacts||0===e.contacts.length)&&jsxRuntimeExports.jsx("p",{className:"text-base italic",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:"No contact information available"})]},e.id))})})]})}),s&&jsxRuntimeExports.jsx(TabsContent,{value:"recipients",className:"space-y-6 mt-6",children:jsxRuntimeExports.jsxs(Card$1,{className:"border-2 shadow-sm",style:{borderColor:"#e6f3f7"},children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"pb-4",style:{backgroundColor:"#e6f3f7"},children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-3 text-xl font-bold",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx(User,{className:"w-6 h-6",style:{color:"#236383"}}),"Recipient Directory"]}),jsxRuntimeExports.jsx(CardDescription,{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:"Contact information for sandwich delivery recipients"})]}),jsxRuntimeExports.jsx(CardContent$1,{className:"pt-6",children:0===f.length?jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:e?"No recipients found matching your search.":"No recipients found."}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:f.map(e=>jsxRuntimeExports.jsxs("div",{className:"p-5 border-2 rounded-lg hover:shadow-md transition-shadow duration-200",style:{borderColor:"#e6f3f7"},children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg mb-2",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:e.name}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("p",{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Phone:"})," ",e.phone]}),e.email&&jsxRuntimeExports.jsxs("p",{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Email:"})," ",e.email]}),e.address&&jsxRuntimeExports.jsxs("p",{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Address:"})," ",e.address]}),e.contactName&&jsxRuntimeExports.jsxs("p",{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Contact:"})," ",e.contactName]})]})]},e.id))})})]})}),i&&jsxRuntimeExports.jsx(TabsContent,{value:"drivers",className:"space-y-6 mt-6",children:jsxRuntimeExports.jsxs(Card$1,{className:"border-2 shadow-sm",style:{borderColor:"#e6f3f7"},children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"pb-4",style:{backgroundColor:"#e6f3f7"},children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-3 text-xl font-bold",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx(User,{className:"w-6 h-6",style:{color:"#236383"}}),"Driver Directory"]}),jsxRuntimeExports.jsx(CardDescription,{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:"Contact information for delivery drivers"})]}),jsxRuntimeExports.jsx(CardContent$1,{className:"pt-6",children:0===g.length?jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:e?"No drivers found matching your search.":"No drivers found."}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:g.map(e=>jsxRuntimeExports.jsxs("div",{className:"p-5 border-2 rounded-lg hover:shadow-md transition-shadow duration-200",style:{borderColor:"#e6f3f7"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg",style:{color:"#236383",fontFamily:"Roboto, sans-serif"},children:e.name}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[e.isActive&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-sm font-medium rounded-full text-white",style:{backgroundColor:"#236383",fontFamily:"Roboto, sans-serif"},children:"Active"}),e.vanApproved&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-sm font-medium rounded-full text-white",style:{backgroundColor:"#FBAD3F",fontFamily:"Roboto, sans-serif"},children:"Van Driver"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("p",{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Phone:"})," ",e.phone]}),jsxRuntimeExports.jsxs("p",{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Email:"})," ",e.email]}),jsxRuntimeExports.jsxs("p",{className:"text-base",style:{color:"#646464",fontFamily:"Roboto, sans-serif"},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Zone:"})," ",e.zone]})]})]},e.id))})})]})})]})]})}function getRawTag$1(e){var t=hasOwnProperty$c.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var n=!0}catch(e3){}var s=nativeObjectToString$1.call(e);return n&&(t?e[symToStringTag$1]=r:delete e[symToStringTag$1]),s}function objectToString$3(e){return nativeObjectToString.call(e)}function baseGetTag$9(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$2(e)}function isObjectLike$b(e){return null!=e&&"object"==typeof e}function isSymbol$8(e){return"symbol"==typeof e||isObjectLike$a(e)&&baseGetTag$8(e)==symbolTag$3}function isKey$4(e,t){if(isArray$g(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol$7(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}function isObject$c(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function isFunction$4(e){if(!isObject$b(e))return!1;var t=baseGetTag$7(e);return t==funcTag$1||t==genTag||t==asyncTag||t==proxyTag}function isMasked$1(e){return!!maskSrcKey&&maskSrcKey in e}function toSource$2(e){if(null!=e){try{return funcToString$2.call(e)}catch(e3){}try{return e+""}catch(e3){}}return""}function baseIsNative$1(e){return!(!isObject$a(e)||isMasked(e))&&(isFunction$3(e)?reIsNative:reIsHostCtor).test(toSource$1(e))}function getValue$2(e,t){return null==e?void 0:e[t]}function getNative$7(e,t){var r=getValue$1(e,t);return baseIsNative(r)?r:void 0}function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}function hashDelete$1(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function hashGet$1(e){var t=this.__data__;if(nativeCreate$2){var r=t[e];return r===HASH_UNDEFINED$2?void 0:r}return hasOwnProperty$a.call(t,e)?t[e]:void 0}function hashHas$1(e){var t=this.__data__;return nativeCreate$1?void 0!==t[e]:hasOwnProperty$9.call(t,e)}function hashSet$1(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}function Hash$1(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function listCacheClear$1(){this.__data__=[],this.size=0}function eq$3(e,t){return e===t||e!=e&&t!=t}function assocIndexOf$4(e,t){for(var r=e.length;r--;)if(eq$2(e[r][0],t))return r;return-1}function listCacheDelete$1(e){var t=this.__data__,r=assocIndexOf$3(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice$1.call(t,r,1),--this.size,!0)}function listCacheGet$1(e){var t=this.__data__,r=assocIndexOf$2(t,e);return r<0?void 0:t[r][1]}function listCacheHas$1(e){return assocIndexOf$1(this.__data__,e)>-1}function listCacheSet$1(e,t){var r=this.__data__,n=assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ListCache$4(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$3),string:new Hash}}function isKeyable$1(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function getMapData$4(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function mapCacheDelete$1(e){var t=getMapData$3(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet$1(e){return getMapData$2(this,e).get(e)}function mapCacheHas$1(e){return getMapData$1(this,e).has(e)}function mapCacheSet$1(e,t){var r=getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function MapCache$3(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function memoize$2(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT$4);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,n);return r.cache=i.set(s,o)||i,o};return r.cache=new(memoize$2.Cache||MapCache$2),r}function memoizeCapped$1(e){var t=memoize$1(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}function arrayMap$3(e,t){for(var r=-1,n=null==e?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}function baseToString$1(e){if("string"==typeof e)return e;if(isArray$f(e))return arrayMap$2(e,baseToString$1)+"";if(isSymbol$6(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function toString$6(e){return null==e?"":baseToString(e)}function castPath$2(e,t){return isArray$e(e)?e:isKey$3(e,t)?[e]:stringToPath$1(toString$5(e))}function toKey$4(e){if("string"==typeof e||isSymbol$5(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function baseGet$4(e,t){for(var r=0,n=(t=castPath$1(t,e)).length;null!=e&&r<n;)e=e[toKey$3(t[r++])];return r&&r==n?e:void 0}function get$4(e,t,r){var n=null==e?void 0:baseGet$3(e,t);return void 0===n?r:n}function isNil(e){return null==e}function isString$3(e){return"string"==typeof e||!isArray$d(e)&&isObjectLike$9(e)&&baseGetTag$6(e)==stringTag$2}function v$1(t){if("object"==typeof t&&null!==t){var r=t.$$typeof;switch(r){case b$1:switch(t=t.type){case d$1:case f$1:case e:case m$1:case n$1:return t;default:switch(t=t&&t.$$typeof){case k$2:case h$1:case l:case q$1:case p$1:case g$1:return t;default:return r}}case c$2:return r}}}function isNumber$3(e){return"number"==typeof e||isObjectLike$8(e)&&baseGetTag$5(e)==numberTag$2}function isNaN$1(e){return isNumber$2(e)&&e!=+e}function findEntryInArray(e,t,r){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):get$5(e,t))===r}):null}function shallowEqual(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function _typeof$K(e){return(_typeof$K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectWithoutProperties$j(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$l(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$l(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _typeof$J(e){return(_typeof$J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function findAllByType(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(function(e){return getDisplayName(e)}):[getDisplayName(t)],toArray$1(e).forEach(function(e){var t=get$5(e,"type.displayName")||get$5(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}function findChildByType(e,t){var r=findAllByType(e,t);return r&&r[0]}function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$t.apply(this,arguments)}function _objectWithoutProperties$i(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$k(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$k(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Surface(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,a=e.title,l=e.desc,c=_objectWithoutProperties$i(e,_excluded$k),u=s||{width:r,height:n,x:0,y:0},d=clsx("recharts-surface",i);return React$2.createElement("svg",_extends$t({},filterProps$1(c,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),React$2.createElement("title",null,a),React$2.createElement("desc",null,l),t)}function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$s.apply(this,arguments)}function _objectWithoutProperties$h(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$j(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$j(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function baseSlice$1(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++n<s;)i[n]=e[n+t];return i}function castSlice$1(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:baseSlice(e,t,r)}function hasUnicode$2(e){return reHasUnicode.test(e)}function asciiToArray$1(e){return e.split("")}function unicodeToArray$1(e){return e.match(reUnicode)||[]}function stringToArray$3(e){return hasUnicode$1(e)?unicodeToArray(e):asciiToArray(e)}function createCaseFirst$1(e){return function(t){t=toString$4(t);var r=hasUnicode(t)?stringToArray$2(t):void 0,n=r?r[0]:t.charAt(0),s=r?castSlice(r,1).join(""):t.slice(1);return n[e]()+s}}function constant$3(e){return function(){return e}}function append(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function appendRound(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return append;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}function withPath(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new Path(t)}function array$1(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}function curveLinear(e){return new Linear(e)}function x$1(e){return e[0]}function y$1(e){return e[1]}function shapeLine(e,t){var r=constant$3(!0),n=null,s=curveLinear,i=null,o=withPath(a);function a(a){var l,c,u,d=(a=array$1(a)).length,p=!1;for(null==n&&(i=s(u=o())),l=0;l<=d;++l)!(l<d&&r(c=a[l],l,a))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(c,l,a),+t(c,l,a));if(u)return i=null,u+""||null}return e="function"==typeof e?e:void 0===e?x$1:constant$3(e),t="function"==typeof t?t:void 0===t?y$1:constant$3(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:constant$3(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:constant$3(+e),a):t},a.defined=function(e){return arguments.length?(r="function"==typeof e?e:constant$3(!!e),a):r},a.curve=function(e){return arguments.length?(s=e,null!=n&&(i=s(n)),a):s},a.context=function(e){return arguments.length?(null==e?n=i=null:i=s(n=e),a):n},a}function shapeArea(e,t,r){var n=null,s=constant$3(!0),i=null,o=curveLinear,a=null,l=withPath(c);function c(c){var u,d,p,m,x,f=(c=array$1(c)).length,h=!1,g=new Array(f),y=new Array(f);for(null==i&&(a=o(x=l())),u=0;u<=f;++u){if(!(u<f&&s(m=c[u],u,c))===h)if(h=!h)d=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=u-1;p>=d;--p)a.point(g[p],y[p]);a.lineEnd(),a.areaEnd()}h&&(g[u]=+e(m,u,c),y[u]=+t(m,u,c),a.point(n?+n(m,u,c):g[u],r?+r(m,u,c):y[u]))}if(x)return a=null,x+""||null}function u(){return shapeLine().defined(s).curve(o).context(i)}return e="function"==typeof e?e:void 0===e?x$1:constant$3(+e),t="function"==typeof t?t:constant$3(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?y$1:constant$3(+r),c.x=function(t){return arguments.length?(e="function"==typeof t?t:constant$3(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:constant$3(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:constant$3(+e),c):n},c.y=function(e){return arguments.length?(t="function"==typeof e?e:constant$3(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:constant$3(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:constant$3(+e),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(e){return arguments.length?(s="function"==typeof e?e:constant$3(!!e),c):s},c.curve=function(e){return arguments.length?(o=e,null!=i&&(a=o(i)),c):o},c.context=function(e){return arguments.length?(null==e?i=a=null:a=o(i=e),c):i},c}function bumpX(e){return new Bump(e,!0)}function bumpY(e){return new Bump(e,!1)}function Symbol$3(e,t){let r=null,n=withPath(s);function s(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return e="function"==typeof e?e:constant$3(e||symbolCircle),t="function"==typeof t?t:constant$3(void 0===t?64:+t),s.type=function(t){return arguments.length?(e="function"==typeof t?t:constant$3(t),s):e},s.size=function(e){return arguments.length?(t="function"==typeof e?e:constant$3(+e),s):t},s.context=function(e){return arguments.length?(r=null==e?null:e,s):r},s}function noop$c(){}function point$5(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Basis(e){this._context=e}function curveBasis(e){return new Basis(e)}function BasisClosed(e){this._context=e}function curveBasisClosed(e){return new BasisClosed(e)}function BasisOpen(e){this._context=e}function curveBasisOpen(e){return new BasisOpen(e)}function LinearClosed(e){this._context=e}function curveLinearClosed(e){return new LinearClosed(e)}function sign(e){return e<0?-1:1}function slope3(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),a=(i*s+o*n)/(n+s);return(sign(i)+sign(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function slope2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function point$4(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,a=(i-n)/3;e._context.bezierCurveTo(n+a,s+a*t,i-a,o-a*r,i,o)}function MonotoneX(e){this._context=e}function MonotoneY(e){this._context=new ReflectContext(e)}function ReflectContext(e){this._context=e}function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}function Natural(e){this._context=e}function controlPoints(e){var t,r,n=e.length-1,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(s[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function curveNatural(e){return new Natural(e)}function Step(e,t){this._context=e,this._t=t}function curveStep(e){return new Step(e,.5)}function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}function stackOffsetNone(e,t){if((s=e.length)>1)for(var r,n,s,i=1,o=e[t[0]],a=o.length;i<s;++i)for(n=o,o=e[t[i]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function stackOrderNone(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function stackValue(e,t){return e[t]}function stackSeries(e){const t=[];return t.key=e,t}function shapeStack(){var e=constant$3([]),t=stackOrderNone,r=stackOffsetNone,n=stackValue;function s(s){var i,o,a=Array.from(e.apply(this,arguments),stackSeries),l=a.length,c=-1;for(const e of s)for(i=0,++c;i<l;++i)(a[i][c]=[0,+n(e,a[i].key,c,s)]).data=e;for(i=0,o=array$1(t(a));i<l;++i)a[o[i]].index=i;return r(a,o),a}return s.keys=function(t){return arguments.length?(e="function"==typeof t?t:constant$3(Array.from(t)),s):e},s.value=function(e){return arguments.length?(n="function"==typeof e?e:constant$3(+e),s):n},s.order=function(e){return arguments.length?(t=null==e?stackOrderNone:"function"==typeof e?e:constant$3(Array.from(e)),s):t},s.offset=function(e){return arguments.length?(r=null==e?stackOffsetNone:e,s):r},s}function stackOffsetExpand(e,t){if((n=e.length)>0){for(var r,n,s,i=0,o=e[0].length;i<o;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}stackOffsetNone(e,t)}}function stackOffsetSilhouette(e,t){if((r=e.length)>0){for(var r,n=0,s=e[t[0]],i=s.length;n<i;++n){for(var o=0,a=0;o<r;++o)a+=e[o][n][1]||0;s[n][1]+=s[n][0]=-a/2}stackOffsetNone(e,t)}}function stackOffsetWiggle(e,t){if((s=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,s,i=0,o=1;o<n;++o){for(var a=0,l=0,c=0;a<s;++a){for(var u=e[t[a]],d=u[o][1]||0,p=(d-(u[o-1][1]||0))/2,m=0;m<a;++m){var x=e[t[m]];p+=(x[o][1]||0)-(x[o-1][1]||0)}l+=d,c+=p*d}r[o-1][1]+=r[o-1][0]=i,l&&(i-=c/l)}r[o-1][1]+=r[o-1][0]=i,stackOffsetNone(e,t)}}function _typeof$I(e){return(_typeof$I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$r.apply(this,arguments)}function ownKeys$D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$D(Object(r),!0).forEach(function(t){_defineProperty$J(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$J(e,t,r){return(t=_toPropertyKey$G(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$G(e){var t=_toPrimitive$G(e,"string");return"symbol"==_typeof$I(t)?t:t+""}function _toPrimitive$G(e,t){if("object"!=_typeof$I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties$g(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$i(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$i(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _typeof$H(e){return(_typeof$H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$q.apply(this,arguments)}function ownKeys$C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$C(Object(r),!0).forEach(function(t){_defineProperty$I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _classCallCheck$k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$F(n.key),n)}}function _createClass$k(e,t,r){return t&&_defineProperties$k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$f(e,t,r){return t=_getPrototypeOf$h(t),_possibleConstructorReturn$h(e,_isNativeReflectConstruct$h()?Reflect.construct(t,r||[],_getPrototypeOf$h(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$h(e,t){if(t&&("object"===_typeof$H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$h(e)}function _assertThisInitialized$h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$h=function(){return!!e})()}function _getPrototypeOf$h(e){return(_getPrototypeOf$h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$h(e,t)}function _setPrototypeOf$h(e,t){return(_setPrototypeOf$h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$I(e,t,r){return(t=_toPropertyKey$F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$F(e){var t=_toPrimitive$F(e,"string");return"symbol"==_typeof$H(t)?t:t+""}function _toPrimitive$F(e,t){if("object"!=_typeof$H(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function stackClear$1(){this.__data__=new ListCache$2,this.size=0}function stackDelete$1(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function stackGet$1(e){return this.__data__.get(e)}function stackHas$1(e){return this.__data__.has(e)}function stackSet$1(e,t){var r=this.__data__;if(r instanceof ListCache$1){var n=r.__data__;if(!Map$2||n.length<LARGE_ARRAY_SIZE$1-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new MapCache$1(n)}return r.set(e,t),this.size=r.size,this}function Stack$2(e){var t=this.__data__=new ListCache(e);this.size=t.size}function setCacheAdd$1(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas$1(e){return this.__data__.has(e)}function SetCache$2(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new MapCache;++t<r;)this.add(e[t])}function arraySome$2(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function cacheHas$2(e,t){return e.has(t)}function equalArrays$2(e,t,r,n,s,i){var o=r&COMPARE_PARTIAL_FLAG$5,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,p=!0,m=r&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(i.set(e,t),i.set(t,e);++d<a;){var x=e[d],f=t[d];if(n)var h=o?n(f,x,d,t,e,i):n(x,f,d,e,t,i);if(void 0!==h){if(h)continue;p=!1;break}if(m){if(!arraySome$1(t,function(e,t){if(!cacheHas$1(m,t)&&(x===e||s(x,e,r,n,i)))return m.push(t)})){p=!1;break}}else if(x!==f&&!s(x,f,r,n,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function mapToArray$1(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function setToArray$3(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function equalByTag$1(e,t,r,n,s,i,o){switch(r){case dataViewTag$2:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag$1:return!(e.byteLength!=t.byteLength||!i(new Uint8Array$1(e),new Uint8Array$1(t)));case boolTag$2:case dateTag$1:case numberTag$1:return eq$1(+e,+t);case errorTag$1:return e.name==t.name&&e.message==t.message;case regexpTag$1:case stringTag$1:return e==t+"";case mapTag$2:var a=mapToArray;case setTag$2:var l=n&COMPARE_PARTIAL_FLAG$4;if(a||(a=setToArray$2),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=COMPARE_UNORDERED_FLAG$2,o.set(e,t);var u=equalArrays$1(a(e),a(t),n,s,i,o);return o.delete(e),u;case symbolTag$2:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}function arrayPush$2(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}function baseGetAllKeys$1(e,t,r){var n=t(e);return isArray$c(e)?n:arrayPush$1(n,r(e))}function arrayFilter$1(e,t){for(var r=-1,n=null==e?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}function stubArray$1(){return[]}function baseTimes$1(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function baseIsArguments$1(e){return isObjectLike$7(e)&&baseGetTag$4(e)==argsTag$2}function stubFalse(){return!1}function isIndex$3(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER$2:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isLength$3(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$1}function baseIsTypedArray$1(e){return isObjectLike$5(e)&&isLength$2(e.length)&&!!typedArrayTags[baseGetTag$3(e)]}function baseUnary$2(e){return function(t){return e(t)}}function arrayLikeKeys$1(e,t){var r=isArray$b(e),n=!r&&isArguments$2(e),s=!r&&!n&&isBuffer$2(e),i=!r&&!n&&!s&&isTypedArray$3(e),o=r||n||s||i,a=o?baseTimes(e.length,String):[],l=a.length;for(var c in e)!t&&!hasOwnProperty$7.call(e,c)||o&&("length"==c||s&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||isIndex$2(c,l))||a.push(c);return a}function isPrototype$1(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$6)}function overArg$2(e,t){return function(r){return e(t(r))}}function baseKeys$1(e){if(!isPrototype(e))return nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$6.call(e,r)&&"constructor"!=r&&t.push(r);return t}function isArrayLike$5(e){return null!=e&&isLength$1(e.length)&&!isFunction$2(e)}function keys$7(e){return isArrayLike$4(e)?arrayLikeKeys(e):baseKeys(e)}function getAllKeys$1(e){return baseGetAllKeys(e,keys$6,getSymbols)}function equalObjects$1(e,t,r,n,s,i){var o=r&COMPARE_PARTIAL_FLAG$3,a=getAllKeys(e),l=a.length;if(l!=getAllKeys(t).length&&!o)return!1;for(var c=l;c--;){var u=a[c];if(!(o?u in t:hasOwnProperty$5.call(t,u)))return!1}var d=i.get(e),p=i.get(t);if(d&&p)return d==t&&p==e;var m=!0;i.set(e,t),i.set(t,e);for(var x=o;++c<l;){var f=e[u=a[c]],h=t[u];if(n)var g=o?n(h,f,u,t,e,i):n(f,h,u,e,t,i);if(!(void 0===g?f===h||s(f,h,r,n,i):g)){m=!1;break}x||(x="constructor"==u)}if(m&&!x){var y=e.constructor,j=t.constructor;y==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof j&&j instanceof j||(m=!1)}return i.delete(e),i.delete(t),m}function baseIsEqualDeep$1(e,t,r,n,s,i){var o=isArray$a(e),a=isArray$a(t),l=o?arrayTag:getTag$1(e),c=a?arrayTag:getTag$1(t),u=(l=l==argsTag?objectTag$1:l)==objectTag$1,d=(c=c==argsTag?objectTag$1:c)==objectTag$1,p=l==c;if(p&&isBuffer$1(e)){if(!isBuffer$1(t))return!1;o=!0,u=!1}if(p&&!u)return i||(i=new Stack$1),o||isTypedArray$2(e)?equalArrays(e,t,r,n,s,i):equalByTag(e,t,l,r,n,s,i);if(!(r&COMPARE_PARTIAL_FLAG$2)){var m=u&&hasOwnProperty$4.call(e,"__wrapped__"),x=d&&hasOwnProperty$4.call(t,"__wrapped__");if(m||x){var f=m?e.value():e,h=x?t.value():t;return i||(i=new Stack$1),s(f,h,r,n,i)}}return!!p&&(i||(i=new Stack$1),equalObjects(e,t,r,n,s,i))}function baseIsEqual$3(e,t,r,n,s){return e===t||(null==e||null==t||!isObjectLike$4(e)&&!isObjectLike$4(t)?e!=e&&t!=t:baseIsEqualDeep(e,t,r,n,baseIsEqual$3,s))}function baseIsMatch$1(e,t,r,n){var s=r.length,i=s,o=!n;if(null==e)return!i;for(e=Object(e);s--;){var a=r[s];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++s<i;){var l=(a=r[s])[0],c=e[l],u=a[1];if(o&&a[2]){if(void 0===c&&!(l in e))return!1}else{var d=new Stack;if(n)var p=n(c,u,l,e,t,d);if(!(void 0===p?baseIsEqual$2(u,c,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,n,d):p))return!1}}return!0}function isStrictComparable$2(e){return e==e&&!isObject$9(e)}function getMatchData$1(e){for(var t=keys$5(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,isStrictComparable$1(s)]}return t}function matchesStrictComparable$2(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function baseMatches$1(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable$1(t[0][0],t[0][1]):function(r){return r===e||baseIsMatch(r,e,t)}}function baseHasIn$1(e,t){return null!=e&&t in Object(e)}function hasPath$1(e,t,r){for(var n=-1,s=(t=castPath(t,e)).length,i=!1;++n<s;){var o=toKey$2(t[n]);if(!(i=null!=e&&r(e,o)))break;e=e[o]}return i||++n!=s?i:!!(s=null==e?0:e.length)&&isLength(s)&&isIndex$1(o,s)&&(isArray$9(e)||isArguments$1(e))}function hasIn$1(e,t){return null!=e&&hasPath(e,t,baseHasIn)}function baseMatchesProperty$1(e,t){return isKey$2(e)&&isStrictComparable(t)?matchesStrictComparable(toKey$1(e),t):function(r){var n=get$3(r,e);return void 0===n&&n===t?hasIn(r,e):baseIsEqual$1(t,n,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function identity$b(e){return e}function baseProperty$1(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep$1(e){return function(t){return baseGet$2(t,e)}}function property$1(e){return isKey$1(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee$8(e){return"function"==typeof e?e:null==e?identity$a:"object"==typeof e?isArray$8(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseFindIndex$2(e,t,r,n){for(var s=e.length,i=r+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}function baseIsNaN$1(e){return e!=e}function strictIndexOf$1(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}function baseIndexOf$1(e,t,r){return t==t?strictIndexOf(e,t,r):baseFindIndex$1(e,baseIsNaN,r)}function arrayIncludes$1(e,t){return!!(null==e?0:e.length)&&baseIndexOf(e,t,0)>-1}function arrayIncludesWith$1(e,t,r){for(var n=-1,s=null==e?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1}function noop$b(){}function baseUniq$1(e,t,r){var n=-1,s=arrayIncludes,i=e.length,o=!0,a=[],l=a;if(r)o=!1,s=arrayIncludesWith;else if(i>=LARGE_ARRAY_SIZE){var c=t?null:createSet(e);if(c)return setToArray(c);o=!1,s=cacheHas,l=new SetCache}else l=t?[]:a;e:for(;++n<i;){var u=e[n],d=t?t(u):u;if(u=r||0!==u?u:0,o&&d==d){for(var p=l.length;p--;)if(l[p]===d)continue e;t&&l.push(d),a.push(u)}else s(l,d,r)||(l!==a&&l.push(d),a.push(u))}return a}function uniqBy$2(e,t){return e&&e.length?baseUniq(e,baseIteratee$7(t)):[]}function getUniqPayload(e,t,r){return!0===t?uniqBy$3(e,r):isFunction$5(t)?uniqBy$3(e,t):e}function _typeof$G(e){return(_typeof$G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$B(Object(r),!0).forEach(function(t){_defineProperty$H(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$B(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _classCallCheck$j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$E(n.key),n)}}function _createClass$j(e,t,r){return t&&_defineProperties$j(e.prototype,t),r&&_defineProperties$j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$e(e,t,r){return t=_getPrototypeOf$g(t),_possibleConstructorReturn$g(e,_isNativeReflectConstruct$g()?Reflect.construct(t,r||[],_getPrototypeOf$g(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$g(e,t){if(t&&("object"===_typeof$G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$g(e)}function _assertThisInitialized$g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$g=function(){return!!e})()}function _getPrototypeOf$g(e){return(_getPrototypeOf$g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$g(e,t)}function _setPrototypeOf$g(e,t){return(_setPrototypeOf$g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$H(e,t,r){return(t=_toPropertyKey$E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$E(e){var t=_toPrimitive$E(e,"string");return"symbol"==_typeof$G(t)?t:t+""}function _toPrimitive$E(e,t){if("object"!=_typeof$G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _objectWithoutProperties$f(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$h(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$h(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function defaultUniqBy$1(e){return e.value}function renderContent$1(e,t){if(React$2.isValidElement(e))return React$2.cloneElement(e,t);if("function"==typeof e)return React$2.createElement(e,t);t.ref;var r=_objectWithoutProperties$f(t,_excluded$h);return React$2.createElement(DefaultLegendContent,r)}function isFlattenable$1(e){return isArray$7(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function baseFlatten$2(e,t,r,n,s){var i=-1,o=e.length;for(r||(r=isFlattenable),s||(s=[]);++i<o;){var a=e[i];t>0&&r(a)?t>1?baseFlatten$2(a,t-1,r,n,s):arrayPush(s,a):n||(s[s.length]=a)}return s}function createBaseFor$1(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),a=o.length;a--;){var l=o[e?a:++s];if(!1===r(i[l],l,i))break}return t}}function baseForOwn$2(e,t){return e&&baseFor(e,t,keys$4)}function createBaseEach$1(e,t){return function(r,n){if(null==r)return r;if(!isArrayLike$3(r))return e(r,n);for(var s=r.length,i=t?s:-1,o=Object(r);(t?i--:++i<s)&&!1!==n(o[i],i,o););return r}}function baseMap$2(e,t){var r=-1,n=isArrayLike$2(e)?Array(e.length):[];return baseEach$2(e,function(e,s,i){n[++r]=t(e,s,i)}),n}function baseSortBy$1(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}function compareAscending$1(e,t){if(e!==t){var r=void 0!==e,n=null===e,s=e==e,i=isSymbol$4(e),o=void 0!==t,a=null===t,l=t==t,c=isSymbol$4(t);if(!a&&!c&&!i&&e>t||i&&o&&l&&!a&&!c||n&&o&&l||!r&&l||!s)return 1;if(!n&&!i&&!c&&e<t||c&&r&&s&&!n&&!i||a&&r&&s||!o&&s||!l)return-1}return 0}function compareMultiple$1(e,t,r){for(var n=-1,s=e.criteria,i=t.criteria,o=s.length,a=r.length;++n<o;){var l=compareAscending(s[n],i[n]);if(l)return n>=a?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}function baseOrderBy$1(e,t,r){t=t.length?arrayMap$1(t,function(e){return isArray$6(e)?function(t){return baseGet$1(t,1===e.length?e[0]:e)}:e}):[identity$9];var n=-1;t=arrayMap$1(t,baseUnary(baseIteratee$6));var s=baseMap$1(e,function(e,r,s){return{criteria:arrayMap$1(t,function(t){return t(e)}),index:++n,value:e}});return baseSortBy(s,function(e,t){return compareMultiple(e,t,r)})}function apply$1(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function overRest$1(e,t,r){return t=nativeMax$5(void 0===t?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=nativeMax$5(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=r(o),apply(e,this,a)}}function constant$2(e){return function(){return e}}function shortOut$1(e){var t=0,r=0;return function(){var n=nativeNow(),s=HOT_SPAN-(n-r);if(r=n,s>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function baseRest$1(e,t){return setToString(overRest(e,t,identity$7),e+"")}function isIterateeCall$4(e,t,r){if(!isObject$8(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike$1(r)&&isIndex(t,r.length):"string"==n&&t in r)&&eq(r[t],e)}function _typeof$F(e){return(_typeof$F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$p.apply(this,arguments)}function _slicedToArray$e(e,t){return _arrayWithHoles$f(e)||_iterableToArrayLimit$e(e,t)||_unsupportedIterableToArray$p(e,t)||_nonIterableRest$f()}function _nonIterableRest$f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$p(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$p(e,t):void 0}}function _arrayLikeToArray$p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$e(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t);else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$f(e){if(Array.isArray(e))return e}function ownKeys$A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$A(Object(r),!0).forEach(function(t){_defineProperty$F(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$F(e,t,r){return(t=_toPropertyKey$D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$D(e){var t=_toPrimitive$D(e,"string");return"symbol"==_typeof$F(t)?t:t+""}function _toPrimitive$D(e,t){if("object"!=_typeof$F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function defaultFormatter(e){return Array.isArray(e)&&isNumOrStr(e[0])&&isNumOrStr(e[1])?e.join(" ~ "):e}function _typeof$E(e){return(_typeof$E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty$E(e,t,r){return(t=_toPropertyKey$C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$C(e){var t=_toPrimitive$C(e,"string");return"symbol"==_typeof$E(t)?t:t+""}function _toPrimitive$C(e,t){if("object"!=_typeof$E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function getTooltipCSSClassName(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return clsx(CSS_CLASS_PREFIX,_defineProperty$E(_defineProperty$E(_defineProperty$E(_defineProperty$E({},"".concat(CSS_CLASS_PREFIX,"-right"),isNumber$1(r)&&t&&isNumber$1(t.x)&&r>=t.x),"".concat(CSS_CLASS_PREFIX,"-left"),isNumber$1(r)&&t&&isNumber$1(t.x)&&r<t.x),"".concat(CSS_CLASS_PREFIX,"-bottom"),isNumber$1(n)&&t&&isNumber$1(t.y)&&n>=t.y),"".concat(CSS_CLASS_PREFIX,"-top"),isNumber$1(n)&&t&&isNumber$1(t.y)&&n<t.y))}function getTooltipTranslateXY(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,a=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(i&&isNumber$1(i[n]))return i[n];var u=r[n]-a-s,d=r[n]+s;return t[n]?o[n]?u:d:o[n]?u<l[n]?Math.max(d,l[n]):Math.max(u,l[n]):d+a>l[n]+c?Math.max(u,l[n]):Math.max(d,l[n])}function getTransformStyle(e){var t=e.translateX,r=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function getTooltipTranslate(e){var t,r,n=e.allowEscapeViewBox,s=e.coordinate,i=e.offsetTopLeft,o=e.position,a=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&s?getTransformStyle({translateX:t=getTooltipTranslateXY({allowEscapeViewBox:n,coordinate:s,key:"x",offsetTopLeft:i,position:o,reverseDirection:a,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:r=getTooltipTranslateXY({allowEscapeViewBox:n,coordinate:s,key:"y",offsetTopLeft:i,position:o,reverseDirection:a,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):TOOLTIP_HIDDEN,cssClasses:getTooltipCSSClassName({translateX:t,translateY:r,coordinate:s})}}function _typeof$D(e){return(_typeof$D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$z(Object(r),!0).forEach(function(t){_defineProperty$D(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _classCallCheck$i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$B(n.key),n)}}function _createClass$i(e,t,r){return t&&_defineProperties$i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$d(e,t,r){return t=_getPrototypeOf$f(t),_possibleConstructorReturn$f(e,_isNativeReflectConstruct$f()?Reflect.construct(t,r||[],_getPrototypeOf$f(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$f(e,t){if(t&&("object"===_typeof$D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$f(e)}function _assertThisInitialized$f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$f=function(){return!!e})()}function _getPrototypeOf$f(e){return(_getPrototypeOf$f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$f(e,t)}function _setPrototypeOf$f(e,t){return(_setPrototypeOf$f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$D(e,t,r){return(t=_toPropertyKey$B(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$B(e){var t=_toPrimitive$B(e,"string");return"symbol"==_typeof$D(t)?t:t+""}function _toPrimitive$B(e,t){if("object"!=_typeof$D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _typeof$C(e){return(_typeof$C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$y(Object(r),!0).forEach(function(t){_defineProperty$C(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _classCallCheck$h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$A(n.key),n)}}function _createClass$h(e,t,r){return t&&_defineProperties$h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$c(e,t,r){return t=_getPrototypeOf$e(t),_possibleConstructorReturn$e(e,_isNativeReflectConstruct$e()?Reflect.construct(t,r||[],_getPrototypeOf$e(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$e(e,t){if(t&&("object"===_typeof$C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$e(e)}function _assertThisInitialized$e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$e=function(){return!!e})()}function _getPrototypeOf$e(e){return(_getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$e(e,t)}function _setPrototypeOf$e(e,t){return(_setPrototypeOf$e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$C(e,t,r){return(t=_toPropertyKey$A(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$A(e){var t=_toPrimitive$A(e,"string");return"symbol"==_typeof$C(t)?t:t+""}function _toPrimitive$A(e,t){if("object"!=_typeof$C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function defaultUniqBy(e){return e.dataKey}function renderContent(e,t){return React$2.isValidElement(e)?React$2.cloneElement(e,t):"function"==typeof e?React$2.createElement(e,t):React$2.createElement(DefaultTooltipContent,t)}function trimmedEndIndex$1(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}function baseTrim$1(e){return e?e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,""):e}function toNumber$4(e){if("number"==typeof e)return e;if(isSymbol$3(e))return NAN$2;if(isObject$7(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$7(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=baseTrim(e);var r=reIsBinary$2.test(e);return r||reIsOctal$2.test(e)?freeParseInt$2(e.slice(2),r?2:8):reIsBadHex$2.test(e)?NAN$2:+e}function debounce$6(e,t,r){var n,s,i,o,a,l,c=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$3);function m(t){var r=n,i=s;return n=s=void 0,c=t,o=e.apply(i,r)}function x(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-c>=i}function f(){var e=now$3();if(x(e))return h(e);a=setTimeout(f,function(e){var r=t-(e-l);return d?nativeMin$2(r,i-(e-c)):r}(e))}function h(e){return a=void 0,p&&n?m(e):(n=s=void 0,o)}function g(){var e=now$3(),r=x(e);if(n=arguments,s=this,l=e,r){if(void 0===a)return function(e){return c=e,a=setTimeout(f,t),u?m(e):o}(l);if(d)return clearTimeout(a),a=setTimeout(f,t),m(l)}return void 0===a&&(a=setTimeout(f,t)),o}return t=toNumber$3(t)||0,isObject$6(r)&&(u=!!r.leading,i=(d="maxWait"in r)?nativeMax$4(toNumber$3(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p),g.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=s=a=void 0},g.flush=function(){return void 0===a?o:h(now$3())},g}function throttle$3(e,t,r){var n=!0,s=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$2);return isObject$5(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),debounce$5(e,t,{leading:n,maxWait:t,trailing:s})}function _typeof$B(e){return(_typeof$B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$x(Object(r),!0).forEach(function(t){_defineProperty$B(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$B(e,t,r){return(t=_toPropertyKey$z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$z(e){var t=_toPrimitive$z(e,"string");return"symbol"==_typeof$B(t)?t:t+""}function _toPrimitive$z(e,t){if("object"!=_typeof$B(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _slicedToArray$d(e,t){return _arrayWithHoles$e(e)||_iterableToArrayLimit$d(e,t)||_unsupportedIterableToArray$o(e,t)||_nonIterableRest$e()}function _nonIterableRest$e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$o(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$o(e,t):void 0}}function _arrayLikeToArray$o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$d(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t);else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$e(e){if(Array.isArray(e))return e}function _typeof$A(e){return(_typeof$A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$w(Object(r),!0).forEach(function(t){_defineProperty$A(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$A(e,t,r){return(t=_toPropertyKey$y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$y(e){var t=_toPrimitive$y(e,"string");return"symbol"==_typeof$A(t)?t:t+""}function _toPrimitive$y(e,t){if("object"!=_typeof$A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function removeInvalidKeys(e){var t=_objectSpread$w({},e);return Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t}function _typeof$z(e){return(_typeof$z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray$c(e,t){return _arrayWithHoles$d(e)||_iterableToArrayLimit$c(e,t)||_unsupportedIterableToArray$n(e,t)||_nonIterableRest$d()}function _nonIterableRest$d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$n(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$n(e,t):void 0}}function _arrayLikeToArray$n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$c(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$d(e){if(Array.isArray(e))return e}function _classCallCheck$g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$x(n.key),n)}}function _createClass$g(e,t,r){return t&&_defineProperties$g(e.prototype,t),r&&_defineProperties$g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey$x(e){var t=_toPrimitive$x(e,"string");return"symbol"==_typeof$z(t)?t:t+""}function _toPrimitive$x(e,t){if("object"!=_typeof$z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function convertToPx(e,t){return e*CONVERSION_RATES[t]}function calculateArithmetic(e){if(e.includes(STR_NAN))return STR_NAN;for(var t=e;t.includes("*")||t.includes("/");){var r,n=_slicedToArray$c(null!==(r=MULTIPLY_OR_DIVIDE_REGEX.exec(t))&&void 0!==r?r:[],4),s=n[1],i=n[2],o=n[3],a=DecimalCSS.parse(null!=s?s:""),l=DecimalCSS.parse(null!=o?o:""),c="*"===i?a.multiply(l):a.divide(l);if(c.isNaN())return STR_NAN;t=t.replace(MULTIPLY_OR_DIVIDE_REGEX,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=_slicedToArray$c(null!==(u=ADD_OR_SUBTRACT_REGEX.exec(t))&&void 0!==u?u:[],4),p=d[1],m=d[2],x=d[3],f=DecimalCSS.parse(null!=p?p:""),h=DecimalCSS.parse(null!=x?x:""),g="+"===m?f.add(h):f.subtract(h);if(g.isNaN())return STR_NAN;t=t.replace(ADD_OR_SUBTRACT_REGEX,g.toString())}return t}function calculateParentheses(e){for(var t=e;t.includes("(");){var r=_slicedToArray$c(PARENTHESES_REGEX.exec(t),2)[1];t=t.replace(PARENTHESES_REGEX,calculateArithmetic(r))}return t}function evaluateExpression(e){var t=e.replace(/\s+/g,"");return t=calculateArithmetic(t=calculateParentheses(t))}function safeEvaluateExpression(e){try{return evaluateExpression(e)}catch(e3){return STR_NAN}}function reduceCSSCalc(e){var t=safeEvaluateExpression(e.slice(5,-1));return t===STR_NAN?"":t}function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$o.apply(this,arguments)}function _objectWithoutProperties$e(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$g(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$g(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _slicedToArray$b(e,t){return _arrayWithHoles$c(e)||_iterableToArrayLimit$b(e,t)||_unsupportedIterableToArray$m(e,t)||_nonIterableRest$c()}function _nonIterableRest$c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$m(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$m(e,t):void 0}}function _arrayLikeToArray$m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$b(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$c(e){if(Array.isArray(e))return e}function ascending(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,r,n;function s(e,n,s=0,i=e.length){if(s<i){if(0!==t(n,n))return i;do{const t=s+i>>>1;r(e[t],n)<0?s=t+1:i=t}while(s<i)}return s}return 2!==e.length?(t=ascending,r=(t,r)=>ascending(e(t),r),n=(t,r)=>e(t)-r):(t=e===ascending||e===descending?e:zero$1,r=e,n=e),{left:s,center:function(e,t,r=0,i=e.length){const o=s(e,t,r,i-1);return o>r&&n(e[o-1],t)>-n(e[o],t)?o-1:o},right:function(e,n,s=0,i=e.length){if(s<i){if(0!==t(n,n))return i;do{const t=s+i>>>1;r(e[t],n)<=0?s=t+1:i=t}while(s<i)}return s}}}function zero$1(){return 0}function number$5(e){return null===e?NaN:+e}function*numbers(e,t){for(let r of e)null!=r&&(r=+r)>=r&&(yield r)}function intern_get({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function intern_set({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function intern_delete({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function keyof(e){return null!==e&&"object"==typeof e?e.valueOf():e}function compareDefined(e=ascending){if(e===ascending)return ascendingDefined;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function ascendingDefined(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function tickSpec(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=e10?10:i>=e5?5:i>=e2?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=r&&r<2?tickSpec(e,t,2*r):[a,l,c]}function ticks(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[s,i,o]=n?tickSpec(t,e,r):tickSpec(e,t,r);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(n)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function tickIncrement(e,t,r){return tickSpec(e=+e,t=+t,r=+r)[2]}function tickStep(e,t,r){r=+r;const n=(t=+t)<(e=+e),s=n?tickIncrement(t,e,r):tickIncrement(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function max$3(e,t){let r;for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);return r}function min$3(e,t){let r;for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);return r}function quickselect(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=void 0===s?ascendingDefined:compareDefined(s);n>r;){if(n-r>600){const i=n-r+1,o=t-r+1,a=Math.log(i),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(i-l)/i)*(o-i/2<0?-1:1);quickselect(e,t,Math.max(r,Math.floor(t-o*l/i+c)),Math.min(n,Math.floor(t+(i-o)*l/i+c)),s)}const i=e[t];let o=r,a=n;for(swap(e,r,t),s(e[n],i)>0&&swap(e,r,n);o<a;){for(swap(e,o,a),++o,--a;s(e[o],i)<0;)++o;for(;s(e[a],i)>0;)--a}0===s(e[r],i)?swap(e,r,a):(++a,swap(e,a,n)),a<=t&&(r=a+1),t<=a&&(n=a-1)}return e}function swap(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function quantile$1(e,t,r){if((n=(e=Float64Array.from(numbers(e))).length)&&!isNaN(t=+t)){if(t<=0||n<2)return min$3(e);if(t>=1)return max$3(e);var n,s=(n-1)*t,i=Math.floor(s),o=max$3(quickselect(e,i).subarray(0,i+1));return o+(min$3(e.subarray(i+1))-o)*(s-i)}}function quantileSorted(e,t,r=number$5){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e);return o+(+r(e[i+1],i+1,e)-o)*(s-i)}}function range$3(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=0|Math.max(0,Math.ceil((t-e)/r)),i=new Array(s);++n<s;)i[n]=e+n*r;return i}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function ordinal(){var e=new InternMap,t=[],r=[],n=implicit;function s(s){let i=e.get(s);if(void 0===i){if(n!==implicit)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return s.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new InternMap;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return s},s.range=function(e){return arguments.length?(r=Array.from(e),s):r.slice()},s.unknown=function(e){return arguments.length?(n=e,s):n},s.copy=function(){return ordinal(t,r).unknown(n)},initRange.apply(s,arguments),s}function band(){var e,t,r=ordinal().unknown(void 0),n=r.domain,s=r.range,i=0,o=1,a=!1,l=0,c=0,u=.5;function d(){var r=n().length,d=o<i,p=d?o:i,m=d?i:o;e=(m-p)/Math.max(1,r-l+2*c),a&&(e=Math.floor(e)),p+=(m-p-e*(r-l))*u,t=e*(1-l),a&&(p=Math.round(p),t=Math.round(t));var x=range$3(r).map(function(t){return p+e*t});return s(d?x.reverse():x)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),d()):n()},r.range=function(e){return arguments.length?([i,o]=e,i=+i,o=+o,d()):[i,o]},r.rangeRound=function(e){return[i,o]=e,i=+i,o=+o,a=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(a=!!e,d()):a},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},r.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},r.copy=function(){return band(n(),[i,o]).round(a).paddingInner(l).paddingOuter(c).align(u)},initRange.apply(d(),arguments)}function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(t())},e}function point$3(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function extend$3(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Color(){}function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$2(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?rgbn(t):3===r?new Rgb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?rgba$1(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?rgba$1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=reRgbaInteger.exec(e))?rgba$1(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba$1(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=reHslPercent.exec(e))?hsla$1(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla$1(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):"transparent"===e?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,255&e,1)}function rgba$1(e,t,r,n){return n<=0&&(e=t=r=NaN),new Rgb(e,t,r,n)}function rgbConvert(e){return e instanceof Color||(e=color$2(e)),e?new Rgb((e=e.rgb()).r,e.g,e.b,e.opacity):new Rgb}function rgb$1(e,t,r,n){return 1===arguments.length?rgbConvert(e):new Rgb(e,t,r,null==n?1:n)}function Rgb(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function rgb_formatHex(){return`#${hex$2(this.r)}${hex$2(this.g)}${hex$2(this.b)}`}function rgb_formatHex8(){return`#${hex$2(this.r)}${hex$2(this.g)}${hex$2(this.b)}${hex$2(255*(isNaN(this.opacity)?1:this.opacity))}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${1===e?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===e?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex$2(e){return((e=clampi(e))<16?"0":"")+e.toString(16)}function hsla$1(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,r,n)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color$2(e)),!e)return new Hsl;if(e instanceof Hsl)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,a=i-s,l=(i+s)/2;return a?(o=t===i?(r-n)/a+6*(r<n):r===i?(n-t)/a+2:(t-r)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new Hsl(o,a,l,e.opacity)}function hsl(e,t,r,n){return 1===arguments.length?hslConvert(e):new Hsl(e,t,r,null==n?1:n)}function Hsl(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function clamph(e){return(e=(e||0)%360)<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function linear$1(e,t){return function(r){return e+r*t}}function exponential(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function gamma(e){return 1===(e=+e)?nogamma:function(t,r){return r-t?exponential(t,r,e):constant(isNaN(t)?r:t)}}function nogamma(e,t){var r=t-e;return r?linear$1(e,r):constant(isNaN(e)?t:e)}function numberArray(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,s=t.slice();return function(i){for(r=0;r<n;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){var r,n=t?t.length:0,s=e?Math.min(n,e.length):0,i=new Array(s),o=new Array(n);for(r=0;r<s;++r)i[r]=interpolate$1(e[r],t[r]);for(;r<n;++r)o[r]=t[r];return function(e){for(r=0;r<s;++r)o[r]=i[r](e);return o}}function date$1(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function interpolateNumber$1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function object$1(e,t){var r,n={},s={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=interpolate$1(e[r],t[r]):s[r]=t[r];return function(e){for(r in n)s[r]=n[r](e);return s}}function zero(e){return function(){return e}}function one$2(e){return function(t){return e(t)+""}}function string$3(e,t){var r,n,s,i=reA.lastIndex=reB.lastIndex=0,o=-1,a=[],l=[];for(e+="",t+="";(r=reA.exec(e))&&(n=reB.exec(t));)(s=n.index)>i&&(s=t.slice(i,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,l.push({i:o,x:interpolateNumber$1(r,n)})),i=reB.lastIndex;return i<t.length&&(s=t.slice(i),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?one$2(l[0].x):zero(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)a[(r=l[n]).i]=r.x(e);return a.join("")})}function interpolate$1(e,t){var r,n=typeof t;return null==t||"boolean"===n?constant(t):("number"===n?interpolateNumber$1:"string"===n?(r=color$2(t))?(t=r,rgb):string$3:t instanceof color$2?rgb:t instanceof Date?date$1:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?object$1:interpolateNumber$1)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function piecewise(e,t){void 0===t&&(t=e,e=interpolate$1);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return i[t](e-t)}}function constants(e){return function(){return e}}function number$4(e){return+e}function identity$6(e){return e}function normalize$2(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:constants(isNaN(t)?NaN:.5)}function clamper(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}function bimap(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=normalize$2(s,n),i=r(o,i)):(n=normalize$2(n,s),i=r(i,o)),function(e){return i(n(e))}}function polymap(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=normalize$2(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(t){var r=bisectRight(e,t,1,n)-1;return i[r](s[r](t))}}function copy$2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$2(){var e,t,r,n,s,i,o=unit,a=unit,l=interpolate$1,c=identity$6;function u(){var e=Math.min(o.length,a.length);return c!==identity$6&&(c=clamper(o[0],o[e-1])),n=e>2?polymap:bimap,s=i=null,d}function d(t){return null==t||isNaN(t=+t)?r:(s||(s=n(o.map(e),a,l)))(e(c(t)))}return d.invert=function(r){return c(t((i||(i=n(a,o.map(e),interpolateNumber$1)))(r)))},d.domain=function(e){return arguments.length?(o=Array.from(e,number$4),u()):o.slice()},d.range=function(e){return arguments.length?(a=Array.from(e),u()):a.slice()},d.rangeRound=function(e){return a=Array.from(e),l=interpolateRound,u()},d.clamp=function(e){return arguments.length?(c=!!e||identity$6,u()):c!==identity$6},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,u()}}function continuous(){return transformer$2()(identity$6,identity$6)}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function exponent(e){return(e=formatDecimalParts(Math.abs(e)))?e[1]:NaN}function formatGroup(e,t){return function(r,n){for(var s=r.length,i=[],o=0,a=e[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),i.push(r.substring(s-=a,s+a)),!((l+=a+1)>n));)a=e[o=(o+1)%e.length];return i.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}function formatSpecifier(e){if(!(t=re$2.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function FormatSpecifier(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function formatTrim(e){e:for(var t,r=e.length,n=1,s=-1;n<r;++n)switch(e[n]){case".":s=t=n;break;case"0":0===s&&(s=n),t=n;break;default:if(!+e[n])break e;s>0&&(s=0)}return s>0?e.slice(0,s)+e.slice(t+1):e}function formatPrefixAuto(e,t){var r=formatDecimalParts(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(e,Math.max(0,t+i-1))[0]}function formatRounded(e,t){var r=formatDecimalParts(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}function identity$5(e){return e}function formatLocale$1(e){var t=void 0===e.grouping||void 0===e.thousands?identity$5:formatGroup(map$7.call(e.grouping,Number),e.thousands+""),r=void 0===e.currency?"":e.currency[0]+"",n=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",i=void 0===e.numerals?identity$5:formatNumerals(map$7.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",a=void 0===e.minus?"":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function c(e){var c=(e=formatSpecifier(e)).fill,u=e.align,d=e.sign,p=e.symbol,m=e.zero,x=e.width,f=e.comma,h=e.precision,g=e.trim,y=e.type;"n"===y?(f=!0,y="g"):formatTypes[y]||(void 0===h&&(h=12),g=!0,y="g"),(m||"0"===c&&"="===u)&&(m=!0,c="0",u="=");var j="$"===p?r:"#"===p&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===p?n:/[%p]/.test(y)?o:"",v=formatTypes[y],E=/[defgprs%]/.test(y);function R(e){var r,n,o,p=j,R=b;if("c"===y)R=v(e)+R,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:v(Math.abs(e),h),g&&(e=formatTrim(e)),S&&0===+e&&"+"!==d&&(S=!1),p=(S?"("===d?d:a:"-"===d||"("===d?"":d)+p,R=("s"===y?prefixes[8+prefixExponent/3]:"")+R+(S&&"("===d?")":""),E)for(r=-1,n=e.length;++r<n;)if(48>(o=e.charCodeAt(r))||o>57){R=(46===o?s+e.slice(r+1):e.slice(r))+R,e=e.slice(0,r);break}}f&&!m&&(e=t(e,1/0));var w=p.length+e.length+R.length,$=w<x?new Array(x-w+1).join(c):"";switch(f&&m&&(e=t($+e,$.length?x-R.length:1/0),$=""),u){case"<":e=p+e+R+$;break;case"=":e=p+$+e+R;break;case"^":e=$.slice(0,w=$.length>>1)+p+e+R+$.slice(w);break;default:e=$+p+e+R}return i(e)}return h=void 0===h?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),R.toString=function(){return e+""},R}return{format:c,formatPrefix:function(e,t){var r=c(((e=formatSpecifier(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3))),s=Math.pow(10,-n),i=prefixes[8+n/3];return function(e){return r(s*e)+i}}}}function defaultLocale$1(e){return locale$1=formatLocale$1(e),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function tickFormat(e,t,r,n){var s,i=tickStep(e,t,r);switch((n=formatSpecifier(null==n?",f":n)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(s=precisionPrefix(i,o))||(n.precision=s),formatPrefix(n,o);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(s=precisionRound(i,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=s-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(s=precisionFixed(i))||(n.precision=s-2*("%"===n.type))}return format(n)}function linearish(e){var t=e.domain;return e.ticks=function(e){var r=t();return ticks(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return tickFormat(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,s,i=t(),o=0,a=i.length-1,l=i[o],c=i[a],u=10;for(c<l&&(s=l,l=c,c=s,s=o,o=a,a=s);u-- >0;){if((s=tickIncrement(l,c,r))===n)return i[o]=l,i[a]=c,t(i);if(s>0)l=Math.floor(l/s)*s,c=Math.ceil(c/s)*s;else{if(!(s<0))break;l=Math.ceil(l*s)/s,c=Math.floor(c*s)/s}n=s}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$2(e,linear())},initRange.apply(e,arguments),linearish(e)}function identity$4(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,number$4),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return identity$4(e).unknown(t)},e=arguments.length?Array.from(e,number$4):[0,1],linearish(r)}function nice(e,t){var r,n=0,s=(e=e.slice()).length-1,i=e[n],o=e[s];return o<i&&(r=n,n=s,s=r,r=i,i=o,o=r),e[n]=t.floor(i),e[s]=t.ceil(o),e}function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function powp(e){return 10===e?pow10:e===Math.E?Math.exp:t=>Math.pow(e,t)}function logp(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function reflect(e){return(t,r)=>-e(-t,r)}function loggish(e){const t=e(transformLog,transformExp),r=t.domain;let n,s,i=10;function o(){return n=logp(i),s=powp(i),r()[0]<0?(n=reflect(n),s=reflect(s),e(transformLogn,transformExpn)):e(transformLog,transformExp),t}return t.base=function(e){return arguments.length?(i=+e,o()):i},t.domain=function(e){return arguments.length?(r(e),o()):r()},t.ticks=e=>{const t=r();let o=t[0],a=t[t.length-1];const l=a<o;l&&([o,a]=[a,o]);let c,u,d=n(o),p=n(a);const m=null==e?10:+e;let x=[];if(!(i%1)&&p-d<m){if(d=Math.floor(d),p=Math.ceil(p),o>0){for(;d<=p;++d)for(c=1;c<i;++c)if(u=d<0?c/s(-d):c*s(d),!(u<o)){if(u>a)break;x.push(u)}}else for(;d<=p;++d)for(c=i-1;c>=1;--c)if(u=d>0?c/s(-d):c*s(d),!(u<o)){if(u>a)break;x.push(u)}2*x.length<m&&(x=ticks(o,a,m))}else x=ticks(d,p,Math.min(p-d,m)).map(s);return l?x.reverse():x},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===i?"s":","),"function"!=typeof r&&(i%1||null!=(r=formatSpecifier(r)).precision||(r.trim=!0),r=format(r)),e===1/0)return r;const o=Math.max(1,i*e/t.ticks().length);return e=>{let t=e/s(Math.round(n(e)));return t*i<i-.5&&(t*=i),t<=o?r(e):""}},t.nice=()=>r(nice(r(),{floor:e=>s(Math.floor(n(e))),ceil:e=>s(Math.ceil(n(e)))})),t}function log(){const e=loggish(transformer$2()).domain([1,10]);return e.copy=()=>copy$2(e,log()).base(e.base()),initRange.apply(e,arguments),e}function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,r=e(transformSymlog(t),transformSymexp(t));return r.constant=function(r){return arguments.length?e(transformSymlog(t=+r),transformSymexp(t)):t},linearish(r)}function symlog(){var e=symlogish(transformer$2());return e.copy=function(){return copy$2(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)}function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(identity$6,identity$6),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(identity$6,identity$6):.5===r?e(transformSqrt,transformSquare):e(transformPow(r),transformPow(1/r)):r},linearish(t)}function pow(){var e=powish(transformer$2());return e.copy=function(){return copy$2(e,pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(e){return Math.sign(e)*e*e}function unsquare(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function radial(){var e,t=continuous(),r=[0,1],n=!1;function s(r){var s=unsquare(t(r));return isNaN(s)?e:n?Math.round(s):s}return s.invert=function(e){return t.invert(square(e))},s.domain=function(e){return arguments.length?(t.domain(e),s):t.domain()},s.range=function(e){return arguments.length?(t.range((r=Array.from(e,number$4)).map(square)),s):r.slice()},s.rangeRound=function(e){return s.range(e).round(!0)},s.round=function(e){return arguments.length?(n=!!e,s):n},s.clamp=function(e){return arguments.length?(t.clamp(e),s):t.clamp()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return radial(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},initRange.apply(s,arguments),linearish(s)}function quantile(){var e,t=[],r=[],n=[];function s(){var e=0,s=Math.max(1,r.length);for(n=new Array(s-1);++e<s;)n[e-1]=quantileSorted(t,e/s);return i}function i(t){return null==t||isNaN(t=+t)?e:r[bisectRight(n,t)]}return i.invertExtent=function(e){var s=r.indexOf(e);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(ascending),s()},i.range=function(e){return arguments.length?(r=Array.from(e),s()):r.slice()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.quantiles=function(){return n.slice()},i.copy=function(){return quantile().domain(t).range(r).unknown(e)},initRange.apply(i,arguments)}function quantize(){var e,t=0,r=1,n=1,s=[.5],i=[0,1];function o(t){return null!=t&&t<=t?i[bisectRight(s,t,0,n)]:e}function a(){var e=-1;for(s=new Array(n);++e<n;)s[e]=((e+1)*r-(e-n)*t)/(n+1);return o}return o.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,a()):[t,r]},o.range=function(e){return arguments.length?(n=(i=Array.from(e)).length-1,a()):i.slice()},o.invertExtent=function(e){var o=i.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,s[0]]:o>=n?[s[n-1],r]:[s[o-1],s[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return s.slice()},o.copy=function(){return quantize().domain([t,r]).range(i).unknown(e)},initRange.apply(linearish(o),arguments)}function threshold(){var e,t=[.5],r=[0,1],n=1;function s(s){return null!=s&&s<=s?r[bisectRight(t,s,0,n)]:e}return s.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),s):t.slice()},s.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),s):r.slice()},s.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return threshold().domain(t).range(r).unknown(e)},initRange.apply(s,arguments)}function timeInterval(e,t,r,n){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=t=>(e(t=new Date(+t)),t),s.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),s.round=e=>{const t=s(e),r=s.ceil(e);return e-t<r-e?t:r},s.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),s.range=(r,n,i)=>{const o=[];if(r=s.ceil(r),i=null==i?1:Math.floor(i),!(r<n&&i>0))return o;let a;do{o.push(a=new Date(+r)),t(r,i),e(r)}while(a<r&&r<n);return o},s.filter=r=>timeInterval(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(s.count=(t,n)=>(t0.setTime(+t),t1.setTime(+n),e(t0),e(t1),Math.floor(r(t0,t1))),s.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(n?t=>n(t)%e===0:t=>s.count(0,t)%e===0):s:null)),s}function timeWeekday(e){return timeInterval(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationWeek)}function utcWeekday(e){return timeInterval(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/durationWeek)}function ticker(e,t,r,n,s,i){const o=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[i,1,durationMinute],[i,5,5*durationMinute],[i,15,15*durationMinute],[i,30,30*durationMinute],[s,1,durationHour],[s,3,3*durationHour],[s,6,6*durationHour],[s,12,12*durationHour],[n,1,durationDay],[n,2,2*durationDay],[r,1,durationWeek],[t,1,durationMonth],[t,3,3*durationMonth],[e,1,durationYear]];function a(t,r,n){const s=Math.abs(r-t)/n,i=bisector(([,,e])=>e).right(o,s);if(i===o.length)return e.every(tickStep(t/durationYear,r/durationYear,n));if(0===i)return millisecond.every(Math.max(tickStep(t,r,n),1));const[a,l]=o[s/o[i-1][2]<o[i][2]/s?i-1:i];return a.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const s=r&&"function"==typeof r.range?r:a(e,t,r),i=s?s.range(e,+t+1):[];return n?i.reverse():i},a]}function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function formatLocale(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=formatRe(s),u=formatLookup(s),d=formatRe(i),p=formatLookup(i),m=formatRe(o),x=formatLookup(o),f=formatRe(a),h=formatLookup(a),g=formatRe(l),y=formatLookup(l),j={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(e){return s[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},b={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return a[e.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(e){return s[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},v={a:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.w=x.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=g.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.m=h.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return S(e,t,r,n)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=u.get(n[0].toLowerCase()),r+n[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(e,t,n){return S(e,r,t,n)},X:function(e,t,r){return S(e,n,t,r)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function E(e,t){return function(r){var n,s,i,o=[],a=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++a<c;)37===e.charCodeAt(a)&&(o.push(e.slice(l,a)),null!=(s=pads[n=e.charAt(++a)])?n=e.charAt(++a):s="e"===n?" ":"0",(i=t[n])&&(n=i(r,s)),o.push(n),l=a+1);return o.push(e.slice(l,a)),o.join("")}}function R(e,t){return function(r){var n,s,i=newDate(1900,void 0,1);if(S(i,e,r+="",0)!=r.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(s=(n=utcDate(newDate(i.y,0,1))).getUTCDay(),n=s>4||0===s?utcMonday.ceil(n):utcMonday(n),n=utcDay.offset(n,7*(i.V-1)),i.y=n.getUTCFullYear(),i.m=n.getUTCMonth(),i.d=n.getUTCDate()+(i.w+6)%7):(s=(n=localDate(newDate(i.y,0,1))).getDay(),n=s>4||0===s?timeMonday.ceil(n):timeMonday(n),n=timeDay.offset(n,7*(i.V-1)),i.y=n.getFullYear(),i.m=n.getMonth(),i.d=n.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),s="Z"in i?utcDate(newDate(i.y,0,1)).getUTCDay():localDate(newDate(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(s+5)%7:i.w+7*i.U-(s+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,utcDate(i)):localDate(i)}}function S(e,t,r,n){for(var s,i,o=0,a=t.length,l=r.length;o<a;){if(n>=l)return-1;if(37===(s=t.charCodeAt(o++))){if(s=t.charAt(o++),!(i=v[s in pads?t.charAt(o++):s])||(n=i(e,r,n))<0)return-1}else if(s!=r.charCodeAt(n++))return-1}return n}return j.x=E(r,j),j.X=E(n,j),j.c=E(t,j),b.x=E(r,b),b.X=E(n,b),b.c=E(t,b),{format:function(e){var t=E(e+="",j);return t.toString=function(){return e},t},parse:function(e){var t=R(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=E(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=R(e+="",!0);return t.toString=function(){return e},t}}}function pad(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function parseWeekdayNumberSunday(e,t,r){var n=numberRe.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function parseWeekdayNumberMonday(e,t,r){var n=numberRe.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function parseWeekNumberSunday(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function parseWeekNumberISO(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function parseWeekNumberMonday(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function parseFullYear(e,t,r){var n=numberRe.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function parseYear(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function parseZone(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function parseQuarter(e,t,r){var n=numberRe.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function parseMonthNumber(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function parseDayOfMonth(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function parseDayOfYear(e,t,r){var n=numberRe.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function parseHour24(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function parseMinutes(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function parseSeconds(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function parseMilliseconds(e,t,r){var n=numberRe.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function parseMicroseconds(e,t,r){var n=numberRe.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function parseLiteralPercent(e,t,r){var n=percentRe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function parseUnixTimestamp(e,t,r){var n=numberRe.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function parseUnixTimestampSeconds(e,t,r){var n=numberRe.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+timeDay.count(timeYear(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return 0===t?7:t}function formatWeekNumberSunday(e,t){return pad(timeSunday.count(timeYear(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||0===t?timeThursday(e):timeThursday.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(timeThursday.count(timeYear(e),e)+(4===timeYear(e).getDay()),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(timeMonday.count(timeYear(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return pad((e=dISO(e)).getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var r=e.getDay();return pad((e=r>=4||0===r?timeThursday(e):timeThursday.ceil(e)).getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return 0===t?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||0===t?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(utcThursday.count(utcYear(e),e)+(4===utcYear(e).getUTCDay()),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return pad((e=UTCdISO(e)).getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var r=e.getUTCDay();return pad((e=r>=4||0===r?utcThursday(e):utcThursday.ceil(e)).getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}function defaultLocale(e){return locale=formatLocale(e),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(e){return new Date(e)}function number$3(e){return e instanceof Date?+e:+new Date(+e)}function calendar$2(e,t,r,n,s,i,o,a,l,c){var u=continuous(),d=u.invert,p=u.domain,m=c(".%L"),x=c(":%S"),f=c("%I:%M"),h=c("%I %p"),g=c("%a %d"),y=c("%b %d"),j=c("%B"),b=c("%Y");function v(e){return(l(e)<e?m:a(e)<e?x:o(e)<e?f:i(e)<e?h:n(e)<e?s(e)<e?g:y:r(e)<e?j:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?p(Array.from(e,number$3)):p().map(date)},u.ticks=function(t){var r=p();return e(r[0],r[r.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?v:c(t)},u.nice=function(e){var r=p();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?p(nice(r,e)):u},u.copy=function(){return copy$2(u,calendar$2(e,t,r,n,s,i,o,a,l,c))},u}function time$1(){return initRange.apply(calendar$2(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar$2(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var e,t,r,n,s,i=0,o=1,a=identity$6,l=!1;function c(t){return null==t||isNaN(t=+t)?s:a(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var r,n;return arguments.length?([r,n]=t,a=e(r,n),c):[a(0),a(1)]}}return c.domain=function(s){return arguments.length?([i,o]=s,e=n(i=+i),t=n(o=+o),r=e===t?0:1/(t-e),c):[i,o]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(a=e,c):a},c.range=u(interpolate$1),c.rangeRound=u(interpolateRound),c.unknown=function(e){return arguments.length?(s=e,c):s},function(s){return n=s,e=s(i),t=s(o),r=e===t?0:1/(t-e),c}}function copy$1(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=linearish(transformer$1()(identity$6));return e.copy=function(){return copy$1(e,sequential())},initInterpolator.apply(e,arguments)}function sequentialLog(){var e=loggish(transformer$1()).domain([1,10]);return e.copy=function(){return copy$1(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)}function sequentialSymlog(){var e=symlogish(transformer$1());return e.copy=function(){return copy$1(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function sequentialPow(){var e=powish(transformer$1());return e.copy=function(){return copy$1(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var e=[],t=identity$6;function r(r){if(null!=r&&!isNaN(r=+r))return t((bisectRight(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(ascending),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>quantile$1(e,n/t))},r.copy=function(){return sequentialQuantile(t).domain(e)},initInterpolator.apply(r,arguments)}function transformer(){var e,t,r,n,s,i,o,a=0,l=.5,c=1,u=1,d=identity$6,p=!1;function m(e){return isNaN(e=+e)?o:(e=.5+((e=+i(e))-t)*(u*e<u*t?n:s),d(p?Math.max(0,Math.min(1,e)):e))}function x(e){return function(t){var r,n,s;return arguments.length?([r,n,s]=t,d=piecewise(e,[r,n,s]),m):[d(0),d(.5),d(1)]}}return m.domain=function(o){return arguments.length?([a,l,c]=o,e=i(a=+a),t=i(l=+l),r=i(c=+c),n=e===t?0:.5/(t-e),s=t===r?0:.5/(r-t),u=t<e?-1:1,m):[a,l,c]},m.clamp=function(e){return arguments.length?(p=!!e,m):p},m.interpolator=function(e){return arguments.length?(d=e,m):d},m.range=x(interpolate$1),m.rangeRound=x(interpolateRound),m.unknown=function(e){return arguments.length?(o=e,m):o},function(o){return i=o,e=o(a),t=o(l),r=o(c),n=e===t?0:.5/(t-e),s=t===r?0:.5/(r-t),u=t<e?-1:1,m}}function diverging(){var e=linearish(transformer()(identity$6));return e.copy=function(){return copy$1(e,diverging())},initInterpolator.apply(e,arguments)}function divergingLog(){var e=loggish(transformer()).domain([.1,1,10]);return e.copy=function(){return copy$1(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)}function divergingSymlog(){var e=symlogish(transformer());return e.copy=function(){return copy$1(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function divergingPow(){var e=powish(transformer());return e.copy=function(){return copy$1(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}function baseExtremum$2(e,t,r){for(var n=-1,s=e.length;++n<s;){var i=e[n],o=t(i);if(null!=o&&(void 0===a?o==o&&!isSymbol$2(o):r(o,a)))var a=o,l=i}return l}function baseGt$1(e,t){return e>t}function max$1(e){return e&&e.length?baseExtremum$1(e,identity$3,baseGt):void 0}function baseLt$1(e,t){return e<t}function min$1(e){return e&&e.length?baseExtremum(e,identity$2,baseLt):void 0}function map$6(e,t){return(isArray$5(e)?arrayMap:baseMap)(e,baseIteratee$5(t))}function flatMap(e,t){return baseFlatten(map$5(e,t),1)}function isEqual$3(e,t){return baseIsEqual(e,t)}function add(e,t){var r,n,s,i,o,a,l,c,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),external?round$1(t,d):t;if(l=e.d,c=t.d,o=e.e,s=t.e,l=l.slice(),i=o-s){for(i<0?(n=l,i=-i,a=c.length):(n=c,s=o,a=l.length),i>(a=(o=Math.ceil(d/LOG_BASE))>a?o+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=l.length)-(i=c.length)<0&&(i=a,n=c,c=l,l=n),r=0;i;)r=(l[--i]=l[i]+c[i]+r)/BASE|0,l[i]%=BASE;for(r&&(l.unshift(r),++s),a=l.length;0==l[--a];)l.pop();return t.d=l,t.e=s,external?round$1(t,d):t}function checkInt32(e,t,r){if(e!==~~e||e<t||e>r)throw Error(invalidArgument+e)}function digitsToString(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",(r=LOG_BASE-n.length)&&(i+=getZeroString(r)),i+=n;o=e[t],(r=LOG_BASE-(n=o+"").length)&&(i+=getZeroString(r))}else if(0===o)return"0";for(;o%10==0;)o/=10;return i+o}function exp(e,t){var r,n,s,i,o,a=0,l=0,c=e.constructor,u=c.precision;if(getBase10Exponent(e)>16)throw Error(exponentOutOfRange+getBase10Exponent(e));if(!e.s)return new c(ONE);for(external=!1,o=u,i=new c(.03125);e.abs().gte(.1);)e=e.times(i),l+=5;for(o+=Math.log(mathpow(2,l))/Math.LN10*2+5|0,r=n=s=new c(ONE),c.precision=o;;){if(n=round$1(n.times(e),o),r=r.times(++a),digitsToString((i=s.plus(divide(n,r,o))).d).slice(0,o)===digitsToString(s.d).slice(0,o)){for(;l--;)s=round$1(s.times(s),o);return c.precision=u,null==t?(external=!0,round$1(s,u)):s}s=i}}function getBase10Exponent(e){for(var t=e.e*LOG_BASE,r=e.d[0];r>=10;r/=10)t++;return t}function getLn10(e,t,r){if(t>e.LN10.sd())throw external=!0,r&&(e.precision=r),Error(decimalError+"LN10 precision limit exceeded");return round$1(new e(e.LN10),t)}function getZeroString(e){for(var t="";e--;)t+="0";return t}function ln$1(e,t){var r,n,s,i,o,a,l,c,u,d=1,p=e,m=p.d,x=p.constructor,f=x.precision;if(p.s<1)throw Error(decimalError+(p.s?"NaN":"-Infinity"));if(p.eq(ONE))return new x(0);if(null==t?(external=!1,c=f):c=t,p.eq(10))return null==t&&(external=!0),getLn10(x,c);if(c+=10,x.precision=c,n=(r=digitsToString(m)).charAt(0),i=getBase10Exponent(p),!(Math.abs(i)<15e14))return l=getLn10(x,c+2,f).times(i+""),p=ln$1(new x(n+"."+r.slice(1)),c-10).plus(l),x.precision=f,null==t?(external=!0,round$1(p,f)):p;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=digitsToString((p=p.times(e)).d)).charAt(0),d++;for(i=getBase10Exponent(p),n>1?(p=new x("0."+r),i++):p=new x(n+"."+r.slice(1)),a=o=p=divide(p.minus(ONE),p.plus(ONE),c),u=round$1(p.times(p),c),s=3;;){if(o=round$1(o.times(u),c),digitsToString((l=a.plus(divide(o,new x(s),c))).d).slice(0,c)===digitsToString(a.d).slice(0,c))return a=a.times(2),0!==i&&(a=a.plus(getLn10(x,c+2,f).times(i+""))),a=divide(a,new x(d),c),x.precision=f,null==t?(external=!0,round$1(a,f)):a;a=l,s+=2}}function parseDecimal(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(s=t.length;48===t.charCodeAt(s-1);)--s;if(t=t.slice(n,s)){if(s-=n,r=r-n-1,e.e=mathfloor(r/LOG_BASE),e.d=[],n=(r+1)%LOG_BASE,r<0&&(n+=LOG_BASE),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=LOG_BASE;n<s;)e.d.push(+t.slice(n,n+=LOG_BASE));t=t.slice(n),n=LOG_BASE-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+r)}else e.s=0,e.e=0,e.d=[0];return e}function round$1(e,t,r){var n,s,i,o,a,l,c,u,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if((n=t-o)<0)n+=LOG_BASE,s=t,c=d[u=0];else{if((u=Math.ceil((n+1)/LOG_BASE))>=(i=d.length))return e;for(c=i=d[u],o=1;i>=10;i/=10)o++;s=(n%=LOG_BASE)-LOG_BASE+o}if(void 0!==r&&(a=c/(i=mathpow(10,o-s-1))%10|0,l=t<0||void 0!==d[u+1]||c%i,l=r<4?(a||l)&&(0==r||r==(e.s<0?3:2)):a>5||5==a&&(4==r||l||6==r&&(n>0?s>0?c/mathpow(10,o-s):0:d[u-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(i=getBase10Exponent(e),d.length=1,t=t-i-1,d[0]=mathpow(10,(LOG_BASE-t%LOG_BASE)%LOG_BASE),e.e=mathfloor(-t/LOG_BASE)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(0==n?(d.length=u,i=1,u--):(d.length=u+1,i=mathpow(10,LOG_BASE-n),d[u]=s>0?(c/mathpow(10,o-s)%mathpow(10,s)|0)*i:0),l)for(;;){if(0==u){(d[0]+=i)==BASE&&(d[0]=1,++e.e);break}if(d[u]+=i,d[u]!=BASE)break;d[u--]=0,i=1}for(n=d.length;0===d[--n];)d.pop();if(external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(e));return e}function subtract(e,t){var r,n,s,i,o,a,l,c,u,d,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),external?round$1(t,m):t;if(l=e.d,d=t.d,n=t.e,c=e.e,l=l.slice(),o=c-n){for((u=o<0)?(r=l,o=-o,a=d.length):(r=d,n=c,a=l.length),o>(s=Math.max(Math.ceil(m/LOG_BASE),a)+2)&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for((u=(s=l.length)<(a=d.length))&&(a=s),s=0;s<a;s++)if(l[s]!=d[s]){u=l[s]<d[s];break}o=0}for(u&&(r=l,l=d,d=r,t.s=-t.s),a=l.length,s=d.length-a;s>0;--s)l[a++]=0;for(s=d.length;s>o;){if(l[--s]<d[s]){for(i=s;i&&0===l[--i];)l[i]=BASE-1;--l[i],l[s]+=BASE}l[s]-=d[s]}for(;0===l[--a];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=n,external?round$1(t,m):t):new p(0)}function toString$3(e,t,r){var n,s=getBase10Exponent(e),i=digitsToString(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+getZeroString(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+getZeroString(-s-1)+i,r&&(n=r-o)>0&&(i+=getZeroString(n))):s>=o?(i+=getZeroString(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+getZeroString(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=getZeroString(n))),e.s<0?"-"+i:i}function truncate(e,t){if(e.length>t)return e.length=t,!0}function clone(e){var t,r,n;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(invalidArgument+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):parseDecimal(t,e.toString())}if("string"!=typeof e)throw Error(invalidArgument+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!isDecimal.test(e))throw Error(invalidArgument+e);parseDecimal(t,e)}if(s.prototype=P$1,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=clone,s.config=s.set=config,void 0===e&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function config(e){if(!e||"object"!=typeof e)throw Error(decimalError+"Object expected");var t,r,n,s=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if(void 0!==(n=e[r=s[t]])){if(!(mathfloor(n)===n&&n>=s[t+1]&&n<=s[t+2]))throw Error(invalidArgument+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(invalidArgument+r+": "+n);this[r]=new this(n)}return this}function _toConsumableArray$d(e){return _arrayWithoutHoles$d(e)||_iterableToArray$e(e)||_unsupportedIterableToArray$l(e)||_nonIterableSpread$d()}function _nonIterableSpread$d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$l(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$l(e,t):void 0}}function _iterableToArray$e(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles$d(e){if(Array.isArray(e))return _arrayLikeToArray$l(e)}function _arrayLikeToArray$l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function getDigitCount(e){return 0===e?1:Math.floor(new Decimal$1(e).abs().log(10).toNumber())+1}function rangeStep(e,t,r){for(var n=new Decimal$1(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}function _toConsumableArray$c(e){return _arrayWithoutHoles$c(e)||_iterableToArray$d(e)||_unsupportedIterableToArray$k(e)||_nonIterableSpread$c()}function _nonIterableSpread$c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray$d(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles$c(e){if(Array.isArray(e))return _arrayLikeToArray$k(e)}function _slicedToArray$a(e,t){return _arrayWithHoles$b(e)||_iterableToArrayLimit$a(e,t)||_unsupportedIterableToArray$k(e,t)||_nonIterableRest$b()}function _nonIterableRest$b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$k(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$k(e,t):void 0}}function _arrayLikeToArray$k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$a(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,s=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return r}}function _arrayWithHoles$b(e){if(Array.isArray(e))return e}function getValidInterval(e){var t=_slicedToArray$a(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function getFormatStep(e,t,r){if(e.lte(0))return new Decimal$1(0);var n=Arithmetic.getDigitCount(e.toNumber()),s=new Decimal$1(10).pow(n),i=e.div(s),o=1!==n?.05:.1,a=new Decimal$1(Math.ceil(i.div(o).toNumber())).add(r).mul(o).mul(s);return t?a:new Decimal$1(Math.ceil(a))}function getTickOfSingleValue(e,t,r){var n=1,s=new Decimal$1(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Decimal$1(10).pow(Arithmetic.getDigitCount(e)-1),s=new Decimal$1(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Decimal$1(Math.floor(e)))}else 0===e?s=new Decimal$1(Math.floor((t-1)/2)):r||(s=new Decimal$1(Math.floor(e)));var o=Math.floor((t-1)/2);return compose$1(map$4(function(e){return s.add(new Decimal$1(e-o).mul(n)).toNumber()}),range$2)(0,t)}function calculateStep(e,t,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var i,o=getFormatStep(new Decimal$1(t).sub(e).div(r-1),n,s);i=e<=0&&t>=0?new Decimal$1(0):(i=new Decimal$1(e).add(t).div(2)).sub(new Decimal$1(i).mod(o));var a=Math.ceil(i.sub(e).div(o).toNumber()),l=Math.ceil(new Decimal$1(t).sub(i).div(o).toNumber()),c=a+l+1;return c>r?calculateStep(e,t,r,n,s+1):(c<r&&(l=t>0?l+(r-c):l,a=t>0?a:a+(r-c)),{step:o,tickMin:i.sub(new Decimal$1(a).mul(o)),tickMax:i.add(new Decimal$1(l).mul(o))})}function getNiceTickValuesFn(e){var t=_slicedToArray$a(e,2),r=t[0],n=t[1],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(s,2),a=_slicedToArray$a(getValidInterval([r,n]),2),l=a[0],c=a[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(_toConsumableArray$c(range$2(0,s-1).map(function(){return 1/0}))):[].concat(_toConsumableArray$c(range$2(0,s-1).map(function(){return-1/0})),[c]);return r>n?reverse(u):u}if(l===c)return getTickOfSingleValue(l,s,i);var d=calculateStep(l,c,o,i),p=d.step,m=d.tickMin,x=d.tickMax,f=Arithmetic.rangeStep(m,x.add(new Decimal$1(.1).mul(p)),p);return r>n?reverse(f):f}function getTickValuesFixedDomainFn(e,t){var r=_slicedToArray$a(e,2),n=r[0],s=r[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=_slicedToArray$a(getValidInterval([n,s]),2),a=o[0],l=o[1];if(a===-1/0||l===1/0)return[n,s];if(a===l)return[a];var c=Math.max(t,2),u=getFormatStep(new Decimal$1(l).sub(a).div(c-1),i,0),d=[].concat(_toConsumableArray$c(Arithmetic.rangeStep(new Decimal$1(a),new Decimal$1(l).sub(new Decimal$1(.99).mul(u)),u)),[l]);return n>s?reverse(d):d}function invariant$1(e,t){throw new Error(prefix)}function _typeof$y(e){return(_typeof$y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$n.apply(this,arguments)}function _slicedToArray$9(e,t){return _arrayWithHoles$a(e)||_iterableToArrayLimit$9(e,t)||_unsupportedIterableToArray$j(e,t)||_nonIterableRest$a()}function _nonIterableRest$a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$j(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$j(e,t):void 0}}function _arrayLikeToArray$j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$9(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t);else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$a(e){if(Array.isArray(e))return e}function _objectWithoutProperties$d(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$f(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$f(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _classCallCheck$f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$w(n.key),n)}}function _createClass$f(e,t,r){return t&&_defineProperties$f(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$b(e,t,r){return t=_getPrototypeOf$d(t),_possibleConstructorReturn$d(e,_isNativeReflectConstruct$d()?Reflect.construct(t,r||[],_getPrototypeOf$d(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$d(e,t){if(t&&("object"===_typeof$y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$d(e)}function _assertThisInitialized$d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$d=function(){return!!e})()}function _getPrototypeOf$d(e){return(_getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$d(e,t)}function _setPrototypeOf$d(e,t){return(_setPrototypeOf$d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$z(e,t,r){return(t=_toPropertyKey$w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$w(e){var t=_toPrimitive$w(e,"string");return"symbol"==_typeof$y(t)?t:t+""}function _toPrimitive$w(e,t){if("object"!=_typeof$y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _typeof$x(e){return(_typeof$x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$v(Object(r),!0).forEach(function(t){_defineProperty$y(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$y(e,t,r){return(t=_toPropertyKey$v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$v(e){var t=_toPrimitive$v(e,"string");return"symbol"==_typeof$x(t)?t:t+""}function _toPrimitive$v(e,t){if("object"!=_typeof$x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _typeof$w(e){return(_typeof$w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray$b(e){return _arrayWithoutHoles$b(e)||_iterableToArray$c(e)||_unsupportedIterableToArray$i(e)||_nonIterableSpread$b()}function _nonIterableSpread$b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$i(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$i(e,t):void 0}}function _iterableToArray$c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$b(e){if(Array.isArray(e))return _arrayLikeToArray$i(e)}function _arrayLikeToArray$i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys$u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$u(Object(r),!0).forEach(function(t){_defineProperty$x(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$x(e,t,r){return(t=_toPropertyKey$u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$u(e){var t=_toPrimitive$u(e,"string");return"symbol"==_typeof$w(t)?t:t+""}function _toPrimitive$u(e,t){if("object"!=_typeof$w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function getValueByDataKey(e,t,r){return isNil$1(e)||isNil$1(t)?r:isNumOrStr(t)?get$5(e,t,r):isFunction$5(t)?t(e):r}function getDomainOfDataByKey(e,t,r,n){var s=flatMap$1(e,function(e){return getValueByDataKey(e,t)});if("number"===r){var i=s.filter(function(e){return isNumber$1(e)||parseFloat(e)});return i.length?[min$2(i),max$2(i)]:[1/0,-1/0]}return(n?s.filter(function(e){return!isNil$1(e)}):s).map(function(e){return isNumOrStr(e)||e instanceof Date?e:""})}function getCateCoordinateOfLine(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!isNil$1(s[t.dataKey])){var a=findEntryInArray(r,"value",s[t.dataKey]);if(a)return a.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=getValueByDataKey(s,isNil$1(o)?t.dataKey:o);return isNil$1(l)?null:t.scale(l)}function _typeof$v(e){return(_typeof$v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$t(Object(r),!0).forEach(function(t){_defineProperty$w(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$t(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$w(e,t,r){return(t=_toPropertyKey$t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$t(e){var t=_toPrimitive$t(e,"string");return"symbol"==_typeof$v(t)?t:t+""}function _toPrimitive$t(e,t){if("object"!=_typeof$v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _typeof$u(e){return(_typeof$u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray$a(e){return _arrayWithoutHoles$a(e)||_iterableToArray$b(e)||_unsupportedIterableToArray$h(e)||_nonIterableSpread$a()}function _nonIterableSpread$a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$h(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$h(e,t):void 0}}function _iterableToArray$b(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$a(e){if(Array.isArray(e))return _arrayLikeToArray$h(e)}function _arrayLikeToArray$h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _objectWithoutProperties$c(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$e(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ownKeys$s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$s(Object(r),!0).forEach(function(t){_defineProperty$v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$v(e,t,r){return(t=_toPropertyKey$s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$s(e){var t=_toPrimitive$s(e,"string");return"symbol"==_typeof$u(t)?t:t+""}function _toPrimitive$s(e,t){if("object"!=_typeof$u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$m.apply(this,arguments)}function Label(e){var t,r=e.offset,n=_objectSpread$s({offset:void 0===r?5:r},_objectWithoutProperties$c(e,_excluded$e)),s=n.viewBox,i=n.position,o=n.value,a=n.children,l=n.content,c=n.className,u=void 0===c?"":c,d=n.textBreakAll;if(!s||isNil$1(o)&&isNil$1(a)&&!reactExports.isValidElement(l)&&!isFunction$5(l))return null;if(reactExports.isValidElement(l))return reactExports.cloneElement(l,n);if(isFunction$5(l)){if(t=reactExports.createElement(l,n),reactExports.isValidElement(t))return t}else t=getLabel(n);var p=isPolar(s),m=filterProps$1(n,!0);if(p&&("insideStart"===i||"insideEnd"===i||"end"===i))return renderRadialLabel(n,t,m);var x=p?getAttrsOfPolarLabel(n):getAttrsOfCartesianLabel(n);return React$2.createElement(Text$2,_extends$m({className:clsx("recharts-label",u)},m,x,{breakAll:d}),t)}function last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function _typeof$t(e){return(_typeof$t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray$9(e){return _arrayWithoutHoles$9(e)||_iterableToArray$a(e)||_unsupportedIterableToArray$g(e)||_nonIterableSpread$9()}function _nonIterableSpread$9(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$g(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$g(e,t):void 0}}function _iterableToArray$a(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$9(e){if(Array.isArray(e))return _arrayLikeToArray$g(e)}function _arrayLikeToArray$g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$l.apply(this,arguments)}function ownKeys$r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$r(Object(r),!0).forEach(function(t){_defineProperty$u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$r(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$u(e,t,r){return(t=_toPropertyKey$r(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$r(e){var t=_toPrimitive$r(e,"string");return"symbol"==_typeof$t(t)?t:t+""}function _toPrimitive$r(e,t){if("object"!=_typeof$t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties$b(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$d(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$d(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function LabelList(e){var t=e.valueAccessor,r=void 0===t?defaultAccessor:t,n=_objectWithoutProperties$b(e,_excluded$d),s=n.data,i=n.dataKey,o=n.clockWise,a=n.id,l=n.textBreakAll,c=_objectWithoutProperties$b(n,_excluded2$6);return s&&s.length?React$2.createElement(Layer,{className:"recharts-label-list"},s.map(function(e,t){var n=isNil$1(i)?r(e,t):getValueByDataKey(e&&e.payload,i),s=isNil$1(a)?{}:{id:"".concat(a,"-").concat(t)};return React$2.createElement(Label,_extends$l({},filterProps$1(e,!0),c,s,{parentViewBox:e.parentViewBox,value:n,textBreakAll:l,viewBox:Label.parseViewBox(isNil$1(o)?e:_objectSpread$r(_objectSpread$r({},e),{},{clockWise:o})),key:"label-".concat(t),index:t}))})):null}function parseLabelList(e,t){return e?!0===e?React$2.createElement(LabelList,{key:"labelList-implicit",data:t}):React$2.isValidElement(e)||isFunction$5(e)?React$2.createElement(LabelList,{key:"labelList-implicit",data:t,content:e}):isObject$d(e)?React$2.createElement(LabelList,_extends$l({data:t},e,{key:"labelList-implicit"})):null:null}function renderCallByParent(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=findAllByType(e.children,LabelList).map(function(e,r){return reactExports.cloneElement(e,{data:t,key:"labelList-".concat(r)})});return r?[parseLabelList(e.label,t)].concat(_toConsumableArray$9(n)):n}function _typeof$s(e){return(_typeof$s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$k.apply(this,arguments)}function ownKeys$q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$q(Object(r),!0).forEach(function(t){_defineProperty$t(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$t(e,t,r){return(t=_toPropertyKey$q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$q(e){var t=_toPrimitive$q(e,"string");return"symbol"==_typeof$s(t)?t:t+""}function _toPrimitive$q(e,t){if("object"!=_typeof$s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _typeof$r(e){return(_typeof$r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$j.apply(this,arguments)}function ownKeys$p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$p(Object(r),!0).forEach(function(t){_defineProperty$s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$s(e,t,r){return(t=_toPropertyKey$p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$p(e){var t=_toPrimitive$p(e,"string");return"symbol"==_typeof$r(t)?t:t+""}function _toPrimitive$p(e,t){if("object"!=_typeof$r(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function emptyFunction(){}function emptyFunctionWithReset(){}function combineComparators(e,t){return function(r,n,s){return e(r,n,s)&&t(r,n,s)}}function createIsCircular(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var s=n.cache,i=s.get(t),o=s.get(r);if(i&&o)return i===r&&o===t;s.set(t,r),s.set(r,t);var a=e(t,r,n);return s.delete(t),s.delete(r),a}}function getStrictProperties(e){return getOwnPropertyNames(e).concat(getOwnPropertySymbols(e))}function sameValueZeroEqual(e,t){return e===t||!e&&!t&&e!=e&&t!=t}function areArraysEqual(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function areDatesEqual(e,t){return sameValueZeroEqual(e.getTime(),t.getTime())}function areErrorsEqual(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function areFunctionsEqual(e,t){return e===t}function areMapsEqual(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s,i,o=new Array(n),a=e.entries(),l=0;(s=a.next())&&!s.done;){for(var c=t.entries(),u=!1,d=0;(i=c.next())&&!i.done;)if(o[d])d++;else{var p=s.value,m=i.value;if(r.equals(p[0],m[0],l,d,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){u=o[d]=!0;break}d++}if(!u)return!1;l++}return!0}function areObjectsEqual(e,t,r){var n=keys$3(e),s=n.length;if(keys$3(t).length!==s)return!1;for(;s-- >0;)if(!isPropertyEqual(e,t,r,n[s]))return!1;return!0}function areObjectsEqualStrict(e,t,r){var n,s,i,o=getStrictProperties(e),a=o.length;if(getStrictProperties(t).length!==a)return!1;for(;a-- >0;){if(!isPropertyEqual(e,t,r,n=o[a]))return!1;if(s=getOwnPropertyDescriptor(e,n),i=getOwnPropertyDescriptor(t,n),(s||i)&&(!s||!i||s.configurable!==i.configurable||s.enumerable!==i.enumerable||s.writable!==i.writable))return!1}return!0}function arePrimitiveWrappersEqual(e,t){return sameValueZeroEqual(e.valueOf(),t.valueOf())}function areRegExpsEqual(e,t){return e.source===t.source&&e.flags===t.flags}function areSetsEqual(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s,i,o=new Array(n),a=e.values();(s=a.next())&&!s.done;){for(var l=t.values(),c=!1,u=0;(i=l.next())&&!i.done;){if(!o[u]&&r.equals(s.value,i.value,s.value,i.value,e,t,r)){c=o[u]=!0;break}u++}if(!c)return!1}return!0}function areTypedArraysEqual(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function areUrlsEqual(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function isPropertyEqual(e,t,r,n){return!(n!==REACT_OWNER&&n!==PREACT_OWNER&&n!==PREACT_VNODE||!e.$$typeof&&!t.$$typeof)||hasOwn$1(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}function createEqualityComparator(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,p=e.areUrlsEqual;return function(e,m,x){if(e===m)return!0;if(null==e||null==m)return!1;var f=typeof e;if(f!==typeof m)return!1;if("object"!==f)return"number"===f?o(e,m,x):"function"===f&&s(e,m,x);var h=e.constructor;if(h!==m.constructor)return!1;if(h===Object)return a(e,m,x);if(isArray$4(e))return t(e,m,x);if(null!=isTypedArray$1&&isTypedArray$1(e))return d(e,m,x);if(h===Date)return r(e,m,x);if(h===RegExp)return c(e,m,x);if(h===Map)return i(e,m,x);if(h===Set)return u(e,m,x);var g=getTag(e);return g===DATE_TAG?r(e,m,x):g===REG_EXP_TAG?c(e,m,x):g===MAP_TAG?i(e,m,x):g===SET_TAG?u(e,m,x):g===OBJECT_TAG?"function"!=typeof e.then&&"function"!=typeof m.then&&a(e,m,x):g===URL_TAG?p(e,m,x):g===ERROR_TAG?n(e,m,x):g===ARGUMENTS_TAG?a(e,m,x):(g===BOOLEAN_TAG||g===NUMBER_TAG||g===STRING_TAG)&&l(e,m,x)}}function createEqualityComparatorConfig(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,s={areArraysEqual:n?areObjectsEqualStrict:areArraysEqual,areDatesEqual:areDatesEqual,areErrorsEqual:areErrorsEqual,areFunctionsEqual:areFunctionsEqual,areMapsEqual:n?combineComparators(areMapsEqual,areObjectsEqualStrict):areMapsEqual,areNumbersEqual:areNumbersEqual,areObjectsEqual:n?areObjectsEqualStrict:areObjectsEqual,arePrimitiveWrappersEqual:arePrimitiveWrappersEqual,areRegExpsEqual:areRegExpsEqual,areSetsEqual:n?combineComparators(areSetsEqual,areObjectsEqualStrict):areSetsEqual,areTypedArraysEqual:n?areObjectsEqualStrict:areTypedArraysEqual,areUrlsEqual:areUrlsEqual};if(r&&(s=assign$2({},s,r(s))),t){var i=createIsCircular(s.areArraysEqual),o=createIsCircular(s.areMapsEqual),a=createIsCircular(s.areObjectsEqual),l=createIsCircular(s.areSetsEqual);s=assign$2({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return s}function createInternalEqualityComparator(e){return function(t,r,n,s,i,o,a){return e(t,r,a)}}function createIsEqual(e){var t=e.circular,r=e.comparator,n=e.createState,s=e.equals,i=e.strict;if(n)return function(e,o){var a=n(),l=a.cache,c=void 0===l?t?new WeakMap:void 0:l,u=a.meta;return r(e,o,{cache:c,equals:s,meta:u,strict:i})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(e,t){return r(e,t,o)}}function createCustomEqual(e){void 0===e&&(e={});var t=e.circular,r=void 0!==t&&t,n=e.createInternalComparator,s=e.createState,i=e.strict,o=void 0!==i&&i,a=createEqualityComparator(createEqualityComparatorConfig(e));return createIsEqual({circular:r,comparator:a,createState:s,equals:n?n(a):createInternalEqualityComparator(a),strict:o})}function safeRequestAnimationFrame(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}function setRafTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame(function n(s){r<0&&(r=s),s-r>t?(e(s),r=-1):safeRequestAnimationFrame(n)})}function _typeof$q(e){return(_typeof$q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toArray(e){return _arrayWithHoles$9(e)||_iterableToArray$9(e)||_unsupportedIterableToArray$f(e)||_nonIterableRest$9()}function _nonIterableRest$9(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$f(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$f(e,t):void 0}}function _arrayLikeToArray$f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArray$9(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithHoles$9(e){if(Array.isArray(e))return e}function createAnimateManager(){var e=function(){return null},t=!1,r=function r(n){if(!t){if(Array.isArray(n)){if(!n.length)return;var s=_toArray(n),i=s[0],o=s.slice(1);return"number"==typeof i?void setRafTimeout(r.bind(null,o),i):(r(i),void setRafTimeout(r.bind(null,o)))}"object"===_typeof$q(n)&&e(n),"function"==typeof n&&n()}};return{stop:function(){t=!0},start:function(e){t=!1,r(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function _typeof$p(e){return(_typeof$p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$o(Object(r),!0).forEach(function(t){_defineProperty$r(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$r(e,t,r){return(t=_toPropertyKey$o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$o(e){var t=_toPrimitive$o(e,"string");return"symbol"===_typeof$p(t)?t:String(t)}function _toPrimitive$o(e,t){if("object"!==_typeof$p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==_typeof$p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _slicedToArray$8(e,t){return _arrayWithHoles$8(e)||_iterableToArrayLimit$8(e,t)||_unsupportedIterableToArray$e(e,t)||_nonIterableRest$8()}function _nonIterableRest$8(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit$8(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t);else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$8(e){if(Array.isArray(e))return e}function _toConsumableArray$8(e){return _arrayWithoutHoles$8(e)||_iterableToArray$8(e)||_unsupportedIterableToArray$e(e)||_nonIterableSpread$8()}function _nonIterableSpread$8(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$e(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$e(e,t):void 0}}function _iterableToArray$8(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$8(e){if(Array.isArray(e))return _arrayLikeToArray$e(e)}function _arrayLikeToArray$e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _typeof$o(e){return(_typeof$o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray$7(e){return _arrayWithoutHoles$7(e)||_iterableToArray$7(e)||_unsupportedIterableToArray$d(e)||_nonIterableSpread$7()}function _nonIterableSpread$7(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray$7(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$7(e){if(Array.isArray(e))return _arrayLikeToArray$d(e)}function ownKeys$n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$n(Object(r),!0).forEach(function(t){_defineProperty$q(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$q(e,t,r){return(t=_toPropertyKey$n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$n(e){var t=_toPrimitive$n(e,"string");return"symbol"===_typeof$o(t)?t:String(t)}function _toPrimitive$n(e,t){if("object"!==_typeof$o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==_typeof$o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _slicedToArray$7(e,t){return _arrayWithHoles$7(e)||_iterableToArrayLimit$7(e,t)||_unsupportedIterableToArray$d(e,t)||_nonIterableRest$7()}function _nonIterableRest$7(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$d(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$d(e,t):void 0}}function _arrayLikeToArray$d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$7(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t);else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$7(e){if(Array.isArray(e))return e}function _typeof$n(e){return(_typeof$n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectWithoutProperties$a(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$c(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$c(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}function _toConsumableArray$6(e){return _arrayWithoutHoles$6(e)||_iterableToArray$6(e)||_unsupportedIterableToArray$c(e)||_nonIterableSpread$6()}function _nonIterableSpread$6(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$c(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$c(e,t):void 0}}function _iterableToArray$6(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$6(e){if(Array.isArray(e))return _arrayLikeToArray$c(e)}function _arrayLikeToArray$c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys$m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$m(Object(r),!0).forEach(function(t){_defineProperty$p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$p(e,t,r){return(t=_toPropertyKey$m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$m(n.key),n)}}function _createClass$e(e,t,r){return t&&_defineProperties$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey$m(e){var t=_toPrimitive$m(e,"string");return"symbol"===_typeof$n(t)?t:String(t)}function _toPrimitive$m(e,t){if("object"!==_typeof$n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==_typeof$n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _inherits$c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$c(e,t)}function _setPrototypeOf$c(e,t){return(_setPrototypeOf$c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper$1(e){var t=_isNativeReflectConstruct$c();return function(){var r,n=_getPrototypeOf$c(e);if(t){var s=_getPrototypeOf$c(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return _possibleConstructorReturn$c(this,r)}}function _possibleConstructorReturn$c(e,t){if(t&&("object"===_typeof$n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$c(e)}function _assertThisInitialized$c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e3){return!1}}function _getPrototypeOf$c(e){return(_getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$i.apply(null,arguments)}function _objectWithoutPropertiesLoose$b(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function _typeof$m(e){return(_typeof$m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$h.apply(this,arguments)}function _slicedToArray$6(e,t){return _arrayWithHoles$6(e)||_iterableToArrayLimit$6(e,t)||_unsupportedIterableToArray$b(e,t)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$b(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$b(e,t):void 0}}function _arrayLikeToArray$b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$6(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t);else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$6(e){if(Array.isArray(e))return e}function ownKeys$l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$l(Object(r),!0).forEach(function(t){_defineProperty$o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$o(e,t,r){return(t=_toPropertyKey$l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$l(e){var t=_toPrimitive$l(e,"string");return"symbol"==_typeof$m(t)?t:t+""}function _toPrimitive$l(e,t){if("object"!=_typeof$m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$g.apply(this,arguments)}function _typeof$l(e){return(_typeof$l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$f.apply(this,arguments)}function ownKeys$k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$k(Object(r),!0).forEach(function(t){_defineProperty$n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$n(e,t,r){return(t=_toPropertyKey$k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$k(e){var t=_toPrimitive$k(e,"string");return"symbol"==_typeof$l(t)?t:t+""}function _toPrimitive$k(e,t){if("object"!=_typeof$l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties$9(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$a(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$a(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function isPlainObject$4(e){if(!isObjectLike$3(e)||baseGetTag$1(e)!=objectTag)return!1;var t=getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$2.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString.call(r)==objectCtorString}function isBoolean$2(e){return!0===e||!1===e||isObjectLike$2(e)&&baseGetTag(e)==boolTag}function _typeof$k(e){return(_typeof$k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$e.apply(this,arguments)}function _slicedToArray$5(e,t){return _arrayWithHoles$5(e)||_iterableToArrayLimit$5(e,t)||_unsupportedIterableToArray$a(e,t)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$a(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$a(e,t):void 0}}function _arrayLikeToArray$a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$5(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t);else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$5(e){if(Array.isArray(e))return e}function ownKeys$j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$j(Object(r),!0).forEach(function(t){_defineProperty$m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$m(e,t,r){return(t=_toPropertyKey$j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$j(e){var t=_toPrimitive$j(e,"string");return"symbol"==_typeof$k(t)?t:t+""}function _toPrimitive$j(e,t){if("object"!=_typeof$k(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _typeof$j(e){return(_typeof$j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectWithoutProperties$8(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$9(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ownKeys$i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$i(Object(r),!0).forEach(function(t){_defineProperty$l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$l(e,t,r){return(t=_toPropertyKey$i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$i(e){var t=_toPrimitive$i(e,"string");return"symbol"==_typeof$j(t)?t:t+""}function _toPrimitive$i(e,t){if("object"!=_typeof$j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function defaultPropTransformer(e,t){return _objectSpread$i(_objectSpread$i({},t),e)}function isSymbolsProps(e,t){return"symbols"===e}function ShapeSelector(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return React$2.createElement(Rectangle,r);case"trapezoid":return React$2.createElement(Trapezoid,r);case"sector":return React$2.createElement(Sector,r);case"symbols":if(isSymbolsProps(t))return React$2.createElement(Symbols,r);break;default:return null}}function getPropsFromShapeOption(e){return reactExports.isValidElement(e)?e.props:e}function Shape(e){var t,r=e.option,n=e.shapeType,s=e.propTransformer,i=void 0===s?defaultPropTransformer:s,o=e.activeClassName,a=void 0===o?"recharts-active-shape":o,l=e.isActive,c=_objectWithoutProperties$8(e,_excluded$a);if(reactExports.isValidElement(r))t=reactExports.cloneElement(r,_objectSpread$i(_objectSpread$i({},c),getPropsFromShapeOption(r)));else if(isFunction$5(r))t=r(c);else if(isPlainObject$5(r)&&!isBoolean$3(r)){var u=i(r,c);t=React$2.createElement(ShapeSelector,{shapeType:n,elementProps:u})}else{var d=c;t=React$2.createElement(ShapeSelector,{shapeType:n,elementProps:d})}return l?React$2.createElement(Layer,{className:a},t):t}function isFunnel(e,t){return null!=t&&"trapezoids"in e.props}function isPie(e,t){return null!=t&&"sectors"in e.props}function isScatter(e,t){return null!=t&&"points"in e.props}function compareFunnel(e,t){var r,n,s=e.x===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.x)||e.x===t.x,i=e.y===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.y)||e.y===t.y;return s&&i}function comparePie(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function compareScatter(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function getComparisonFn(e,t){var r;return isFunnel(e,t)?r=compareFunnel:isPie(e,t)?r=comparePie:isScatter(e,t)&&(r=compareScatter),r}function getShapeDataKey(e,t){var r;return isFunnel(e,t)?r="trapezoids":isPie(e,t)?r="sectors":isScatter(e,t)&&(r="points"),r}function getActiveShapeTooltipPayload(e,t){var r,n;return isFunnel(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:isPie(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:isScatter(e,t)?t.payload:{}}function getActiveShapeIndexForTooltip(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=getShapeDataKey(r,t),i=getActiveShapeTooltipPayload(r,t),o=n.filter(function(e,n){var o=isEqual$4(i,e),a=r.props[s].filter(function(e){return getComparisonFn(r,t)(e,t)}),l=r.props[s].indexOf(a[a.length-1]);return o&&n===l});return n.indexOf(o[o.length-1])}function baseRange$1(e,t,r,n){for(var s=-1,i=nativeMax$3(nativeCeil((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++s]=e,e+=r;return o}function toFinite$2(e){return e?(e=toNumber$2(e))===INFINITY||e===-INFINITY?(e<0?-1:1)*MAX_INTEGER:e==e?e:0:0===e?e:0}function createRange$1(e){return function(t,r,n){return n&&"number"!=typeof n&&isIterateeCall$2(t,r,n)&&(r=n=void 0),t=toFinite$1(t),void 0===r?(r=t,t=0):r=toFinite$1(r),n=void 0===n?t<r?1:-1:toFinite$1(n),baseRange(t,r,n,e)}}function _typeof$i(e){return(_typeof$i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$h(Object(r),!0).forEach(function(t){_defineProperty$k(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$k(e,t,r){return(t=_toPropertyKey$h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$h(e){var t=_toPrimitive$h(e,"string");return"symbol"==_typeof$i(t)?t:t+""}function _toPrimitive$h(e,t){if("object"!=_typeof$i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _typeof$h(e){return(_typeof$h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$d.apply(this,arguments)}function ownKeys$g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$g(Object(r),!0).forEach(function(t){_defineProperty$j(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _classCallCheck$d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$g(n.key),n)}}function _createClass$d(e,t,r){return t&&_defineProperties$d(e.prototype,t),r&&_defineProperties$d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$a(e,t,r){return t=_getPrototypeOf$b(t),_possibleConstructorReturn$b(e,_isNativeReflectConstruct$b()?Reflect.construct(t,r||[],_getPrototypeOf$b(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$b(e,t){if(t&&("object"===_typeof$h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$b(e)}function _assertThisInitialized$b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$b=function(){return!!e})()}function _getPrototypeOf$b(e){return(_getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$b(e,t)}function _setPrototypeOf$b(e,t){return(_setPrototypeOf$b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$j(e,t,r){return(t=_toPropertyKey$g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$g(e){var t=_toPrimitive$g(e,"string");return"symbol"==_typeof$h(t)?t:t+""}function _toPrimitive$g(e,t){if("object"!=_typeof$h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function baseSome$1(e,t){var r;return baseEach$1(e,function(e,n,s){return!(r=t(e,n,s))}),!!r}function some(e,t,r){var n=isArray$3(e)?arraySome:baseSome;return r&&isIterateeCall$1(e,t,r)&&(t=void 0),n(e,baseIteratee$4(t))}function baseAssignValue$1(e,t,r){"__proto__"==t&&defineProperty$1?defineProperty$1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function mapValues(e,t){var r={};return t=baseIteratee$3(t),baseForOwn(e,function(e,n,s){baseAssignValue(r,n,t(e,n,s))}),r}function arrayEvery$1(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function baseEvery$1(e,t){var r=!0;return baseEach(e,function(e,n,s){return r=!!t(e,n,s)}),r}function every(e,t,r){var n=isArray$2(e)?arrayEvery:baseEvery;return r&&isIterateeCall(e,t,r)&&(t=void 0),n(e,baseIteratee$2(t))}function _typeof$g(e){return(_typeof$g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$c.apply(this,arguments)}function ownKeys$f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$f(Object(r),!0).forEach(function(t){_defineProperty$i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$i(e,t,r){return(t=_toPropertyKey$f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$f(e){var t=_toPrimitive$f(e,"string");return"symbol"==_typeof$g(t)?t:t+""}function _toPrimitive$f(e,t){if("object"!=_typeof$g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties$7(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$8(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function typeguardBarRectangleProps(e,t){var r=e.x,n=e.y,s=_objectWithoutProperties$7(e,_excluded$9),i="".concat(r),o=parseInt(i,10),a="".concat(n),l=parseInt(a,10),c="".concat(t.height||s.height),u=parseInt(c,10),d="".concat(t.width||s.width),p=parseInt(d,10);return _objectSpread$f(_objectSpread$f(_objectSpread$f(_objectSpread$f(_objectSpread$f({},t),s),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:p,name:t.name,radius:t.radius})}function BarRectangle(e){return React$2.createElement(Shape,_extends$c({shapeType:"rectangle",propTransformer:typeguardBarRectangleProps,activeClassName:"recharts-active-bar"},e))}function _typeof$f(e){return(_typeof$f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectWithoutProperties$6(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$7(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$b.apply(this,arguments)}function ownKeys$e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$e(Object(r),!0).forEach(function(t){_defineProperty$h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$e(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _classCallCheck$c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$e(n.key),n)}}function _createClass$c(e,t,r){return t&&_defineProperties$c(e.prototype,t),r&&_defineProperties$c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$9(e,t,r){return t=_getPrototypeOf$a(t),_possibleConstructorReturn$a(e,_isNativeReflectConstruct$a()?Reflect.construct(t,r||[],_getPrototypeOf$a(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$a(e,t){if(t&&("object"===_typeof$f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$a(e)}function _assertThisInitialized$a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$a=function(){return!!e})()}function _getPrototypeOf$a(e){return(_getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$a(e,t)}function _setPrototypeOf$a(e,t){return(_setPrototypeOf$a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$h(e,t,r){return(t=_toPropertyKey$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$e(e){var t=_toPrimitive$e(e,"string");return"symbol"==_typeof$f(t)?t:t+""}function _toPrimitive$e(e,t){if("object"!=_typeof$f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _typeof$e(e){return(_typeof$e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$d(n.key),n)}}function _createClass$b(e,t,r){return t&&_defineProperties$b(e.prototype,t),r&&_defineProperties$b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ownKeys$d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$d(Object(r),!0).forEach(function(t){_defineProperty$g(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$g(e,t,r){return(t=_toPropertyKey$d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$d(e){var t=_toPrimitive$d(e,"string");return"symbol"==_typeof$e(t)?t:t+""}function _toPrimitive$d(e,t){if("object"!=_typeof$e(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function normalizeAngle(e){return(e%180+180)%180}function createFind$1(e){return function(t,r,n){var s=Object(t);if(!isArrayLike(t)){var i=baseIteratee$1(r);t=keys$2(t),r=function(e){return i(s[e],e,s)}}var o=e(t,r,n);return o>-1?s[i?t[o]:o]:void 0}}function toInteger$1(e){var t=toFinite(e),r=t%1;return t==t?r?t-r:t:0}function findIndex$1(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=null==r?0:toInteger(r);return s<0&&(s=nativeMax$2(n+s,0)),baseFindIndex(e,baseIteratee(t),s)}function _typeof$d(e){return(_typeof$d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$c(n.key),n)}}function _createClass$a(e,t,r){return t&&_defineProperties$a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$8(e,t,r){return t=_getPrototypeOf$9(t),_possibleConstructorReturn$9(e,_isNativeReflectConstruct$9()?Reflect.construct(t,r||[],_getPrototypeOf$9(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$9(e,t){if(t&&("object"===_typeof$d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$9(e)}function _assertThisInitialized$9(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$9=function(){return!!e})()}function _getPrototypeOf$9(e){return(_getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$9(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$9(e,t)}function _setPrototypeOf$9(e,t){return(_setPrototypeOf$9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ownKeys$c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$c(Object(r),!0).forEach(function(t){_defineProperty$f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$f(e,t,r){return(t=_toPropertyKey$c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$c(e){var t=_toPrimitive$c(e,"string");return"symbol"==_typeof$d(t)?t:t+""}function _toPrimitive$c(e,t){if("object"!=_typeof$d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _slicedToArray$4(e,t){return _arrayWithHoles$4(e)||_iterableToArrayLimit$4(e,t)||_unsupportedIterableToArray$9(e,t)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$9(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$9(e,t):void 0}}function _arrayLikeToArray$9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$4(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t);else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$4(e){if(Array.isArray(e))return e}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$a.apply(this,arguments)}function ReferenceLineImpl(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,a=e.className,l=e.alwaysShow,c=useClipPathId(),u=useXAxisOrThrow(s),d=useYAxisOrThrow(i),p=useViewBox();if(!c||!p)return null;warn(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=createLabeledScales({x:u.scale,y:d.scale}),x=isNumOrStr(t),f=isNumOrStr(r),h=n&&2===n.length,g=getEndPoints(m,x,f,h,p,e.position,u.orientation,d.orientation,e);if(!g)return null;var y=_slicedToArray$4(g,2),j=y[0],b=j.x,v=j.y,E=y[1],R=E.x,S=E.y,w=_objectSpread$c(_objectSpread$c({clipPath:ifOverflowMatches(e,"hidden")?"url(#".concat(c,")"):void 0},filterProps$1(e,!0)),{},{x1:b,y1:v,x2:R,y2:S});return React$2.createElement(Layer,{className:clsx("recharts-reference-line",a)},renderLine(o,w),Label.renderCallByParent(e,rectWithCoords({x1:b,y1:v,x2:R,y2:S})))}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$9.apply(this,arguments)}function _typeof$c(e){return(_typeof$c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$b(Object(r),!0).forEach(function(t){_defineProperty$e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _classCallCheck$9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$b(n.key),n)}}function _createClass$9(e,t,r){return t&&_defineProperties$9(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$7(e,t,r){return t=_getPrototypeOf$8(t),_possibleConstructorReturn$8(e,_isNativeReflectConstruct$8()?Reflect.construct(t,r||[],_getPrototypeOf$8(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$8(e,t){if(t&&("object"===_typeof$c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$8(e)}function _assertThisInitialized$8(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$8=function(){return!!e})()}function _getPrototypeOf$8(e){return(_getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$8(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$8(e,t)}function _setPrototypeOf$8(e,t){return(_setPrototypeOf$8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$e(e,t,r){return(t=_toPropertyKey$b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$b(e){var t=_toPrimitive$b(e,"string");return"symbol"==_typeof$c(t)?t:t+""}function _toPrimitive$b(e,t){if("object"!=_typeof$c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$8.apply(this,arguments)}function _typeof$b(e){return(_typeof$b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$a(Object(r),!0).forEach(function(t){_defineProperty$d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _classCallCheck$8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$a(n.key),n)}}function _createClass$8(e,t,r){return t&&_defineProperties$8(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$6(e,t,r){return t=_getPrototypeOf$7(t),_possibleConstructorReturn$7(e,_isNativeReflectConstruct$7()?Reflect.construct(t,r||[],_getPrototypeOf$7(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$7(e,t){if(t&&("object"===_typeof$b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$7(e)}function _assertThisInitialized$7(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$7=function(){return!!e})()}function _getPrototypeOf$7(e){return(_getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$7(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$7(e,t)}function _setPrototypeOf$7(e,t){return(_setPrototypeOf$7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$d(e,t,r){return(t=_toPropertyKey$a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$a(e){var t=_toPrimitive$a(e,"string");return"symbol"==_typeof$b(t)?t:t+""}function _toPrimitive$a(e,t){if("object"!=_typeof$b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function getEveryNthWithCondition(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function getAngledTickWidth(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return getAngledRectangleWidth(n,r)}function getTickBoundaries(e,t,r){var n="width"===r,s=e.x,i=e.y,o=e.width,a=e.height;return 1===t?{start:n?s:i,end:n?s+o:i+a}:{start:n?s+o:i+a,end:n?s:i}}function isVisible(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function getNumberIntervalTicks(e,t){return getEveryNthWithCondition(e,t+1)}function getEquidistantTicks(e,t,r,n,s){for(var i,o=(n||[]).slice(),a=t.start,l=t.end,c=0,u=1,d=a,p=function(){var t=null==n?void 0:n[c];if(void 0===t)return{v:getEveryNthWithCondition(n,u)};var i,o=c,p=function(){return void 0===i&&(i=r(t,o)),i},m=t.coordinate,x=0===c||isVisible(e,m,p,d,l);x||(c=0,d=a,u+=1),x&&(d=m+e*(p()/2+s),c+=u)};u<=o.length;)if(i=p())return i.v;return[]}function _typeof$a(e){return(_typeof$a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$9(Object(r),!0).forEach(function(t){_defineProperty$c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$9(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$c(e,t,r){return(t=_toPropertyKey$9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$9(e){var t=_toPrimitive$9(e,"string");return"symbol"==_typeof$a(t)?t:t+""}function _toPrimitive$9(e,t){if("object"!=_typeof$a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function getTicksEnd(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,a=t.start,l=t.end,c=function(t){var n,c=i[t],u=function(){return void 0===n&&(n=r(c,t)),n};if(t===o-1){var d=e*(c.coordinate+e*u()/2-l);i[t]=c=_objectSpread$9(_objectSpread$9({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else i[t]=c=_objectSpread$9(_objectSpread$9({},c),{},{tickCoord:c.coordinate});isVisible(e,c.tickCoord,u,a,l)&&(l=c.tickCoord-e*(u()/2+s),i[t]=_objectSpread$9(_objectSpread$9({},c),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function getTicksStart(e,t,r,n,s,i){var o=(n||[]).slice(),a=o.length,l=t.start,c=t.end;if(i){var u=n[a-1],d=r(u,a-1),p=e*(u.coordinate+e*d/2-c);o[a-1]=u=_objectSpread$9(_objectSpread$9({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),isVisible(e,u.tickCoord,function(){return d},l,c)&&(c=u.tickCoord-e*(d/2+s),o[a-1]=_objectSpread$9(_objectSpread$9({},u),{},{isShow:!0}))}for(var m=i?a-1:a,x=function(t){var n,i=o[t],a=function(){return void 0===n&&(n=r(i,t)),n};if(0===t){var u=e*(i.coordinate-e*a()/2-l);o[t]=i=_objectSpread$9(_objectSpread$9({},i),{},{tickCoord:u<0?i.coordinate-u*e:i.coordinate})}else o[t]=i=_objectSpread$9(_objectSpread$9({},i),{},{tickCoord:i.coordinate});isVisible(e,i.tickCoord,a,l,c)&&(l=i.tickCoord+e*(a()/2+s),o[t]=_objectSpread$9(_objectSpread$9({},i),{},{isShow:!0}))},f=0;f<m;f++)x(f);return o}function getTicks(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,a=e.orientation,l=e.interval,c=e.tickFormatter,u=e.unit,d=e.angle;if(!s||!s.length||!n)return[];if(isNumber$1(l)||Global.isSsr)return getNumberIntervalTicks(s,"number"==typeof l&&isNumber$1(l)?l:0);var p="top"===a||"bottom"===a?"width":"height",m=u&&"width"===p?getStringSize(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=function(e,n){var s=isFunction$5(c)?c(e.value,n):e.value;return"width"===p?getAngledTickWidth(getStringSize(s,{fontSize:t,letterSpacing:r}),m,d):getStringSize(s,{fontSize:t,letterSpacing:r})[p]},f=s.length>=2?mathSign(s[1].coordinate-s[0].coordinate):1,h=getTickBoundaries(i,f,p);return"equidistantPreserveStart"===l?getEquidistantTicks(f,h,x,s,o):("preserveStart"===l||"preserveStartEnd"===l?getTicksStart(f,h,x,s,o,"preserveStartEnd"===l):getTicksEnd(f,h,x,s,o)).filter(function(e){return e.isShow})}function _typeof$9(e){return(_typeof$9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$7.apply(this,arguments)}function ownKeys$8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$8(Object(r),!0).forEach(function(t){_defineProperty$b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$8(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _objectWithoutProperties$5(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$6(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$6(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _classCallCheck$7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$8(n.key),n)}}function _createClass$7(e,t,r){return t&&_defineProperties$7(e.prototype,t),r&&_defineProperties$7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$5(e,t,r){return t=_getPrototypeOf$6(t),_possibleConstructorReturn$6(e,_isNativeReflectConstruct$6()?Reflect.construct(t,r||[],_getPrototypeOf$6(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$6(e,t){if(t&&("object"===_typeof$9(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$6(e)}function _assertThisInitialized$6(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$6=function(){return!!e})()}function _getPrototypeOf$6(e){return(_getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$6(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$6(e,t)}function _setPrototypeOf$6(e,t){return(_setPrototypeOf$6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$b(e,t,r){return(t=_toPropertyKey$8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$8(e){var t=_toPrimitive$8(e,"string");return"symbol"==_typeof$9(t)?t:t+""}function _toPrimitive$8(e,t){if("object"!=_typeof$9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _typeof$8(e){return(_typeof$8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$7(Object(r),!0).forEach(function(t){_defineProperty$a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$7(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$a(e,t,r){return(t=_toPropertyKey$7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$7(e){var t=_toPrimitive$7(e,"string");return"symbol"==_typeof$8(t)?t:t+""}function _toPrimitive$7(e,t){if("object"!=_typeof$8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$6.apply(this,arguments)}function _objectWithoutProperties$4(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$5(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function renderLineItem(e,t){var r;if(React$2.isValidElement(e))r=React$2.cloneElement(e,t);else if(isFunction$5(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,a=t.key,l=_objectWithoutProperties$4(t,_excluded$6),c=filterProps$1(l,!1);c.offset;var u=_objectWithoutProperties$4(c,_excluded2$4);r=React$2.createElement("line",_extends$6({},u,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:a}))}return r}function HorizontalGridLines(e){var t=e.x,r=e.width,n=e.horizontal,s=void 0===n||n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(n,i){var o=_objectSpread$7(_objectSpread$7({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(i),index:i});return renderLineItem(s,o)});return React$2.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function VerticalGridLines(e){var t=e.y,r=e.height,n=e.vertical,s=void 0===n||n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(n,i){var o=_objectSpread$7(_objectSpread$7({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(i),index:i});return renderLineItem(s,o)});return React$2.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function HorizontalStripes(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,a=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var c=a.map(function(e){return Math.round(e+s-s)}).sort(function(e,t){return e-t});s!==c[0]&&c.unshift(0);var u=c.map(function(e,a){var l=!c[a+1]?s+o-e:c[a+1]-e;if(l<=0)return null;var u=a%t.length;return React$2.createElement("rect",{key:"react-".concat(a),y:e,x:n,height:l,width:i,stroke:"none",fill:t[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return React$2.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function VerticalStripes(e){var t=e.vertical,r=void 0===t||t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,a=e.width,l=e.height,c=e.verticalPoints;if(!r||!n||!n.length)return null;var u=c.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==u[0]&&u.unshift(0);var d=u.map(function(e,t){var r=!u[t+1]?i+a-e:u[t+1]-e;if(r<=0)return null;var c=t%n.length;return React$2.createElement("rect",{key:"react-".concat(t),x:e,y:o,width:r,height:l,stroke:"none",fill:n[c],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return React$2.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}function CartesianGrid(e){var t,r,n,s,i,o,a=useChartWidth(),l=useChartHeight(),c=useOffset(),u=_objectSpread$7(_objectSpread$7({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:defaultProps$2.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:defaultProps$2.fill,horizontal:null!==(n=e.horizontal)&&void 0!==n?n:defaultProps$2.horizontal,horizontalFill:null!==(s=e.horizontalFill)&&void 0!==s?s:defaultProps$2.horizontalFill,vertical:null!==(i=e.vertical)&&void 0!==i?i:defaultProps$2.vertical,verticalFill:null!==(o=e.verticalFill)&&void 0!==o?o:defaultProps$2.verticalFill,x:isNumber$1(e.x)?e.x:c.left,y:isNumber$1(e.y)?e.y:c.top,width:isNumber$1(e.width)?e.width:c.width,height:isNumber$1(e.height)?e.height:c.height}),d=u.x,p=u.y,m=u.width,x=u.height,f=u.syncWithTicks,h=u.horizontalValues,g=u.verticalValues,y=useArbitraryXAxis(),j=useYAxisWithFiniteDomainOrRandom();if(!isNumber$1(m)||m<=0||!isNumber$1(x)||x<=0||!isNumber$1(d)||d!==+d||!isNumber$1(p)||p!==+p)return null;var b=u.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,v=u.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,E=u.horizontalPoints,R=u.verticalPoints;if((!E||!E.length)&&isFunction$5(v)){var S=h&&h.length,w=v({yAxis:j?_objectSpread$7(_objectSpread$7({},j),{},{ticks:S?h:j.ticks}):void 0,width:a,height:l,offset:c},!!S||f);warn(Array.isArray(w),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$8(w),"]")),Array.isArray(w)&&(E=w)}if((!R||!R.length)&&isFunction$5(b)){var $=g&&g.length,N=b({xAxis:y?_objectSpread$7(_objectSpread$7({},y),{},{ticks:$?g:y.ticks}):void 0,width:a,height:l,offset:c},!!$||f);warn(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$8(N),"]")),Array.isArray(N)&&(R=N)}return React$2.createElement("g",{className:"recharts-cartesian-grid"},React$2.createElement(Background,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),React$2.createElement(HorizontalGridLines,_extends$6({},u,{offset:c,horizontalPoints:E,xAxis:y,yAxis:j})),React$2.createElement(VerticalGridLines,_extends$6({},u,{offset:c,verticalPoints:R,xAxis:y,yAxis:j})),React$2.createElement(HorizontalStripes,_extends$6({},u,{horizontalPoints:E})),React$2.createElement(VerticalStripes,_extends$6({},u,{verticalPoints:R})))}function _typeof$7(e){return(_typeof$7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectWithoutProperties$3(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$4(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$4(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$5.apply(this,arguments)}function ownKeys$6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$6(Object(r),!0).forEach(function(t){_defineProperty$9(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$6(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _toConsumableArray$5(e){return _arrayWithoutHoles$5(e)||_iterableToArray$5(e)||_unsupportedIterableToArray$8(e)||_nonIterableSpread$5()}function _nonIterableSpread$5(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$8(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$8(e,t):void 0}}function _iterableToArray$5(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$5(e){if(Array.isArray(e))return _arrayLikeToArray$8(e)}function _arrayLikeToArray$8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck$6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$6(n.key),n)}}function _createClass$6(e,t,r){return t&&_defineProperties$6(e.prototype,t),r&&_defineProperties$6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$4(e,t,r){return t=_getPrototypeOf$5(t),_possibleConstructorReturn$5(e,_isNativeReflectConstruct$5()?Reflect.construct(t,r||[],_getPrototypeOf$5(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$5(e,t){if(t&&("object"===_typeof$7(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$5(e)}function _assertThisInitialized$5(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$5=function(){return!!e})()}function _getPrototypeOf$5(e){return(_getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$5(e,t)}function _setPrototypeOf$5(e,t){return(_setPrototypeOf$5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$9(e,t,r){return(t=_toPropertyKey$6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$6(e){var t=_toPrimitive$6(e,"string");return"symbol"==_typeof$7(t)?t:t+""}function _toPrimitive$6(e,t){if("object"!=_typeof$7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _typeof$6(e){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectWithoutProperties$2(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$3(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$3(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$4.apply(this,arguments)}function ownKeys$5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$5(Object(r),!0).forEach(function(t){_defineProperty$8(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$5(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _classCallCheck$5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$5(n.key),n)}}function _createClass$5(e,t,r){return t&&_defineProperties$5(e.prototype,t),r&&_defineProperties$5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$3(e,t,r){return t=_getPrototypeOf$4(t),_possibleConstructorReturn$4(e,_isNativeReflectConstruct$4()?Reflect.construct(t,r||[],_getPrototypeOf$4(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$4(e,t){if(t&&("object"===_typeof$6(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(e)}function _assertThisInitialized$4(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$4=function(){return!!e})()}function _getPrototypeOf$4(e){return(_getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$4(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$4(e,t)}function _setPrototypeOf$4(e,t){return(_setPrototypeOf$4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$8(e,t,r){return(t=_toPropertyKey$5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$5(e){var t=_toPrimitive$5(e,"string");return"symbol"==_typeof$6(t)?t:t+""}function _toPrimitive$5(e,t){if("object"!=_typeof$6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _typeof$5(e){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$4(n.key),n)}}function _createClass$4(e,t,r){return t&&_defineProperties$4(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$2(e,t,r){return t=_getPrototypeOf$3(t),_possibleConstructorReturn$3(e,_isNativeReflectConstruct$3()?Reflect.construct(t,r||[],_getPrototypeOf$3(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$3(e,t){if(t&&("object"===_typeof$5(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(e)}function _assertThisInitialized$3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$3=function(){return!!e})()}function _getPrototypeOf$3(e){return(_getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$3(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$3(e,t)}function _setPrototypeOf$3(e,t){return(_setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$7(e,t,r){return(t=_toPropertyKey$4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$4(e){var t=_toPrimitive$4(e,"string");return"symbol"==_typeof$5(t)?t:t+""}function _toPrimitive$4(e,t){if("object"!=_typeof$5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$3.apply(this,arguments)}function XAxisImpl(e){var t=e.xAxisId,r=useChartWidth(),n=useChartHeight(),s=useXAxisOrThrow(t);return null==s?null:reactExports.createElement(CartesianAxis,_extends$3({},s,{className:clsx("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return getTicksOfAxis(e,!0)}}))}function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$3(n.key),n)}}function _createClass$3(e,t,r){return t&&_defineProperties$3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$1(e,t,r){return t=_getPrototypeOf$2(t),_possibleConstructorReturn$2(e,_isNativeReflectConstruct$2()?Reflect.construct(t,r||[],_getPrototypeOf$2(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$2(e,t){if(t&&("object"===_typeof$4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(e)}function _assertThisInitialized$2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$2=function(){return!!e})()}function _getPrototypeOf$2(e){return(_getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$2(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$2(e,t)}function _setPrototypeOf$2(e,t){return(_setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty$6(e,t,r){return(t=_toPropertyKey$3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$3(e){var t=_toPrimitive$3(e,"string");return"symbol"==_typeof$4(t)?t:t+""}function _toPrimitive$3(e,t){if("object"!=_typeof$4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$2.apply(this,arguments)}function _toConsumableArray$4(e){return _arrayWithoutHoles$4(e)||_iterableToArray$4(e)||_unsupportedIterableToArray$7(e)||_nonIterableSpread$4()}function _nonIterableSpread$4(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$7(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$7(e,t):void 0}}function _iterableToArray$4(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$4(e){if(Array.isArray(e))return _arrayLikeToArray$7(e)}function _arrayLikeToArray$7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$2(n.key),n)}}function _createClass$2(e,t,r){return t&&_defineProperties$2(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$5(e,t,r){return(t=_toPropertyKey$2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$2(e){var t=_toPrimitive$2(e,"string");return"symbol"==_typeof$3(t)?t:t+""}function _toPrimitive$2(e,t){if("object"!=_typeof$3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function isDomainSpecifiedByUser(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var n=null==e?void 0:e[0],s=null==e?void 0:e[1];if(n&&s&&isNumber$1(n)&&isNumber$1(s))return!0}return!1}function getCursorRectangle(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-s:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-s,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}function getRadialCursorPoints(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle;return{points:[polarToCartesian(t,r,n,s),polarToCartesian(t,r,n,i)],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function getCursorPoints(e,t,r){var n,s,i,o;if("horizontal"===e)i=n=t.x,s=r.top,o=r.top+r.height;else if("vertical"===e)o=s=t.y,n=r.left,i=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return getRadialCursorPoints(t);var a=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.angle,p=polarToCartesian(a,l,c,d),m=polarToCartesian(a,l,u,d);n=p.x,s=p.y,i=m.x,o=m.y}return[{x:n,y:s},{x:i,y:o}]}function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$4(Object(r),!0).forEach(function(t){_defineProperty$4(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$4(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$4(e,t,r){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return"symbol"==_typeof$2(t)?t:t+""}function _toPrimitive$1(e,t){if("object"!=_typeof$2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Cursor(e){var t,r,n,s=e.element,i=e.tooltipEventType,o=e.isActive,a=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,p=e.layout,m=e.chartName,x=null!==(t=s.props.cursor)&&void 0!==t?t:null===(r=s.type.defaultProps)||void 0===r?void 0:r.cursor;if(!s||!x||!o||!a||"ScatterChart"!==m&&"axis"!==i)return null;var f=Curve;if("ScatterChart"===m)n=a,f=Cross;else if("BarChart"===m)n=getCursorRectangle(p,a,c,d),f=Rectangle;else if("radial"===p){var h=getRadialCursorPoints(a),g=h.cx,y=h.cy,j=h.radius;n={cx:g,cy:y,startAngle:h.startAngle,endAngle:h.endAngle,innerRadius:j,outerRadius:j},f=Sector}else n={points:getCursorPoints(p,a,c)},f=Curve;var b=_objectSpread$4(_objectSpread$4(_objectSpread$4(_objectSpread$4({stroke:"#ccc",pointerEvents:"none"},c),n),filterProps$1(x,!1)),{},{payload:l,payloadIndex:u,className:clsx("recharts-tooltip-cursor",x.className)});return reactExports.isValidElement(x)?reactExports.cloneElement(x,b):reactExports.createElement(f,b)}function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$1.apply(this,arguments)}function _slicedToArray$3(e,t){return _arrayWithHoles$3(e)||_iterableToArrayLimit$3(e,t)||_unsupportedIterableToArray$6(e,t)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit$3(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i,o,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t);else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _arrayWithHoles$3(e){if(Array.isArray(e))return e}function _objectWithoutProperties$1(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose$2(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose$2(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass$1(e,t,r){return t&&_defineProperties$1(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper(e,t,r){return t=_getPrototypeOf$1(t),_possibleConstructorReturn$1(e,_isNativeReflectConstruct$1()?Reflect.construct(t,r||[],_getPrototypeOf$1(e).constructor):t.apply(e,r))}function _possibleConstructorReturn$1(e,t){if(t&&("object"===_typeof$1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(e)}function _assertThisInitialized$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct$1=function(){return!!e})()}function _getPrototypeOf$1(e){return(_getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$1(e,t)}function _setPrototypeOf$1(e,t){return(_setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _toConsumableArray$3(e){return _arrayWithoutHoles$3(e)||_iterableToArray$3(e)||_unsupportedIterableToArray$6(e)||_nonIterableSpread$3()}function _nonIterableSpread$3(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$6(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$6(e,t):void 0}}function _iterableToArray$3(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$3(e){if(Array.isArray(e))return _arrayLikeToArray$6(e)}function _arrayLikeToArray$6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys$3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(r),!0).forEach(function(t){_defineProperty$3(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$3(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof$1(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof$1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_typeof$1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function renderAsIs(e){return e}function getDefaultDomainByAxisType(e){return"number"===e?[0,"auto"]:void 0}function AnalyticsDashboard(){const[e,t]=reactExports.useState("highlights"),{data:r,isLoading:n}=useQuery({queryKey:["/api/sandwich-collections/all"],queryFn:async()=>{const e=await fetch("/api/sandwich-collections?limit=2000");if(!e.ok)throw new Error("Failed to fetch collections");return(await e.json()).collections||[]}}),{data:s,isLoading:i}=useQuery({queryKey:["/api/sandwich-collections/stats"]}),o=n||i,a=reactExports.useMemo(()=>{if(!(null==r?void 0:r.length)||!s)return null;const e=s.completeTotalSandwiches||0,t=e=>(e.group1Count||0)+(e.group2Count||0),n=r.reduce((e,r)=>{const n=r.hostName||"Unknown",s=(r.individualSandwiches||0)+t(r);return e[n]||(e[n]={total:0,collections:0}),e[n].total+=s,e[n].collections+=1,e},{}),i=Object.entries(n).sort(([,e],[,t])=>t.total-e.total)[0],o=r.reduce((e,r)=>{const n=(e=>{const t=new Date(e);return t.setDate(e.getDate()-e.getDay()),t.toISOString().split("T")[0]})(new Date(r.collectionDate||"")),s=(r.individualSandwiches||0)+t(r);return e[n]||(e[n]={total:0,date:r.collectionDate}),e[n].total+=s,e},{});Object.values(o).map(e=>e.total).sort((e,t)=>t-e);const a={total:38828,date:"2023-11-15"},l=r.reduce((e,r)=>{const n=new Date(r.collectionDate||""),s=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`,i=(r.individualSandwiches||0)+t(r);return e[s]||(e[s]={month:s,sandwiches:0}),e[s].sandwiches+=i,e},{}),c=Object.values(l).sort((e,t)=>e.month.localeCompare(t.month)).map(e=>({month:new Date(e.month+"-01").toLocaleDateString("en-US",{month:"short",year:"2-digit"}),sandwiches:e.sandwiches}));return{totalSandwiches:e,totalCollections:r.length,activeLocations:Object.keys(n).length,avgWeekly:Math.round(8700),topPerformer:i?{name:i[0],total:i[1].total}:null,recordWeek:a?{total:a.total,date:a.date}:null,trendData:c}},[r,s]);return o?jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"flex items-center justify-center py-8",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Loading strategic insights..."})]})})}):a?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-main-heading text-primary mb-2",children:"Strategic Impact Dashboard"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-body text-muted-foreground",children:"Celebrating achievements and identifying growth opportunities"})]}),jsxRuntimeExports.jsxs(Tabs,{value:e,onValueChange:t,children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-4",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"highlights",children:"Achievements"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"trends",children:"Growth Trends"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"insights",children:"Seasonal Insights"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"opportunities",children:"Strategic Ideas"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"highlights",className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsx(Card$1,{className:"border-primary shadow-md",children:jsxRuntimeExports.jsxs(CardContent$1,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("div",{className:"text-primary",children:jsxRuntimeExports.jsx(Award,{className:"w-6 h-6"})}),jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"text-xs",children:[jsxRuntimeExports.jsx(Star,{className:"w-3 h-3 mr-1"}),"Highlight"]})]}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Total Impact"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:a.totalSandwiches.toLocaleString()}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Sandwiches collected across all locations"})]})}),jsxRuntimeExports.jsx(Card$1,{className:"border-primary shadow-md",children:jsxRuntimeExports.jsxs(CardContent$1,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("div",{className:"text-primary",children:jsxRuntimeExports.jsx(TrendingUp,{className:"w-6 h-6"})}),jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"text-xs",children:[jsxRuntimeExports.jsx(Star,{className:"w-3 h-3 mr-1"}),"Highlight"]})]}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Weekly Average"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:a.avgWeekly.toLocaleString()}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Average sandwiches per week"})]})}),jsxRuntimeExports.jsx(Card$1,{className:"border-primary shadow-md",children:jsxRuntimeExports.jsxs(CardContent$1,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("div",{className:"text-primary",children:jsxRuntimeExports.jsx(Crown,{className:"w-6 h-6"})}),jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"text-xs",children:[jsxRuntimeExports.jsx(Star,{className:"w-3 h-3 mr-1"}),"Highlight"]})]}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Record Week"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:a.recordWeek?a.recordWeek.total.toLocaleString():"0"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:a.recordWeek?`Outstanding performance on ${new Date(a.recordWeek.date).toLocaleDateString()}`:"No record data"})]})}),jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsxs(CardContent$1,{className:"p-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsx("div",{className:"text-primary",children:jsxRuntimeExports.jsx(Target,{className:"w-6 h-6"})})}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Network Strength"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:a.activeLocations}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Active collection locations in our network"})]})}),jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsxs(CardContent$1,{className:"p-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsx("div",{className:"text-primary",children:jsxRuntimeExports.jsx(Award,{className:"w-6 h-6"})})}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Total Collections"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:a.totalCollections.toLocaleString()}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Individual collection events completed"})]})})]})}),jsxRuntimeExports.jsxs(TabsContent,{value:"trends",className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5"}),"Monthly Collection Trends"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Tracking our community's growing impact over time"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx("div",{className:"h-80",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(LineChart,{data:a.trendData,children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"month"}),jsxRuntimeExports.jsx(YAxis,{}),jsxRuntimeExports.jsx(Tooltip,{formatter:e=>[null==e?void 0:e.toLocaleString(),"Sandwiches"],labelFormatter:e=>`Month: ${e}`}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"sandwiches",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:2,r:4}})]})})})})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Growth Pattern Analysis"}),jsxRuntimeExports.jsx(CardDescription,{children:"Understanding our momentum cycles"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx("div",{className:"h-60",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:a.trendData,children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"month"}),jsxRuntimeExports.jsx(YAxis,{}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Bar,{dataKey:"sandwiches",fill:"#00C49F"})]})})})})]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"insights",className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5"}),"Back-to-School Season"]})}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Historical Pattern"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"September traditionally shows strong community engagement"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Growth Opportunity"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-primary",children:"Early fall presents excellent momentum-building opportunities"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Strategic Context"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Families returning from summer often seek ways to reconnect with community service"})]})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5"}),"Holiday Season"]})}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Historical Pattern"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"November-December historically sees increased generosity"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Growth Opportunity"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-primary",children:"Holiday spirit creates natural partnership opportunities"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Strategic Context"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Corporate giving programs and family traditions align with our mission"})]})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5"}),"Spring Awakening"]})}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Historical Pattern"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"March-April shows renewed community activity"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Growth Opportunity"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-primary",children:"Spring energy provides natural growth momentum"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Strategic Context"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Warmer weather and longer days boost volunteer engagement"})]})]})]})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"opportunities",className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-primary mt-1",children:jsxRuntimeExports.jsx(Lightbulb,{className:"w-6 h-6"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Network Expansion"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-3",children:"Our proven model could benefit additional communities"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary",children:[jsxRuntimeExports.jsx(ChevronUp,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("strong",{children:"Next Step:"})," Identify 2-3 neighboring areas for pilot programs"]})]})]})})}),jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-primary mt-1",children:jsxRuntimeExports.jsx(Lightbulb,{className:"w-6 h-6"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Partnership Development"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-3",children:"Corporate partnerships could amplify our impact"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary",children:[jsxRuntimeExports.jsx(ChevronUp,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("strong",{children:"Next Step:"})," Explore partnerships with local businesses for employee engagement"]})]})]})})}),jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-primary mt-1",children:jsxRuntimeExports.jsx(Lightbulb,{className:"w-6 h-6"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Recognition Programs"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-3",children:"Celebrating successes builds momentum"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary",children:[jsxRuntimeExports.jsx(ChevronUp,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("strong",{children:"Next Step:"})," Create quarterly recognition events for top contributors"]})]})]})})})]})})]})]}):jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-8",children:jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"No data available for analysis"})})})})}function DocumentPreview({documentPath:e,documentName:t,documentType:r,onClose:n}){const[s,i]=reactExports.useState(!0),o=()=>{const r=document.createElement("a");r.href=e,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)},a=()=>{window.open(e,"_blank")};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full max-w-5xl h-5/6 flex flex-col ml-0 lg:ml-64 mr-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:t}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 rounded-full",children:(null==r?void 0:r.toUpperCase())||"FILE"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Button,{onClick:o,variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{onClick:a,variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{onClick:n,variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[s&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 dark:bg-gray-800",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading preview..."})]})}),(()=>{switch(null==r?void 0:r.toLowerCase()){case"pdf":return jsxRuntimeExports.jsx("iframe",{src:e,className:"w-full h-full border-0",onLoad:()=>i(!1),title:t});case"docx":return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx(FileText,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-2",children:t}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Word documents require download to view. Click the download button to save the file to your device."})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:o,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Download Document"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:a,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Open in New Tab"]})]})]});case"xlsx":return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx(FileText,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-2",children:t}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Excel files require download to view. Click the download button to save the file to your device."})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:o,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Download Document"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:a,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Open in New Tab"]})]})]});default:return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx(FileText,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-2",children:t}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Preview not available for this file type. Download or open in a new tab to view."})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:o,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Download Document"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:a,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Open in New Tab"]})]})]})}})()]}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use the buttons above to download or open in a new tab"}),jsxRuntimeExports.jsx(Button,{onClick:n,variant:"outline",children:"Close Preview"})]})})]})})}function DevelopmentDocuments(){const[e,t]=reactExports.useState("All"),[r,n]=reactExports.useState(null),s=["All",...Array.from(new Set(developmentDocuments.map(e=>e.category)))],i="All"===e?developmentDocuments:developmentDocuments.filter(t=>t.category===e);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(r=>jsxRuntimeExports.jsx(Button,{variant:e===r?"default":"outline",size:"sm",onClick:()=>t(r),children:r},r))}),jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map((e,t)=>jsxRuntimeExports.jsxs(Card$1,{className:"hover:shadow-md transition-shadow",children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"pb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[getFileIcon$2(e.type),jsxRuntimeExports.jsx(CardTitle,{className:"text-base leading-tight",children:e.name})]}),jsxRuntimeExports.jsx(Badge,{className:getCategoryColor$2(e.category),variant:"secondary",children:e.category})]}),e.description&&jsxRuntimeExports.jsx(CardDescription,{className:"text-sm",children:e.description})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"pt-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>(e=>{n(e)})(e),className:"flex-1",variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4 mr-2"}),"Preview"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>((e,t)=>{const r=document.createElement("a");r.href=e,r.download=t,r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r)})(e.path,e.name),className:"flex-1",size:"sm",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Download"]})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{return t=e.path,void window.open(t,"_blank");var t},className:"w-full mt-2",variant:"ghost",size:"sm",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]})]})]},t))}),0===i.length&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(FileText,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"No documents found"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try selecting a different category"})]}),r&&jsxRuntimeExports.jsx(DocumentPreview,{documentPath:r.path,documentName:r.name,documentType:r.type,onClose:()=>n(null)})]})}function Development(){return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 py-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-secondary/20 dark:bg-secondary/20 rounded-xl",children:jsxRuntimeExports.jsx(Building2,{className:"w-6 h-6 text-secondary dark:text-secondary"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-main-heading text-primary dark:text-secondary",children:"Development & Resources"}),jsxRuntimeExports.jsx("p",{className:"font-body text-muted-foreground",children:"Organizational documents and development resources"})]})]}),jsxRuntimeExports.jsx("div",{className:"max-w-6xl",children:jsxRuntimeExports.jsx(DevelopmentDocuments,{})})]})})}function MeetingMinutes({isEmbedded:e=!1}){useLocation();const[t,r]=reactExports.useState(null),[n,s]=reactExports.useState(!1),[i,o]=reactExports.useState(null),[a,l]=reactExports.useState(null),[c,u]=reactExports.useState(null),[d,p]=reactExports.useState(""),[m,x]=reactExports.useState("file"),[f,h]=reactExports.useState(!1),[g,y]=reactExports.useState(!1),[j,b]=reactExports.useState(null),[v,E]=reactExports.useState({title:"",date:"",time:"",type:"core_team",location:"",description:""}),[R,S]=reactExports.useState({title:"",date:"",time:"",type:"core_team",location:"",description:""}),{toast:w}=useToast(),{data:$=[],isLoading:N}=useQuery({queryKey:["/api/meetings"]}),{data:_=[],isLoading:C}=useQuery({queryKey:["/api/meeting-minutes"]}),O=useMutation({mutationFn:async e=>{const t=await fetch("/api/meeting-minutes/upload",{method:"POST",body:e});if(!t.ok)throw new Error("Failed to upload minutes");return t.json()},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/meeting-minutes"]}),s(!1),r(null),u(null),p(""),w({title:"Meeting minutes uploaded successfully"})}}),T=useMutation({mutationFn:async e=>{if(!(await fetch(`/api/meetings/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete meeting")},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/meetings"]}),w({title:"Meeting deleted successfully"})}}),P=useMutation({mutationFn:async e=>{const t=await fetch(`/api/meeting-minutes/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete meeting minutes");return t.json()},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/meeting-minutes"]}),o(null),w({title:"Meeting minutes deleted successfully"})},onError:e=>{w({title:"Error deleting meeting minutes",description:e.message,variant:"destructive"})}}),A=useMutation({mutationFn:async e=>{const t=await fetch("/api/meetings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create meeting");return t.json()},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/meetings"]}),h(!1),E({title:"",date:"",time:"",type:"core_team",location:"",description:""}),w({title:"Meeting created successfully"})},onError:e=>{w({title:"Error creating meeting",description:e.message,variant:"destructive"})}}),k=useMutation({mutationFn:async e=>{const t=await fetch(`/api/meetings/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update meeting");return t.json()},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/meetings"]}),y(!1),b(null),S({title:"",date:"",time:"",type:"core_team",location:"",description:""}),w({title:"Meeting updated successfully"})},onError:e=>{w({title:"Error updating meeting",description:e.message,variant:"destructive"})}}),I=e=>{if(e.preventDefault(),!t)return;const r=$.find(e=>e.id===t);if(!r)return;const n=new FormData;if(n.append("meetingId",t.toString()),n.append("title",r.title),n.append("date",r.date),"file"===m&&c)n.append("file",c),n.append("summary",`Uploaded file: ${c.name}`);else{if("google_docs"!==m||!d)return void w({title:"Please select a file or provide a Google Docs URL",variant:"destructive"});n.append("googleDocsUrl",d),n.append("summary",`Google Docs link: ${d}`)}O.mutate(n)},D=e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(r){["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(r.type)?u(r):(w({title:"Invalid file type",description:"Please upload a PDF, DOC, or DOCX file",variant:"destructive"}),e.target.value="")}},M=async(e,t)=>{try{const r=await fetch(`/api/meeting-minutes/${e}/file`);if(!r.ok)throw new Error("File not found");const n=await r.blob(),s=window.URL.createObjectURL(n),i=document.createElement("a");i.style.display="none",i.href=s,i.download=t||"meeting-minutes-document",document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(s),document.body.removeChild(i),w({title:"File downloaded successfully"})}catch(r){console.error("Download error:",r),w({title:"Download failed",description:"Could not download the file. It may have been moved or deleted.",variant:"destructive"})}},L=e=>{e.preventDefault();const t={title:v.title,date:v.date,time:v.time||"",type:v.type,location:v.location||void 0,description:v.description||void 0,status:"scheduled"};A.mutate(t)},F=e=>{if(e.preventDefault(),!j)return;const t={id:j,title:R.title,date:R.date,time:R.time||"",type:R.type,location:R.location||void 0,description:R.description||void 0,status:"scheduled"};k.mutate(t)},B=e=>{const t=new Date(e.date).toLocaleDateString();if(e.time&&"TBD"!==e.time&&""!==e.time){const r=(e=>{if(!e||""===e.trim()||"TBD"===e)return"Time TBD";try{const[t,r]=e.split(":");if(!t||!r)return"Time TBD";const n=parseInt(t,10),s=parseInt(r,10);if(isNaN(n)||isNaN(s))return"Time TBD";const i=n>=12?"PM":"AM";return`${0===n?12:n>12?n-12:n}:${s.toString().padStart(2,"0")} ${i}`}catch(t){return"Time TBD"}})(e.time);if("Time TBD"!==r)return`${t} at ${r}`}return t};if(N||C)return jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"animate-pulse space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),jsxRuntimeExports.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})});if(f)return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>h(!1),children:" Back to Meetings"})}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Create New Meeting"}),jsxRuntimeExports.jsx(CardDescription,{children:"Schedule a new meeting for your team"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("form",{onSubmit:L,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meeting Title *"}),jsxRuntimeExports.jsx(Input,{type:"text",value:v.title,onChange:e=>E(t=>({...t,title:e.target.value})),placeholder:"Core Team Meeting - Q3 Planning",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date *"}),jsxRuntimeExports.jsx(Input,{type:"date",value:v.date,onChange:e=>E(t=>({...t,date:e.target.value})),required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time"}),jsxRuntimeExports.jsx(Input,{type:"time",value:v.time,onChange:e=>E(t=>({...t,time:e.target.value})),placeholder:"10:00 AM"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meeting Type"}),jsxRuntimeExports.jsxs(Select,{value:v.type,onValueChange:e=>E(t=>({...t,type:e})),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"core_team",children:"Core Team"}),jsxRuntimeExports.jsx(SelectItem,{value:"board",children:"Board Meeting"}),jsxRuntimeExports.jsx(SelectItem,{value:"committee",children:"Committee"}),jsxRuntimeExports.jsx(SelectItem,{value:"special",children:"Special Meeting"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Location"}),jsxRuntimeExports.jsx(Input,{type:"text",value:v.location,onChange:e=>E(t=>({...t,location:e.target.value})),placeholder:"Conference Room A or Virtual Meeting Link"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{value:v.description,onChange:e=>E(t=>({...t,description:e.target.value})),placeholder:"Meeting agenda and topics to be discussed...",rows:4})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"submit",disabled:A.isPending,children:A.isPending?"Creating...":"Create Meeting"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]})})]})]});if(g)return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>y(!1),children:" Back to Meetings"})}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Edit Meeting"}),jsxRuntimeExports.jsx(CardDescription,{children:"Update meeting details and information"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("form",{onSubmit:F,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Meeting Title"}),jsxRuntimeExports.jsx(Input,{value:R.title,onChange:e=>S({...R,title:e.target.value}),placeholder:"e.g., Core Team Meeting",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),jsxRuntimeExports.jsx(Input,{type:"date",value:R.date,onChange:e=>S({...R,date:e.target.value}),required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Time"}),jsxRuntimeExports.jsx(Input,{type:"time",value:R.time,onChange:e=>S({...R,time:e.target.value}),placeholder:"Optional"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Meeting Type"}),jsxRuntimeExports.jsxs(Select,{value:R.type,onValueChange:e=>S({...R,type:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"core_team",children:"Core Team"}),jsxRuntimeExports.jsx(SelectItem,{value:"board",children:"Board Meeting"}),jsxRuntimeExports.jsx(SelectItem,{value:"committee",children:"Committee"}),jsxRuntimeExports.jsx(SelectItem,{value:"special",children:"Special Meeting"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),jsxRuntimeExports.jsx(Input,{value:R.location,onChange:e=>S({...R,location:e.target.value}),placeholder:"e.g., Conference Room A or Zoom"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{value:R.description,onChange:e=>S({...R,description:e.target.value}),placeholder:"Optional meeting agenda or notes",rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"submit",disabled:k.isPending,children:k.isPending?"Updating...":"Update Meeting"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"})]})]})})]})]});if(i){const e=i.summary.startsWith("Google Docs link:");i.summary.startsWith("Uploaded file:")||i.summary.startsWith("Document uploaded:");i.summary.includes("content extraction failed"),i.summary&&i.summary.includes("PDF content extraction will be available");return i.summary&&i.summary.trim(),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>o(null),children:" Back to Meetings"}),jsxRuntimeExports.jsxs(Button,{variant:"destructive",onClick:()=>P.mutate(i.id),disabled:P.isPending,children:[jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4 mr-2"}),P.isPending?"Deleting...":"Delete Minutes"]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2 text-base font-medium",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5"}),i.title]}),jsxRuntimeExports.jsxs(CardDescription,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{children:["Meeting Date: ",new Date(i.date).toLocaleDateString()]}),i.fileName&&jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>M(i.id,i.fileName),className:"ml-4",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),"Download File"]})]})]}),jsxRuntimeExports.jsx(CardContent$1,{className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-base mb-4 text-gray-900 dark:text-gray-100",children:"Meeting Minutes Document"}),e?jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Link,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Google Docs Document"})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",asChild:!0,children:jsxRuntimeExports.jsxs("a",{href:i.summary.split("Google Docs link:")[1],target:"_blank",rel:"noopener noreferrer",children:[jsxRuntimeExports.jsx(Link,{className:"w-4 h-4 mr-2"}),"Open in Google Docs"]})})]}),jsxRuntimeExports.jsx("div",{style:{height:"600px"},children:jsxRuntimeExports.jsx("iframe",{src:(()=>{var e;try{const t=null==(e=i.summary.split("Google Docs link:")[1])?void 0:e.trim();if(!t)return"about:blank";const r=t.match(/\/d\/([a-zA-Z0-9-_]+)/),n=null==r?void 0:r[1];return n?`https://docs.google.com/document/d/${n}/preview`:"about:blank"}catch{return"about:blank"}})(),className:"w-full h-full border-0",title:"Google Docs Preview"})})]}):i.fileName?jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:i.fileName}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 uppercase",children:i.fileName.split(".").pop()})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>M(i.id,i.fileName),children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),"Download File"]})]}),jsxRuntimeExports.jsx("div",{style:{height:"600px"},children:i.fileName.toLowerCase().endsWith(".pdf")?jsxRuntimeExports.jsx("iframe",{src:`/api/meeting-minutes/${i.id}/file`,className:"w-full h-full border-0",title:i.fileName}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[jsxRuntimeExports.jsx(FileText,{className:"w-16 h-16 text-gray-400 mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-gray-100 mb-2",children:i.fileName}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Click the download button above to view this document."}),jsxRuntimeExports.jsxs(Button,{onClick:()=>M(i.id,i.fileName),className:"inline-flex items-center",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),"Download Document"]})]})})]}):jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:jsxRuntimeExports.jsx("div",{className:"prose max-w-none dark:prose-invert",children:jsxRuntimeExports.jsx("div",{className:"whitespace-pre-wrap text-gray-900 dark:text-gray-100 leading-relaxed",children:i.summary})})})]})})]})]})}if(n&&t){const e=$.find(e=>e.id===t);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{s(!1),r(null)},children:" Back to Meetings"})}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Upload Meeting Minutes"}),jsxRuntimeExports.jsxs(CardDescription,{children:["Upload minutes for: ",null==e?void 0:e.title," - ",e&&B(e)]})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("form",{onSubmit:I,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-3",children:"Upload Type"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",value:"file",checked:"file"===m,onChange:e=>x(e.target.value),className:"mr-2"}),"Upload File"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",value:"google_docs",checked:"google_docs"===m,onChange:e=>x(e.target.value),className:"mr-2"}),"Google Docs Link"]})]})]}),"file"===m?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Document (.pdf, .doc, .docx)"}),jsxRuntimeExports.jsx(Input,{type:"file",accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:D,required:!0}),c&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",c.name," (",(c.size/1024/1024).toFixed(2)," MB)"]})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Google Docs URL"}),jsxRuntimeExports.jsx(Input,{type:"url",value:d,onChange:e=>p(e.target.value),placeholder:"https://docs.google.com/document/d/...",required:!0}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Make sure the document is shared with appropriate permissions"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{type:"submit",disabled:O.isPending,children:[jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4 mr-2"}),O.isPending?"Uploading...":"Upload Minutes"]}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>{s(!1),r(null)},children:"Cancel"})]})]})})]})]})}return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[!e&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=window.dashboardSetActiveSection)?void 0:e.call(window,"meetings")},className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back to Meetings Hub"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[jsxRuntimeExports.jsx("span",{children:"Meetings"}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Minutes"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Meeting Minutes"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload and view minutes for scheduled meetings"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>h(!0),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Create Meeting"]})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-4",children:$.map(e=>{const t=(e=>{const t=$.find(t=>t.id===e);return t?_.find(e=>e.title===t.title&&e.date===t.date):null})(e.id);return jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2 text-base font-medium",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5"}),e.title]}),jsxRuntimeExports.jsxs(CardDescription,{className:"flex items-center gap-4 mt-2",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),B(e)]}),(n=e.type,"core_team"===n?jsxRuntimeExports.jsx(Badge,{className:"bg-[#FBAD3F] text-white hover:bg-[#e6991c]",children:"Core Team"}):jsxRuntimeExports.jsx(Badge,{variant:"secondary",children:n.replace("_"," ")})),jsxRuntimeExports.jsx(Badge,{variant:"completed"===e.status?"default":"outline",children:e.status})]}),e.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:e.description}),e.location&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:["Location: ",e.location]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 ml-4",children:[t?jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>o(t),children:[jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4 mr-1"}),"View Minutes"]}):jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>(e=>{r(e.id),s(!0),u(null),p(""),x("file")})(e),children:[jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4 mr-1"}),"Upload Minutes"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>(e=>{b(e.id),S({title:e.title,date:e.date,time:e.time||"",type:e.type,location:e.location||"",description:e.description||""}),y(!0)})(e),children:jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this meeting? This action cannot be undone.")&&T.mutate(t));var t},className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})]})})},e.id);var n})}),0===$.length&&jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsxs(CardContent$1,{className:"text-center py-12",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-2",children:"No meetings scheduled"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Check back later for scheduled meetings"})]})})]})}function MeetingAgenda({isEmbedded:e=!1}){const{user:t}=useAuth(),r="committee_member"!==(null==t?void 0:t.role);useLocation();const[n,s]=reactExports.useState(!1),[i,o]=reactExports.useState(null),[a,l]=reactExports.useState({title:"",description:"",submittedBy:(null==t?void 0:t.firstName)||"User"}),{toast:c}=useToast(),{data:u=[],isLoading:d}=useQuery({queryKey:["/api/agenda-items"]}),p=useMutation({mutationFn:async e=>{const t=await fetch("/api/agenda-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,meetingId:1})});if(!t.ok)throw new Error("Failed to create agenda item");return t.json()},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/agenda-items"]}),s(!1),l({title:"",description:"",submittedBy:"Admin User"}),c({title:"Agenda item created successfully"})}}),m=useMutation({mutationFn:async({id:e,status:t})=>{const r=await fetch(`/api/agenda-items/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(!r.ok)throw new Error("Failed to update status");return r.json()},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/agenda-items"]}),c({title:"Status updated successfully"})}}),x=useMutation({mutationFn:async e=>{if(!(await fetch(`/api/agenda-items/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete agenda item")},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/agenda-items"]}),c({title:"Agenda item deleted successfully"})}}),f=(e,t)=>{m.mutate({id:e.id,status:t})},h=e=>{switch(e){case"approved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"postponed":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},g=e=>{switch(e){case"approved":return jsxRuntimeExports.jsx(CircleCheck,{className:"w-4 h-4 text-green-600"});case"rejected":return jsxRuntimeExports.jsx(Circle,{className:"w-4 h-4 text-red-600"});case"postponed":return jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4 text-orange-600"});case"pending":return jsxRuntimeExports.jsx(Circle,{className:"w-4 h-4 text-yellow-600"});default:return jsxRuntimeExports.jsx(Circle,{className:"w-4 h-4 text-gray-600"})}};if(d)return jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"animate-pulse space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),jsxRuntimeExports.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})});const y=u.filter(e=>"approved"===e.status).length,j=u.filter(e=>"pending"===e.status).length;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[!e&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=window.dashboardSetActiveSection)?void 0:e.call(window,"meetings")},className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back to Meetings Hub"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[jsxRuntimeExports.jsx("span",{children:"Meetings"}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Agenda"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 dark:bg-blue-900/20 rounded-xl",children:jsxRuntimeExports.jsx(ListTodo,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600 dark:text-blue-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Meeting Agenda"}),jsxRuntimeExports.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Plan and organize meeting topics and discussions"})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>s(!0),className:"self-start h-10 text-sm",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"New Agenda Item"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"New Item"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(ListTodo,{className:"w-8 h-8 text-blue-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:u.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Items"})]})]})})}),jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(CircleCheck,{className:"w-8 h-8 text-green-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:y}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approved"})]})]})})}),jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Clock,{className:"w-8 h-8 text-yellow-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:j}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Review"})]})]})})})]}),n&&jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Create Agenda Item"}),jsxRuntimeExports.jsx(CardDescription,{children:"Add a new topic to the meeting agenda"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("form",{onSubmit:e=>{e.preventDefault(),p.mutate(a)},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),jsxRuntimeExports.jsx(Input,{value:a.title,onChange:e=>l({...a,title:e.target.value}),placeholder:"Discussion topic or agenda item",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{value:a.description,onChange:e=>l({...a,description:e.target.value}),placeholder:"Detailed description of the agenda item",rows:3})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Submitted By"}),jsxRuntimeExports.jsx(Input,{value:a.submittedBy,onChange:e=>l({...a,submittedBy:e.target.value}),placeholder:"Your name",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"submit",disabled:p.isPending,children:p.isPending?"Creating...":"Create Item"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"})]})]})})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:u.map((e,t)=>jsxRuntimeExports.jsx(Card$1,{className:"approved"===e.status?"border-green-200 bg-green-50 dark:bg-green-900/10":"rejected"===e.status?"border-red-200 bg-red-50 dark:bg-red-900/10":"postponed"===e.status?"border-orange-200 bg-orange-50 dark:bg-orange-900/10":"",children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:g(e.status)}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),jsxRuntimeExports.jsx(Badge,{className:h(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white mb-2",children:e.title}),e.description&&jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:e.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[jsxRuntimeExports.jsxs("span",{children:["Submitted by: ",e.submittedBy]}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:new Date(e.submittedAt).toLocaleDateString()})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:["pending"===e.status&&r&&jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>f(e,"approved"),disabled:m.isPending,children:"Approve"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:()=>f(e,"rejected"),disabled:m.isPending,children:"Reject"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",className:"border-orange-300 text-orange-600 hover:bg-orange-50",onClick:()=>f(e,"postponed"),disabled:m.isPending,children:"Delay"})]}),"pending"!==e.status&&r&&jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>f(e,"pending"),disabled:m.isPending,children:"Reset to Pending"})}),r&&jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>x.mutate(e.id),disabled:x.isPending,children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})]})})},e.id))}),0===u.length&&!n&&jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsxs(CardContent$1,{className:"text-center py-12",children:[jsxRuntimeExports.jsx(ListTodo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No agenda items yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first agenda item to start planning your meeting"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>s(!0),children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Create First Item"]})]})})]})}function MeetingCalendar({isEmbedded:e=!1}){useLocation();const[t,r]=reactExports.useState(!1),[n,s]=reactExports.useState(null),[i,o]=reactExports.useState((new Date).toISOString().split("T")[0]),[a,l]=reactExports.useState({title:"",description:"",meetingDate:"",startTime:"",agenda:"",meetingLink:""}),{toast:c}=useToast(),u=e=>{if(!e)return"No date";try{const t=new Date(e);return isNaN(t.getTime())?"Invalid date":t.toLocaleDateString()}catch(t){return"Invalid date"}},d=e=>{if(!e)return null;try{const[t,r]=e.split(":"),n=parseInt(t);return`${0===n?12:n>12?n-12:n}:${r} ${n>=12?"PM":"AM"}`}catch(t){return null}},p=(e,t)=>{const r=d(e),n=d(t);return r||n?r&&n?`${r} - ${n}`:r||null:null},{data:m=[],isLoading:x}=useQuery({queryKey:["/api/meetings"]}),f=useMutation({mutationFn:async e=>{const t=await fetch("/api/meetings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create meeting");return t.json()},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/meetings"]}),r(!1),l({title:"",description:"",meetingDate:"",startTime:"",agenda:"",meetingLink:""}),c({title:"Meeting scheduled successfully"})}}),h=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"in_progress":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"completed":default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}},g=e=>{switch(e){case"virtual":return jsxRuntimeExports.jsx(Video,{className:"w-4 h-4"});case"hybrid":return jsxRuntimeExports.jsx(Phone,{className:"w-4 h-4"});default:return jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4"})}},y=(e,t)=>new Date(`${e}T${t}`)>new Date,j=m.filter(e=>y(e.meetingDate,e.startTime)&&"scheduled"===e.status),b=m.filter(e=>!y(e.meetingDate,e.startTime)||"completed"===e.status);return x?jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"animate-pulse space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),jsxRuntimeExports.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[!e&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=window.dashboardSetActiveSection)?void 0:e.call(window,"meetings")},className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back to Meetings Hub"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[jsxRuntimeExports.jsx("span",{children:"Meetings"}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Calendar"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-xl",children:jsxRuntimeExports.jsx(Calendar,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Meeting Calendar"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Schedule and manage team meetings and events"})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>r(!0),className:"self-start",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Schedule Meeting"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-8 h-8 text-blue-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:j.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Upcoming"})]})]})})}),jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Clock,{className:"w-8 h-8 text-green-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:b.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]})]})})}),jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Users,{className:"w-8 h-8 text-purple-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:m.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Meetings"})]})]})})})]}),t&&jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Schedule New Meeting"}),jsxRuntimeExports.jsx(CardDescription,{children:"Create a new meeting and send invitations"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("form",{onSubmit:e=>{e.preventDefault(),f.mutate(a)},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meeting Title"}),jsxRuntimeExports.jsx(Input,{value:a.title,onChange:e=>l({...a,title:e.target.value}),required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{value:a.description,onChange:e=>l({...a,description:e.target.value}),rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date"}),jsxRuntimeExports.jsx(Input,{type:"date",value:a.meetingDate,onChange:e=>l({...a,meetingDate:e.target.value}),required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Time (optional)"}),jsxRuntimeExports.jsx(Input,{type:"time",value:a.startTime,onChange:e=>l({...a,startTime:e.target.value})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meeting Link (optional)"}),jsxRuntimeExports.jsx(Input,{value:a.meetingLink,onChange:e=>l({...a,meetingLink:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Agenda (optional)"}),jsxRuntimeExports.jsx(Textarea,{value:a.agenda,onChange:e=>l({...a,agenda:e.target.value}),rows:4})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"submit",disabled:f.isPending,children:f.isPending?"Scheduling...":"Schedule Meeting"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"})]})]})})]}),j.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-base font-semibold mb-4",children:"Upcoming Meetings"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:j.map(e=>jsxRuntimeExports.jsx(Card$1,{className:"border-l-4 border-l-blue-500",children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-base",children:e.title}),jsxRuntimeExports.jsx(Badge,{className:h(e.status),children:e.status.replace("_"," ")})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4"}),u(e.meetingDate)]}),p(e.startTime,e.endTime)&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),p(e.startTime,e.endTime)]}),e.location&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[g(e.meetingType),e.location]})]}),e.description&&jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:e.description}),e.meetingLink&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:["Meeting Link: ",jsxRuntimeExports.jsx("a",{href:e.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",children:e.meetingLink})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",children:jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})]})})},e.id))})]}),b.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-base font-semibold mb-4",children:"Past Meetings"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:b.slice(0,5).map(e=>jsxRuntimeExports.jsx(Card$1,{className:"opacity-75",children:jsxRuntimeExports.jsx(CardContent$1,{className:"p-4",children:jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-base",children:e.title}),jsxRuntimeExports.jsx(Badge,{className:h(e.status),children:e.status.replace("_"," ")})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4"}),u(e.meetingDate)]}),p(e.startTime,e.endTime)&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),p(e.startTime,e.endTime)]}),e.location&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[g(e.meetingType),e.location]})]})]})})})},e.id))})]}),0===m.length&&!t&&jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsxs(CardContent$1,{className:"text-center py-12",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-2",children:"No meetings scheduled"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Start by scheduling your first team meeting"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>r(!0),children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Schedule First Meeting"]})]})})]})}function UnifiedMeetings(){const[e,t]=reactExports.useState("minutes");return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-xl",children:jsxRuntimeExports.jsx(ClipboardList,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Meetings"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage meeting minutes, agendas, and calendar"})]})]}),jsxRuntimeExports.jsxs(Tabs,{value:e,onValueChange:t,className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-3",children:[jsxRuntimeExports.jsx(MeetingHelpWrapper,{type:"minutes",children:jsxRuntimeExports.jsxs(TabsTrigger,{value:"minutes",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4"}),"Minutes"]})}),jsxRuntimeExports.jsx(MeetingHelpWrapper,{type:"agenda",children:jsxRuntimeExports.jsxs(TabsTrigger,{value:"agenda",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ClipboardList,{className:"w-4 h-4"}),"Agenda"]})}),jsxRuntimeExports.jsx(MeetingHelpWrapper,{type:"schedule",children:jsxRuntimeExports.jsxs(TabsTrigger,{value:"calendar",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4"}),"Calendar"]})})]}),jsxRuntimeExports.jsx(TabsContent,{value:"minutes",className:"mt-6",children:jsxRuntimeExports.jsx(MeetingMinutes,{isEmbedded:!0})}),jsxRuntimeExports.jsx(TabsContent,{value:"agenda",className:"mt-6",children:jsxRuntimeExports.jsx(MeetingAgenda,{isEmbedded:!0})}),jsxRuntimeExports.jsx(TabsContent,{value:"calendar",className:"mt-6",children:jsxRuntimeExports.jsx(MeetingCalendar,{isEmbedded:!0})})]}),jsxRuntimeExports.jsx(QuickHelp,{section:"meetings"})]})}function RoleView({user:e}){const t=roleIcons[e.role],r=roleColors[e.role];return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx(t,{className:"w-8 h-8 text-blue-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-xl",children:[e.firstName," ",e.lastName]}),jsxRuntimeExports.jsx(CardDescription,{children:e.email})]}),jsxRuntimeExports.jsx(Badge,{className:r,children:e.role.replace("_"," ").toUpperCase()})]})})}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Dashboard Access"}),jsxRuntimeExports.jsx(CardDescription,{children:"What this user would see in the main dashboard"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border "+(hasPermission(e,PERMISSIONS.VIEW_PHONE_DIRECTORY)?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 opacity-50"),children:[jsxRuntimeExports.jsx(Phone,{className:"w-6 h-6 mb-2"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Phone Directory"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:hasPermission(e,PERMISSIONS.VIEW_PHONE_DIRECTORY)?"Full Access":"No Access"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border "+(hasPermission(e,PERMISSIONS.EDIT_COLLECTIONS)?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 opacity-50"),children:[jsxRuntimeExports.jsx(SquarePen,{className:"w-6 h-6 mb-2"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Edit Data"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:hasPermission(e,PERMISSIONS.EDIT_COLLECTIONS)?"Can Edit":"Read Only"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border "+(hasPermission(e,PERMISSIONS.VIEW_REPORTS)?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 opacity-50"),children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-6 h-6 mb-2"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Reports"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:hasPermission(e,PERMISSIONS.VIEW_REPORTS)?"Can View":"No Access"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border "+(hasPermission(e,PERMISSIONS.VIEW_COLLECTIONS)?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 opacity-50"),children:[jsxRuntimeExports.jsx(FileText,{className:"w-6 h-6 mb-2"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Collections"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:hasPermission(e,PERMISSIONS.VIEW_COLLECTIONS)?"Can View":"No Access"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border "+(hasPermission(e,PERMISSIONS.MANAGE_USERS)?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 opacity-50"),children:[jsxRuntimeExports.jsx(Users,{className:"w-6 h-6 mb-2"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:"User Management"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:hasPermission(e,PERMISSIONS.MANAGE_USERS)?"Full Access":"No Access"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border "+(hasPermission(e,PERMISSIONS.TOOLKIT_ACCESS)?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 opacity-50"),children:[jsxRuntimeExports.jsx(Heart,{className:"w-6 h-6 mb-2"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Volunteer Toolkit"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:hasPermission(e,PERMISSIONS.TOOLKIT_ACCESS)?"Can Access":"No Access"})]})]})})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Communication Access"}),jsxRuntimeExports.jsx(CardDescription,{children:"Available chat channels for this role"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{perm:PERMISSIONS.GENERAL_CHAT,name:"General Chat",desc:"Open discussion for all members"},{perm:PERMISSIONS.COMMITTEE_CHAT,name:"Committee Chat",desc:"Committee members only"},{perm:PERMISSIONS.HOST_CHAT,name:"Host Chat",desc:"Host coordination channel"},{perm:PERMISSIONS.DRIVER_CHAT,name:"Driver Chat",desc:"Driver coordination channel"},{perm:PERMISSIONS.RECIPIENT_CHAT,name:"Recipient Chat",desc:"Support and updates for recipients"}].map(t=>jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-lg border "+(hasPermission(e,t.perm)?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200 opacity-50"),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:t.name}),hasPermission(e,t.perm)&&jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"text-xs",children:"Access"})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 mt-1",children:t.desc})]},t.perm))})})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Detailed Permissions"}),jsxRuntimeExports.jsx(CardDescription,{children:"Complete breakdown of what this role can access"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx("div",{className:"space-y-4",children:Object.entries(permissionCategories).map(([t,r])=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2",children:t}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:r.map(t=>{const r=hasPermission(e,t),n=permissionIcons[t];return jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded "+(r?"bg-green-50":"bg-gray-50"),children:[jsxRuntimeExports.jsx(n,{className:"w-4 h-4 "+(r?"text-green-600":"text-gray-400")}),jsxRuntimeExports.jsx("span",{className:"text-sm "+(r?"text-green-800":"text-gray-500"),children:t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),jsxRuntimeExports.jsx(Badge,{variant:r?"default":"secondary",className:"text-xs",children:r?"":""})]},t)})})]},t))})})]})]})}function RoleDemo(){const[e,t]=reactExports.useState(USER_ROLES.ADMIN);return jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Role Access Demonstration"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"View how different user roles experience the application with varying permissions and access levels."})]}),jsxRuntimeExports.jsxs(Tabs,{value:e,onValueChange:e=>t(e),className:"space-y-6",children:[jsxRuntimeExports.jsx(TabsList,{className:"grid grid-cols-4 lg:grid-cols-7 w-full",children:Object.values(USER_ROLES).map(e=>{const t=roleIcons[e];return jsxRuntimeExports.jsxs(TabsTrigger,{value:e,className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx(t,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden md:inline",children:e.replace("_"," ")})]},e)})}),Object.values(USER_ROLES).map(e=>jsxRuntimeExports.jsx(TabsContent,{value:e,children:jsxRuntimeExports.jsx(RoleView,{user:sampleUsers[e]})},e))]}),jsxRuntimeExports.jsxs(Card$1,{className:"mt-8",children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Role Comparison Summary"}),jsxRuntimeExports.jsx(CardDescription,{children:"Quick overview of what each role can do"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b",children:[jsxRuntimeExports.jsx("th",{className:"text-left p-2",children:"Role"}),jsxRuntimeExports.jsx("th",{className:"text-center p-2",children:"Phone Directory"}),jsxRuntimeExports.jsx("th",{className:"text-center p-2",children:"Edit Data"}),jsxRuntimeExports.jsx("th",{className:"text-center p-2",children:"Committee Chat"}),jsxRuntimeExports.jsx("th",{className:"text-center p-2",children:"Host/Driver Chat"}),jsxRuntimeExports.jsx("th",{className:"text-center p-2",children:"Manage Users"})]})}),jsxRuntimeExports.jsx("tbody",{children:Object.values(USER_ROLES).map(e=>{const t=sampleUsers[e],r=roleIcons[e];return jsxRuntimeExports.jsxs("tr",{className:"border-b",children:[jsxRuntimeExports.jsx("td",{className:"p-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(r,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:e.replace("_"," ")})]})}),jsxRuntimeExports.jsx("td",{className:"text-center p-2",children:hasPermission(t,PERMISSIONS.VIEW_PHONE_DIRECTORY)?"":""}),jsxRuntimeExports.jsx("td",{className:"text-center p-2",children:hasPermission(t,PERMISSIONS.EDIT_COLLECTIONS)?"":""}),jsxRuntimeExports.jsx("td",{className:"text-center p-2",children:hasPermission(t,PERMISSIONS.COMMITTEE_CHAT)?"":""}),jsxRuntimeExports.jsx("td",{className:"text-center p-2",children:hasPermission(t,PERMISSIONS.HOST_CHAT)||hasPermission(t,PERMISSIONS.DRIVER_CHAT)?"":""}),jsxRuntimeExports.jsx("td",{className:"text-center p-2",children:hasPermission(t,PERMISSIONS.MANAGE_USERS)?"":""})]},e)})})]})})})]})]})}function useConstant(e){const t=reactExports.useRef(null);return null===t.current&&(t.current=e()),t.current}function PopChild({children:e,isPresent:t}){const r=reactExports.useId(),n=reactExports.useRef(null),s=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:e,height:o,top:a,left:l}=s.current;if(t||!n.current||!e||!o)return;n.current.dataset.motionPopId=r;const c=document.createElement("style");return i&&(c.nonce=i),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`\n          [data-motion-pop-id="${r}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${o}px !important;\n            top: ${a}px !important;\n            left: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(c)}},[t]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:t,childRef:n,sizeRef:s,children:reactExports.cloneElement(e,{ref:n})})}function newChildrenMap(){return new Map}function usePresence(e=!0){const t=reactExports.useContext(PresenceContext);if(null===t)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=reactExports.useId();reactExports.useEffect(()=>{e&&s(i)},[e]);const o=reactExports.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}function onlyElements(e){const t=[];return reactExports.Children.forEach(e,e=>{reactExports.isValidElement(e)&&t.push(e)}),t}function memo(e){let t;return()=>(void 0===t&&(t=e()),t)}function createRenderStep(e){let t=new Set,r=new Set,n=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(t){i.has(t)&&(l.schedule(t),e()),t(o)}const l={schedule:(e,s=!1,o=!1)=>{const a=o&&n?t:r;return s&&i.add(e),a.has(e)||a.add(e),e},cancel:e=>{r.delete(e),i.delete(e)},process:e=>{o=e,n?s=!0:(n=!0,[t,r]=[r,t],t.forEach(a),t.clear(),n=!1,s&&(s=!1,l.process(e)))}};return l}function createRenderBatcher(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=stepsOrder.reduce((e,t)=>(e[t]=createRenderStep(i),e),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:p}=o,m=()=>{const i=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(i-s.timestamp,maxElapsed),1),s.timestamp=i,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),d.process(s),p.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(m))};return{schedule:stepsOrder.reduce((t,i)=>{const a=o[i];return t[i]=(t,i=!1,o=!1)=>(r||(r=!0,n=!0,s.isProcessing||e(m)),a.schedule(t,i,o)),t},{}),cancel:e=>{for(let t=0;t<stepsOrder.length;t++)o[stepsOrder[t]].cancel(e)},state:s,steps:o}}function loadFeatures(e){for(const t in e)featureDefinitions[t]={...featureDefinitions[t],...e[t]}}function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}function loadExternalIsValidProp(e){e&&(shouldForward=t=>t.startsWith("on")?!isValidMotionProp(t):e(t))}function filterProps(e,t,r){const n={};for(const s in e)"values"===s&&"object"==typeof e.values||(shouldForward(s)||!0===r&&isValidMotionProp(s)||!t&&!isValidMotionProp(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function createDOMMotionComponentProxy(e){if("undefined"==typeof Proxy)return e;const t=new Map;return new Proxy((...t)=>e(...t),{get:(r,n)=>"create"===n?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}function isVariantLabel(e){return"string"==typeof e||Array.isArray(e)}function isAnimationControls(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(t=>isVariantLabel(e[t]))}function isVariantNode(e){return Boolean(isControllingVariants(e)||e.variants)}function getCurrentTreeVariants(e,t){if(isControllingVariants(e)){const{initial:t,animate:r}=e;return{initial:!1===t||isVariantLabel(t)?t:void 0,animate:isVariantLabel(r)?r:void 0}}return!1!==e.inherit?t:{}}function useCreateMotionContext(e){const{initial:t,animate:r}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:t,animate:r}),[variantLabelsAsDependency(t),variantLabelsAsDependency(r)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}function isRefObject(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function useMotionRef(e,t,r){return reactExports.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&("function"==typeof r?r(n):isRefObject(r)&&(r.current=n))},[t])}function useVisualElement(e,t,r,n,s){var i,o;const{visualElement:a}=reactExports.useContext(MotionContext),l=reactExports.useContext(LazyContext),c=reactExports.useContext(PresenceContext),u=reactExports.useContext(MotionConfigContext).reducedMotion,d=reactExports.useRef(null);n=n||l.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:a,props:r,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:u}));const p=d.current,m=reactExports.useContext(SwitchLayoutGroupContext);!p||p.projection||!s||"html"!==p.type&&"svg"!==p.type||createProjectionNode$1(d.current,r,s,m);const x=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{p&&x.current&&p.update(r,c)});const f=r[optimizedAppearDataAttribute],h=reactExports.useRef(Boolean(f)&&!(null===(i=window.MotionHandoffIsComplete)||void 0===i?void 0:i.call(window,f))&&(null===(o=window.MotionHasOptimisedAnimation)||void 0===o?void 0:o.call(window,f)));return useIsomorphicLayoutEffect$2(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),microtask.render(p.render),h.current&&p.animationState&&p.animationState.animateChanges())}),reactExports.useEffect(()=>{p&&(!h.current&&p.animationState&&p.animationState.animateChanges(),h.current&&(queueMicrotask(()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,f)}),h.current=!1))}),p}function createProjectionNode$1(e,t,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:Boolean(o)||a&&isRefObject(a),visualElement:e,animationType:"string"==typeof i?i:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}function getClosestProjectingNode(e){if(e)return!1!==e.options.allowProjection?e.projection:getClosestProjectingNode(e.parent)}function createRendererMotionComponent({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){var i,o;function a(e,i){let o;const a={...reactExports.useContext(MotionConfigContext),...e,layoutId:useLayoutId(e)},{isStatic:l}=a,c=useCreateMotionContext(e),u=n(e,l);if(!l&&isBrowser){useStrictMode();const e=getProjectionFunctionality(a);o=e.MeasureLayout,c.visualElement=useVisualElement(s,u,a,t,e.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:c,children:[o&&c.visualElement?jsxRuntimeExports.jsx(o,{visualElement:c.visualElement,...a}):null,r(s,e,useMotionRef(u,c.visualElement,i),u,l,c.visualElement)]})}e&&loadFeatures(e),a.displayName=`motion.${"string"==typeof s?s:`create(${null!==(o=null!==(i=s.displayName)&&void 0!==i?i:s.name)&&void 0!==o?o:""})`}`;const l=reactExports.forwardRef(a);return l[motionComponentSymbol]=s,l}function useLayoutId({layoutId:e}){const t=reactExports.useContext(LayoutGroupContext).id;return t&&void 0!==e?t+"-"+e:e}function useStrictMode(e,t){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const{drag:t,layout:r}=featureDefinitions;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==r?void 0:r.isEnabled(e))?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function isSVGComponent(e){return"string"==typeof e&&!e.includes("-")&&!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function getValueState(e){const t=[{},{}];return null==e||e.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function resolveVariantFromProps(e,t,r,n){if("function"==typeof t){const[s,i]=getValueState(n);t=t(void 0!==r?r:e.custom,s,i)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[s,i]=getValueState(n);t=t(void 0!==r?r:e.custom,s,i)}return t}function resolveMotionValue(e){const t=isMotionValue(e)?e.get():e;return isCustomValue(t)?t.toValue():t}function makeState$2({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,s,i){const o={latestValues:makeLatestValues(n,s,i,e),renderState:t()};return r&&(o.onMount=e=>r({props:n,current:e,...o}),o.onUpdate=e=>r(e)),o}function makeLatestValues(e,t,r,n){const s={},i=n(e,{});for(const p in i)s[p]=resolveMotionValue(i[p]);let{initial:o,animate:a}=e;const l=isControllingVariants(e),c=isVariantNode(e);t&&c&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let u=!!r&&!1===r.initial;u=u||!1===o;const d=u?a:o;if(d&&"boolean"!=typeof d&&!isAnimationControls(d)){const t=Array.isArray(d)?d:[d];for(let r=0;r<t.length;r++){const n=resolveVariantFromProps(e,t[r]);if(n){const{transitionEnd:e,transition:t,...r}=n;for(const n in r){let e=r[n];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(s[n]=e)}for(const n in e)s[n]=e[n]}}}return s}function buildTransform(e,t,r){let n="",s=!0;for(let i=0;i<numTransforms;i++){const o=transformPropOrder[i],a=e[o];if(void 0===a)continue;let l=!0;if(l="number"==typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!l||r){const e=getValueAsType(a,numberValueTypes[o]);if(!l){s=!1;n+=`${translateAlias[o]||o}(${e}) `}r&&(t[o]=e)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function buildHTMLStyles(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const e=t[l];if(transformProps.has(l))o=!0;else if(isCSSVariableName(l))s[l]=e;else{const t=getValueAsType(e,numberValueTypes[l]);l.startsWith("origin")?(a=!0,i[l]=t):n[l]=t}}if(t.transform||(o||r?n.transform=buildTransform(t,e.transform,r):n.transform&&(n.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:r=0}=i;n.transformOrigin=`${e} ${t} ${r}`}}function buildSVGPath(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?dashKeys:camelKeys;e[i.offset]=px.transform(-n);const o=px.transform(t),a=px.transform(r);e[i.array]=`${o} ${a}`}function calcOrigin$1(e,t,r){return"string"==typeof e?e:px.transform(t+r*e)}function calcSVGTransformOrigin(e,t,r){return`${calcOrigin$1(t,e.x,e.width)} ${calcOrigin$1(r,e.y,e.height)}`}function buildSVGAttrs(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(buildHTMLStyles(e,c,d),u)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:m,dimensions:x}=e;p.transform&&(x&&(m.transform=p.transform),delete p.transform),x&&(void 0!==s||void 0!==i||m.transform)&&(m.transformOrigin=calcSVGTransformOrigin(x,void 0!==s?s:.5,void 0!==i?i:.5)),void 0!==t&&(p.x=t),void 0!==r&&(p.y=r),void 0!==n&&(p.scale=n),void 0!==o&&buildSVGPath(p,o,a,l,!1)}function renderHTML(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}function renderSVG(e,t,r,n){renderHTML(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(camelCaseAttributes.has(s)?s:camelToDash(s),t.attrs[s])}function addScaleCorrector(e){Object.assign(scaleCorrectors,e)}function isForcedMotionValue(e,{layout:t,layoutId:r}){return transformProps.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!scaleCorrectors[e]||"opacity"===e)}function scrapeMotionValuesFromProps$1(e,t,r){var n;const{style:s}=e,i={};for(const o in s)(isMotionValue(s[o])||t.style&&isMotionValue(t.style[o])||isForcedMotionValue(o,e)||void 0!==(null===(n=null==r?void 0:r.getValue(o))||void 0===n?void 0:n.liveStyle))&&(i[o]=s[o]);return i}function scrapeMotionValuesFromProps(e,t,r){const n=scrapeMotionValuesFromProps$1(e,t,r);for(const s in e)if(isMotionValue(e[s])||isMotionValue(t[s])){n[-1!==transformPropOrder.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return n}function updateSVGDimensions(e,t){try{t.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(e3){t.dimensions={x:0,y:0,width:0,height:0}}}function copyRawValuesOnly(e,t,r){for(const n in t)isMotionValue(t[n])||isForcedMotionValue(n,r)||(e[n]=t[n])}function useInitialMotionValues({transformTemplate:e},t){return reactExports.useMemo(()=>{const r=createHtmlRenderState();return buildHTMLStyles(r,t,e),Object.assign({},r.vars,r.style)},[t])}function useStyle(e,t){const r={};return copyRawValuesOnly(r,e.style||{},e),Object.assign(r,useInitialMotionValues(e,t)),r}function useHTMLProps(e,t){const r={},n=useStyle(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}function useSVGProps(e,t,r,n){const s=reactExports.useMemo(()=>{const r=createSvgRenderState();return buildSVGAttrs(r,t,isSVGTag(n),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const t={};copyRawValuesOnly(t,e.style,e),s.style={...t,...s.style}}return s}function createUseRender(e=!1){return(t,r,n,{latestValues:s},i)=>{const o=(isSVGComponent(t)?useSVGProps:useHTMLProps)(r,s,i,t),a=filterProps(r,"string"==typeof t,e),l=t!==reactExports.Fragment?{...a,...o,ref:n}:{},{children:c}=r,u=reactExports.useMemo(()=>isMotionValue(c)?c.get():c,[c]);return reactExports.createElement(t,{...l,children:u})}}function createMotionComponentFactory(e,t){return function(r,{forwardMotionProps:n}={forwardMotionProps:!1}){return createRendererMotionComponent({...isSVGComponent(r)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:e,useRender:createUseRender(n),createVisualElement:t,Component:r})}}function shallowCompare(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function resolveVariant(e,t,r){const n=e.getProps();return resolveVariantFromProps(n,t,void 0!==r?r:n.custom,e)}function getValueTransition(e,t){return e?e[t]||e.default||e:void 0}function calcGeneratorDuration(e){let t=0;let r=e.next(t);for(;!r.done&&t<maxGeneratorDuration;)t+=50,r=e.next(t);return t>=maxGeneratorDuration?1/0:t}function isGenerator(e){return"function"==typeof e}function attachTimeline(e,t){e.timeline=t,e.onfinish=null}function memoSupports(e,t){const r=memo(e);return()=>{var e;return null!==(e=supportsFlags[t])&&void 0!==e?e:r()}}function isWaapiSupportedEasing(e){return Boolean("function"==typeof e&&supportsLinearEasing()||!e||"string"==typeof e&&(e in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(e)||Array.isArray(e)&&e.every(isWaapiSupportedEasing))}function mapEasingToNativeEasing(e,t){return e?"function"==typeof e&&supportsLinearEasing()?generateLinearEasing(e,t):isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(e=>mapEasingToNativeEasing(e,t)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]:void 0}function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(e,t,r){if(e instanceof Element)return[e];if("string"==typeof e){const t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}function setupGesture(e,t){const r=resolveElements(e),n=new AbortController;return[r,{passive:!0,...t,signal:n.signal},()=>n.abort()]}function filterEvents$1(e){return t=>{"touch"===t.pointerType||isDragActive()||e(t)}}function hover(e,t,r={}){const[n,s,i]=setupGesture(e,r),o=filterEvents$1(e=>{const{target:r}=e,n=t(e);if("function"!=typeof n||!r)return;const i=filterEvents$1(e=>{n(e),r.removeEventListener("pointerleave",i)});r.addEventListener("pointerleave",i,s)});return n.forEach(e=>{e.addEventListener("pointerenter",o,s)}),i}function isElementKeyboardAccessible(e){return focusableElements.has(e.tagName)||-1!==e.tabIndex}function filterEvents(e){return t=>{"Enter"===t.key&&e(t)}}function firePointerEvent(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,t,r={}){const[n,s,i]=setupGesture(e,r),o=e=>{const n=e.currentTarget;if(!isValidPressEvent(e)||isPressing.has(n))return;isPressing.add(n);const i=t(e),o=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),isValidPressEvent(e)&&isPressing.has(n)&&(isPressing.delete(n),"function"==typeof i&&i(e,{success:t}))},a=e=>{o(e,r.useGlobalTarget||isNodeOrChild(n,e.target))},l=e=>{o(e,!1)};window.addEventListener("pointerup",a,s),window.addEventListener("pointercancel",l,s)};return n.forEach(e=>{isElementKeyboardAccessible(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0);(r.useGlobalTarget?window:e).addEventListener("pointerdown",o,s),e.addEventListener("focus",e=>enableKeyboardPress(e,s),s)}),i}function setDragLock(e){return"x"===e||"y"===e?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function clearTime(){now$2=void 0}function addUniqueItem(e,t){-1===e.indexOf(t)&&e.push(t)}function removeItem(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}function velocityPerSecond(e,t){return t?e*(1e3/t):0}function motionValue(e,t){return new MotionValue(e,t)}function setMotionValue(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,motionValue(r))}function setTarget(e,t){const r=resolveVariant(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){setMotionValue(e,o,resolveFinalValueInKeyframes(i[o]))}}function isWillChangeMotionValue(e){return Boolean(isMotionValue(e)&&e.add)}function addValueToWillChange(e,t){const r=e.getValue("willChange");if(isWillChangeMotionValue(r))return r.add(t)}function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}function binarySubdivide(e,t,r,n,s){let i,o,a=0;do{o=t+(r-t)/2,i=calcBezier(o,n,s)-e,i>0?r=o:t=o}while(Math.abs(i)>subdivisionPrecision&&++a<subdivisionMaxIterations);return o}function cubicBezier(e,t,r,n){if(e===t&&r===n)return noop$9;return s=>0===s||1===s?s:calcBezier(binarySubdivide(s,0,1,e,r),t,n)}function isNone(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||isZeroValueString(e))}function isNullish(e){return null==e}function parseHex(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}function test$1(e){var t,r;return isNaN(e)&&"string"==typeof e&&((null===(t=e.match(floatRegex))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(colorRegex))||void 0===r?void 0:r.length)||0)>0}function analyseComplexValue(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const o=t.replace(complexRegex,e=>(color$1.test(e)?(n.color.push(i),s.push(COLOR_TOKEN),r.push(color$1.parse(e))):e.startsWith(VAR_FUNCTION_TOKEN)?(n.var.push(i),s.push(VAR_TOKEN),r.push(e)):(n.number.push(i),s.push(NUMBER_TOKEN),r.push(parseFloat(e))),++i,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:r,split:o,indexes:n,types:s}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:t,types:r}=analyseComplexValue(e),n=t.length;return e=>{let s="";for(let i=0;i<n;i++)if(s+=t[i],void 0!==e[i]){const t=r[i];s+=t===NUMBER_TOKEN?sanitize(e[i]):t===COLOR_TOKEN?color$1.transform(e[i]):e[i]}return s}}function getAnimatableNone$1(e){const t=parseComplexValue(e);return createTransformer(e)(t.map(convertNumbersToZero))}function applyDefaultFilter(e){const[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=r.match(floatRegex)||[];if(!n)return e;const s=r.replace(n,"");let i=maxDefaults.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}function getAnimatableNone(e,t){let r=getDefaultValueType(e);return r!==filter$1&&(r=complex),r.getAnimatableNone?r.getAnimatableNone(t):void 0}function makeNoneKeyframesAnimatable(e,t,r){let n,s=0;for(;s<e.length&&!n;){const t=e[s];"string"==typeof t&&!invalidTemplates.has(t)&&analyseComplexValue(t).values.length&&(n=e[s]),s++}if(n&&r)for(const i of t)e[i]=getAnimatableNone(r,n)}function removeNonTranslationalTransform(e){const t=[];return nonTranslationalTransformKeys.forEach(r=>{const n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{const t=removeNonTranslationalTransform(e);t.length&&(r.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=r.get(e);t&&t.forEach(([t,r])=>{var n;null===(n=e.getValue(t))||void 0===n||n.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}function parseCSSVariable(e){const t=splitCSSVariableRegex.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${null!=r?r:n}`,s]}function getVariableValue(e,t,r=1){const[n,s]=parseCSSVariable(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const e=i.trim();return isNumericalString(e)?parseFloat(e):e}return isCSSVariableToken(s)?getVariableValue(s,t,r+1):s}function hasKeyframesChanged(e){const t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function canAnimate(e,t,r,n){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const i=e[e.length-1],o=isAnimatable(s,t),a=isAnimatable(i,t);return!(!o||!a)&&(hasKeyframesChanged(e)||("spring"===r||isGenerator(r))&&n)}function getFinalKeyframe(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(isNotNull),i=t&&"loop"!==r&&t%2==1?0:s.length-1;return i&&void 0!==n?n:s[i]}function hueToRgb(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function hslaToRgba({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let s=0,i=0,o=0;if(t/=100){const n=r<.5?r*(1+t):r+t-r*t,a=2*r-n;s=hueToRgb(a,n,e+1/3),i=hueToRgb(a,n,e),o=hueToRgb(a,n,e-1/3)}else s=i=o=r;return{red:Math.round(255*s),green:Math.round(255*i),blue:Math.round(255*o),alpha:n}}function mixImmediate(e,t){return r=>r>0?t:e}function asRGBA(e){const t=getColorType(e);if(!Boolean(t))return!1;let r=t.parse(e);return t===hsla&&(r=hslaToRgba(r)),r}function mixVisibility(e,t){return invisibleValues.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function mixNumber(e,t){return r=>mixNumber$1(e,t,r)}function getMixer(e){return"number"==typeof e?mixNumber:"string"==typeof e?isCSSVariableToken(e)?mixImmediate:color$1.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:"object"==typeof e?color$1.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,t){const r=[...e],n=r.length,s=e.map((e,r)=>getMixer(e)(e,t[r]));return e=>{for(let t=0;t<n;t++)r[t]=s[t](e);return r}}function mixObject(e,t){const r={...e,...t},n={};for(const s in r)void 0!==e[s]&&void 0!==t[s]&&(n[s]=getMixer(e[s])(e[s],t[s]));return e=>{for(const t in n)r[t]=n[t](e);return r}}function matchOrder(e,t){var r;const n=[],s={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],a=e.indexes[o][s[o]],l=null!==(r=e.values[a])&&void 0!==r?r:0;n[i]=l,s[o]++}return n}function mix(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return mixNumber$1(e,t,r);return getMixer(e)(e,t)}function calcGeneratorVelocity(e,t,r){const n=Math.max(t-velocitySampleDuration,0);return velocityPerSecond(r-e(n),t-n)}function findSpring({duration:e=springDefaults.duration,bounce:t=springDefaults.bounce,velocity:r=springDefaults.velocity,mass:n=springDefaults.mass}){let s,i,o=1-t;o=clamp(springDefaults.minDamping,springDefaults.maxDamping,o),e=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),o<1?(s=t=>{const n=t*o,s=n*e,i=n-r,a=calcAngularFreq(t,o),l=Math.exp(-s);return safeMin-i/a*l},i=t=>{const n=t*o*e,i=n*r+r,a=Math.pow(o,2)*Math.pow(t,2)*e,l=Math.exp(-n),c=calcAngularFreq(Math.pow(t,2),o);return(-s(t)+safeMin>0?-1:1)*((i-a)*l)/c}):(s=t=>Math.exp(-t*e)*((t-r)*e+1)-safeMin,i=t=>Math.exp(-t*e)*(e*e*(r-t)));const a=approximateRoot(s,i,5/e);if(e=secondsToMilliseconds(e),isNaN(a))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const t=Math.pow(a,2)*n;return{stiffness:t,damping:2*o*Math.sqrt(n*t),duration:e}}}function approximateRoot(e,t,r){let n=r;for(let s=1;s<rootIterations;s++)n-=e(n)/t(n);return n}function calcAngularFreq(e,t){return e*Math.sqrt(1-t*t)}function isSpringType(e,t){return t.some(t=>void 0!==e[t])}function getSpringOptions(e){let t={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(1.2*r),s=n*n,i=2*clamp(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:springDefaults.mass,stiffness:s,damping:i}}else{const r=findSpring(e);t={...t,...r,mass:springDefaults.mass},t.isResolvedFromDuration=!0}return t}function spring(e=springDefaults.visualDuration,t=springDefaults.bounce){const r="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:p,isResolvedFromDuration:m}=getSpringOptions({...r,velocity:-millisecondsToSeconds(r.velocity||0)}),x=p||0,f=c/(2*Math.sqrt(l*u)),h=o-i,g=millisecondsToSeconds(Math.sqrt(l/u)),y=Math.abs(h)<5;let j;if(n||(n=y?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),s||(s=y?springDefaults.restDelta.granular:springDefaults.restDelta.default),f<1){const e=calcAngularFreq(g,f);j=t=>{const r=Math.exp(-f*g*t);return o-r*((x+f*g*h)/e*Math.sin(e*t)+h*Math.cos(e*t))}}else if(1===f)j=e=>o-Math.exp(-g*e)*(h+(x+g*h)*e);else{const e=g*Math.sqrt(f*f-1);j=t=>{const r=Math.exp(-f*g*t),n=Math.min(e*t,300);return o-r*((x+f*g*h)*Math.sinh(n)+e*h*Math.cosh(n))/e}}const b={calculatedDuration:m&&d||null,next:e=>{const t=j(e);if(m)a.done=e>=d;else{let r=0;f<1&&(r=0===e?secondsToMilliseconds(x):calcGeneratorVelocity(j,e,t));const i=Math.abs(r)<=n,l=Math.abs(o-t)<=s;a.done=i&&l}return a.value=a.done?o:t,a},toString:()=>{const e=Math.min(calcGeneratorDuration(b),maxGeneratorDuration),t=generateLinearEasing(t=>b.next(e*t).value,e,30);return e+"ms "+t}};return b}function inertia({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],p={done:!1,value:d},m=e=>void 0===a?l:void 0===l||Math.abs(a-e)<Math.abs(l-e)?a:l;let x=r*t;const f=d+x,h=void 0===o?f:o(f);h!==f&&(x=h-d);const g=e=>-x*Math.exp(-e/n),y=e=>h+g(e),j=e=>{const t=g(e),r=y(e);p.done=Math.abs(t)<=c,p.value=p.done?h:r};let b,v;const E=e=>{var t;(t=p.value,void 0!==a&&t<a||void 0!==l&&t>l)&&(b=e,v=spring({keyframes:[p.value,m(p.value)],velocity:calcGeneratorVelocity(y,e,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return v||void 0!==b||(t=!0,j(e),E(e)),void 0!==b&&e>=b?v.next(e-b):(!t&&j(e),p)}}}function createMixers(e,t,r){const n=[],s=r||mix,i=e.length-1;for(let o=0;o<i;o++){let r=s(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||noop$9:t;r=pipe$1(e,r)}n.push(r)}return n}function interpolate(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(invariant(i===t.length),1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=createMixers(t,n,s),l=a.length,c=r=>{if(o&&r<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(r<e[n+1]);n++);const s=progress(e[n],e[n+1],r);return a[n](s)};return r?t=>c(clamp(e[0],e[i-1],t)):c}function fillOffset(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=progress(0,t,n);e.push(mixNumber$1(r,1,s))}}function defaultOffset(e){const t=[0];return fillOffset(t,e.length-1),t}function convertOffsetToTimes(e,t){return e.map(e=>e*t)}function defaultEasing(e,t){return e.map(()=>t||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=isEasingArray(n)?n.map(easingDefinitionToFunction):easingDefinitionToFunction(n),i={done:!1,value:t[0]},o=interpolate(convertOffsetToTimes(r&&r.length===t.length?r:defaultOffset(t),e),t,{ease:Array.isArray(s)?s:defaultEasing(t,s)});return{calculatedDuration:e,next:t=>(i.value=o(t),i.done=t>=e,i)}}function startWaapiAnimation(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[t]:r};l&&(c.offset=l);const u=mapEasingToNativeEasing(a,s);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:n,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===o?"alternate":"normal"})}function requiresPregeneratedKeyframes(e){return isGenerator(e.type)||"spring"===e.type||!isWaapiSupportedEasing(e.ease)}function pregenerateKeyframes(e,t){const r=new MainThreadAnimation({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const s=[];let i=0;for(;!n.done&&i<maxDuration;)n=r.sample(i),s.push(n.value),i+=sampleDelta;return{times:void 0,keyframes:s,duration:i-sampleDelta,ease:"linear"}}function isUnsupportedEase(e){return e in unsupportedEasingFunctions}function isTransitionDefined({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function shouldBlockAnimation({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}function animateTarget(e,t,{delay:r=0,transitionOverride:n,type:s}={}){var i;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;n&&(o=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const t=e.getValue(d,null!==(i=e.latestValues[d])&&void 0!==i?i:null),n=l[d];if(void 0===n||u&&shouldBlockAnimation(u,d))continue;const s={delay:r,...getValueTransition(o||{},d)};let a=!1;if(window.MotionHandoffAnimation){const t=getOptimisedAppearId(e);if(t){const e=window.MotionHandoffAnimation(t,d,frame);null!==e&&(s.startTime=e,a=!0)}}addValueToWillChange(e,d),t.start(animateMotionValue(d,t,n,e.shouldReduceMotion&&positionalKeys.has(d)?{type:!1}:s,e,a));const p=t.animation;p&&c.push(p)}return a&&Promise.all(c).then(()=>{frame.update(()=>{a&&setTarget(e,a)})}),c}function animateVariant(e,t,r={}){var n;const s=resolveVariant(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const o=s?()=>Promise.all(animateTarget(e,s,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(n=0)=>{const{delayChildren:s=0,staggerChildren:o,staggerDirection:a}=i;return animateChildren(e,t,s+n,o,a,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[e,t]="beforeChildren"===l?[o,a]:[a,o];return e().then(()=>t())}return Promise.all([o(),a(r.delay)])}function animateChildren(e,t,r=0,n=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*n,l=1===s?(e=0)=>e*n:(e=0)=>a-e*n;return Array.from(e.variantChildren).sort(sortByTreeOrder).forEach((e,n)=>{e.notify("AnimationStart",t),o.push(animateVariant(e,t,{...i,delay:r+l(n)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(o)}function sortByTreeOrder(e,t){return e.sortNodePosition(t)}function animateVisualElement(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>animateVariant(e,t,r));n=Promise.all(s)}else if("string"==typeof t)n=animateVariant(e,t,r);else{const s="function"==typeof t?resolveVariant(e,t,r.custom):t;n=Promise.all(animateTarget(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&getVariantContext(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let r=0;r<numVariantProps;r++){const n=variantProps[r],s=e.props[n];(isVariantLabel(s)||!1===s)&&(t[n]=s)}return t}function animateList(e){return t=>Promise.all(t.map(({animation:t,options:r})=>animateVisualElement(e,t,r)))}function createAnimationState(e){let t=animateList(e),r=createState$1(),n=!0;const s=t=>(r,n)=>{var s;const i=resolveVariant(e,n,"exit"===t?null===(s=e.presenceContext)||void 0===s?void 0:s.custom:void 0);if(i){const{transition:e,transitionEnd:t,...n}=i;r={...r,...n,...t}}return r};function i(i){const{props:o}=e,a=getVariantContext(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<numAnimationTypes;t++){const p=reversePriorityOrder[t],m=r[p],x=void 0!==o[p]?o[p]:a[p],f=isVariantLabel(x),h=p===i?m.isActive:null;!1===h&&(d=t);let g=x===a[p]&&x!==o[p]&&f;if(g&&n&&e.manuallyAnimateOnMount&&(g=!1),m.protectedKeys={...u},!m.isActive&&null===h||!x&&!m.prevProp||isAnimationControls(x)||"boolean"==typeof x)continue;const y=checkVariantsDidChange(m.prevProp,x);let j=y||p===i&&m.isActive&&!g&&f||t>d&&f,b=!1;const v=Array.isArray(x)?x:[x];let E=v.reduce(s(p),{});!1===h&&(E={});const{prevResolvedValues:R={}}=m,S={...R,...E},w=t=>{j=!0,c.has(t)&&(b=!0,c.delete(t)),m.needsAnimating[t]=!0;const r=e.getValue(t);r&&(r.liveStyle=!1)};for(const e in S){const t=E[e],r=R[e];if(u.hasOwnProperty(e))continue;let n=!1;n=isKeyframesTarget(t)&&isKeyframesTarget(r)?!shallowCompare(t,r):t!==r,n?null!=t?w(e):c.add(e):void 0!==t&&c.has(e)?w(e):m.protectedKeys[e]=!0}m.prevProp=x,m.prevResolvedValues=E,m.isActive&&(u={...u,...E}),n&&e.blockInitialAnimation&&(j=!1);j&&(!(g&&y)||b)&&l.push(...v.map(e=>({animation:e,options:{type:p}})))}if(c.size){const t={};c.forEach(r=>{const n=e.getBaseTarget(r),s=e.getValue(r);s&&(s.liveStyle=!0),t[r]=null!=n?n:null}),l.push({animation:t})}let p=Boolean(l.length);return!n||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(p=!1),n=!1,p?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,n){var s;if(r[t].isActive===n)return Promise.resolve();null===(s=e.variantChildren)||void 0===s||s.forEach(e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,n)}),r[t].isActive=n;const o=i(t);for(const e in r)r[e].protectedKeys={};return o},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=createState$1(),n=!0}}}function checkVariantsDidChange(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!shallowCompare(t,e)}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState$1(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}function addDomEvent(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}function addPointerEvent(e,t,r,n){return addDomEvent(e,t,addPointerInfo(r),n)}function distance2D(e,t){const r=distance(e.x,t.x),n=distance(e.y,t.y);return Math.sqrt(r**2+n**2)}function transformPoint(e,t){return t?{point:t(e.point)}:e}function subtractPoint(e,t){return{x:e.x-t.x,y:e.y-t.y}}function getPanInfo({point:e},t){return{point:e,delta:subtractPoint(e,lastDevicePoint(t)),offset:subtractPoint(e,startDevicePoint(t)),velocity:getVelocity(t,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=lastDevicePoint(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>secondsToMilliseconds(t)));)r--;if(!n)return{x:0,y:0};const i=millisecondsToSeconds(s.timestamp-n.timestamp);if(0===i)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function calcLength(e){return e.max-e.min}function isNear(e,t,r){return Math.abs(e-t)<=r}function calcAxisDelta(e,t,r,n=.5){e.origin=n,e.originPoint=mixNumber$1(t.min,t.max,e.origin),e.scale=calcLength(r)/calcLength(t),e.translate=mixNumber$1(r.min,r.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,t,r,n){calcAxisDelta(e.x,t.x,r.x,n?n.originX:void 0),calcAxisDelta(e.y,t.y,r.y,n?n.originY:void 0)}function calcRelativeAxis(e,t,r){e.min=r.min+t.min,e.max=e.min+calcLength(t)}function calcRelativeBox(e,t,r){calcRelativeAxis(e.x,t.x,r.x),calcRelativeAxis(e.y,t.y,r.y)}function calcRelativeAxisPosition(e,t,r){e.min=t.min-r.min,e.max=e.min+calcLength(t)}function calcRelativePosition(e,t,r){calcRelativeAxisPosition(e.x,t.x,r.x),calcRelativeAxisPosition(e.y,t.y,r.y)}function applyConstraints(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?mixNumber$1(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?mixNumber$1(r,e,n.max):Math.min(e,r)),e}function calcRelativeAxisConstraints(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:t,left:r,bottom:n,right:s}){return{x:calcRelativeAxisConstraints(e.x,r,s),y:calcRelativeAxisConstraints(e.y,t,n)}}function calcViewportAxisConstraints(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function calcViewportConstraints(e,t){return{x:calcViewportAxisConstraints(e.x,t.x),y:calcViewportAxisConstraints(e.y,t.y)}}function calcOrigin(e,t){let r=.5;const n=calcLength(e),s=calcLength(t);return s>n?r=progress(t.min,t.max-n,e.min):n>s&&(r=progress(e.min,e.max-s,t.min)),clamp(0,1,r)}function rebaseAxisConstraints(e,t){const r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}function resolveDragElastic(e=defaultElastic){return!1===e?e=0:!0===e&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,t,r){return{min:resolvePointElastic(e,t),max:resolvePointElastic(e,r)}}function resolvePointElastic(e,t){return"number"==typeof e?e:e[t]||0}function eachAxis(e){return[e("x"),e("y")]}function convertBoundingBoxToBox({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function convertBoxToBoundingBox({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function transformBoxPoints(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function isIdentityScale(e){return void 0===e||1===e}function hasScale({scale:e,scaleX:t,scaleY:r}){return!isIdentityScale(e)||!isIdentityScale(t)||!isIdentityScale(r)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&"0%"!==e}function scalePoint(e,t,r){return r+t*(e-r)}function applyPointDelta(e,t,r,n,s){return void 0!==s&&(e=scalePoint(e,s,n)),scalePoint(e,r,n)+t}function applyAxisDelta(e,t=0,r=1,n,s){e.min=applyPointDelta(e.min,t,r,n,s),e.max=applyPointDelta(e.max,t,r,n,s)}function applyBoxDelta(e,{x:t,y:r}){applyAxisDelta(e.x,t.translate,t.scale,t.originPoint),applyAxisDelta(e.y,r.translate,r.scale,r.originPoint)}function applyTreeDeltas(e,t,r,n=!1){const s=r.length;if(!s)return;let i,o;t.x=t.y=1;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const{visualElement:s}=i.options;s&&s.props.style&&"contents"===s.props.style.display||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&transformBox(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,applyBoxDelta(e,o)),n&&hasTransform(i.latestValues)&&transformBox(e,i.latestValues))}t.x<TREE_SCALE_SNAP_MAX&&t.x>TREE_SCALE_SNAP_MIN&&(t.x=1),t.y<TREE_SCALE_SNAP_MAX&&t.y>TREE_SCALE_SNAP_MIN&&(t.y=1)}function translateAxis(e,t){e.min=e.min+t,e.max=e.max+t}function transformAxis(e,t,r,n,s=.5){applyAxisDelta(e,t,r,mixNumber$1(e.min,e.max,s),n)}function transformBox(e,t){transformAxis(e.x,t.x,t.scaleX,t.scale,t.originX),transformAxis(e.y,t.y,t.scaleY,t.scale,t.originY)}function measureViewportBox(e,t){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),t))}function measurePageBox(e,t,r){const n=measureViewportBox(e,r),{scroll:s}=t;return s&&(translateAxis(n.x,s.offset.x),translateAxis(n.y,s.offset.y)),n}function shouldDrag(e,t,r){return!(!0!==t&&t!==e||null!==r&&r!==e)}function getCurrentDirection(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}function pixelsToPercent(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}function MeasureLayout(e){const[t,r]=usePresence(),n=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:n,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:t,safeToRemove:r})}function animateSingleValue(e,t,r){const n=isMotionValue(e)?e:motionValue(e);return n.start(animateMotionValue("",n,t,r)),n.animation}function isSVGElement(e){return e instanceof SVGElement&&"svg"!==e.tagName}function delay(e,t){const r=time.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(cancelFrame(n),e(i-t))};return frame.read(n,!0),()=>cancelFrame(n)}function mixValues(e,t,r,n,s,i){s?(e.opacity=mixNumber$1(0,void 0!==r.opacity?r.opacity:1,easeCrossfadeIn(n)),e.opacityExit=mixNumber$1(void 0!==t.opacity?t.opacity:1,0,easeCrossfadeOut(n))):i&&(e.opacity=mixNumber$1(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,n));for(let o=0;o<numBorders;o++){const s=`border${borders[o]}Radius`;let i=getRadius(t,s),a=getRadius(r,s);if(void 0===i&&void 0===a)continue;i||(i=0),a||(a=0);0===i||0===a||isPx(i)===isPx(a)?(e[s]=Math.max(mixNumber$1(asNumber(i),asNumber(a),n),0),(percent.test(a)||percent.test(i))&&(e[s]+="%")):e[s]=a}(t.rotate||r.rotate)&&(e.rotate=mixNumber$1(t.rotate||0,r.rotate||0,n))}function getRadius(e,t){return void 0!==e[t]?e[t]:e.borderRadius}function compress(e,t,r){return n=>n<e?0:n>t?1:r(progress(e,t,n))}function copyAxisInto(e,t){e.min=t.min,e.max=t.max}function copyBoxInto(e,t){copyAxisInto(e.x,t.x),copyAxisInto(e.y,t.y)}function copyAxisDeltaInto(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function removePointDelta(e,t,r,n,s){return e=scalePoint(e-=t,1/r,n),void 0!==s&&(e=scalePoint(e,1/s,n)),e}function removeAxisDelta(e,t=0,r=1,n=.5,s,i=e,o=e){if(percent.test(t)){t=parseFloat(t);t=mixNumber$1(o.min,o.max,t/100)-o.min}if("number"!=typeof t)return;let a=mixNumber$1(i.min,i.max,n);e===i&&(a-=t),e.min=removePointDelta(e.min,t,r,a,s),e.max=removePointDelta(e.max,t,r,a,s)}function removeAxisTransforms(e,t,[r,n,s],i,o){removeAxisDelta(e,t[r],t[n],t[s],t.scale,i,o)}function removeBoxTransforms(e,t,r,n){removeAxisTransforms(e.x,t,xKeys,r?r.x:void 0,n?n.x:void 0),removeAxisTransforms(e.y,t,yKeys,r?r.y:void 0,n?n.y:void 0)}function isAxisDeltaZero(e){return 0===e.translate&&1===e.scale}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,t){return e.min===t.min&&e.max===t.max}function boxEquals(e,t){return axisEquals(e.x,t.x)&&axisEquals(e.y,t.y)}function axisEqualsRounded(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function boxEqualsRounded(e,t){return axisEqualsRounded(e.x,t.x)&&axisEqualsRounded(e.y,t.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function buildProjectionTransform(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(null==r?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),1===t.x&&1===t.y||(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:i,skewX:o,skewY:a}=r;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),s&&(n+=`rotateX(${s}deg) `),i&&(n+=`rotateY(${i}deg) `),o&&(n+=`skewX(${o}deg) `),a&&(n+=`skewY(${a}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(n+=`scale(${a}, ${l})`),n||"none"}function resetDistortingTransform(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=getOptimisedAppearId(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",frame,!(t||n))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(n)}function createProjectionNode({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(e={},r=(null==t?void 0:t())){this.id=id$1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new SubscriptionManager),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,r=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(t),this.instance=t;const{layoutId:n,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(s||n)&&(this.isLayoutDirty=!0),e){let r;const n=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,r&&r(),r=delay(n,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&i&&(n||s)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:o,onLayoutAnimationComplete:a}=i.getProps(),l=!this.targetLayout||!boxEqualsRounded(this.targetLayout,n)||r,c=!t&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={...getValueTransition(s,"layout"),onPlay:o,onComplete:a};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(clearMeasurements);this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const e=time.now();frameData.delta=clamp(0,1e3/60,e-frameData.timestamp),frameData.timestamp=e,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!isDeltaZero(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,i=n!==this.prevTransformTemplateValue;e&&(t||hasTransform(this.latestValues)||i)&&(s(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let r=this.removeElementScroll(t);return e&&(r=this.removeTransform(r)),roundBox(r),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return createBox();const r=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:e}=this.root;e&&(translateAxis(r.x,e.offset.x),translateAxis(r.y,e.offset.y))}return r}removeElementScroll(e){var t;const r=createBox();if(copyBoxInto(r,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return r;for(let n=0;n<this.path.length;n++){const t=this.path[n],{scroll:s,options:i}=t;t!==this.root&&s&&i.layoutScroll&&(s.wasRoot&&copyBoxInto(r,e),translateAxis(r.x,s.offset.x),translateAxis(r.y,s.offset.y))}return r}applyTransform(e,t=!1){const r=createBox();copyBoxInto(r,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&transformBox(r,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),hasTransform(e.latestValues)&&transformBox(r,e.latestValues)}return hasTransform(this.latestValues)&&transformBox(r,this.latestValues),r}removeTransform(e){const t=createBox();copyBoxInto(t,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!hasTransform(e.latestValues))continue;hasScale(e.latestValues)&&e.updateSnapshot();const n=createBox();copyBoxInto(n,e.measurePageBox()),removeBoxTransforms(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,n)}return hasTransform(this.latestValues)&&removeBoxTransforms(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==r;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:s,layoutId:i}=this.options;if(this.layout&&(s||i)){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,e.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!hasScale(this.parent.latestValues)&&!has2DTranslate(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(n=!1),n)return;const{layout:s,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!i)return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,r),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms=createBox());const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),calcBoxDelta(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)&&axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),isDebug&&metrics.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(e,t=!1){const r=this.snapshot,n=r?r.latestValues:{},s={...this.latestValues},i=createDelta();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o=createBox(),a=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(hasOpacityCrossfade));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const r=t/1e3;mixAxisDelta(i.x,e.x,r),mixAxisDelta(i.y,e.y,r),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,o,r),d&&boxEquals(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d=createBox()),copyBoxInto(d,this.relativeTarget)),a&&(this.animationValues=s,mixValues(s,n,this.latestValues,r,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:r,layout:n,latestValues:s}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||createBox();const t=calcLength(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;const n=calcLength(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}copyBoxInto(t,r),transformBox(t,s),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new NodeStack);this.sharedNodes.get(e).add(t);const r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){const n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;const n={};r.z&&resetDistortingTransform("z",e,n,this.animationValues);for(let s=0;s<transformAxes.length;s++)resetDistortingTransform(`rotate${transformAxes[s]}`,e,n,this.animationValues),resetDistortingTransform(`skew${transformAxes[s]}`,e,n,this.animationValues);e.render();for(const s in n)e.setStaticValue(s,n[s]),this.animationValues&&(this.animationValues[s]=n[s]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const n={visibility:""},s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=resolveMotionValue(null==e?void 0:e.pointerEvents)||"",n.transform=s?s(this.latestValues,""):"none",n;const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=resolveMotionValue(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(t.transform=s?s({},""):"none",this.hasProjected=!1),t}const o=i.animationValues||i.latestValues;this.applyTransformsToTarget(),n.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,o),s&&(n.transform=s(o,n.transform));const{x:a,y:l}=this.projectionDelta;n.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,i.animationValues?n.opacity=i===this?null!==(r=null!==(t=o.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:n.opacity=i===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const c in scaleCorrectors){if(void 0===o[c])continue;const{correct:e,applyTo:t}=scaleCorrectors[c],r="none"===n.transform?o[c]:e(o[c],i);if(t){const e=t.length;for(let s=0;s<e;s++)n[t[s]]=r}else n[c]=r}return this.options.layoutId&&(n.pointerEvents=i===this?resolveMotionValue(null==e?void 0:e.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){var t;const r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=e.layout,{animationType:s}=e.options,i=r.source!==e.layout.source;"size"===s?eachAxis(e=>{const n=i?r.measuredBox[e]:r.layoutBox[e],s=calcLength(n);n.min=t[e].min,n.max=n.min+s}):shouldAnimatePositionOnly(s,r.layoutBox,t)&&eachAxis(n=>{const s=i?r.measuredBox[n]:r.layoutBox[n],o=calcLength(t[n]);s.max=s.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+o)});const o=createDelta();calcBoxDelta(o,t,r.layoutBox);const a=createDelta();i?calcBoxDelta(a,e.applyTransform(n,!0),r.measuredBox):calcBoxDelta(a,t,r.layoutBox);const l=!isDeltaZero(o);let c=!1;if(!e.resumeFrom){const n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:s,layout:i}=n;if(s&&i){const o=createBox();calcRelativePosition(o,r.layoutBox,s.layoutBox);const a=createBox();calcRelativePosition(a,t,i.layoutBox),boxEqualsRounded(o,a)||(c=!0),n.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function propagateDirtyNodes(e){isDebug&&metrics.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,t,r){e.translate=mixNumber$1(t.translate,0,r),e.scale=mixNumber$1(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function mixAxis(e,t,r,n){e.min=mixNumber$1(t.min,r.min,n),e.max=mixNumber$1(t.max,r.max,n)}function mixBox(e,t,r,n){mixAxis(e.x,t.x,r.x,n),mixAxis(e.y,t.y,r.y,n)}function hasOpacityCrossfade(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,t,r){return"position"===e||"preserve-aspect"===e&&!isNear(aspectRatio(t),aspectRatio(r),.2)}function checkNodeWasScrollRoot(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}function handleHoverEvent(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===r);const s=n["onHover"+r];s&&frame.postRender(()=>s(t,extractEventInfo(t)))}function handlePressEvent(e,t,r){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===r);const s=n["onTap"+("End"===r?"":r)];s&&frame.postRender(()=>s(t,extractEventInfo(t)))}function initIntersectionObserver({root:e,...t}){const r=e||document;observers.has(r)||observers.set(r,{});const n=observers.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...t})),n[s]}function observeIntersection(e,t,r){const n=initIntersectionObserver(t);return observerCallbacks.set(e,r),n.observe(e),()=>{observerCallbacks.delete(e),n.unobserve(e)}}function hasViewportOptionChanged({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>prefersReducedMotion.current=e.matches;e.addListener(t),t()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(e,t,r){for(const n in t){const s=t[n],i=r[n];if(isMotionValue(s))e.addValue(n,s);else if(isMotionValue(i))e.addValue(n,motionValue(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const t=e.getValue(n);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(n);e.addValue(n,motionValue(void 0!==t?t:s,{owner:e}))}}for(const n in r)void 0===t[n]&&e.removeValue(n);return t}function getComputedStyle$2(e){return window.getComputedStyle(e)}function CelebrationToast({isVisible:e,onClose:t,taskTitle:r,emoji:n="",onSendThanks:s}){const[i,o]=reactExports.useState(!1),[a,l]=reactExports.useState(""),c=["Great work on completing this task! ","Thank you for your dedication! ","Awesome job getting this done! ","You're making a real difference! ","Amazing teamwork! Keep it up! ","Your hard work is appreciated! "];return jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-100,scale:.8},animate:{opacity:1,y:0,scale:1,rotate:[0,-1,1,0]},exit:{opacity:0,y:-100,scale:.8},transition:{type:"spring",stiffness:300,damping:20,duration:.6},className:"fixed top-4 right-4 z-50 max-w-sm",children:jsxRuntimeExports.jsx(Card$1,{className:"bg-gradient-to-br from-orange-50 to-yellow-50 border-orange-200 shadow-lg",children:jsxRuntimeExports.jsxs(CardContent$1,{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(motion.span,{className:"text-2xl",animate:{rotate:[0,15,-15,0]},transition:{repeat:3,duration:.3},children:n}),jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Task Complete"})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:t,className:"h-6 w-6 p-0 hover:bg-orange-100",children:jsxRuntimeExports.jsx(X$1,{className:"h-3 w-3"})})]}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Congratulations!"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["You completed: ",jsxRuntimeExports.jsx("span",{className:"font-medium",children:r})]}),i?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-3",children:[jsxRuntimeExports.jsx("textarea",{value:a,onChange:e=>l(e.target.value),placeholder:"Write a thank you message (optional)...",className:"w-full p-2 text-sm border border-orange-200 rounded-md resize-none focus:outline-none focus:ring-2 focus:ring-orange-300",rows:2}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>{const e=a||c[Math.floor(Math.random()*c.length)];null==s||s(e),o(!1),l(""),t()},size:"sm",className:"bg-tsp-primary hover:bg-tsp-primary/90 text-white",children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-3 w-3 mr-1"}),"Send"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>o(!1),className:"border-orange-200 hover:bg-orange-50",children:"Cancel"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>o(!0),size:"sm",className:"bg-tsp-primary hover:bg-tsp-primary/90 text-white",children:[jsxRuntimeExports.jsx(Heart,{className:"h-3 w-3 mr-1"}),"Send Thanks"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:t,className:"border-orange-200 hover:bg-orange-50",children:"Close"})]})]})})})})}function useCelebration(){const[e,t]=reactExports.useState({isVisible:!1,taskTitle:"",emoji:""});return{celebration:e,triggerCelebration:(e,r)=>{const n=["","","","","","","",""],s=n[Math.floor(Math.random()*n.length)];t({isVisible:!0,taskTitle:e,emoji:s,taskId:r}),setTimeout(()=>{t(e=>({...e,isVisible:!1}))},8e3)},hideCelebration:()=>{t(e=>({...e,isVisible:!1}))}}}function SendKudosButton({recipientId:e,recipientName:t,contextType:r,contextId:n,contextTitle:s,className:i="",size:o="sm",variant:a="outline"}){const{user:l}=useAuth(),{toast:c}=useToast(),[u,d]=reactExports.useState(!1),p=useMutation({mutationFn:async()=>{const i=m(t,r,s);return await apiRequest("POST","/api/messages",{recipientId:e,subject:`Kudos for ${s}!`,content:i,contextType:r,contextId:n,contextTitle:s})},onSuccess:()=>{d(!0),queryClient.invalidateQueries({queryKey:["/api/messages"]}),c({description:`Kudos sent to ${t}!`,duration:3e3})},onError:()=>{c({description:"Failed to send kudos",variant:"destructive"})}}),m=(e,t,r)=>{const n=[` Fantastic work on ${r}, ${e}! Your dedication really shows.`,` Great job completing ${r}! Thanks for your excellent contribution.`,` Outstanding work on ${r}, ${e}! Keep up the amazing effort.`,` Excellent completion of ${r}! Your work makes a real difference.`,` Awesome job with ${r}, ${e}! Thanks for being such a valuable team member.`,` Brilliant work on ${r}! Your contribution is truly appreciated.`,` Amazing job completing ${r}, ${e}! Your effort doesn't go unnoticed.`,` Wonderful work on ${r}! Thanks for your commitment to excellence.`];return n[Math.floor(Math.random()*n.length)]};return l&&l.id!==e?u?jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:`gap-1 ${i}`,children:[jsxRuntimeExports.jsx(Heart,{className:"h-3 w-3 fill-red-400 text-red-400"}),"Kudos Sent"]}):jsxRuntimeExports.jsx(Button,{onClick:()=>p.mutate(),disabled:p.isPending,size:o,variant:a,className:`gap-1 ${i}`,children:p.isPending?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current"}),"Sending..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[(()=>{const e=[Heart,Star,Trophy,Sparkles,Target],t=e[Math.floor(Math.random()*e.length)];return jsxRuntimeExports.jsx(t,{className:"h-3 w-3"})})(),"Send Kudos"]})}):null}function ProjectAssigneeSelector({value:e,onChange:t,placeholder:r="Add team members",label:n="Assigned To",className:s,multiple:i=!0}){const[o,a]=reactExports.useState([]),[l,c]=reactExports.useState(""),{data:u=[]}=useQuery({queryKey:["/api/users"],retry:!1});reactExports.useEffect(()=>{if(e&&u.length>0){const t=e.split(",").map(e=>e.trim()).filter(e=>e.length>0),r=[];t.forEach(e=>{const t=u.find(t=>`${t.firstName||""} ${t.lastName||""}`.trim()===e||t.email===e);if(t){const e=`${t.firstName||""} ${t.lastName||""}`.trim()||t.email;r.push({id:t.id,name:e,isSystemUser:!0})}else r.push({id:`custom_${Date.now()}_${Math.random()}`,name:e,isSystemUser:!1})}),a(r)}},[u,e]);const d=()=>{if(!l.trim())return;if(o.some(e=>e.name.toLowerCase()===l.trim().toLowerCase()))return void c("");const e={id:`custom_${Date.now()}_${Math.random()}`,name:l.trim(),isSystemUser:!1},t=[...o,e];a(t),c(""),p(t)},p=e=>{const r=e.map(e=>e.name).join(", "),n=e.filter(e=>e.isSystemUser).map(e=>e.id);t(r,n)};return jsxRuntimeExports.jsxs("div",{className:s,children:[jsxRuntimeExports.jsx(Label$1,{className:"mb-2 block",children:n}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm text-slate-600 mb-2 block",children:"Add Team Members"}),jsxRuntimeExports.jsxs(Select,{value:"none",onValueChange:e=>{if("none"===e)return;const t=u.find(t=>t.id===e);if(!t)return;const r=`${t.firstName||""} ${t.lastName||""}`.trim()||t.email;if(o.some(e=>e.id===t.id))return;const n=[...o,{id:t.id,name:r,isSystemUser:!0}];a(n),p(n)},children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"+ Add team member"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"none",children:"Select a team member..."}),u.filter(e=>!o.some(t=>t.id===e.id&&t.isSystemUser)).map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.id,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:`${e.firstName||""} ${e.lastName||""}`.trim()||e.email}),jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"text-xs",children:e.role||"User"})]})},e.id))]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm text-slate-600 mb-2 block",children:"Add Custom Names"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Input,{value:l,onChange:e=>c(e.target.value),placeholder:"Enter custom name",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),d())}}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"sm",onClick:d,disabled:!l.trim(),children:jsxRuntimeExports.jsx(UserPlus,{className:"w-4 h-4"})})]})]}),o.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm text-slate-600",children:"Assigned:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(e=>jsxRuntimeExports.jsxs(Badge,{variant:e.isSystemUser?"default":"outline",className:"flex items-center gap-1 px-3 py-1",children:[jsxRuntimeExports.jsx("span",{children:e.name}),e.isSystemUser&&jsxRuntimeExports.jsx("span",{className:"text-xs opacity-75",children:"(User)"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1 hover:bg-red-100",onClick:()=>(e=>{const t=o.filter(t=>t.id!==e);a(t),p(t)})(e.id),children:jsxRuntimeExports.jsx(X$1,{className:"h-3 w-3"})})]},e.id))})]})]})]})}function AssigneeEmail({assigneeId:e}){const{data:t=[]}=useQuery({queryKey:["/api/users"],retry:!1}),r=t.find(t=>t.id===e.toString());return(null==r?void 0:r.email)?jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400 truncate",children:r.email}):null}function ProjectsClean(){const[,e]=useLocation(),{toast:t}=useToast(),{user:r}=useAuth(),{triggerCelebration:n}=useCelebration(),s=useQueryClient(),[i,o]=reactExports.useState(!1),[a,l]=reactExports.useState(!1),[c,u]=reactExports.useState(null),[d,p]=reactExports.useState("active"),[m,x]=reactExports.useState({title:"",description:"",status:"available",priority:"medium",category:"technology",assigneeName:"",dueDate:"",startDate:"",estimatedHours:0,actualHours:0,budget:""}),{data:f=[],isLoading:h}=useQuery({queryKey:["/api/projects"],staleTime:3e4,refetchOnWindowFocus:!0}),{data:g=[],isLoading:y}=useQuery({queryKey:["/api/projects/archived"]}),j=useMutation({mutationFn:async e=>await apiRequest("POST","/api/projects",e),onSuccess:e=>{s.invalidateQueries({queryKey:["/api/projects"]}),o(!1),E(),t({title:"Project created successfully!",description:`"${e.title}" has been added to your projects.`})},onError:()=>{t({title:"Error",description:"Failed to create project.",variant:"destructive"})}}),b=useMutation({mutationFn:async({id:e,...t})=>await apiRequest("PATCH",`/api/projects/${e}`,t),onSuccess:e=>{s.invalidateQueries({queryKey:["/api/projects"]}),t({title:"Project updated successfully!",description:`"${e.title}" has been updated.`})},onError:()=>{t({title:"Error",description:"Failed to update project.",variant:"destructive"})}}),v=useMutation({mutationFn:async e=>await apiRequest("DELETE",`/api/projects/${e}`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/projects"]}),t({title:"Project deleted successfully!",description:"The project has been removed."})},onError:()=>{t({title:"Error",description:"Failed to delete project.",variant:"destructive"})}}),E=()=>{x({title:"",description:"",status:"available",priority:"medium",category:"technology",assigneeName:"",dueDate:"",startDate:"",estimatedHours:0,actualHours:0,budget:""})},R=e=>{switch(e){case"urgent":return"bg-red-500";case"high":return"bg-[#FBAD3F]";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},S=(e,t)=>hasPermission(e,PERMISSIONS.EDIT_ALL_PROJECTS),w="active"===($=d)?f.filter(e=>"in_progress"===e.status):f.filter(e=>e.status===$);var $;return h?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("div",{className:"text-gray-600 font-roboto",children:"Loading projects..."})}):jsxRuntimeExports.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 min-h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:sandwichLogo,alt:"The Sandwich Project Logo",className:"w-10 h-10"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-[#236383] font-roboto",children:"Project Management"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-roboto",children:"Organize and track all team projects"})]})]}),hasPermission(r,PERMISSIONS.CREATE_PROJECTS)&&jsxRuntimeExports.jsxs(Button,{onClick:()=>o(!0),className:"bg-[#FBAD3F] hover:bg-[#e89a2f] text-white font-roboto font-medium shadow-sm",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-1 mb-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-1",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:()=>p("available"),className:"font-roboto font-medium transition-all "+("available"===d?"bg-[#236383] text-white hover:bg-[#1e5470]":"text-[#236383] hover:text-[#1e5470] hover:bg-[#236383]/5"),children:[jsxRuntimeExports.jsx(Circle,{className:"w-4 h-4 mr-2"}),"Available (",f.filter(e=>"available"===e.status).length,")"]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:()=>p("active"),className:"font-roboto font-medium transition-all "+("active"===d?"bg-[#236383] text-white hover:bg-[#1e5470]":"text-[#236383] hover:text-[#1e5470] hover:bg-[#236383]/5"),children:[jsxRuntimeExports.jsx(Play,{className:"w-4 h-4 mr-2"}),"Active (",f.filter(e=>"in_progress"===e.status).length,")"]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:()=>p("completed"),className:"font-roboto font-medium transition-all "+("completed"===d?"bg-[#236383] text-white hover:bg-[#1e5470]":"text-[#236383] hover:text-[#1e5470] hover:bg-[#236383]/5"),children:[jsxRuntimeExports.jsx(CircleCheck,{className:"w-4 h-4 mr-2"}),"Completed (",f.filter(e=>"completed"===e.status).length,")"]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:()=>p("archived"),className:"font-roboto font-medium transition-all "+("archived"===d?"bg-[#236383] text-white hover:bg-[#1e5470]":"text-[#236383] hover:text-[#1e5470] hover:bg-[#236383]/5"),children:[jsxRuntimeExports.jsx(Archive$c,{className:"w-4 h-4 mr-2"}),"Archived (",Array.isArray(g)?g.length:0,")"]})]})}),jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:0===w.length?jsxRuntimeExports.jsxs("div",{className:"col-span-full text-center py-12",children:[jsxRuntimeExports.jsxs("div",{className:"text-[#236383]/30 mb-4",children:["available"===d&&jsxRuntimeExports.jsx(Circle,{className:"w-12 h-12 mx-auto"}),"active"===d&&jsxRuntimeExports.jsx(Play,{className:"w-12 h-12 mx-auto"}),"completed"===d&&jsxRuntimeExports.jsx(CircleCheck,{className:"w-12 h-12 mx-auto"}),"archived"===d&&jsxRuntimeExports.jsx(Archive$c,{className:"w-12 h-12 mx-auto"})]}),jsxRuntimeExports.jsxs("h3",{className:"text-lg font-medium text-[#236383] font-roboto mb-2",children:["No ",d.replace("_"," ")," Projects"]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 font-roboto",children:["available"===d&&"All projects are currently assigned or completed.","active"===d&&"No projects are currently in progress.","completed"===d&&"Completed projects will appear here.","archived"===d&&"Archived projects will appear here."]})]}):w.map(s=>{var i,o;return jsxRuntimeExports.jsx(Card$1,{className:"hover:shadow-md transition-all duration-200 cursor-pointer border border-gray-200 bg-white",onClick:()=>e(`/projects/${s.id}`),children:jsxRuntimeExports.jsxs(CardContent$1,{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-start gap-3",children:[S(r)&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:e=>{var r,i;e.stopPropagation(),"completed"!==s.status&&(r=s.id,i=s.title,confirm(`Mark "${i}" as completed?`)&&(b.mutate({id:r,status:"completed"}),t({title:" Project completed!",description:`"${i}" has been marked as completed.`}),n("")))},className:"h-5 w-5 p-0 hover:bg-[#FBAD3F]/10 flex-shrink-0 mt-1",title:"completed"===s.status?"Completed":"Mark as Complete",children:"completed"===s.status?jsxRuntimeExports.jsx(CircleCheck,{className:"h-5 w-5 text-green-600"}):jsxRuntimeExports.jsx(Square,{className:"h-5 w-5 text-gray-400 hover:text-[#FBAD3F]"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-[#236383] font-roboto text-lg mb-1 break-words leading-tight",children:s.title}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[jsxRuntimeExports.jsxs(Badge,{className:`${R(s.priority)} text-white text-xs font-roboto`,children:[s.priority," priority"]}),jsxRuntimeExports.jsx(Badge,{className:"bg-[#FBAD3F] text-white border-[#FBAD3F] text-xs font-roboto",children:"in_progress"===s.status?"active":(null==(i=s.status)?void 0:i.replace("_"," "))||"available"})]})]})]}),S(r)&&jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:e=>e.stopPropagation(),className:"h-8 w-8 p-0 hover:bg-[#FBAD3F]/10",children:jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 text-[#FBAD3F]"})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:e=>{e.stopPropagation(),(e=>{u(e),l(!0)})(s)},children:[jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4 mr-2 text-[#FBAD3F]"}),"Edit Project"]}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:e=>{var t,r;e.stopPropagation(),t=s.id,r=s.title,confirm(`Are you sure you want to delete "${r}"? This action cannot be undone.`)&&v.mutate(t)},className:"text-red-600 focus:text-red-600",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4 mr-2"}),"Delete Project"]})]})]})})]}),s.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2 font-roboto",children:s.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 font-roboto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[jsxRuntimeExports.jsx(User,{className:"w-4 h-4 text-[#FBAD3F] flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col min-w-0",children:[jsxRuntimeExports.jsx("span",{className:"truncate",children:s.assigneeName||"Unassigned"}),s.assigneeId&&jsxRuntimeExports.jsx(AssigneeEmail,{assigneeId:s.assigneeId})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 text-[#FBAD3F]"}),jsxRuntimeExports.jsx("span",{children:s.dueDate?new Date(s.dueDate).toLocaleDateString():"No date"})]})]}),"completed"===s.status&&s.assigneeName&&jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",onClick:e=>e.stopPropagation(),children:jsxRuntimeExports.jsx(SendKudosButton,{recipientId:(null==(o=s.assigneeId)?void 0:o.toString())||"",recipientName:s.assigneeName,contextType:"project",contextId:s.id.toString(),contextTitle:s.title,className:"w-full",size:"sm",variant:"outline"})})]})},s.id)})}),jsxRuntimeExports.jsx(Dialog,{open:i,onOpenChange:o,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-[600px]",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{className:"text-[#236383] font-roboto",children:"Create New Project"})}),jsxRuntimeExports.jsxs("form",{onSubmit:e=>{var t;if(e.preventDefault(),null==(t=m.title)?void 0:t.trim()){const e={...m,createdBy:(null==r?void 0:r.id)||"",createdByName:(null==r?void 0:r.firstName)?`${r.firstName} ${r.lastName||""}`.trim():(null==r?void 0:r.email)||""};j.mutate(e)}},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"title",className:"font-roboto",children:"Project Title"}),jsxRuntimeExports.jsx(Input,{id:"title",placeholder:"Enter project title",value:m.title,onChange:e=>x({...m,title:e.target.value}),className:"font-roboto",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"description",className:"font-roboto",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{id:"description",placeholder:"Project description",value:m.description||"",onChange:e=>x({...m,description:e.target.value}),className:"font-roboto",rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"priority",className:"font-roboto",children:"Priority"}),jsxRuntimeExports.jsxs(Select,{value:m.priority,onValueChange:e=>x({...m,priority:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"font-roboto",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"low",children:"Low"}),jsxRuntimeExports.jsx(SelectItem,{value:"medium",children:"Medium"}),jsxRuntimeExports.jsx(SelectItem,{value:"high",children:"High"}),jsxRuntimeExports.jsx(SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"category",className:"font-roboto",children:"Category"}),jsxRuntimeExports.jsxs(Select,{value:m.category,onValueChange:e=>x({...m,category:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"font-roboto",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"technology",children:"Technology"}),jsxRuntimeExports.jsx(SelectItem,{value:"marketing",children:"Marketing"}),jsxRuntimeExports.jsx(SelectItem,{value:"operations",children:"Operations"}),jsxRuntimeExports.jsx(SelectItem,{value:"community",children:"Community"}),jsxRuntimeExports.jsx(SelectItem,{value:"fundraising",children:"Fundraising"}),jsxRuntimeExports.jsx(SelectItem,{value:"event",children:"Event"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"assigneeName",className:"font-roboto",children:"Assigned To"}),jsxRuntimeExports.jsx(Input,{id:"assigneeName",placeholder:"Enter assignee name",value:m.assigneeName||"",onChange:e=>x({...m,assigneeName:e.target.value}),className:"font-roboto"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"dueDate",className:"font-roboto",children:"Due Date"}),jsxRuntimeExports.jsx(Input,{id:"dueDate",type:"date",value:m.dueDate||"",onChange:e=>x({...m,dueDate:e.target.value}),className:"font-roboto"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>o(!1),className:"font-roboto",children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"bg-[#FBAD3F] hover:bg-[#e89a2f] text-white font-roboto",disabled:j.isPending,children:j.isPending?"Creating...":"Create Project"})]})]})]})}),jsxRuntimeExports.jsx(Dialog,{open:a,onOpenChange:l,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{className:"text-[#236383] font-roboto",children:"Edit Project"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-roboto",children:"Update project details and assignments"})]}),c&&jsxRuntimeExports.jsxs("form",{onSubmit:e=>{e.preventDefault(),c&&(b.mutate({id:c.id,...c}),l(!1),u(null))},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-title",className:"font-roboto",children:"Title"}),jsxRuntimeExports.jsx(Input,{id:"edit-project-title",value:c.title,onChange:e=>u({...c,title:e.target.value}),className:"font-roboto",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-description",className:"font-roboto",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{id:"edit-project-description",value:c.description||"",onChange:e=>u({...c,description:e.target.value}),className:"font-roboto",rows:3})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-status",className:"font-roboto",children:"Status"}),jsxRuntimeExports.jsxs(Select,{value:c.status,onValueChange:e=>u({...c,status:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"font-roboto",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"available",children:"Available"}),jsxRuntimeExports.jsx(SelectItem,{value:"in_progress",children:"In Progress"}),jsxRuntimeExports.jsx(SelectItem,{value:"waiting",children:"Waiting"}),jsxRuntimeExports.jsx(SelectItem,{value:"completed",children:"Completed"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-priority",className:"font-roboto",children:"Priority"}),jsxRuntimeExports.jsxs(Select,{value:c.priority,onValueChange:e=>u({...c,priority:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"font-roboto",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"low",children:"Low"}),jsxRuntimeExports.jsx(SelectItem,{value:"medium",children:"Medium"}),jsxRuntimeExports.jsx(SelectItem,{value:"high",children:"High"}),jsxRuntimeExports.jsx(SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-category",className:"font-roboto",children:"Category"}),jsxRuntimeExports.jsxs(Select,{value:c.category||"technology",onValueChange:e=>u({...c,category:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"font-roboto",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select category"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"technology",children:" Tech"}),jsxRuntimeExports.jsx(SelectItem,{value:"events",children:" Events"}),jsxRuntimeExports.jsx(SelectItem,{value:"grants",children:" Grants"}),jsxRuntimeExports.jsx(SelectItem,{value:"outreach",children:" Outreach"})]})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ProjectAssigneeSelector,{value:c.assigneeName||"",onChange:(e,t)=>u({...c,assigneeName:e,assigneeIds:(null==t?void 0:t.length)?t:void 0}),label:"Assigned To",placeholder:"Select or enter person responsible",className:"font-roboto"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-due-date",className:"font-roboto",children:"Due Date"}),jsxRuntimeExports.jsx(Input,{id:"edit-project-due-date",type:"date",value:c.dueDate?c.dueDate.split("T")[0]:"",onChange:e=>u({...c,dueDate:e.target.value}),className:"font-roboto"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-budget",className:"font-roboto",children:"Budget"}),jsxRuntimeExports.jsx(Input,{id:"edit-project-budget",type:"text",value:c.budget||"",onChange:e=>u({...c,budget:e.target.value}),className:"font-roboto",placeholder:"0.00"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-estimated-hours",className:"font-roboto",children:"Estimated Hours"}),jsxRuntimeExports.jsx(Input,{id:"edit-project-estimated-hours",type:"number",value:c.estimatedHours||"",onChange:e=>u({...c,estimatedHours:Number(e.target.value)}),className:"font-roboto",placeholder:"0"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>l(!1),className:"font-roboto",children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"bg-[#FBAD3F] hover:bg-[#e89a2f] text-white font-roboto",disabled:b.isPending,children:b.isPending?"Updating...":"Update Project"})]})]})]})})]})}function TaskAssigneeSelector({value:e,onChange:t,placeholder:r="Assign to...",multiple:n=!1}){const[s,i]=reactExports.useState("user"),[o,a]=reactExports.useState(""),[l,c]=reactExports.useState([]),[u,d]=reactExports.useState([]),{data:p=[],isLoading:m}=useQuery({queryKey:["/api/users"]});reactExports.useEffect(()=>{if(n){const t=(null==e?void 0:e.assigneeIds)||[],r=(null==e?void 0:e.assigneeNames)||[];c(t),d(r),r.length>0&&0===t.length&&(i("text"),a(r.join(", ")))}else(null==e?void 0:e.assigneeName)&&!(null==e?void 0:e.assigneeId)&&(a(e.assigneeName),i("text"))},[e,n]);const x=()=>{a(""),c([]),d([]),t(n?{assigneeIds:void 0,assigneeNames:void 0}:{assigneeId:void 0,assigneeName:void 0})},f=(()=>{if(n)return"";if(null==e?void 0:e.assigneeId){const t=p.find(t=>t.id===e.assigneeId);return t?`${t.firstName} ${t.lastName}`.trim()||t.email:e.assigneeName}return(null==e?void 0:e.assigneeName)||""})(),h=(()=>{if(n){const e=[];return l.forEach((t,r)=>{const n=p.find(e=>e.id===t);n&&e.push({id:t,name:`${n.firstName} ${n.lastName}`.trim()||n.email,isSystemUser:!0,index:r})}),u.forEach((t,r)=>{l[r]||e.push({id:`text-${r}`,name:t,isSystemUser:!1,index:r})}),e}return[]})();return jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"user"===s?"default":"outline",size:"sm",onClick:()=>i("user"),className:"text-xs",children:n?"Select Users":"Select User"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"text"===s?"default":"outline",size:"sm",onClick:()=>i("text"),className:"text-xs",children:"Free Text"}),n&&h.length>0&&jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"sm",onClick:x,className:"text-xs text-red-600 hover:text-red-700",children:"Clear All"})]}),"user"===s?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:jsxRuntimeExports.jsxs(Select,{value:n?"none":(null==e?void 0:e.assigneeId)||"none",onValueChange:e=>{if("none"===e)return void(n?(c([]),d([]),t({assigneeIds:void 0,assigneeNames:void 0})):t({assigneeId:void 0,assigneeName:void 0}));const r=p.find(t=>t.id===e);if(!r)return;const s=`${r.firstName} ${r.lastName}`.trim()||r.email;if(n)if(l.includes(e)){const r=l.filter(t=>t!==e),n=u.filter((t,r)=>l[r]!==e);c(r),d(n),t({assigneeIds:r.length>0?r:void 0,assigneeNames:n.length>0?n:void 0})}else{const r=[...l,e],n=[...u,s];c(r),d(n),t({assigneeIds:r,assigneeNames:n})}else t({assigneeId:e,assigneeName:s})},disabled:m,children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:m?"Loading users...":r})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"none",children:"Unassigned"}),p.filter(e=>e.isActive).map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.id,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[n&&l.includes(e.id)&&jsxRuntimeExports.jsx("span",{className:"text-green-600",children:""}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:`${e.firstName} ${e.lastName}`.trim()||e.email}),jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"text-xs",children:e.role})]})},e.id))]})]})}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:jsxRuntimeExports.jsx(Input,{value:o,onChange:e=>(e=>{if(a(e),n){const r=e.split(",").map(e=>e.trim()).filter(e=>e.length>0);d(r),t({assigneeIds:void 0,assigneeNames:r.length>0?r:void 0})}else t({assigneeId:void 0,assigneeName:e||void 0})})(e.target.value),placeholder:n?"Enter names separated by commas...":"Enter assignee name..."})}),n&&h.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Assigned to:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(e=>jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:"flex items-center gap-1 pr-1",children:[e.name,e.isSystemUser&&jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"text-xs ml-1",children:"User"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>(e=>{if(n){const r=l.filter((t,r)=>r!==e),n=u.filter((t,r)=>r!==e);c(r),d(n),t({assigneeIds:r.length>0?r:void 0,assigneeNames:n.length>0?n:void 0})}})(e.index),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:jsxRuntimeExports.jsx(X$1,{className:"h-3 w-3"})})]},e.id))})]}),!n&&f&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:"flex items-center gap-1",children:[f,jsxRuntimeExports.jsx("button",{type:"button",onClick:x,className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:jsxRuntimeExports.jsx(X$1,{className:"h-3 w-3"})})]}),(null==e?void 0:e.assigneeId)&&jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"text-xs",children:"System User"})]})]})}function MultiUserTaskCompletion({taskId:e,projectId:t,assigneeIds:r,assigneeNames:n,currentUserId:s,currentUserName:i,taskStatus:o,onStatusChange:a}){const[l,c]=reactExports.useState(""),[u,d]=reactExports.useState(!1),{toast:p}=useToast(),m=useQueryClient(),{data:x,isLoading:f,refetch:h}=useQuery({queryKey:["/api/tasks",e,"completions"],enabled:!!e,staleTime:3e4,refetchOnWindowFocus:!1,queryFn:async()=>{const t=await apiRequest("GET",`/api/tasks/${e}/completions`);return Array.isArray(t)?t:[]}}),g=x||[],y=useMutation({mutationFn:async t=>apiRequest("POST",`/api/tasks/${e}/complete`,{notes:t}),onSuccess:n=>{if(m.invalidateQueries({queryKey:["/api/tasks",e,"completions"]}),m.invalidateQueries({queryKey:["/api/projects",t,"tasks"]}),d(!1),c(""),n.isFullyCompleted)p({title:"Task Fully Completed! ",description:"All team members have completed this task - task automatically marked complete"}),null==a||a(!0);else{const e=(g.length||0)+1,t=r.length;p({title:"Your portion completed",description:`${e}/${t} team members finished`}),null==a||a(!1)}},onError:e=>{p({title:"Error",description:e.message||"Failed to mark task complete",variant:"destructive"})}}),j=useMutation({mutationFn:async()=>apiRequest("DELETE",`/api/tasks/${e}/complete`),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/tasks",e,"completions"]}),m.invalidateQueries({queryKey:["/api/projects",t,"tasks"]}),p({title:"Completion removed",description:"Your completion has been removed from this task"}),null==a||a(!1)},onError:e=>{p({title:"Error",description:e.message||"Failed to remove completion",variant:"destructive"})}});if(f)return jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"Loading completion status..."});const b=(g||[]).find(e=>e.userId===s),v=!!b,E=(g||[]).length,R=(r||[]).length,S=0===R?"completed"===o:E>=R;return jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{className:"w-4 h-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:0===R?`Task Status: ${o}`:`Team Progress: ${(null==g?void 0:g.length)||0}/${R||0}`}),S&&jsxRuntimeExports.jsx(Badge,{className:"bg-green-600 hover:bg-green-700 text-white font-bold",children:" Fully Complete"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:r&&r.length>0?r.map((t,r)=>((t,r)=>{const n=t===s,i=!!(g||[]).find(e=>e.userId===t);return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[i?jsxRuntimeExports.jsx(CircleCheck,{className:"w-4 h-4 text-green-600"}):jsxRuntimeExports.jsx(Circle,{className:"w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsxs("span",{className:`text-sm ${n?"font-medium":""} ${i?"line-through text-gray-500":""}`,children:[r,n&&" (You)"]}),i&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:" Done"}),!n&&jsxRuntimeExports.jsx(SendKudosButton,{recipientId:t,recipientName:r,contextType:"task",contextId:e.toString(),entityName:"task completion",size:"sm",className:"ml-2"})]})]},t)})(t,n[r]||"Unknown User")):jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"completed"===o?"Task completed without individual tracking":"No team members assigned"})}),s&&r.includes(s)&&jsxRuntimeExports.jsx("div",{className:"pt-2 border-t",children:v?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{j.mutate()},disabled:j.isPending,className:"text-orange-600 border-orange-200 hover:bg-orange-50",children:[jsxRuntimeExports.jsx(Circle,{className:"w-4 h-4 mr-2"}),j.isPending?"Removing...":"Mark Incomplete"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["Completed ",new Date(b.completedAt).toLocaleDateString()]})]}):jsxRuntimeExports.jsxs(Dialog,{open:u,onOpenChange:d,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:[jsxRuntimeExports.jsx(CircleCheck,{className:"w-4 h-4 mr-2"}),"Mark My Portion Complete"]})}),jsxRuntimeExports.jsxs(DialogContent,{className:"w-[95vw] max-w-md",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Complete Your Portion"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Add notes about your completion of this task portion."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"completion-notes",children:"Notes (Optional)"}),jsxRuntimeExports.jsx(Textarea,{id:"completion-notes",value:l,onChange:e=>c(e.target.value),placeholder:"Add any notes about your completion...",rows:3,className:"resize-none"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{y.mutate(l)},disabled:y.isPending,className:"bg-green-600 hover:bg-green-700",children:y.isPending?"Marking Complete...":"Complete"})]})]})]})]})}),g.length>0&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3 inline mr-1"}),"Last activity: ",new Date(Math.max(...g.map(e=>new Date(e.completedAt).getTime()))).toLocaleString()]})]})}function ProjectDetailClean({projectId:e}){var t;const{id:r}=useParams(),n=e?e.toString():r,[,s]=useLocation(),{toast:i}=useToast(),{user:o}=useAuth(),[a,l]=reactExports.useState(!1),[c,u]=reactExports.useState(!1),[d,p]=reactExports.useState(null),[m,x]=reactExports.useState({title:"",description:"",priority:"medium",dueDate:"",assigneeId:"",assigneeName:"",estimatedHours:0}),[f,h]=reactExports.useState(null),{data:g,isLoading:y}=useQuery({queryKey:["/api/projects",n],queryFn:async()=>await apiRequest("GET",`/api/projects/${n}`),enabled:!!n}),{data:j=[],isLoading:b}=useQuery({queryKey:["/api/projects",n,"tasks"],queryFn:async()=>{const e=await apiRequest("GET",`/api/projects/${n}/tasks`);return Array.isArray(e)?e:[]},enabled:!!n}),v=useMutation({mutationFn:async e=>await apiRequest("PATCH",`/api/projects/${n}`,e),onSuccess:async(e,t)=>{queryClient.invalidateQueries({queryKey:["/api/projects",n]}),queryClient.invalidateQueries({queryKey:["/api/projects"]}),u(!1),h(null),i({description:"Project updated successfully"}),"completed"===t.status&&g&&await(async(e,t)=>{var r;if(null==o?void 0:o.id)try{const s=[];if(e.assigneeIds&&e.assigneeIds.length>0)for(let t=0;t<e.assigneeIds.length;t++){const n=e.assigneeIds[t],i=(null==(r=e.assigneeNames)?void 0:r[t])||`User ${n}`;n!==o.id&&s.push({id:n,name:i})}else e.assigneeId&&e.assigneeName&&(null==o?void 0:o.id)!==e.assigneeId&&s.push({id:e.assigneeId,name:e.assigneeName});for(const r of s)try{await apiRequest("POST","/api/messaging/kudos",{recipientId:r.id,recipientName:r.name,contextType:"project",contextId:e.id.toString(),entityName:t,customMessage:` Congratulations on completing "${t}"! Amazing work!`}),console.log(`Kudos sent to ${r.name} for project completion`)}catch(n){console.error(`Failed to send kudos to ${r.name}:`,n)}s.length>0&&i({title:" Kudos sent!",description:`Congratulations sent to ${s.length} team member${s.length>1?"s":""} for completing "${t}"`})}catch(n){console.error("Failed to send project completion kudos:",n)}})(g,g.title)},onError:e=>{i({title:"Error updating project",description:e.message||"Failed to update project",variant:"destructive"})}}),E=useMutation({mutationFn:async e=>await apiRequest("POST",`/api/projects/${n}/tasks`,e),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/projects",n,"tasks"]}),queryClient.invalidateQueries({queryKey:["/api/projects",n]}),l(!1),x({title:"",description:"",priority:"medium",dueDate:"",assigneeId:"",assigneeName:"",estimatedHours:0}),i({description:"Task added successfully"})},onError:e=>{console.error("Task creation failed:",e),i({description:"Failed to add task",variant:"destructive"})}}),R=useMutation({mutationFn:async({taskId:e,taskData:t})=>await apiRequest("PATCH",`/api/tasks/${e}`,t),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/projects",n,"tasks"]}),queryClient.invalidateQueries({queryKey:["/api/projects",n]}),p(null),i({description:"Task updated successfully"})},onError:e=>{i({title:"Error updating task",description:e.message||"Failed to update task",variant:"destructive"})}}),S=useMutation({mutationFn:async e=>await apiRequest("DELETE",`/api/tasks/${e}`),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/projects",n,"tasks"]}),queryClient.invalidateQueries({queryKey:["/api/projects",n]}),i({description:"Task deleted successfully"})},onError:e=>{console.error("Task deletion failed:",e),i({description:"Failed to delete task",variant:"destructive"})}}),w=e=>{switch(e){case"urgent":return"bg-red-500 text-white";case"high":return"bg-orange-500 text-white";case"medium":return"bg-yellow-500 text-white";case"low":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}},$=e=>{switch(e){case"completed":return"text-green-600 bg-green-50 border-green-200";case"in_progress":return"text-blue-600 bg-blue-50 border-blue-200";case"available":return"text-purple-600 bg-purple-50 border-purple-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};if(y)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("div",{className:"text-lg",children:"Loading project..."})});if(!g)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("div",{className:"text-lg text-red-600",children:"Project not found"})});const N=j.filter(e=>"completed"===e.status).length,_=j.length,C=_>0?Math.round(N/_*100):0;return jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:()=>{console.log("Back to Projects clicked - navigating to projects"),window.dashboardSetActiveSection?window.dashboardSetActiveSection("projects"):s("/projects")},className:"flex items-center gap-2 text-[#236383] hover:bg-[#236383]/10 font-roboto",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4"}),"Back to Projects"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-[#236383] font-roboto mb-2",children:g.title}),g.description&&jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-roboto text-lg",children:g.description})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[o&&canEditProject(o,g)&&jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{g&&(h(g),u(!0))},className:"flex items-center gap-2 border-[#FBAD3F] text-[#FBAD3F] hover:bg-[#FBAD3F] hover:text-white font-roboto",children:[jsxRuntimeExports.jsx(Pen,{className:"h-4 w-4"}),"Edit Project"]}),jsxRuntimeExports.jsx(Badge,{className:`${$(g.status)} font-roboto px-3 py-1`,children:null==(t=g.status)?void 0:t.replace("_"," ")}),jsxRuntimeExports.jsx(Badge,{className:`${w(g.priority)} font-roboto px-3 py-1`,children:g.priority})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-[#236383]/10 rounded flex items-center justify-center shrink-0",children:jsxRuntimeExports.jsx(User,{className:"h-3 w-3 text-[#236383]"})}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-[#236383] font-roboto",children:"Project Owner"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-900 font-roboto font-medium mb-2 leading-tight",children:g.assigneeName||"Christine Cooper Nowicki"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 font-roboto",children:"Currently managing this project"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-[#FBAD3F]/10 rounded flex items-center justify-center shrink-0",children:jsxRuntimeExports.jsx(Calendar,{className:"h-3 w-3 text-[#FBAD3F]"})}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-[#FBAD3F] font-roboto",children:"Target Date"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-900 font-roboto font-medium mb-2 leading-tight",children:g.dueDate?new Date(g.dueDate).toLocaleDateString():"8/30/2025"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 font-roboto",children:"About 1 month remaining"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-green-100 rounded flex items-center justify-center shrink-0",children:jsxRuntimeExports.jsx(Target,{className:"h-3 w-3 text-green-600"})}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-green-600 font-roboto",children:"Progress"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-900 font-roboto font-medium mb-2 leading-tight",children:[C,"%"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 font-roboto mb-3",children:[N," of ",_," tasks complete"]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:jsxRuntimeExports.jsx("div",{className:"bg-green-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${C}%`}})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-[#236383] font-roboto",children:"Tasks"}),o&&canEditProject(o,g)&&jsxRuntimeExports.jsxs(Button,{onClick:()=>l(!0),className:"flex items-center gap-2 bg-[#FBAD3F] hover:bg-[#FBAD3F]/90 text-white font-roboto px-4 py-2",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"Add Task"]})]}),a&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-[#236383] font-roboto mb-6",children:"Add New Task"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"task-title",children:"Title"}),jsxRuntimeExports.jsx(Input,{id:"task-title",value:m.title,onChange:e=>x({...m,title:e.target.value}),placeholder:"Enter task title"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"task-description",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{id:"task-description",value:m.description,onChange:e=>x({...m,description:e.target.value}),placeholder:"Enter task description"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"task-priority",children:"Priority"}),jsxRuntimeExports.jsxs("select",{id:"task-priority",value:m.priority,onChange:e=>x({...m,priority:e.target.value}),className:"w-full p-2 border rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"low",children:"Low"}),jsxRuntimeExports.jsx("option",{value:"medium",children:"Medium"}),jsxRuntimeExports.jsx("option",{value:"high",children:"High"}),jsxRuntimeExports.jsx("option",{value:"urgent",children:"Urgent"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"task-due-date",children:"Due Date"}),jsxRuntimeExports.jsx(Input,{id:"task-due-date",type:"date",value:m.dueDate,onChange:e=>x({...m,dueDate:e.target.value})})]})]}),jsxRuntimeExports.jsx(TaskAssigneeSelector,{value:{assigneeIds:m.assigneeIds||[],assigneeNames:m.assigneeNames||[]},onChange:({assigneeIds:e,assigneeNames:t})=>x({...m,assigneeIds:e,assigneeNames:t,assigneeId:null==e?void 0:e[0],assigneeName:null==t?void 0:t[0]}),multiple:!0}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"task-estimated-hours",children:"Estimated Hours"}),jsxRuntimeExports.jsx(Input,{id:"task-estimated-hours",type:"number",value:m.estimatedHours,onChange:e=>x({...m,estimatedHours:Number(e.target.value)}),placeholder:"0"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{m.title.trim()?E.mutate(m):i({description:"Task title is required",variant:"destructive"})},disabled:E.isPending,className:"bg-[#FBAD3F] hover:bg-[#FBAD3F]/90 text-white font-roboto",children:E.isPending?"Adding...":"Add Task"}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>l(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-50 font-roboto",children:"Cancel"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:b?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500 font-roboto",children:"Loading tasks..."}):0===j.length?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"text-gray-400 mb-4",children:jsxRuntimeExports.jsx(Plus,{className:"h-12 w-12 mx-auto mb-2"})}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 font-roboto text-lg",children:"No tasks yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 font-roboto",children:"Add your first task to get started!"})]}):j.map(e=>{var t,r,n,s,a;return jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 "+("completed"===e.status?"bg-green-50 border-green-200":""),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-semibold font-roboto "+("completed"===e.status?"line-through text-gray-600":"text-[#236383]"),children:["completed"===e.status&&jsxRuntimeExports.jsx(CircleCheck,{className:"inline w-5 h-5 mr-2 text-green-600"}),e.title]}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-gray-600 font-roboto "+("completed"===e.status?"line-through text-gray-500":""),children:e.description})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Badge,{className:`${w(e.priority)} font-roboto px-2 py-1`,children:e.priority}),jsxRuntimeExports.jsx(Badge,{className:`${$(e.status)} font-roboto px-2 py-1`,children:null==(t=e.status)?void 0:t.replace("_"," ")}),o&&canEditProject(o,g)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>(e=>{p(e)})(e),className:"text-[#236383] hover:text-[#236383]/80",children:jsxRuntimeExports.jsx(Pen,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this task?")&&S.mutate(t));var t},className:"text-red-600 hover:text-red-800",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[((null==(r=e.assigneeNames)?void 0:r.length)>0||e.assigneeName)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(User,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:(null==(n=e.assigneeNames)?void 0:n.length)>0?e.assigneeNames.map((e,t)=>jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:e},t)):e.assigneeName?jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:e.assigneeName}):null})]}),e.dueDate&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4"}),new Date(e.dueDate).toLocaleDateString()]}),e.estimatedHours&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4"}),e.estimatedHours,"h estimated"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(MultiUserTaskCompletion,{taskId:e.id,projectId:g.id,assigneeIds:(null==(s=e.assigneeIds)?void 0:s.length)>0?e.assigneeIds:e.assigneeId?[e.assigneeId]:[],assigneeNames:(null==(a=e.assigneeNames)?void 0:a.length)>0?e.assigneeNames:e.assigneeName?[e.assigneeName]:[],currentUserId:null==o?void 0:o.id,currentUserName:(null==o?void 0:o.firstName)||(null==o?void 0:o.displayName),taskStatus:e.status,onStatusChange:t=>{var r,n;queryClient.invalidateQueries({queryKey:["/api/projects",g.id,"tasks"]}),queryClient.invalidateQueries({queryKey:["/api/projects",g.id]});const s=(null==(r=e.assigneeIds)?void 0:r.length)>0?e.assigneeIds:e.assigneeId?[e.assigneeId]:[];(null==(n=e.assigneeNames)?void 0:n.length)>0?e.assigneeNames:!e.assigneeName||e.assigneeName,t&&s.length>0&&!s.includes((null==o?void 0:o.id)||"")&&i({title:" Task Completed!",description:`Team member completed "${e.title}"`})}}),"completed"===e.status&&jsxRuntimeExports.jsxs("div",{className:"flex gap-1 flex-wrap",children:[e.assigneeIds&&e.assigneeIds.length>0&&e.assigneeIds.map((t,r)=>{const n=e.assigneeNames&&e.assigneeNames[r]?e.assigneeNames[r]:`Team Member ${r+1}`;return jsxRuntimeExports.jsx(SendKudosButton,{recipientId:t,recipientName:n,contextType:"task",contextId:e.id.toString(),entityName:e.title,size:"xs"},`${e.id}-new-${t}`)}),(!e.assigneeIds||0===e.assigneeIds.length)&&e.assigneeName&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded border border-orange-200",children:[" Legacy assignment: ",e.assigneeName]})]})]})]})})]},e.id)})})]}),jsxRuntimeExports.jsx(Dialog,{open:c,onOpenChange:u,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Edit Project"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Update project details and assignments"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:e=>{e.preventDefault(),f&&v.mutate(f)},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-title",children:"Title"}),jsxRuntimeExports.jsx(Input,{id:"edit-project-title",value:(null==f?void 0:f.title)||"",onChange:e=>h(t=>t?{...t,title:e.target.value}:null),required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-description",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{id:"edit-project-description",value:(null==f?void 0:f.description)||"",onChange:e=>h(t=>t?{...t,description:e.target.value}:null),rows:3})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-status",children:"Status"}),jsxRuntimeExports.jsxs(Select,{value:(null==f?void 0:f.status)||"",onValueChange:e=>h(t=>t?{...t,status:e}:null),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"available",children:"Available"}),jsxRuntimeExports.jsx(SelectItem,{value:"in_progress",children:"In Progress"}),jsxRuntimeExports.jsx(SelectItem,{value:"waiting",children:"Waiting"}),jsxRuntimeExports.jsx(SelectItem,{value:"completed",children:"Completed"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-priority",children:"Priority"}),jsxRuntimeExports.jsxs(Select,{value:(null==f?void 0:f.priority)||"",onValueChange:e=>h(t=>t?{...t,priority:e}:null),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"low",children:"Low"}),jsxRuntimeExports.jsx(SelectItem,{value:"medium",children:"Medium"}),jsxRuntimeExports.jsx(SelectItem,{value:"high",children:"High"}),jsxRuntimeExports.jsx(SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-category",children:"Category"}),jsxRuntimeExports.jsxs(Select,{value:(null==f?void 0:f.category)||"",onValueChange:e=>h(t=>t?{...t,category:e}:null),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select category"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"technology",children:" Tech"}),jsxRuntimeExports.jsx(SelectItem,{value:"events",children:" Events"}),jsxRuntimeExports.jsx(SelectItem,{value:"grants",children:" Grants"}),jsxRuntimeExports.jsx(SelectItem,{value:"outreach",children:" Outreach"})]})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ProjectAssigneeSelector,{value:(null==f?void 0:f.assigneeName)||"",onChange:(e,t)=>h(r=>r?{...r,assigneeName:e,assigneeIds:(null==t?void 0:t.length)?t:void 0}:null),label:"Assigned To",placeholder:"Select or enter person responsible"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-due-date",children:"Due Date"}),jsxRuntimeExports.jsx(Input,{id:"edit-project-due-date",type:"date",value:(null==f?void 0:f.dueDate)?f.dueDate.split("T")[0]:"",onChange:e=>h(t=>t?{...t,dueDate:e.target.value}:null)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-budget",children:"Budget"}),jsxRuntimeExports.jsx(Input,{id:"edit-project-budget",type:"number",value:(null==f?void 0:f.budget)||"",onChange:e=>h(t=>t?{...t,budget:Number(e.target.value)}:null),placeholder:"0"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-project-estimated-hours",children:"Estimated Hours"}),jsxRuntimeExports.jsx(Input,{id:"edit-project-estimated-hours",type:"number",value:(null==f?void 0:f.estimatedHours)||"",onChange:e=>h(t=>t?{...t,estimatedHours:Number(e.target.value)}:null),placeholder:"0"})]})]}),jsxRuntimeExports.jsxs(DialogFooter,{children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:v.isPending,children:v.isPending?"Updating...":"Update Project"})]})]})]})}),jsxRuntimeExports.jsx(Dialog,{open:!!d,onOpenChange:()=>p(null),children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Edit Task"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Modify task details and assignments"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:e=>{e.preventDefault(),d&&R.mutate({taskId:d.id,taskData:d})},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-task-title",children:"Title"}),jsxRuntimeExports.jsx(Input,{id:"edit-task-title",value:(null==d?void 0:d.title)||"",onChange:e=>p(t=>t?{...t,title:e.target.value}:null),required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-task-description",children:"Description"}),jsxRuntimeExports.jsx(Textarea,{id:"edit-task-description",value:(null==d?void 0:d.description)||"",onChange:e=>p(t=>t?{...t,description:e.target.value}:null),rows:3})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-task-status",children:"Status"}),jsxRuntimeExports.jsxs(Select,{value:(null==d?void 0:d.status)||"",onValueChange:e=>p(t=>t?{...t,status:e}:null),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"available",children:"Available"}),jsxRuntimeExports.jsx(SelectItem,{value:"in_progress",children:"In Progress"}),jsxRuntimeExports.jsx(SelectItem,{value:"waiting",children:"Waiting"}),jsxRuntimeExports.jsx(SelectItem,{value:"completed",children:"Completed"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-task-priority",children:"Priority"}),jsxRuntimeExports.jsxs(Select,{value:(null==d?void 0:d.priority)||"",onValueChange:e=>p(t=>t?{...t,priority:e}:null),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"low",children:"Low"}),jsxRuntimeExports.jsx(SelectItem,{value:"medium",children:"Medium"}),jsxRuntimeExports.jsx(SelectItem,{value:"high",children:"High"}),jsxRuntimeExports.jsx(SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-task-assignee",children:"Assigned To"}),jsxRuntimeExports.jsx(TaskAssigneeSelector,{value:{assigneeIds:(null==d?void 0:d.assigneeIds)||((null==d?void 0:d.assigneeId)?[d.assigneeId]:[]),assigneeNames:(null==d?void 0:d.assigneeNames)||((null==d?void 0:d.assigneeName)?[d.assigneeName]:[])},onChange:({assigneeIds:e,assigneeNames:t})=>p(r=>r?{...r,assigneeIds:e,assigneeNames:t,assigneeId:null==e?void 0:e[0],assigneeName:null==t?void 0:t[0]}:null),multiple:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-task-due-date",children:"Due Date"}),jsxRuntimeExports.jsx(Input,{id:"edit-task-due-date",type:"date",value:(null==d?void 0:d.dueDate)?d.dueDate.split("T")[0]:"",onChange:e=>p(t=>t?{...t,dueDate:e.target.value}:null)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-task-estimated-hours",children:"Estimated Hours"}),jsxRuntimeExports.jsx(Input,{id:"edit-task-estimated-hours",type:"number",value:(null==d?void 0:d.estimatedHours)||"",onChange:e=>p(t=>t?{...t,estimatedHours:Number(e.target.value)}:null),placeholder:"0"})]})]}),jsxRuntimeExports.jsxs(DialogFooter,{children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>p(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:R.isPending,children:R.isPending?"Updating...":"Update Task"})]})]})]})})]})}function ImpactDashboard(){var e,t,r,n,s,i;const{data:o}=useQuery({queryKey:["/api/sandwich-collections"],queryFn:()=>apiRequest("/api/sandwich-collections?limit=10000")}),a=(null==o?void 0:o.collections)||[],{data:l}=useQuery({queryKey:["/api/sandwich-collections/stats"]}),{data:c=[]}=useQuery({queryKey:["/api/hosts"]}),u=(()=>{if(!Array.isArray(a))return[{month:"2023-01",sandwiches:35e3,collections:45,hosts:8},{month:"2023-06",sandwiches:42e3,collections:52,hosts:10},{month:"2023-12",sandwiches:38e3,collections:48,hosts:9},{month:"2024-01",sandwiches:41e3,collections:50,hosts:11},{month:"2024-06",sandwiches:45e3,collections:55,hosts:12},{month:"2024-12",sandwiches:43e3,collections:53,hosts:11},{month:"2025-01",sandwiches:39e3,collections:48,hosts:10},{month:"2025-06",sandwiches:37e3,collections:45,hosts:9}];const e={};return a.forEach(t=>{const r=t.collectionDate;if(r){const n=new Date(r),s=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;e[s]||(e[s]={month:s,sandwiches:0,collections:0,hosts:new Set});const i=t.individualSandwiches||0;let o=0;if(t.groupCollections&&""!==t.groupCollections&&"[]"!==t.groupCollections)try{const e="string"==typeof t.groupCollections?JSON.parse(t.groupCollections):t.groupCollections;Array.isArray(e)&&(o=e.reduce((e,t)=>e+(t.sandwichCount||0),0))}catch(e3){o=0}e[s].sandwiches+=i+o,e[s].collections+=1;const a=t.hostName;a&&e[s].hosts.add(a)}}),Object.values(e).map(e=>({month:e.month,sandwiches:e.sandwiches,collections:e.collections,hosts:e.hosts.size})).sort((e,t)=>e.month.localeCompare(t.month))})();(()=>{if(!Array.isArray(a)||0===a.length)return[{name:"Alpharetta",totalSandwiches:95e3,totalCollections:180,avgPerCollection:528},{name:"Brookhaven",totalSandwiches:78e3,totalCollections:155,avgPerCollection:503},{name:"Buckhead",totalSandwiches:72e3,totalCollections:142,avgPerCollection:507},{name:"Decatur",totalSandwiches:65e3,totalCollections:128,avgPerCollection:508},{name:"Dunwoody",totalSandwiches:58e3,totalCollections:115,avgPerCollection:504},{name:"Johns Creek",totalSandwiches:52e3,totalCollections:98,avgPerCollection:531},{name:"Marietta",totalSandwiches:48e3,totalCollections:92,avgPerCollection:522},{name:"Roswell",totalSandwiches:45e3,totalCollections:89,avgPerCollection:506},{name:"Sandy Springs",totalSandwiches:42e3,totalCollections:82,avgPerCollection:512},{name:"Smyrna",totalSandwiches:38e3,totalCollections:75,avgPerCollection:507}];const e={};a.forEach(t=>{const r=t.hostName||"Unknown";e[r]||(e[r]={name:r,totalSandwiches:0,totalCollections:0,avgPerCollection:0});const n=t.individualSandwiches||0;let s=0;if(t.groupCollections&&""!==t.groupCollections&&"[]"!==t.groupCollections)try{const e="string"==typeof t.groupCollections?JSON.parse(t.groupCollections):t.groupCollections;Array.isArray(e)&&(s=e.reduce((e,t)=>e+(t.sandwichCount||0),0))}catch(e3){s=0}e[r].totalSandwiches+=n+s,e[r].totalCollections+=1}),Object.values(e).map(e=>({...e,avgPerCollection:e.totalCollections>0?Math.round(e.totalSandwiches/e.totalCollections):0})).sort((e,t)=>t.totalSandwiches-e.totalSandwiches).slice(0,10)})();const d={totalSandwiches:(null==l?void 0:l.completeTotalSandwiches)||0,year2023Total:438876,year2024Total:449643,year2025YTD:193674,totalCollections:(null==a?void 0:a.length)||0,uniqueHosts:Array.isArray(c)?c.length:0};return jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4 md:p-6 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Impact Dashboard"}),jsxRuntimeExports.jsx("p",{className:"text-base sm:text-lg text-gray-600",children:"Visualizing our community impact through sandwich collections"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[jsxRuntimeExports.jsxs(Card$1,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-2",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-medium flex items-center",children:[jsxRuntimeExports.jsx(Heart,{className:"w-5 h-5 mr-2"}),"Verified Sandwiches"]})}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold",children:null==(e=d.totalSandwiches)?void 0:e.toLocaleString()}),jsxRuntimeExports.jsx("p",{className:"text-blue-100 text-sm",children:"From collections log database"})]})]}),jsxRuntimeExports.jsxs(Card$1,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-2",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-medium flex items-center",children:[jsxRuntimeExports.jsx(Users,{className:"w-5 h-5 mr-2"}),"Active Hosts"]})}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold",children:d.uniqueHosts}),jsxRuntimeExports.jsx("p",{className:"text-green-100 text-sm",children:"Collection locations"})]})]}),jsxRuntimeExports.jsxs(Card$1,{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white",children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-2",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-medium flex items-center",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 mr-2"}),"2024 Peak Year"]})}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold",children:null==(t=d.year2024Total)?void 0:t.toLocaleString()}),jsxRuntimeExports.jsx("p",{className:"text-teal-100 text-sm",children:"2024 collections total"})]})]}),jsxRuntimeExports.jsxs(Card$1,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-2",children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg font-medium flex items-center",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5 mr-2"}),"2025 Progress"]})}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold",children:null==(r=d.year2025YTD)?void 0:r.toLocaleString()}),jsxRuntimeExports.jsx("p",{className:"text-orange-100 text-sm",children:"Year-to-date total"})]})]})]}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"trends",className:"space-y-4 sm:space-y-6",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-2",children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"trends",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4"}),"Collection Trends"]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"impact",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Activity,{className:"w-4 h-4"}),"Team Impact"]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"trends",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-6",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-5 h-5 mr-2"}),"Monthly Sandwich Collections"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Tracking sandwich collection trends over time"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:300,children:jsxRuntimeExports.jsxs(AreaChart,{data:u,children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"month",tick:{fontSize:12},tickFormatter:e=>e.split("-")[1]+"/"+e.split("-")[0].slice(2)}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:12}}),jsxRuntimeExports.jsx(Tooltip,{labelFormatter:e=>`Month: ${e}`,formatter:(e,t)=>[e,"sandwiches"===t?"Sandwiches":"Collections"]}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"sandwiches",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 mr-2"}),"Weekly Collection Consistency"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Team collection frequency and patterns"})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Weekly Collection Rate"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-green-600",children:"Consistent"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-100 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"88%"}})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Regular weekly collections maintained"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Total Weekly Collections"}),jsxRuntimeExports.jsx("span",{className:"font-bold",children:(null==l?void 0:l.totalEntries)||1809})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Collection entries recorded in system"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Weekly Collection Focus"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Consistent weekly sandwich collection schedule with team coordination across all active collection locations."})]})]})]})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"impact",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-6",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-5 h-5 mr-2"}),"Collection Trends & Context"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Weekly performance and external benchmarks"})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Recent Trend (Last 4 weeks)"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-blue-600",children:"Steady"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-100 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"75%"}})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Consistent weekly collection performance"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Seasonal Context"}),jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Summer Activity"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-100 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"80%"}})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tracking seasonal collection patterns"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Atlanta Hunger Context"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("a",{href:"https://www.atlantaregionalfoodbank.org/impact/",target:"_blank",className:"text-blue-600 text-sm hover:underline block",children:" Atlanta Regional Food Bank Data"}),jsxRuntimeExports.jsx("a",{href:"https://hungerandhealth.feedingamerica.org/understand-food-insecurity/hunger-facts/",target:"_blank",className:"text-blue-600 text-sm hover:underline block",children:" Georgia Food Insecurity Stats"})]})]})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Impact Highlights"}),jsxRuntimeExports.jsx(CardDescription,{children:"Key achievements and milestones"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsx(Heart,{className:"w-5 h-5 text-green-600 mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-green-900",children:"Sandwiches Provided"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-green-700",children:[null==(n=d.totalSandwiches)?void 0:n.toLocaleString()," sandwiches delivered to community members in need"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx(Users,{className:"w-5 h-5 text-blue-600 mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-blue-900",children:"Community Engagement"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-700",children:[d.uniqueHosts," active host locations contributing to the cause"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-teal-50 rounded-lg",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-teal-600 mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-teal-900",children:"Collection Records"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-teal-700",children:[null==(s=d.totalCollections)?void 0:s.toLocaleString()," collection events documented"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-orange-50 rounded-lg",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5 text-orange-600 mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-orange-900",children:"2025 Progress"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-orange-700",children:[null==(i=d.year2025YTD)?void 0:i.toLocaleString()," sandwiches collected year-to-date"]})]})]})]})})]})]})})]})]})})}function useMessaging(){const{toast:e}=useToast(),t=useQueryClient(),{user:r}=useAuth(),[n,s]=reactExports.useState(null),i=e=>e&&"object"==typeof e&&"id"in e&&"email"in e,{data:o={general:0,committee:0,hosts:0,drivers:0,recipients:0,core_team:0,direct:0,groups:0,total:0,suggestion:0,project:0,task:0},refetch:a}=useQuery({queryKey:["/api/message-notifications/unread-counts",i(r)?r.id:null],queryFn:async()=>{if(!i(r))return{general:0,committee:0,hosts:0,drivers:0,recipients:0,core_team:0,direct:0,groups:0,total:0,suggestion:0,project:0,task:0};try{const e=await apiRequest("GET","/api/message-notifications/unread-counts"),t=await apiRequest("GET","/api/messaging/unread?groupByContext=true");return{...e,suggestion:t.suggestion||0,project:t.project||0,task:t.task||0}}catch(e){return console.error("Failed to fetch unread counts:",e),{general:0,committee:0,hosts:0,drivers:0,recipients:0,core_team:0,direct:0,groups:0,total:0,suggestion:0,project:0,task:0}}},enabled:i(r),staleTime:12e4,gcTime:3e5,refetchInterval:12e4}),{data:l=[],refetch:c}=useQuery({queryKey:["/api/messaging/unread",i(r)?r.id:null],queryFn:async()=>{if(!i(r))return[];return(await apiRequest("GET","/api/messaging/unread")).messages||[]},enabled:i(r)}),u=useMutation({mutationFn:async e=>await apiRequest("POST","/api/messaging/send",e),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/messaging"]}),e({description:"Message sent successfully"})},onError:t=>{e({title:"Failed to send message",description:t.message||"Please try again",variant:"destructive"})}}),d=useMutation({mutationFn:async e=>await apiRequest("POST",`/api/messaging/${e}/read`),onSuccess:()=>{a(),c(),t.invalidateQueries({queryKey:["/api/messaging"]})}}),p=useMutation({mutationFn:async e=>await apiRequest("POST","/api/messaging/mark-all-read",{contextType:e}),onSuccess:()=>{a(),c(),t.invalidateQueries({queryKey:["/api/messaging"]}),e({description:"All messages marked as read"})}});reactExports.useEffect(()=>{const e=()=>{console.log("Notification refresh event received in useMessaging hook - refetching counts"),a()};return window.addEventListener("notificationRefresh",e),()=>{window.removeEventListener("notificationRefresh",e)}},[a]),reactExports.useEffect(()=>{if(!i(r))return;const n="https:"===window.location.protocol?"wss:":"ws:";let o,l;try{if(window.location.hostname.includes(".replit.dev")||window.location.hostname.includes(".replit.app"))o=`${n}//${window.location.hostname}/notifications`;else if(window.location.host&&"undefined"!==window.location.host)o=`${n}//${window.location.host}/notifications`;else{const e=window.location.port||"5000";o=`${n}//${window.location.hostname||"localhost"}:${e}/notifications`}}catch(u){console.error("Failed to construct WebSocket URL:",u),o="ws://localhost:5001/notifications"}try{l=new WebSocket(o)}catch(u){return console.error("Failed to create WebSocket connection:",u),()=>{}}return l.onopen=()=>{console.log("Messaging WebSocket connected"),i(r)&&l.send(JSON.stringify({type:"identify",userId:r.id})),s(l)},l.onmessage=r=>{try{const n=JSON.parse(r.data);"new_message"===n.type?(a(),c(),e({title:"New message",description:n.message.sender||"You have a new message"})):"message_edited"!==n.type&&"message_deleted"!==n.type||t.invalidateQueries({queryKey:["/api/messaging"]})}catch(u){console.error("Failed to parse WebSocket message:",u)}},l.onerror=e=>{console.error("Messaging WebSocket error:",e),s(null)},l.onclose=e=>{console.log("Messaging WebSocket disconnected"),s(null),1e3!==e.code&&1001!==e.code&&console.warn("WebSocket closed unexpectedly:",e.code,e.reason)},()=>{l.close()}},[i(r)?r.id:null,a,c,t,e]);const m=reactExports.useCallback(async t=>{if(i(r))return await u.mutateAsync(t);e({title:"Not authenticated",description:"Please log in to send messages",variant:"destructive"})},[i(r)?r.id:null,u,e]),x=reactExports.useCallback(async e=>await d.mutateAsync(e),[d]),f=reactExports.useCallback(async e=>await p.mutateAsync(e),[p]),h=reactExports.useCallback(async(e,t)=>{try{return(await apiRequest("GET",`/api/messaging/context/${e}/${t}`)).messages||[]}catch(r){return console.error("Failed to fetch context messages:",r),[]}},[]);return{unreadCounts:o,unreadMessages:l,totalUnread:o.total+o.suggestion+o.project+o.task,sendMessage:m,markAsRead:x,markAllAsRead:f,getContextMessages:h,refetchUnreadCounts:a,refetchUnreadMessages:c,isConnected:!!n,isSending:u.isPending}}function HelpBubble({content:e,trigger:t="click",className:r="",onDismiss:n}){const[s,i]=reactExports.useState(!1),[o,a]=reactExports.useState(!1),l=reactExports.useRef(null),c=reactExports.useRef(null),u=getCharacterMessage(e);reactExports.useEffect(()=>{if(e.showOnFirstVisit&&!o){localStorage.getItem(`help-${e.id}-seen`)||(i(!0),a(!0),localStorage.setItem(`help-${e.id}-seen`,"true"))}},[e.id,e.showOnFirstVisit,o]),reactExports.useEffect(()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&c.current&&!c.current.contains(e.target)&&i(!1)};if(s)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s]);const d=()=>{i(!1),null==n||n()};return jsxRuntimeExports.jsxs("div",{className:`relative inline-block ${r}`,children:[jsxRuntimeExports.jsx(Button,{ref:c,variant:"ghost",size:"sm",className:"w-8 h-8 p-0 rounded-full text-slate-400 hover:text-teal-600 hover:bg-teal-50 transition-colors",onClick:()=>{"click"===t&&i(!s)},onMouseEnter:()=>{"hover"===t&&i(!0)},onMouseLeave:()=>{"hover"===t&&i(!1)},title:"Get help",children:jsxRuntimeExports.jsx(CircleHelp,{className:"w-4 h-4"})}),s&&jsxRuntimeExports.jsxs("div",{ref:l,className:`absolute z-50 w-80 ${"left"===e.position?"right-full mr-2":"right"===e.position?"left-full ml-2":"top"===e.position?"bottom-full mb-2":"top-full mt-2"} ${"left"===e.position||"right"===e.position?"top-0":"left-1/2 transform -translate-x-1/2"}`,children:[jsxRuntimeExports.jsx(Card$1,{className:`shadow-lg border-0 ${toneStyles[e.tone]}`,children:jsxRuntimeExports.jsxs(CardContent$1,{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:u.emoji}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:e.title}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.character||"guide"})]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-400 hover:text-gray-600",onClick:d,children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:u.fullMessage})}),e.actions&&e.actions.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:e.actions.map((e,t)=>jsxRuntimeExports.jsx(Button,{variant:e.primary?"default":"outline",size:"sm",className:"text-xs",onClick:()=>{e.action(),e.primary&&d()},children:e.label},t))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center mt-3 space-x-2 opacity-60",children:["encouraging"===e.tone&&jsxRuntimeExports.jsx(Heart,{className:"w-3 h-3 text-red-400"}),"supportive"===e.tone&&jsxRuntimeExports.jsx(Coffee,{className:"w-3 h-3 text-amber-400"}),"informative"===e.tone&&jsxRuntimeExports.jsx(Lightbulb,{className:"w-3 h-3 text-yellow-400"})]})]})}),jsxRuntimeExports.jsx("div",{className:"absolute "+("left"===e.position?"right-0 top-3 translate-x-1 border-l-8 border-l-white border-t-4 border-b-4 border-t-transparent border-b-transparent":"right"===e.position?"left-0 top-3 -translate-x-1 border-r-8 border-r-white border-t-4 border-b-4 border-t-transparent border-b-transparent":"top"===e.position?"bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1 border-t-8 border-t-white border-l-4 border-r-4 border-l-transparent border-r-transparent":"top-0 left-1/2 transform -translate-x-1/2 -translate-y-1 border-b-8 border-b-white border-l-4 border-r-4 border-l-transparent border-r-transparent")})]})]})}function SimpleNav({onSectionChange:e,activeSection:t,isCollapsed:r=!1}){const{user:n}=useAuth(),[s]=useLocation(),{unreadCounts:i,totalUnread:o}=useMessaging(),{data:a}=useQuery({queryKey:["/api/auth/user",null==n?void 0:n.id],queryFn:async()=>{if(!n)return null;try{return await apiRequest("GET","/api/auth/user")}catch(e){return console.error("Failed to fetch user data:",e),null}},enabled:!!n,staleTime:3e5}),{data:l=0}=useQuery({queryKey:["/api/emails/unread-count",(null==a?void 0:a.id)||"no-user"],queryFn:async()=>{if(!(null==a?void 0:a.id))return 0;try{return(await apiRequest("GET","/api/emails/unread-count")).count||0}catch(e){return console.error("Failed to fetch Gmail unread count:",e),0}},enabled:!!(null==a?void 0:a.id),refetchInterval:3e4}),c=[{id:"dashboard",label:"Dashboard",icon:LayoutDashboard,href:"dashboard"},...hasPermission(a,PERMISSIONS.VIEW_PROJECTS)?[{id:"projects",label:"Projects",icon:ClipboardList,href:"projects"}]:[],{id:"collections",label:"Collections Log",customIcon:squareSandwichLogo,href:"collections"},{id:"gmail-inbox",label:"Inbox",icon:Inbox$1,href:"gmail-inbox",group:"communication"},{id:"chat",label:"Team Chat",icon:Hash$2,href:"chat",group:"communication"},...hasPermission(a,PERMISSIONS.VIEW_SUGGESTIONS)?[{id:"suggestions",label:"Suggestions",icon:Lightbulb,href:"suggestions",group:"communication"}]:[],...hasPermission(a,PERMISSIONS.ACCESS_WORK_LOGS)?[{id:"work-log",label:"Work Log",icon:ListTodo,href:"work-log",group:"workflow"}]:[],{id:"toolkit",label:"Toolkit",icon:FolderOpen,href:"toolkit",group:"workflow"},...hasPermission(a,PERMISSIONS.ADMIN_ACCESS)?[{id:"admin",label:"Important Documents",icon:FileText,href:"admin",group:"workflow"}]:[],...hasPermission(a,PERMISSIONS.VIEW_GOVERNANCE)?[{id:"governance",label:"Governance",icon:Scale,href:"governance",group:"workflow"}]:[],...hasPermission(a,PERMISSIONS.VIEW_MEETINGS)?[{id:"meetings",label:"Meetings",icon:ClipboardList,href:"meetings",group:"workflow"}]:[],{id:"phone-directory",label:"Directory",icon:Phone,href:"phone-directory",group:"people"},...hasPermission(a,PERMISSIONS.VIEW_HOSTS)?[{id:"hosts",label:"Hosts",icon:Building2,href:"hosts",group:"people"}]:[],...hasPermission(a,PERMISSIONS.VIEW_DRIVERS)?[{id:"drivers",label:"Drivers",icon:Car,href:"drivers",group:"people"}]:[],...hasPermission(a,PERMISSIONS.VIEW_RECIPIENTS)?[{id:"recipients",label:"Recipients",icon:Users,href:"recipients",group:"people"}]:[],...hasPermission(a,PERMISSIONS.VIEW_ANALYTICS)?[{id:"analytics",label:"Analytics",icon:ChartColumn,href:"analytics",group:"data"}]:[],...hasPermission(a,PERMISSIONS.VIEW_REPORTS)?[{id:"reports",label:"Reports",icon:FileText,href:"reports",group:"data"}]:[],...hasPermission(a,PERMISSIONS.VIEW_SANDWICH_DATA)?[{id:"google-sheets",label:"Sandwich Data",icon:Sheet,href:"google-sheets",group:"data"}]:[],...hasPermission(a,PERMISSIONS.MANAGE_USERS)?[{id:"user-management",label:"User Management",icon:Settings,href:"user-management",group:"admin"}]:[]],u=c.reduce((e,t,r)=>{const n=c[r-1];return n&&n.group!==t.group&&t.group&&e.push({type:"separator",group:t.group}),e.push({type:"item",...t}),e},[]);return jsxRuntimeExports.jsxs("nav",{className:`space-y-1 ${r?"p-2":"p-3 sm:p-4"} pb-6 sm:pb-8`,children:[!r&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between pb-3 border-b border-slate-200",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Navigation"}),jsxRuntimeExports.jsx(HelpBubble,{content:{id:"navigation-help",title:"Finding Your Way Around",message:"Think of this sidebar as your map to everything TSP! Each section is designed to help you contribute in your own unique way. Take your time exploring - there's no rush.",tone:"informative",character:"guide",position:"right"},trigger:"click"})]}),u.map((n,a)=>{if("separator"===n.type)return r?null:jsxRuntimeExports.jsx("div",{className:"pt-3 sm:pt-4 pb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center text-xs font-medium text-slate-500 uppercase tracking-wider",children:[jsxRuntimeExports.jsx("div",{className:"h-px bg-slate-200 flex-1 mr-2 sm:mr-3"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] sm:text-xs",children:(c=n.group,{communication:"COMMUNICATION",workflow:"WORKFLOW",people:"PEOPLE",data:"DATA",admin:"ADMIN"}[c]||c)})]})},`sep-${a}`);var c;const u=(d=n.href,t?"dashboard"===d?"dashboard"===t||""===t:t===d:"dashboard"===d?"/"===s||"/dashboard"===s:s===`/${d}`);var d;let p=0;return"gmail-inbox"===n.id?p=l:"messages"===n.id?p=o:"chat"===n.id?p=i.general:"committee-chat"===n.id?p=i.committee:"suggestions"===n.id&&i.suggestion&&(p=i.suggestion),jsxRuntimeExports.jsxs(Button,{variant:u?"default":"ghost",className:`\n              w-full ${r?"justify-center px-2":"justify-start px-2 sm:px-3"} text-left h-10 sm:h-11 touch-manipulation relative\n              ${u?"bg-[#236383] hover:bg-[#1d5470] text-white shadow-sm border-l-4 border-l-orange-500":"hover:bg-slate-100 text-slate-700"}\n            `,onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("Navigation click:",n.href),e(n.href)},title:r?n.label:void 0,children:[n.customIcon?jsxRuntimeExports.jsx("img",{src:n.customIcon,alt:n.label,className:"h-4 w-4 flex-shrink-0 "+(r?"":"mr-2 sm:mr-3")}):jsxRuntimeExports.jsx(n.icon,{className:"h-4 w-4 flex-shrink-0 "+(r?"":"mr-2 sm:mr-3")}),!r&&jsxRuntimeExports.jsx("span",{className:"truncate flex-1 text-xs sm:text-sm",children:n.label}),p>0&&jsxRuntimeExports.jsx(Badge,{variant:u?"secondary":"destructive",className:(r?"absolute -top-1 -right-1 h-4 w-4 p-0 text-xs":"ml-auto h-4 sm:h-5 px-1 sm:px-1.5 min-w-[16px] sm:min-w-[20px] text-xs")+" flex items-center justify-center",children:p>99?"99+":p})]},n.id)})]})}function ReportingDashboard({isEmbedded:e=!1}){const{toast:t}=useToast(),[r,n]=reactExports.useState({type:"collections",dateRange:{start:format$1(subMonths(new Date,1),"yyyy-MM-dd"),end:format$1(new Date,"yyyy-MM-dd")},format:"csv",includeCharts:!0,groupBy:"month"}),[s,i]=reactExports.useState({frequency:"weekly",time:"09:00",recipients:[""]}),{data:o=[],refetch:a}=useQuery({queryKey:["/api/reports/scheduled"],retry:!1}),{data:l=[]}=useQuery({queryKey:["/api/reports/recent"],retry:!1}),c=useMutation({mutationFn:async e=>{const t=await apiRequest("POST","/api/reports/generate",e);return await t.json()},onSuccess:e=>{t({title:"Report Generated",description:"Your report has been generated successfully."});const n=`/api/reports/download/${e.id}`,s=document.createElement("a");s.href=n,s.download=`${e.metadata.title}-${format$1(new Date,"yyyy-MM-dd")}.${r.format}`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},onError:e=>{t({title:"Generation Failed",description:e.message,variant:"destructive"})}}),u=useMutation({mutationFn:async()=>{const e=await apiRequest("POST","/api/reports/schedule",{config:r,schedule:s});return await e.json()},onSuccess:()=>{t({title:"Report Scheduled",description:"Your automated report has been scheduled successfully."}),a()},onError:e=>{t({title:"Scheduling Failed",description:e.message,variant:"destructive"})}}),d=e=>{const t=new Date;let s;switch(e){case"last7days":s=subDays(t,7);break;case"last30days":s=subDays(t,30);break;case"last3months":s=subMonths(t,3);break;case"last6months":s=subMonths(t,6);break;case"lastyear":s=subMonths(t,12);break;default:return}n({...r,dateRange:{start:format$1(s,"yyyy-MM-dd"),end:format$1(t,"yyyy-MM-dd")}})},p=()=>{i({...s,recipients:[...s.recipients,""]})},m=()=>jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 sm:mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Reporting Dashboard"}),jsxRuntimeExports.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-2",children:"Generate comprehensive reports and schedule automated deliveries"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"h-10 text-sm",children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Templates"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Temp"})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"h-10 text-sm",children:[jsxRuntimeExports.jsx(Settings,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Settings"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Set"})]})]})]}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"generate",className:"space-y-6",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-3",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"generate",children:"Generate Report"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"scheduled",children:"Scheduled Reports"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"history",children:"Report History"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"generate",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Report Configuration"}),jsxRuntimeExports.jsx(CardDescription,{children:"Configure your report parameters and data selection"})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"reportType",children:"Report Type"}),jsxRuntimeExports.jsxs(Select,{value:r.type,onValueChange:e=>n({...r,type:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"collections",children:"Collection Analysis"}),jsxRuntimeExports.jsx(SelectItem,{value:"hosts",children:"Host Performance"}),jsxRuntimeExports.jsx(SelectItem,{value:"impact",children:"Impact Assessment"}),jsxRuntimeExports.jsx(SelectItem,{value:"comprehensive",children:"Comprehensive Report"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(Label$1,{children:"Date Range"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"startDate",className:"text-sm",children:"From"}),jsxRuntimeExports.jsx(Input,{id:"startDate",type:"date",value:r.dateRange.start,onChange:e=>n({...r,dateRange:{...r.dateRange,start:e.target.value}})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"endDate",className:"text-sm",children:"To"}),jsxRuntimeExports.jsx(Input,{id:"endDate",type:"date",value:r.dateRange.end,onChange:e=>n({...r,dateRange:{...r.dateRange,end:e.target.value}})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>d("last7days"),children:"Last 7 Days"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>d("last30days"),children:"Last 30 Days"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>d("last3months"),children:"Last 3 Months"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>d("last6months"),children:"Last 6 Months"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>d("lastyear"),children:"Last Year"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"format",children:"Output Format"}),jsxRuntimeExports.jsxs(Select,{value:r.format,onValueChange:e=>n({...r,format:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"pdf",children:"PDF Document"}),jsxRuntimeExports.jsx(SelectItem,{value:"csv",children:"CSV Spreadsheet"}),jsxRuntimeExports.jsx(SelectItem,{value:"json",children:"JSON Data"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"groupBy",children:"Group Data By"}),jsxRuntimeExports.jsxs(Select,{value:r.groupBy,onValueChange:e=>n({...r,groupBy:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"week",children:"Week"}),jsxRuntimeExports.jsx(SelectItem,{value:"month",children:"Month"}),jsxRuntimeExports.jsx(SelectItem,{value:"host",children:"Host"}),jsxRuntimeExports.jsx(SelectItem,{value:"project",children:"Project"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"includeCharts",children:"Include Charts & Visualizations"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Add visual charts and graphs to your report"})]}),jsxRuntimeExports.jsx(Switch,{id:"includeCharts",checked:r.includeCharts,onCheckedChange:e=>n({...r,includeCharts:e})})]})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Schedule Automation"}),jsxRuntimeExports.jsx(CardDescription,{children:"Set up automated report generation and email delivery"})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"frequency",children:"Frequency"}),jsxRuntimeExports.jsxs(Select,{value:s.frequency,onValueChange:e=>i({...s,frequency:e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"daily",children:"Daily"}),jsxRuntimeExports.jsx(SelectItem,{value:"weekly",children:"Weekly"}),jsxRuntimeExports.jsx(SelectItem,{value:"monthly",children:"Monthly"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"time",children:"Delivery Time"}),jsxRuntimeExports.jsx(Input,{id:"time",type:"time",value:s.time,onChange:e=>i({...s,time:e.target.value})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(Label$1,{children:"Email Recipients"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:p,children:"Add Recipient"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:s.recipients.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Input,{type:"email",placeholder:"email@example.com",value:e,onChange:e=>((e,t)=>{const r=[...s.recipients];r[e]=t,i({...s,recipients:r})})(t,e.target.value)}),s.recipients.length>1&&jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>(e=>{i({...s,recipients:s.recipients.filter((t,r)=>r!==e)})})(t),children:"Remove"})]},t))})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Report Preview"}),jsxRuntimeExports.jsx(CardDescription,{children:"Summary of your report configuration"})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Type:"}),jsxRuntimeExports.jsxs(Badge,{variant:"secondary",children:["collections"===r.type&&"Collection Analysis","hosts"===r.type&&"Host Performance","impact"===r.type&&"Impact Assessment","comprehensive"===r.type&&"Comprehensive"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Period:"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[format$1(new Date(r.dateRange.start),"MMM dd")," - ",format$1(new Date(r.dateRange.end),"MMM dd, yyyy")]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Format:"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 uppercase",children:r.format})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Charts:"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:r.includeCharts?"Included":"Not included"})]})]}),r.includeCharts&&jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium mb-2",children:"Chart Types:"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-3 h-3"}),"Bar Charts"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[jsxRuntimeExports.jsx(ChartLine,{className:"w-3 h-3"}),"Trend Lines"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[jsxRuntimeExports.jsx(ChartPie,{className:"w-3 h-3"}),"Distribution"]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs(Button,{className:"w-full",onClick:()=>c.mutate(r),disabled:c.isPending,children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),c.isPending?"Generating...":"Generate Report"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"w-full",onClick:()=>u.mutate(),disabled:u.isPending||s.recipients.some(e=>!e.trim()),children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-2"}),u.isPending?"Scheduling...":"Schedule Report"]})]}),s.recipients.some(e=>!e.trim())&&jsxRuntimeExports.jsx(Alert,{children:jsxRuntimeExports.jsx(AlertDescription,{children:"Please add at least one valid email recipient to schedule the report."})})]})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"scheduled",children:jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Scheduled Reports"}),jsxRuntimeExports.jsx(CardDescription,{children:"Manage your automated report schedules"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:0===o.length?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Scheduled Reports"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"You haven't set up any automated reports yet. Create one from the Generate tab."})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:o.map(e=>jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"font-medium",children:["collections"===e.config.type&&"Collection Analysis","hosts"===e.config.type&&"Host Performance","impact"===e.config.type&&"Impact Assessment","comprehensive"===e.config.type&&"Comprehensive Report"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:[e.schedule.frequency," at ",e.schedule.time,"  Next: ",format$1(new Date(e.nextRun),"MMM dd, yyyy HH:mm")]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:[e.schedule.recipients.length," recipient(s)"]}),jsxRuntimeExports.jsx(Badge,{variant:"active"===e.status?"default":"secondary",children:e.status})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",children:"Edit"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",children:"active"===e.status?"Pause":"Resume"})]})]})},e.id))})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"history",children:jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Report History"}),jsxRuntimeExports.jsx(CardDescription,{children:"View and download previously generated reports"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:0===l.length?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(FileText,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Report History"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Generated reports will appear here for easy access and download."})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:l.map(e=>jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:e.title}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["Generated ",format$1(new Date(e.generatedAt),"MMM dd, yyyy HH:mm")]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:[e.format.toUpperCase(),"  ",e.size]}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:e.dateRange})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 mr-2"}),"Download"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Mail,{className:"w-4 h-4 mr-2"}),"Share"]})]})]})},e.id))})})]})})]})]});return e?m():jsxRuntimeExports.jsxs("div",{className:"bg-slate-50 min-h-screen flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"bg-white border-b border-slate-200 px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("img",{src:"/api/placeholder/32/32",alt:"Logo",className:"w-8 h-8"}),jsxRuntimeExports.jsx("span",{className:"text-xl font-semibold text-slate-900",children:"The Sandwich Project"})]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",children:[jsxRuntimeExports.jsx(LogOut,{className:"w-4 h-4 mr-2"}),"Logout"]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-1",children:[jsxRuntimeExports.jsx("div",{className:"w-64 bg-white border-r border-slate-200 flex flex-col",children:jsxRuntimeExports.jsx(SimpleNav,{onSectionChange:()=>{}})}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-6",children:m()})]})]})}function AnnouncementManager(){const{toast:e}=useToast(),[t,r]=reactExports.useState(!1),[n,s]=reactExports.useState(null),[i,o]=reactExports.useState({title:"",message:"",type:"general",priority:"medium",startDate:(new Date).toISOString().split("T")[0],endDate:"",isActive:!0,link:"",linkText:""}),{data:a=[],isLoading:l}=useQuery({queryKey:["/api/announcements"]}),c=useMutation({mutationFn:e=>{var t,r;return apiRequest("POST","/api/announcements",{...e,startDate:new Date(e.startDate).toISOString(),endDate:new Date(e.endDate).toISOString(),link:(null==(t=e.link)?void 0:t.trim())||void 0,linkText:(null==(r=e.linkText)?void 0:r.trim())||void 0})},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/announcements"]}),r(!1),p(),e({title:"Announcement created!",description:"The announcement has been added successfully."})},onError:()=>{e({title:"Error",description:"Failed to create announcement. Please try again.",variant:"destructive"})}}),u=useMutation({mutationFn:({id:e,data:t})=>{var r,n;const s={...t};return t.startDate&&(s.startDate=new Date(t.startDate).toISOString()),t.endDate&&(s.endDate=new Date(t.endDate).toISOString()),"link"in t&&(s.link=(null==(r=t.link)?void 0:r.trim())||void 0),"linkText"in t&&(s.linkText=(null==(n=t.linkText)?void 0:n.trim())||void 0),apiRequest("PATCH",`/api/announcements/${e}`,s)},onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/announcements"]}),s(null),e({title:"Announcement updated!",description:"The announcement has been updated successfully."})},onError:()=>{e({title:"Error",description:"Failed to update announcement. Please try again.",variant:"destructive"})}}),d=useMutation({mutationFn:e=>apiRequest("DELETE",`/api/announcements/${e}`),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/announcements"]}),e({title:"Announcement deleted!",description:"The announcement has been removed successfully."})},onError:()=>{e({title:"Error",description:"Failed to delete announcement. Please try again.",variant:"destructive"})}}),p=()=>{o({title:"",message:"",type:"general",priority:"medium",startDate:(new Date).toISOString().split("T")[0],endDate:"",isActive:!0,link:"",linkText:""})},m=e=>{switch(e){case"event":return jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4"});case"position":return jsxRuntimeExports.jsx(Users,{className:"w-4 h-4"});default:return jsxRuntimeExports.jsx(CircleAlert,{className:"w-4 h-4"})}},x=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},f=e=>{if(!e.isActive)return!1;const t=new Date,r=new Date(e.startDate),n=new Date(e.endDate);return t>=r&&t<=n};return l?jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:"Loading announcements..."}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Announcement Manager"}),jsxRuntimeExports.jsx("p",{className:"text-slate-600 mt-1",children:"Manage website banners for events and position openings"})]}),jsxRuntimeExports.jsxs(Dialog,{open:t,onOpenChange:r,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"New Announcement"]})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Create New Announcement"})}),jsxRuntimeExports.jsxs("form",{onSubmit:t=>{t.preventDefault(),i.title.trim()&&i.message.trim()?c.mutate(i):e({title:"Error",description:"Title and message are required.",variant:"destructive"})},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"title",children:"Title *"}),jsxRuntimeExports.jsx(Input,{id:"title",value:i.title,onChange:e=>o(t=>({...t,title:e.target.value})),placeholder:"Announcement title",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"message",children:"Message *"}),jsxRuntimeExports.jsx(Textarea,{id:"message",value:i.message,onChange:e=>o(t=>({...t,message:e.target.value})),placeholder:"Announcement message",required:!0,rows:3})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"type",children:"Type"}),jsxRuntimeExports.jsxs(Select,{value:i.type,onValueChange:e=>o(t=>({...t,type:e})),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"general",children:"General"}),jsxRuntimeExports.jsx(SelectItem,{value:"event",children:"Event"}),jsxRuntimeExports.jsx(SelectItem,{value:"position",children:"Position Opening"}),jsxRuntimeExports.jsx(SelectItem,{value:"alert",children:"Alert"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"priority",children:"Priority"}),jsxRuntimeExports.jsxs(Select,{value:i.priority,onValueChange:e=>o(t=>({...t,priority:e})),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"low",children:"Low"}),jsxRuntimeExports.jsx(SelectItem,{value:"medium",children:"Medium"}),jsxRuntimeExports.jsx(SelectItem,{value:"high",children:"High"}),jsxRuntimeExports.jsx(SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"startDate",children:"Start Date"}),jsxRuntimeExports.jsx(Input,{id:"startDate",type:"date",value:i.startDate,onChange:e=>o(t=>({...t,startDate:e.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"endDate",children:"End Date"}),jsxRuntimeExports.jsx(Input,{id:"endDate",type:"date",value:i.endDate,onChange:e=>o(t=>({...t,endDate:e.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"link",children:"Link (optional)"}),jsxRuntimeExports.jsx(Input,{id:"link",value:i.link,onChange:e=>o(t=>({...t,link:e.target.value})),placeholder:"https://..."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"linkText",children:"Link Text"}),jsxRuntimeExports.jsx(Input,{id:"linkText",value:i.linkText,onChange:e=>o(t=>({...t,linkText:e.target.value})),placeholder:"Learn More"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:c.isPending,children:c.isPending?"Creating...":"Create Announcement"})]})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-4",children:0===a.length?jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsxs(CardContent$1,{className:"text-center py-8",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No announcements"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500",children:"Create your first announcement to get started."})]})}):a.map(e=>jsxRuntimeExports.jsxs(Card$1,{className:""+(f(e)?"ring-2 ring-blue-500":""),children:[jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[m(e.type),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:e.title}),jsxRuntimeExports.jsx(CardDescription,{className:"mt-1",children:e.message})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Badge,{className:x(e.priority),children:e.priority}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:f(e)?jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4 text-green-600"}):jsxRuntimeExports.jsx(EyeOff,{className:"w-4 h-4 text-slate-400"})})]})]})}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-slate-600",children:[jsxRuntimeExports.jsxs("div",{children:["Start: ",new Date(e.startDate).toLocaleDateString()]}),jsxRuntimeExports.jsxs("div",{children:["End: ",new Date(e.endDate).toLocaleDateString()]}),e.link&&jsxRuntimeExports.jsxs("div",{children:["Link: ",jsxRuntimeExports.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:e.linkText||"View"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Switch,{checked:e.isActive,onCheckedChange:t=>{return r=e.id,n=t,void u.mutate({id:r,data:{isActive:n}});var r,n}}),jsxRuntimeExports.jsx(Label$1,{className:"text-sm",children:"Active"})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>(e=>{s({...e,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0]})})(e),children:jsxRuntimeExports.jsx(SquarePen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>d.mutate(e.id),className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})]})})]},e.id))}),jsxRuntimeExports.jsx(Dialog,{open:!!n,onOpenChange:e=>!e&&s(null),children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Edit Announcement"})}),n&&jsxRuntimeExports.jsxs("form",{onSubmit:e=>{e.preventDefault(),n&&u.mutate({id:n.id,data:n})},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-title",children:"Title *"}),jsxRuntimeExports.jsx(Input,{id:"edit-title",value:n.title,onChange:e=>s(t=>t?{...t,title:e.target.value}:null),required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-message",children:"Message *"}),jsxRuntimeExports.jsx(Textarea,{id:"edit-message",value:n.message,onChange:e=>s(t=>t?{...t,message:e.target.value}:null),required:!0,rows:3})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-type",children:"Type"}),jsxRuntimeExports.jsxs(Select,{value:n.type,onValueChange:e=>s(t=>t?{...t,type:e}:null),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"general",children:"General"}),jsxRuntimeExports.jsx(SelectItem,{value:"event",children:"Event"}),jsxRuntimeExports.jsx(SelectItem,{value:"position",children:"Position Opening"}),jsxRuntimeExports.jsx(SelectItem,{value:"alert",children:"Alert"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-priority",children:"Priority"}),jsxRuntimeExports.jsxs(Select,{value:n.priority,onValueChange:e=>s(t=>t?{...t,priority:e}:null),children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"low",children:"Low"}),jsxRuntimeExports.jsx(SelectItem,{value:"medium",children:"Medium"}),jsxRuntimeExports.jsx(SelectItem,{value:"high",children:"High"}),jsxRuntimeExports.jsx(SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-startDate",children:"Start Date"}),jsxRuntimeExports.jsx(Input,{id:"edit-startDate",type:"date",value:n.startDate,onChange:e=>s(t=>t?{...t,startDate:e.target.value}:null)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-endDate",children:"End Date"}),jsxRuntimeExports.jsx(Input,{id:"edit-endDate",type:"date",value:n.endDate,onChange:e=>s(t=>t?{...t,endDate:e.target.value}:null)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-link",children:"Link (optional)"}),jsxRuntimeExports.jsx(Input,{id:"edit-link",value:n.link||"",onChange:e=>s(t=>t?{...t,link:e.target.value}:null),placeholder:"https://..."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"edit-linkText",children:"Link Text"}),jsxRuntimeExports.jsx(Input,{id:"edit-linkText",value:n.linkText||"",onChange:e=>s(t=>t?{...t,linkText:e.target.value}:null),placeholder:"Learn More"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>s(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:u.isPending,children:u.isPending?"Updating...":"Update Announcement"})]})]})]})})]})}function AuthDebug(){const[e,t]=reactExports.useState(null),[r,n]=reactExports.useState(null),[s,i]=reactExports.useState(!1),[o,a]=reactExports.useState(null),l=async()=>{i(!0),a(null);try{const[e,r]=await Promise.all([fetch("/api/debug/session"),fetch("/api/debug/auth-status")]);if(e.ok){const r=await e.json();t(r)}if(r.ok){const e=await r.json();n(e)}}catch(e){a("Failed to fetch debug information"),console.error("Debug fetch error:",e)}finally{i(!1)}};reactExports.useEffect(()=>{l()},[]);const c=e=>e?jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4 text-green-600"}):jsxRuntimeExports.jsx(CircleX,{className:"h-4 w-4 text-red-600"}),u=(e,t,r)=>jsxRuntimeExports.jsx(Badge,{variant:e?"default":"destructive",children:e?t:r});return jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-5 w-5"}),"Authentication Debug Panel"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Debug authentication issues and session status"})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"flex gap-2 mb-4",children:jsxRuntimeExports.jsxs(Button,{onClick:l,disabled:s,children:[jsxRuntimeExports.jsx(RefreshCw,{className:"h-4 w-4 mr-2 "+(s?"animate-spin":"")}),"Refresh Debug Info"]})}),o&&jsxRuntimeExports.jsxs(Alert,{className:"mb-4",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-4 w-4"}),jsxRuntimeExports.jsx(AlertDescription,{children:o})]}),r&&jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Authentication Status"})}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Authenticated:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[c(r.isAuthenticated),u(r.isAuthenticated,"Yes","No")]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Session Exists:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[c(r.sessionExists),u(r.sessionExists,"Yes","No")]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"User in Session:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[c(r.userInSession),u(r.userInSession,"Yes","No")]})]}),r.userEmail&&jsxRuntimeExports.jsxs("div",{className:"pt-2 border-t",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["User: ",r.userEmail]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["Role: ",r.userRole]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["ID: ",r.userId]})]})]})]}),e&&jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Session Details"})}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Session Store:"}),u(e.sessionStore,"PostgreSQL","None")]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Environment:"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:e.environment})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm space-y-1",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Session ID:"})," ",e.sessionId]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Timestamp:"})," ",new Date(e.timestamp).toLocaleString()]})]}),e.cookies&&jsxRuntimeExports.jsx("div",{className:"pt-2 border-t",children:jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("strong",{children:"Cookies:"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 break-all",children:e.cookies})]})})]})]})]}),r&&!r.isAuthenticated&&jsxRuntimeExports.jsxs(Alert,{className:"mt-4",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-4 w-4"}),jsxRuntimeExports.jsxs(AlertDescription,{children:["User is not authenticated. Try logging in again or check if cookies are being blocked.",jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(Button,{size:"sm",onClick:()=>window.location.href="/api/login",children:"Go to Login Page"})})]})]})]})]})})}function getCardColorForType(e){switch(e){case"content":return"border-blue-200 bg-blue-50/50";case"directory":return"border-green-200 bg-green-50/50";case"communication":return"border-purple-200 bg-purple-50/50";case"navigation":return"border-orange-200 bg-orange-50/50";case"system":return"border-red-200 bg-red-50/50";case"operations":return"border-indigo-200 bg-indigo-50/50";default:return"border-gray-200 bg-gray-50/50"}}function getIconForType(e){switch(e){case"content":return jsxRuntimeExports.jsx(Database,{className:"h-4 w-4 text-blue-600"});case"directory":return jsxRuntimeExports.jsx(Phone,{className:"h-4 w-4 text-green-600"});case"communication":return jsxRuntimeExports.jsx(MessageCircle,{className:"h-4 w-4 text-purple-600"});case"navigation":return jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4 text-orange-600"});case"system":return jsxRuntimeExports.jsx(Shield,{className:"h-4 w-4 text-red-600"});case"operations":return jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 text-indigo-600"});default:return jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 text-gray-600"})}}function SimplePermissionsDialog({user:e,open:t,onOpenChange:r,onSave:n}){const[s,i]=reactExports.useState(""),[o,a]=reactExports.useState([]);reactExports.useEffect(()=>{e&&t&&(i(e.role),a(e.permissions||[]))},[e,t]);const l=e=>o.includes(e),c=e=>{const t=e.permissions.map(e=>e.key),r=t.filter(e=>o.includes(e)).length;return 0===r?"none":r===t.length?"all":"partial"},u=e=>{switch(e){case"all":return jsxRuntimeExports.jsx(SquareCheckBig,{className:"h-4 w-4"});case"partial":return jsxRuntimeExports.jsx(Minus,{className:"h-4 w-4"});default:return jsxRuntimeExports.jsx(Square,{className:"h-4 w-4"})}};return e?jsxRuntimeExports.jsx(Dialog,{open:t,onOpenChange:r,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsxs(DialogTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Shield,{className:"h-5 w-5"}),"Edit Permissions: ",e.firstName," ",e.lastName]}),jsxRuntimeExports.jsx(DialogDescription,{children:"Control which sections of the application this user can access. Choose a role preset or customize individual permissions."})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"role",children:"User Role"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{const e=[PERMISSIONS.ACCESS_DIRECTORY,PERMISSIONS.ACCESS_COLLECTIONS,PERMISSIONS.ACCESS_HOSTS,PERMISSIONS.ACCESS_RECIPIENTS,PERMISSIONS.ACCESS_DRIVERS,PERMISSIONS.ACCESS_PROJECTS,PERMISSIONS.ACCESS_TOOLKIT,PERMISSIONS.ACCESS_SANDWICH_DATA,PERMISSIONS.GENERAL_CHAT];a(e)},className:"text-xs",children:"Viewer Preset"})})]}),jsxRuntimeExports.jsxs(Select,{value:s,onValueChange:e=>{i(e);const t=getDefaultPermissionsForRole(e);a(t)},children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select a role"})}),jsxRuntimeExports.jsx(SelectContent,{children:Object.values(USER_ROLES).map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e,children:getRoleDisplayName(e)},e))})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Use role presets for quick setup, or choose permission presets above for common configurations."})]}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:PERMISSION_GROUPS.map(e=>jsxRuntimeExports.jsxs(Card$1,{className:`${getCardColorForType(e.type)}`,children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"pb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-base flex items-center gap-2",children:[getIconForType(e.type),e.label]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:()=>(e=>{const t=e.permissions.map(e=>e.key);if("all"===c(e))a(o.filter(e=>!t.includes(e)));else{const e=[...o];t.forEach(t=>{e.includes(t)||e.push(t)}),a(e)}})(e),className:"h-8 px-2 text-xs",title:`Select all ${e.label.toLowerCase()}`,children:[u(c(e)),jsxRuntimeExports.jsx("span",{className:"ml-1 hidden sm:inline",children:"all"===c(e)?"Deselect All":"Select All"})]})]}),jsxRuntimeExports.jsx(CardDescription,{className:"text-sm",children:e.description})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.permissions.map(e=>{const t=e.icon;return jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-accent transition-colors",children:[jsxRuntimeExports.jsx(Checkbox,{id:e.key,checked:l(e.key),onCheckedChange:t=>((e,t)=>{a(t?[...o,e]:o.filter(t=>t!==e))})(e.key,t),className:"mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(t,{className:"h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx(Label$1,{htmlFor:e.key,className:"text-sm font-medium cursor-pointer",children:e.label})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description})]})]},e.key)})})})]},e.id))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Badge,{variant:"secondary",children:[o.length," permissions selected"]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground",children:["Role: ",getRoleDisplayName(s)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>a([]),disabled:0===o.length,children:"Clear All"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{const e=PERMISSION_GROUPS.flatMap(e=>e.permissions.map(e=>e.key));a(e)},disabled:o.length===Object.values(PERMISSIONS).length,children:"Select All"})]})]})]}),jsxRuntimeExports.jsxs(DialogFooter,{className:"flex-shrink-0 mt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{e&&(n(e.id,s,o),r(!1))},children:"Save Changes"})]})]})}):null}function isValidOrientation(e){return ORIENTATIONS.includes(e)}function ShoutoutSystem(){const{toast:e}=useToast(),t=useQueryClient(),[r,n]=reactExports.useState(null),[s,i]=reactExports.useState(""),[o,a]=reactExports.useState(""),[l,c]=reactExports.useState("all"),{data:u}=useQuery({queryKey:["/api/users"],staleTime:3e5}),{data:d}=useQuery({queryKey:["/api/shoutouts/history"],staleTime:6e4}),p=useMutation({mutationFn:async e=>apiRequest("POST","/api/shoutouts/send",e),onSuccess:()=>{e({title:"Shoutout sent successfully!",description:"Your message has been delivered to the selected recipients."}),t.invalidateQueries({queryKey:["/api/shoutouts/history"]}),n(null),i(""),a(""),c("all")},onError:t=>{e({variant:"destructive",title:"Failed to send shoutout",description:t.message||"Please try again later."})}}),m=useMutation({mutationFn:async()=>apiRequest("POST","/api/shoutouts/test",{}),onSuccess:t=>{var r;const n=(null==(r=t.results)?void 0:r.filter(e=>"success"===e.status))||[];n.length>0?e({title:"SendGrid test successful!",description:`Working sender addresses found: ${n.map(e=>e.from).join(", ")}`}):e({variant:"destructive",title:"SendGrid test failed",description:"No working sender addresses found. Check SendGrid configuration."})},onError:t=>{e({variant:"destructive",title:"SendGrid test failed",description:t.message||"Unable to test SendGrid configuration."})}}),x=()=>{if(!u)return 0;switch(l){case"all":return u.length;case"admins":return u.filter(e=>"admin"===e.role).length;case"super_admins":return u.filter(e=>"super_admin"===e.role).length;case"hosts":return u.filter(e=>"host"===e.role).length;case"volunteers":return u.filter(e=>"volunteer"===e.role).length;case"committee":return u.filter(e=>"committee_member"===e.role).length;default:return 0}},f=e=>{switch(e){case"reminder":return jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4"});case"encouragement":return jsxRuntimeExports.jsx(Heart,{className:"h-4 w-4"});case"announcement":return jsxRuntimeExports.jsx(Megaphone,{className:"h-4 w-4"});case"celebration":return jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4"});default:return jsxRuntimeExports.jsx(Mail,{className:"h-4 w-4"})}},h=e=>{switch(e){case"reminder":return"bg-blue-100 text-blue-800 border-blue-200";case"encouragement":return"bg-green-100 text-green-800 border-green-200";case"announcement":return"bg-purple-100 text-purple-800 border-purple-200";case"celebration":return"bg-pink-100 text-pink-800 border-pink-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-xl overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"px-8 py-6 border-b border-slate-200 bg-gradient-to-r from-[#FBAD3F]/5 via-white to-[#236383]/5",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#FBAD3F] to-[#e89b2e] rounded-xl flex items-center justify-center shadow-lg",children:jsxRuntimeExports.jsx(Megaphone,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-black text-slate-900 font-roboto tracking-tight",children:"Team Shoutouts"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-slate-500 font-roboto mt-1",children:"Send encouraging messages and reminders to your team"})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs(Card$1,{className:"border-slate-200 shadow-lg",children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"bg-gradient-to-r from-slate-50/50 to-white border-b border-slate-200",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-xl font-bold text-slate-900 font-roboto flex items-center gap-2",children:[jsxRuntimeExports.jsx(Mail,{className:"h-5 w-5 text-[#236383]"}),"Quick Templates"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Choose a pre-written message or create your own"})]}),jsxRuntimeExports.jsx(CardContent$1,{className:"p-6 space-y-4",children:predefinedTemplates.map(e=>jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-xl border cursor-pointer transition-all duration-200 hover:shadow-md "+((null==r?void 0:r.id)===e.id?"border-[#FBAD3F] bg-[#FBAD3F]/5":"border-slate-200 hover:border-slate-300"),onClick:()=>(e=>{n(e),i(e.subject),a(e.message)})(e),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-slate-900 font-roboto",children:e.name}),jsxRuntimeExports.jsxs(Badge,{className:`${h(e.type)} flex items-center gap-1`,children:[f(e.type),e.type]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-600 font-roboto",children:e.subject})]},e.id))})]}),jsxRuntimeExports.jsxs(Card$1,{className:"border-slate-200 shadow-lg",children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"bg-gradient-to-r from-slate-50/50 to-white border-b border-slate-200",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-xl font-bold text-slate-900 font-roboto flex items-center gap-2",children:[jsxRuntimeExports.jsx(Send$c,{className:"h-5 w-5 text-[#236383]"}),"Compose Message"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Customize your message and select recipients"})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-slate-700 font-roboto",children:"Send to:"}),jsxRuntimeExports.jsxs(Select,{value:l,onValueChange:c,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"border-slate-300",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsxs(SelectItem,{value:"all",children:["All Users (",x(),")"]}),jsxRuntimeExports.jsxs(SelectItem,{value:"super_admins",children:["Super Administrators (",(null==u?void 0:u.filter(e=>"super_admin"===e.role).length)||0,")"]}),jsxRuntimeExports.jsxs(SelectItem,{value:"admins",children:["Administrators (",(null==u?void 0:u.filter(e=>"admin"===e.role).length)||0,")"]}),jsxRuntimeExports.jsxs(SelectItem,{value:"hosts",children:["Hosts (",(null==u?void 0:u.filter(e=>"host"===e.role).length)||0,")"]}),jsxRuntimeExports.jsxs(SelectItem,{value:"volunteers",children:["Volunteers (",(null==u?void 0:u.filter(e=>"volunteer"===e.role).length)||0,")"]}),jsxRuntimeExports.jsxs(SelectItem,{value:"committee",children:["Committee Members (",(null==u?void 0:u.filter(e=>"committee_member"===e.role).length)||0,")"]})]})]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-slate-700 font-roboto",children:"Subject:"}),jsxRuntimeExports.jsx(Input,{value:s,onChange:e=>i(e.target.value),placeholder:"Enter email subject...",className:"border-slate-300"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-slate-700 font-roboto",children:"Message:"}),jsxRuntimeExports.jsx(Textarea,{value:o,onChange:e=>a(e.target.value),placeholder:"Enter your message...",rows:8,className:"border-slate-300 resize-none"})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4",children:[jsxRuntimeExports.jsxs(Alert,{className:"mb-4 border-[#FBAD3F]/30 bg-[#FBAD3F]/5",children:[jsxRuntimeExports.jsx(Users,{className:"h-4 w-4 text-[#FBAD3F]"}),jsxRuntimeExports.jsxs(AlertDescription,{className:"text-slate-700",children:["This message will be sent to ",jsxRuntimeExports.jsxs("strong",{children:[x()," recipients"]})," via email."]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{s.trim()&&o.trim()?p.mutate({subject:s,message:o,recipientGroup:l,templateName:null==r?void 0:r.name}):e({variant:"destructive",title:"Missing information",description:"Please provide both subject and message."})},disabled:p.isPending||!s.trim()||!o.trim(),className:"w-full bg-gradient-to-r from-[#FBAD3F] to-[#e89b2e] hover:from-[#e89b2e] hover:to-[#d4941f] text-white font-semibold py-3",children:p.isPending?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Send$c,{className:"h-4 w-4 mr-2"}),"Send Shoutout"]})}),jsxRuntimeExports.jsx(Button,{onClick:()=>{m.mutate()},disabled:m.isPending,variant:"outline",className:"w-full border-[#236383] text-[#236383] hover:bg-[#236383]/5",children:m.isPending?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#236383] mr-2"}),"Testing..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Mail,{className:"h-4 w-4 mr-2"}),"Test SendGrid Setup"]})})]})]})]})]})]}),d&&d.length>0&&jsxRuntimeExports.jsxs(Card$1,{className:"border-slate-200 shadow-lg",children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"bg-gradient-to-r from-slate-50/50 to-white border-b border-slate-200",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-xl font-bold text-slate-900 font-roboto flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{className:"h-5 w-5 text-[#236383]"}),"Recent Shoutouts"]}),jsxRuntimeExports.jsx(CardDescription,{children:"History of sent messages"})]}),jsxRuntimeExports.jsx(CardContent$1,{className:"p-6",children:jsxRuntimeExports.jsx("div",{className:"space-y-3",children:d.slice(0,5).map(e=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-slate-900 font-roboto",children:e.subject}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-600",children:[e.templateName,"  ",e.recipientCount," recipients  ",new Date(e.sentAt).toLocaleDateString()]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:"sent"===e.status?jsxRuntimeExports.jsxs(Badge,{className:"bg-green-100 text-green-800 border-green-200",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-3 w-3 mr-1"}),"Sent"]}):jsxRuntimeExports.jsxs(Badge,{className:"bg-red-100 text-red-800 border-red-200",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"h-3 w-3 mr-1"}),"Failed"]})})]},e.id))})})]})]})}function useStateMachine(e,t){return reactExports.useReducer((e,r)=>t[e][r]??e,e)}function toInt(e){return e?parseInt(e,10):0}function getThumbRatio(e,t){const r=e/t;return isNaN(r)?0:r}function getThumbSize(e){const t=getThumbRatio(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function getScrollPositionFromPointer(e,t,r,n="ltr"){const s=getThumbSize(r),i=t||s/2,o=s-i,a=r.scrollbar.paddingStart+i,l=r.scrollbar.size-r.scrollbar.paddingEnd-o,c=r.content-r.viewport;return linearScale([a,l],"ltr"===n?[0,c]:[-1*c,0])(e)}function getThumbOffsetFromScroll(e,t,r="ltr"){const n=getThumbSize(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,a=i-n,l=clamp$1(e,"ltr"===r?[0,o]:[-1*o,0]);return linearScale([0,o],[0,a])(l)}function linearScale(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function isScrollingWithinScrollbarBounds(e,t){return e>0&&e<t}function useDebounceCallback(e,t){const r=useCallbackRef(e),n=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(n.current),[]),reactExports.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function useResizeObserver(e,t){const r=useCallbackRef(t);useLayoutEffect2(()=>{let t=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}function EnhancedUserAnalytics(){var e,t,r,n,s,i,o,a,l,c;const[u,d]=reactExports.useState("7"),[p,m]=reactExports.useState("all"),[x,f]=reactExports.useState("all"),[h,g]=reactExports.useState("overview"),{data:y,isLoading:j}=useQuery({queryKey:["/api/enhanced-user-activity/enhanced-stats",u],queryFn:async()=>{const e=await fetch(`/api/enhanced-user-activity/enhanced-stats?days=${u}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch system stats");return e.json()},staleTime:6e4}),{data:b,isLoading:v}=useQuery({queryKey:["/api/enhanced-user-activity/detailed-users",u],queryFn:async()=>{const e=await fetch(`/api/enhanced-user-activity/detailed-users?days=${u}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch user activities");return e.json()},staleTime:3e4}),{data:E,isLoading:R}=useQuery({queryKey:["/api/enhanced-user-activity/logs",p,x,u],queryFn:async()=>{const e=new URLSearchParams({days:u,..."all"!==p&&{userId:p},..."all"!==x&&{action:x}}),t=await fetch(`/api/enhanced-user-activity/logs?${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch activity logs");return t.json()},staleTime:15e3}),{data:S,isLoading:w}=useQuery({queryKey:["/api/enhanced-user-activity/user-stats",p,u],queryFn:async()=>{const e=await fetch(`/api/enhanced-user-activity/user-stats/${p}?days=${u}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch user stats");return e.json()},enabled:"all"!==p,staleTime:3e4}),$=e=>({Dashboard:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",Collections:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",Communication:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",Directory:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",Projects:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200",Analytics:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",Admin:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",Meetings:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"}[e]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"),N=e=>{switch(e){case"View":return jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4"});case"Create":return jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4"});case"Update":return jsxRuntimeExports.jsx(MousePointer,{className:"h-4 w-4"});case"Delete":return jsxRuntimeExports.jsx(Target,{className:"h-4 w-4"});default:return jsxRuntimeExports.jsx(Activity,{className:"h-4 w-4"})}};return j||v?jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((e,t)=>jsxRuntimeExports.jsxs(Card$1,{className:"animate-pulse",children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),jsxRuntimeExports.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded"})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"h-8 bg-gray-200 rounded w-16 mb-1"}),jsxRuntimeExports.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]},t))})}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[jsxRuntimeExports.jsxs(Select,{value:u,onValueChange:d,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[180px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select timeframe"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"1",children:"Last 24 hours"}),jsxRuntimeExports.jsx(SelectItem,{value:"7",children:"Last 7 days"}),jsxRuntimeExports.jsx(SelectItem,{value:"30",children:"Last 30 days"}),jsxRuntimeExports.jsx(SelectItem,{value:"90",children:"Last 90 days"})]})]}),jsxRuntimeExports.jsxs(Select,{value:p,onValueChange:m,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[200px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select user"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"All Users"}),null==b?void 0:b.map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.userId,children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.email},e.userId))]})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:()=>window.location.reload(),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"h-4 w-4"}),"Refresh Data"]})]}),y&&jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium",children:"Total Users"}),jsxRuntimeExports.jsx(Users,{className:"h-4 w-4 text-muted-foreground"})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:y.totalUsers}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.activeUsersLast24h||y.activeUsers," active (24h)"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-green-600",children:[y.activeUsersLast12h||0," active (12h)"]})]})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium",children:"Total Actions"}),jsxRuntimeExports.jsx(Activity,{className:"h-4 w-4 text-muted-foreground"})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:y.totalActions.toLocaleString()}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(y.averageActionsPerUser)," avg per user"]})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium",children:"Top Section"}),jsxRuntimeExports.jsx(ChartColumn,{className:"h-4 w-4 text-muted-foreground"})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:(null==(t=null==(e=y.topSections)?void 0:e[0])?void 0:t.section)||"N/A"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[(null==(n=null==(r=y.topSections)?void 0:r[0])?void 0:n.actions)||0," actions"]})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium",children:"Top Feature"}),jsxRuntimeExports.jsx(Target,{className:"h-4 w-4 text-muted-foreground"})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx("div",{className:"text-xl font-bold",children:(null==(i=null==(s=y.topFeatures)?void 0:s[0])?void 0:i.feature)||"N/A"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[(null==(a=null==(o=y.topFeatures)?void 0:o[0])?void 0:a.usage)||0," uses"]})]})]})]}),jsxRuntimeExports.jsxs(Tabs,{value:h,onValueChange:g,className:"space-y-4",children:[jsxRuntimeExports.jsxs(TabsList,{children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"overview",children:"User Overview"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"activity",children:"Activity Logs"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"behavior",children:"Behavior Analysis"})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"overview",className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"User Activity Summary"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Overview of all users and their platform engagement"})]}),jsxRuntimeExports.jsxs(Badge,{variant:"outline",children:[(null==b?void 0:b.length)||0," total users"]})]}),jsxRuntimeExports.jsx(ScrollArea,{className:"h-[700px]",children:jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:null==b?void 0:b.map(e=>{var t;return jsxRuntimeExports.jsxs(Card$1,{className:"hover:shadow-md transition-shadow",children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#236383] to-[#1a4b5c] text-white rounded-full flex items-center justify-center text-sm font-semibold",children:(null==(t=e.firstName)?void 0:t[0])||e.email[0].toUpperCase()}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm truncate",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.email}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.email})]}),jsxRuntimeExports.jsx(Badge,{variant:e.totalActions>0?"default":"secondary",className:"text-xs",children:e.totalActions})]})}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Sessions"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold",children:e.sessionsCount})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Time Spent"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold",children:[Math.round(e.timeSpent),"m"]})]})]}),e.totalActions>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"TOP SECTION"}),jsxRuntimeExports.jsx(Badge,{className:$(e.topSection),variant:"outline",children:e.topSection})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"TOP FEATURE"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium truncate max-w-[120px]",children:e.topFeature})]})]}),jsxRuntimeExports.jsx("div",{className:"pt-2 border-t",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground",children:"Last Active"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:e.lastActive?formatDistanceToNow(new Date(e.lastActive),{addSuffix:!0}):"Never"})]})}),e.featuresUsed.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"FEATURES USED"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.featuresUsed.slice(0,3).map((e,t)=>jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs px-2 py-0",children:e},t)),e.featuresUsed.length>3&&jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:"text-xs px-2 py-0 bg-muted",children:["+",e.featuresUsed.length-3]})]})]})]})]},e.userId)})})})]}),jsxRuntimeExports.jsx(TabsContent,{value:"activity",className:"space-y-4",children:jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Recent Activity Log"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:jsxRuntimeExports.jsxs(Select,{value:x,onValueChange:f,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[150px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Filter by action"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"All Actions"}),jsxRuntimeExports.jsx(SelectItem,{value:"View",children:"View"}),jsxRuntimeExports.jsx(SelectItem,{value:"Create",children:"Create"}),jsxRuntimeExports.jsx(SelectItem,{value:"Update",children:"Update"}),jsxRuntimeExports.jsx(SelectItem,{value:"Delete",children:"Delete"})]})]})})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-[600px]",children:jsxRuntimeExports.jsx("div",{className:"space-y-2",children:null==E?void 0:E.map(e=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[N(e.action),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:e.action})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:e.userName||"Unknown User"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.feature," in ",e.section,e.page&&` (${e.page})`]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:format$1(new Date(e.createdAt),"MMM dd, HH:mm")}),e.duration&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.duration,"s duration"]})]})]},e.id))})})})]})}),jsxRuntimeExports.jsxs(TabsContent,{value:"behavior",className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"h-5 w-5 text-green-600"}),"Most Used Features"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Features with highest user engagement"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx("div",{className:"space-y-3",children:(null==(l=null==y?void 0:y.topFeatures)?void 0:l.filter(e=>e.feature&&"Unknown"!==e.feature).slice(0,6).map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full "+(0===t?"bg-green-500":1===t?"bg-blue-500":2===t?"bg-purple-500":"bg-gray-400")}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:e.feature})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-bold",children:e.usage}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Unknown"!==e.feature?"uses":"unknown"})]})]},t)))||jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"No feature data available"})})})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"h-5 w-5 text-blue-600"}),"Most Visited Sections"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform areas with highest traffic"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx("div",{className:"space-y-3",children:(null==(c=null==y?void 0:y.topSections)?void 0:c.filter(e=>e.section&&"General"!==e.section&&"Unknown"!==e.section).slice(0,6).map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(Badge,{className:$(e.section),variant:"outline",children:e.section.replace("/api/","").replace("/","")}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-bold",children:e.actions||e.usage}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"actions"})]})]},t)))||jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"No section data available"})})})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{className:"h-5 w-5 text-purple-600"}),"User Engagement"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Overall platform activity patterns"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{children:"Active Users"}),jsxRuntimeExports.jsxs("span",{children:[(null==y?void 0:y.activeUsers)||0," of ",(null==y?void 0:y.totalUsers)||0]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:((null==y?void 0:y.totalUsers)?y.activeUsers/y.totalUsers*100:0)+"%"}})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Average Actions per User"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Math.round((null==y?void 0:y.averageActionsPerUser)||0)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Total Sessions"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold",children:(null==b?void 0:b.reduce((e,t)=>e+t.sessionsCount,0))||0})]})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Activity,{className:"h-5 w-5 text-orange-600"}),"all"===p?"All Users Activity Breakdown":"Individual User Analysis"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"all"===p?"Comprehensive platform usage overview":"Detailed activity analysis for selected user"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:"all"===p?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2",children:"Active vs Inactive Users"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Active Users (with activity)"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-green-600",children:(null==b?void 0:b.filter(e=>e.totalActions>0).length)||0})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Inactive Users (no activity)"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-red-600",children:(null==b?void 0:b.filter(e=>0===e.totalActions).length)||0})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2",children:"Top Active Users"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:null==b?void 0:b.filter(e=>e.totalActions>0).slice(0,5).map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm",children:[e.firstName," ",e.lastName]}),jsxRuntimeExports.jsxs("span",{className:"font-bold",children:[e.totalActions," actions"]})]},e.userId))})]})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:"all"!==p&&b&&(()=>{var e;const t=b.find(e=>e.userId===p);return t?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Actions"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:t.totalActions})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Sessions"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:t.sessionsCount})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Features Used"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:t.featuresUsed.map((e,t)=>jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:e},t))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Section Activity"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:null==(e=t.sectionBreakdown)?void 0:e.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:e.section}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[e.actions," actions"]})]},t))})]})]}):jsxRuntimeExports.jsx("p",{children:"User not found"})})()})})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-5 w-5 text-red-600"}),"Areas Needing Attention"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Features and sections that may need improvement"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2 text-red-600",children:"Unused Features"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Platform features that haven't been accessed recently"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-red-50 text-red-600 border-red-200",children:"Unknown Features"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Consider user training or interface improvements"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2 text-orange-600",children:"Low Engagement"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Users with 0 actions"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-orange-600",children:(null==b?void 0:b.filter(e=>0===e.totalActions).length)||0})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Users with 1-2 actions"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-orange-600",children:(null==b?void 0:b.filter(e=>e.totalActions>0&&e.totalActions<=2).length)||0})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2 text-green-600",children:"Recommendations"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[jsxRuntimeExports.jsx("li",{children:" Focus on onboarding inactive users"}),jsxRuntimeExports.jsx("li",{children:" Improve discoverability of unused features"}),jsxRuntimeExports.jsx("li",{children:" Analyze user paths to identify friction points"}),jsxRuntimeExports.jsx("li",{children:" Consider user feedback for feature improvements"})]})]})]})})]})]})]})]})]})}function UserManagement(){const{user:e}=useAuth(),{toast:t}=useToast(),{celebration:r,hideCelebration:n}=useCelebration(),[s,i]=reactExports.useState("users"),[o,a]=reactExports.useState(null),[l,c]=reactExports.useState(null),[u,d]=reactExports.useState("");if(!hasPermission(e,PERMISSIONS.MANAGE_USERS))return jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Shield,{className:"h-5 w-5"}),"Access Denied"]}),jsxRuntimeExports.jsx(CardDescription,{children:"You don't have permission to manage users."})]})});const{data:p=[],isLoading:m}=useQuery({queryKey:["/api/users"],enabled:hasPermission(e,PERMISSIONS.MANAGE_USERS)}),x=useMutation({mutationFn:async e=>apiRequest("PATCH",`/api/users/${e.userId}`,{role:e.role,permissions:e.permissions}),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/users"]}),t({title:"User Updated",description:"User permissions have been successfully updated."}),a(null)},onError:e=>{t({title:"Update Failed",description:e.message,variant:"destructive"})}}),f=useMutation({mutationFn:async e=>apiRequest("PATCH",`/api/users/${e.userId}/status`,{isActive:e.isActive}),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/users"]}),t({title:"User Status Updated",description:"User status has been successfully changed."})}}),h=useMutation({mutationFn:async e=>apiRequest("PUT","/api/auth/admin/reset-password",{userEmail:e.userEmail,newPassword:e.newPassword}),onSuccess:()=>{t({title:"Password Reset",description:"Password has been successfully reset."}),c(null),d("")},onError:e=>{t({title:"Reset Failed",description:e.message,variant:"destructive"})}}),g=useMutation({mutationFn:async e=>apiRequest("DELETE",`/api/users/${e}`),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/users"]}),queryClient.refetchQueries({queryKey:["/api/users"]}),t({title:"User Deleted",description:"User has been successfully deleted."})},onError:e=>{t({title:"Delete Failed",description:e.message,variant:"destructive"})}}),y=()=>{l&&u&&h.mutate({userEmail:l.email,newPassword:u})},j=e=>{switch(e){case USER_ROLES.ADMIN:return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case USER_ROLES.COMMITTEE_MEMBER:return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case USER_ROLES.VOLUNTEER:return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case USER_ROLES.VIEWER:default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return m?jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{className:"h-5 w-5"}),"User Management"]})}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-8",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-slate-200",children:jsxRuntimeExports.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>i("users"),className:"py-2 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap "+("users"===s?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"),children:[jsxRuntimeExports.jsx(Users,{className:"h-4 w-4 inline mr-1 sm:mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"User Management"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Users"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>i("activity"),className:"py-2 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap "+("activity"===s?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"),children:[jsxRuntimeExports.jsx(Activity,{className:"h-4 w-4 inline mr-1 sm:mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"User Activity"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Activity"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>i("announcements"),className:"py-2 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap "+("announcements"===s?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"),children:[jsxRuntimeExports.jsx(Megaphone,{className:"h-4 w-4 inline mr-1 sm:mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Announcements"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Announce"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>i("shoutouts"),className:"py-2 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap "+("shoutouts"===s?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"),children:[jsxRuntimeExports.jsx(Users,{className:"h-4 w-4 inline mr-1 sm:mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"User Outreach"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Outreach"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>i("auth-debug"),className:"py-2 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap "+("auth-debug"===s?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"),children:[jsxRuntimeExports.jsx(Bug,{className:"h-4 w-4 inline mr-1 sm:mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Auth Debug"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Debug"})]})]})}),"announcements"===s?jsxRuntimeExports.jsx(AnnouncementManager,{}):"activity"===s?jsxRuntimeExports.jsx(EnhancedUserAnalytics,{}):"shoutouts"===s?jsxRuntimeExports.jsx(ShoutoutSystem,{}):"auth-debug"===s?jsxRuntimeExports.jsx(AuthDebug,{}):jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{className:"h-5 w-5"}),"User Management"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Manage user roles and permissions for team members"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHeader,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableHead,{children:"User"}),jsxRuntimeExports.jsx(TableHead,{children:"Role"}),jsxRuntimeExports.jsx(TableHead,{children:"Status"}),jsxRuntimeExports.jsx(TableHead,{children:"Last Login"}),jsxRuntimeExports.jsx(TableHead,{children:"Joined"}),jsxRuntimeExports.jsx(TableHead,{children:"Actions"})]})}),jsxRuntimeExports.jsx(TableBody,{children:p.map(e=>jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Badge,{className:j(e.role),children:getRoleDisplayName(e.role)})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Badge,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})}),jsxRuntimeExports.jsx(TableCell,{children:e.lastLoginAt?new Date(e.lastLoginAt).toLocaleDateString()+" "+new Date(e.lastLoginAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 italic",children:"Never"})}),jsxRuntimeExports.jsx(TableCell,{children:new Date(e.createdAt).toLocaleDateString()}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>(e=>{a(e)})(e),children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 mr-1"}),"Edit"]}),jsxRuntimeExports.jsxs(Dialog,{open:(null==l?void 0:l.id)===e.id,onOpenChange:e=>{e||(c(null),d(""))},children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>c(e),children:[jsxRuntimeExports.jsx(Key,{className:"h-4 w-4 mr-2"}),"Reset Password"]})}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Reset Password"}),jsxRuntimeExports.jsxs(DialogDescription,{children:["Reset password for ",e.firstName," ",e.lastName," (",e.email,")"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"newPassword",children:"New Password"}),jsxRuntimeExports.jsx(Input,{id:"newPassword",type:"password",value:u,onChange:e=>d(e.target.value),placeholder:"Enter new password"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{c(null),d("")},children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:y,disabled:!u||h.isPending,children:h.isPending?"Resetting...":"Reset Password"})]})]})]})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>f.mutate({userId:e.id,isActive:!e.isActive}),children:e.isActive?"Deactivate":"Activate"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>(e=>{window.confirm(`Are you sure you want to delete ${e.firstName} ${e.lastName}? This action cannot be undone.`)&&g.mutate(e.id)})(e),disabled:g.isPending,className:"bg-red-50 hover:bg-red-100 text-red-700 border-red-200",children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4 mr-2"}),g.isPending?"Deleting...":"Delete"]})]})})]},e.id))})]})})]}),jsxRuntimeExports.jsx(CelebrationToast,{isVisible:r.isVisible,onClose:n,taskTitle:r.taskTitle,emoji:r.emoji,onSendThanks:e=>{t({title:"Thank you sent!",description:"Your appreciation message has been recorded."})}}),jsxRuntimeExports.jsx(SimplePermissionsDialog,{user:o,open:!!o,onOpenChange:e=>{e||a(null)},onSave:(e,t,r)=>{x.mutate({userId:e,role:t,permissions:r})}})]})}function cloneObject(e){let t;const r=Array.isArray(e),n="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(isWeb&&(e instanceof Blob||n)||!r&&!isObject$4(e))return e;if(t=r?[]:{},r||isPlainObject$3(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=cloneObject(e[r]));else t=e}return t}function useFormState(e){const t=useFormContext(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[o,a]=React$2.useState(r._formState),l=React$2.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=React$2.useRef(s);return c.current=s,React$2.useEffect(()=>r._subscribe({name:c.current,formState:l.current,exact:i,callback:e=>{!n&&a({...r._formState,...e})}}),[r,n,i]),React$2.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),React$2.useMemo(()=>getProxyFormState(o,r,l.current,!1),[o,r])}function useWatch(e){const t=useFormContext(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:o}=e||{},a=React$2.useRef(n),l=React$2.useRef(s);a.current=n,React$2.useEffect(()=>r._subscribe({name:a.current,formState:{values:!0},exact:o,callback:e=>!i&&u(generateWatchOutput(a.current,r._names,e.values||r._formValues,!1,l.current))}),[r,i,o]);const[c,u]=React$2.useState(r._getWatch(n,s));return React$2.useEffect(()=>r._removeUnmounted()),c}function useController(e){const t=useFormContext(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i}=e,o=isNameInFieldArray(s._names.array,r),a=useWatch({control:s,name:r,defaultValue:get$2(s._formValues,r,get$2(s._defaultValues,r,e.defaultValue)),exact:!0}),l=useFormState({control:s,name:r,exact:!0}),c=React$2.useRef(e),u=React$2.useRef(s.register(r,{...e.rules,value:a,...isBoolean$1(e.disabled)?{disabled:e.disabled}:{}})),d=React$2.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get$2(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!get$2(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!get$2(l.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!get$2(l.validatingFields,r)},error:{enumerable:!0,get:()=>get$2(l.errors,r)}}),[l,r]),p=React$2.useCallback(e=>u.current.onChange({target:{value:getEventValue(e),name:r},type:EVENTS.CHANGE}),[r]),m=React$2.useCallback(()=>u.current.onBlur({target:{value:get$2(s._formValues,r),name:r},type:EVENTS.BLUR}),[r,s._formValues]),x=React$2.useCallback(e=>{const t=get$2(s._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[s._fields,r]),f=React$2.useMemo(()=>({name:r,value:a,...isBoolean$1(n)||l.disabled?{disabled:l.disabled||n}:{},onChange:p,onBlur:m,ref:x}),[r,n,l.disabled,p,m,x,a]);return React$2.useEffect(()=>{const e=s._options.shouldUnregister||i;s.register(r,{...c.current.rules,...isBoolean$1(c.current.disabled)?{disabled:c.current.disabled}:{}});const t=(e,t)=>{const r=get$2(s._fields,e);r&&r._f&&(r._f.mount=t)};if(t(r,!0),e){const e=cloneObject(get$2(s._options.defaultValues,r));set(s._defaultValues,r,e),isUndefined$1(get$2(s._formValues,r))&&set(s._formValues,r,e)}return!o&&s.register(r),()=>{(o?e&&!s._state.action:e)?s.unregister(r):t(r,!1)}},[r,s,o,i]),React$2.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),React$2.useMemo(()=>({field:f,formState:l,fieldState:d}),[f,l,d])}function deepEqual(e,t){if(isPrimitive(e)||isPrimitive(t))return e===t;if(isDateObject(e)&&isDateObject(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const r=e[s];if(!n.includes(s))return!1;if("ref"!==s){const e=t[s];if(isDateObject(r)&&isDateObject(e)||isObject$4(r)&&isObject$4(e)||Array.isArray(r)&&Array.isArray(e)?!deepEqual(r,e):r!==e)return!1}}return!0}function baseGet(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=isUndefined$1(e)?n++:e[t[n++]];return e}function isEmptyArray(e){for(const t in e)if(e.hasOwnProperty(t)&&!isUndefined$1(e[t]))return!1;return!0}function unset(e,t){const r=Array.isArray(t)?t:isKey(t)?[t]:stringToPath(t),n=1===r.length?e:baseGet(e,r),s=r.length-1,i=r[s];return n&&delete n[i],0!==s&&(isObject$4(n)&&isEmptyObject(n)||Array.isArray(n)&&isEmptyArray(n))&&unset(e,r.slice(0,-1)),e}function markFieldsDirty(e,t={}){const r=Array.isArray(e);if(isObject$4(e)||r)for(const n in e)Array.isArray(e[n])||isObject$4(e[n])&&!objectHasFunction(e[n])?(t[n]=Array.isArray(e[n])?[]:{},markFieldsDirty(e[n],t[n])):isNullOrUndefined(e[n])||(t[n]=!0);return t}function getDirtyFieldsFromDefaultValues(e,t,r){const n=Array.isArray(e);if(isObject$4(e)||n)for(const s in e)Array.isArray(e[s])||isObject$4(e[s])&&!objectHasFunction(e[s])?isUndefined$1(t)||isPrimitive(r[s])?r[s]=Array.isArray(e[s])?markFieldsDirty(e[s],[]):{...markFieldsDirty(e[s])}:getDirtyFieldsFromDefaultValues(e[s],isNullOrUndefined(t)?{}:t[s],r[s]):r[s]=!deepEqual(e[s],t[s]);return r}function getFieldValue(e){const t=e.ref;return isFileInput(t)?t.files:isRadioInput(t)?getRadioValue(e.refs).value:isMultipleSelect(t)?[...t.selectedOptions].map(({value:e})=>e):isCheckBoxInput(t)?getCheckboxValue(e.refs).value:getFieldValueAs(isUndefined$1(t.value)?e.ref.value:t.value,e)}function schemaErrorLookup(e,t,r){const n=get$2(e,r);if(n||isKey(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const n=s.join("."),i=get$2(t,n),o=get$2(e,n);if(i&&!Array.isArray(i)&&r!==n)return{name:r};if(o&&o.type)return{name:n,error:o};s.pop()}return{name:r}}function getValidateError(e,t,r="validate"){if(isMessage(e)||Array.isArray(e)&&e.every(isMessage)||isBoolean$1(e)&&!e)return{type:r,message:isMessage(e)?e:"",ref:t}}function createFormControl(e={}){let t={...defaultOptions,...e},r={submitCount:0,isDirty:!1,isLoading:isFunction$1(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let s,i=(isObject$4(t.defaultValues)||isObject$4(t.values))&&cloneObject(t.values||t.defaultValues)||{},o=t.shouldUnregister?{}:cloneObject(i),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...u};const p={array:createSubject(),state:createSubject()},m=getValidationModes(t.mode),x=getValidationModes(t.reValidateMode),f=t.criteriaMode===VALIDATION_MODE.all,h=async e=>{if(!t.disabled&&(u.isValid||d.isValid||e)){const e=t.resolver?isEmptyObject((await v()).errors):await E(n,!0);e!==r.isValid&&p.state.next({isValid:e})}},g=(e,n)=>{!t.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(n?set(r.validatingFields,e,n):unset(r.validatingFields,e))}),p.state.next({validatingFields:r.validatingFields,isValidating:!isEmptyObject(r.validatingFields)}))},y=(e,t,r,s)=>{const l=get$2(n,e);if(l){const n=get$2(o,e,isUndefined$1(r)?get$2(i,e):r);isUndefined$1(n)||s&&s.defaultChecked||t?set(o,e,t?n:getFieldValue(l._f)):w(e,n),a.mount&&h()}},j=(e,n,s,o,a)=>{let l=!1,c=!1;const m={name:e};if(!t.disabled){if(!s||o){(u.isDirty||d.isDirty)&&(c=r.isDirty,r.isDirty=m.isDirty=R(),l=c!==m.isDirty);const t=deepEqual(get$2(i,e),n);c=!!get$2(r.dirtyFields,e),t?unset(r.dirtyFields,e):set(r.dirtyFields,e,!0),m.dirtyFields=r.dirtyFields,l=l||(u.dirtyFields||d.dirtyFields)&&c!==!t}if(s){const t=get$2(r.touchedFields,e);t||(set(r.touchedFields,e,s),m.touchedFields=r.touchedFields,l=l||(u.touchedFields||d.touchedFields)&&t!==s)}l&&a&&p.state.next(m)}return l?m:{}},b=(e,n,i,o)=>{const a=get$2(r.errors,e),l=(u.isValid||d.isValid)&&isBoolean$1(n)&&r.isValid!==n;var m;if(t.delayError&&i?(m=()=>((e,t)=>{set(r.errors,e,t),p.state.next({errors:r.errors})})(e,i),s=e=>{clearTimeout(c),c=setTimeout(m,e)},s(t.delayError)):(clearTimeout(c),s=null,i?set(r.errors,e,i):unset(r.errors,e)),(i?!deepEqual(a,i):a)||!isEmptyObject(o)||l){const t={...o,...l&&isBoolean$1(n)?{isValid:n}:{},errors:r.errors,name:e};r={...r,...t},p.state.next(t)}},v=async e=>{g(e,!0);const r=await t.resolver(o,t.context,getResolverOptions(e||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return g(e),r},E=async(e,n,s={valid:!0})=>{for(const i in e){const a=e[i];if(a){const{_f:e,...c}=a;if(e){const c=l.array.has(e.name),d=a._f&&hasPromiseValidation(a._f);d&&u.validatingFields&&g([i],!0);const p=await validateField(a,l.disabled,o,f,t.shouldUseNativeValidation&&!n,c);if(d&&u.validatingFields&&g([i]),p[e.name]&&(s.valid=!1,n))break;!n&&(get$2(p,e.name)?c?updateFieldArrayRootError(r.errors,p,e.name):set(r.errors,e.name,p[e.name]):unset(r.errors,e.name))}!isEmptyObject(c)&&await E(c,n,s)}}return s.valid},R=(e,r)=>!t.disabled&&(e&&r&&set(o,e,r),!deepEqual(T(),i)),S=(e,t,r)=>generateWatchOutput(e,l,{...a.mount?o:isUndefined$1(t)?i:isString$2(e)?{[e]:t}:t},r,t),w=(e,t,r={})=>{const s=get$2(n,e);let i=t;if(s){const r=s._f;r&&(!r.disabled&&set(o,e,getFieldValueAs(t,r)),i=isHTMLElement$1(r.ref)&&isNullOrUndefined(t)?"":t,isMultipleSelect(r.ref)?[...r.ref.options].forEach(e=>e.selected=i.includes(e.value)):r.refs?isCheckBoxInput(r.ref)?r.refs.length>1?r.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(i)?!!i.find(t=>t===e.value):i===e.value)):r.refs[0]&&(r.refs[0].checked=!!i):r.refs.forEach(e=>e.checked=e.value===i):isFileInput(r.ref)?r.ref.value="":(r.ref.value=i,r.ref.type||p.state.next({name:e,values:cloneObject(o)})))}(r.shouldDirty||r.shouldTouch)&&j(e,i,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&O(e)},$=(e,t,r)=>{for(const s in t){const i=t[s],o=`${e}.${s}`,a=get$2(n,o);(l.array.has(e)||isObject$4(i)||a&&!a._f)&&!isDateObject(i)?$(o,i,r):w(o,i,r)}},N=(e,t,s={})=>{const c=get$2(n,e),m=l.array.has(e),x=cloneObject(t);set(o,e,x),m?(p.array.next({name:e,values:cloneObject(o)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&s.shouldDirty&&p.state.next({name:e,dirtyFields:getDirtyFields(i,o),isDirty:R(e,x)})):!c||c._f||isNullOrUndefined(x)?w(e,x,s):$(e,x,s),isWatched(e,l)&&p.state.next({...r}),p.state.next({name:a.mount?e:void 0,values:cloneObject(o)})},_=async e=>{a.mount=!0;const i=e.target;let c=i.name,y=!0;const R=get$2(n,c),S=e=>{y=Number.isNaN(e)||isDateObject(e)&&isNaN(e.getTime())||deepEqual(e,get$2(o,c,e))};if(R){let a,w;const $=i.type?getFieldValue(R._f):getEventValue(e),N=e.type===EVENTS.BLUR||e.type===EVENTS.FOCUS_OUT,_=!hasValidation(R._f)&&!t.resolver&&!get$2(r.errors,c)&&!R._f.deps||skipValidation(N,get$2(r.touchedFields,c),r.isSubmitted,x,m),C=isWatched(c,l,N);set(o,c,$),N?(R._f.onBlur&&R._f.onBlur(e),s&&s(0)):R._f.onChange&&R._f.onChange(e);const T=j(c,$,N),P=!isEmptyObject(T)||C;if(!N&&p.state.next({name:c,type:e.type,values:cloneObject(o)}),_)return(u.isValid||d.isValid)&&("onBlur"===t.mode?N&&h():N||h()),P&&p.state.next({name:c,...C?{}:T});if(!N&&C&&p.state.next({...r}),t.resolver){const{errors:e}=await v([c]);if(S($),y){const t=schemaErrorLookup(r.errors,n,c),s=schemaErrorLookup(e,n,t.name||c);a=s.error,c=s.name,w=isEmptyObject(e)}}else g([c],!0),a=(await validateField(R,l.disabled,o,f,t.shouldUseNativeValidation))[c],g([c]),S($),y&&(a?w=!1:(u.isValid||d.isValid)&&(w=await E(n,!0)));y&&(R._f.deps&&O(R._f.deps),b(c,w,a,T))}},C=(e,t)=>{if(get$2(r.errors,t)&&e.focus)return e.focus(),1},O=async(e,s={})=>{let i,o;const a=convertToArrayPayload(e);if(t.resolver){const t=await(async e=>{const{errors:t}=await v(e);if(e)for(const n of e){const e=get$2(t,n);e?set(r.errors,n,e):unset(r.errors,n)}else r.errors=t;return t})(isUndefined$1(e)?e:a);i=isEmptyObject(t),o=e?!a.some(e=>get$2(t,e)):i}else e?(o=(await Promise.all(a.map(async e=>{const t=get$2(n,e);return await E(t&&t._f?{[e]:t}:t)}))).every(Boolean),(o||r.isValid)&&h()):o=i=await E(n);return p.state.next({...!isString$2(e)||(u.isValid||d.isValid)&&i!==r.isValid?{}:{name:e},...t.resolver||!e?{isValid:i}:{},errors:r.errors}),s.shouldFocus&&!o&&iterateFieldsByAction(n,C,e?a:l.mount),o},T=e=>{const t={...a.mount?o:i};return isUndefined$1(e)?t:isString$2(e)?get$2(t,e):e.map(e=>get$2(t,e))},P=(e,t)=>({invalid:!!get$2((t||r).errors,e),isDirty:!!get$2((t||r).dirtyFields,e),error:get$2((t||r).errors,e),isValidating:!!get$2(r.validatingFields,e),isTouched:!!get$2((t||r).touchedFields,e)}),A=(e,t,s)=>{const i=(get$2(n,e,{_f:{}})._f||{}).ref,o=get$2(r.errors,e)||{},{ref:a,message:l,type:c,...u}=o;set(r.errors,e,{...u,...t,ref:i}),p.state.next({name:e,errors:r.errors,isValid:!1}),s&&s.shouldFocus&&i&&i.focus&&i.focus()},k=e=>p.state.subscribe({next:t=>{shouldSubscribeByName(e.name,t.name,e.exact)&&shouldRenderFormState(t,e.formState||u,H,e.reRenderRoot)&&e.callback({values:{...o},...r,...t})}}).unsubscribe,I=(e,s={})=>{for(const a of e?convertToArrayPayload(e):l.mount)l.mount.delete(a),l.array.delete(a),s.keepValue||(unset(n,a),unset(o,a)),!s.keepError&&unset(r.errors,a),!s.keepDirty&&unset(r.dirtyFields,a),!s.keepTouched&&unset(r.touchedFields,a),!s.keepIsValidating&&unset(r.validatingFields,a),!t.shouldUnregister&&!s.keepDefaultValue&&unset(i,a);p.state.next({values:cloneObject(o)}),p.state.next({...r,...s.keepDirty?{isDirty:R()}:{}}),!s.keepIsValid&&h()},D=({disabled:e,name:t})=>{(isBoolean$1(e)&&a.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},M=(e,r={})=>{let s=get$2(n,e);const o=isBoolean$1(r.disabled)||isBoolean$1(t.disabled);return set(n,e,{...s||{},_f:{...s&&s._f?s._f:{ref:{name:e}},name:e,mount:!0,...r}}),l.mount.add(e),s?D({disabled:isBoolean$1(r.disabled)?r.disabled:t.disabled,name:e}):y(e,!0,r.value),{...o?{disabled:r.disabled||t.disabled}:{},...t.progressive?{required:!!r.required,min:getRuleValue(r.min),max:getRuleValue(r.max),minLength:getRuleValue(r.minLength),maxLength:getRuleValue(r.maxLength),pattern:getRuleValue(r.pattern)}:{},name:e,onChange:_,onBlur:_,ref:o=>{if(o){M(e,r),s=get$2(n,e);const t=isUndefined$1(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,a=isRadioOrCheckbox(t),l=s._f.refs||[];if(a?l.find(e=>e===t):t===s._f.ref)return;set(n,e,{_f:{...s._f,...a?{refs:[...l.filter(live$c),t,...Array.isArray(get$2(i,e))?[{}]:[]],ref:{type:t.type,name:e}}:{ref:t}}}),y(e,!1,void 0,t)}else s=get$2(n,e,{}),s._f&&(s._f.mount=!1),(t.shouldUnregister||r.shouldUnregister)&&(!isNameInFieldArray(l.array,e)||!a.action)&&l.unMount.add(e)}}},L=()=>t.shouldFocusError&&iterateFieldsByAction(n,C,l.mount),F=(e,s)=>async i=>{let a;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let c=cloneObject(o);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:e,values:t}=await v();r.errors=e,c=t}else await E(n);if(l.disabled.size)for(const e of l.disabled)set(c,e,void 0);if(unset(r.errors,"root"),isEmptyObject(r.errors)){p.state.next({errors:{}});try{await e(c,i)}catch(u){a=u}}else s&&await s({...r.errors},i),L(),setTimeout(L);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(r.errors)&&!a,submitCount:r.submitCount+1,errors:r.errors}),a)throw a},B=(e,s={})=>{const c=e?cloneObject(e):i,d=cloneObject(c),m=isEmptyObject(e),x=m?i:d;if(s.keepDefaultValues||(i=c),!s.keepValues){if(s.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(getDirtyFields(i,o))]);for(const t of Array.from(e))get$2(r.dirtyFields,t)?set(x,t,get$2(o,t)):N(t,get$2(x,t))}else{if(isWeb&&isUndefined$1(e))for(const e of l.mount){const t=get$2(n,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(isHTMLElement$1(e)){const t=e.closest("form");if(t){t.reset();break}}}}for(const e of l.mount)N(e,get$2(x,e))}o=cloneObject(x),p.array.next({values:{...x}}),p.state.next({values:{...x}})}l={mount:s.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!s.keepIsValid||!!s.keepDirtyValues,a.watch=!!t.shouldUnregister,p.state.next({submitCount:s.keepSubmitCount?r.submitCount:0,isDirty:!m&&(s.keepDirty?r.isDirty:!(!s.keepDefaultValues||deepEqual(e,i))),isSubmitted:!!s.keepIsSubmitted&&r.isSubmitted,dirtyFields:m?{}:s.keepDirtyValues?s.keepDefaultValues&&o?getDirtyFields(i,o):r.dirtyFields:s.keepDefaultValues&&e?getDirtyFields(i,e):s.keepDirty?r.dirtyFields:{},touchedFields:s.keepTouched?r.touchedFields:{},errors:s.keepErrors?r.errors:{},isSubmitSuccessful:!!s.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1})},U=(e,t)=>B(isFunction$1(e)?e(o):e,t),H=e=>{r={...r,...e}},V={control:{register:M,unregister:I,getFieldState:P,handleSubmit:F,setError:A,_subscribe:k,_runSchema:v,_getWatch:S,_getDirty:R,_setValid:h,_setFieldArray:(e,s=[],l,c,m=!0,x=!0)=>{if(c&&l&&!t.disabled){if(a.action=!0,x&&Array.isArray(get$2(n,e))){const t=l(get$2(n,e),c.argA,c.argB);m&&set(n,e,t)}if(x&&Array.isArray(get$2(r.errors,e))){const t=l(get$2(r.errors,e),c.argA,c.argB);m&&set(r.errors,e,t),unsetEmptyArray(r.errors,e)}if((u.touchedFields||d.touchedFields)&&x&&Array.isArray(get$2(r.touchedFields,e))){const t=l(get$2(r.touchedFields,e),c.argA,c.argB);m&&set(r.touchedFields,e,t)}(u.dirtyFields||d.dirtyFields)&&(r.dirtyFields=getDirtyFields(i,o)),p.state.next({name:e,isDirty:R(e,s),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else set(o,e,s)},_setDisabledField:D,_setErrors:e=>{r.errors=e,p.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>compact(get$2(a.mount?o:i,e,t.shouldUnregister?get$2(i,e,[]):[])),_reset:B,_resetDefaultValues:()=>isFunction$1(t.defaultValues)&&t.defaultValues().then(e=>{U(e,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=get$2(n,e);t&&(t._f.refs?t._f.refs.every(e=>!live$c(e)):!live$c(t._f.ref))&&I(e)}l.unMount=new Set},_disableForm:e=>{isBoolean$1(e)&&(p.state.next({disabled:e}),iterateFieldsByAction(n,(t,r)=>{const s=get$2(n,r);s&&(t.disabled=s._f.disabled||e,Array.isArray(s._f.refs)&&s._f.refs.forEach(t=>{t.disabled=s._f.disabled||e}))},0,!1))},_subjects:p,_proxyFormState:u,get _fields(){return n},get _formValues(){return o},get _state(){return a},set _state(e){a=e},get _defaultValues(){return i},get _names(){return l},set _names(e){l=e},get _formState(){return r},get _options(){return t},set _options(e){t={...t,...e}}},subscribe:e=>(a.mount=!0,d={...d,...e.formState},k({...e,formState:d})),trigger:O,register:M,handleSubmit:F,watch:(e,t)=>isFunction$1(e)?p.state.subscribe({next:r=>e(S(void 0,t),r)}):S(e,t,!0),setValue:N,getValues:T,reset:U,resetField:(e,t={})=>{get$2(n,e)&&(isUndefined$1(t.defaultValue)?N(e,cloneObject(get$2(i,e))):(N(e,t.defaultValue),set(i,e,cloneObject(t.defaultValue))),t.keepTouched||unset(r.touchedFields,e),t.keepDirty||(unset(r.dirtyFields,e),r.isDirty=t.defaultValue?R(e,cloneObject(get$2(i,e))):R()),t.keepError||(unset(r.errors,e),u.isValid&&h()),p.state.next({...r}))},clearErrors:e=>{e&&convertToArrayPayload(e).forEach(e=>unset(r.errors,e)),p.state.next({errors:e?r.errors:{}})},unregister:I,setError:A,setFocus:(e,t={})=>{const r=get$2(n,e),s=r&&r._f;if(s){const e=s.refs?s.refs[0]:s.ref;e.focus&&(e.focus(),t.shouldSelect&&isFunction$1(e.select)&&e.select())}},getFieldState:P};return{...V,formControl:V}}function useForm(e={}){const t=React$2.useRef(void 0),r=React$2.useRef(void 0),[n,s]=React$2.useState({isDirty:!1,isValidating:!1,isLoading:isFunction$1(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:isFunction$1(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:createFormControl(e),formState:n},e.formControl&&e.defaultValues&&!isFunction$1(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const i=t.current.control;return i._options=e,React$2.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0}),[i]),React$2.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),React$2.useEffect(()=>{if(i._proxyFormState.isDirty){const e=i._getDirty();e!==n.isDirty&&i._subjects.state.next({isDirty:e})}},[i,n.isDirty]),React$2.useEffect(()=>{e.values&&!deepEqual(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,s(e=>({...e}))):i._resetDefaultValues()},[e.values,i]),React$2.useEffect(()=>{e.errors&&!isEmptyObject(e.errors)&&i._setErrors(e.errors)},[e.errors,i]),React$2.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),React$2.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[e.shouldUnregister,i]),t.current.formState=getProxyFormState(n,i),t.current}function setErrorMap(e){overrideErrorMap=e}function getErrorMap(){return overrideErrorMap}function addIssueToContext(e,t){const r=getErrorMap(),n=makeIssue({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===errorMap?void 0:errorMap].filter(e=>!!e)});e.common.issues.push(n)}function __classPrivateFieldGet(e,t,r,n){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function __classPrivateFieldSet(e,t,r,n,s){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}function processCreateParams(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:s}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:s};return{errorMap:(t,s)=>{var i,o;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:s.defaultError}:void 0===s.data?{message:null!==(i=null!=a?a:n)&&void 0!==i?i:s.defaultError}:"invalid_type"!==t.code?{message:s.defaultError}:{message:null!==(o=null!=a?a:r)&&void 0!==o?o:s.defaultError}},description:s}}function timeRegexSource(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function timeRegex(e){return new RegExp(`^${timeRegexSource(e)}$`)}function datetimeRegex(e){let t=`${dateRegexSource}T${timeRegexSource(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function isValidIP(e,t){return!("v4"!==t&&t||!ipv4Regex.test(e))||!("v6"!==t&&t||!ipv6Regex.test(e))}function isValidJWT(e,t){if(!jwtRegex.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return"object"==typeof s&&null!==s&&(!(!s.typ||!s.alg)&&(!t||s.alg===t))}catch(r){return!1}}function isValidCidr(e,t){return!("v4"!==t&&t||!ipv4CidrRegex.test(e))||!("v6"!==t&&t||!ipv6CidrRegex.test(e))}function floatSafeRemainder(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n;return parseInt(e.toFixed(s).replace(".",""))%parseInt(t.toFixed(s).replace(".",""))/Math.pow(10,s)}function deepPartialify(e){if(e instanceof ZodObject){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=ZodOptional.create(deepPartialify(n))}return new ZodObject({...e._def,shape:()=>t})}return e instanceof ZodArray?new ZodArray({...e._def,type:deepPartialify(e.element)}):e instanceof ZodOptional?ZodOptional.create(deepPartialify(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(deepPartialify(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map(e=>deepPartialify(e))):e}function mergeValues(e,t){const r=getParsedType(e),n=getParsedType(t);if(e===t)return{valid:!0,data:e};if(r===ZodParsedType.object&&n===ZodParsedType.object){const r=util.objectKeys(t),n=util.objectKeys(e).filter(e=>-1!==r.indexOf(e)),s={...e,...t};for(const i of n){const r=mergeValues(e[i],t[i]);if(!r.valid)return{valid:!1};s[i]=r.data}return{valid:!0,data:s}}if(r===ZodParsedType.array&&n===ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const s=mergeValues(e[n],t[n]);if(!s.valid)return{valid:!1};r.push(s.data)}return{valid:!0,data:r}}return r===ZodParsedType.date&&n===ZodParsedType.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}function createZodEnum(e,t){return new ZodEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(t)})}function cleanParams(e,t){const r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function custom(e,t={},r){return e?ZodAny.create().superRefine((n,s)=>{var i,o;const a=e(n);if(a instanceof Promise)return a.then(e=>{var i,o;if(!e){const e=cleanParams(t,n),a=null===(o=null!==(i=e.fatal)&&void 0!==i?i:r)||void 0===o||o;s.addIssue({code:"custom",...e,fatal:a})}});if(!a){const e=cleanParams(t,n),a=null===(o=null!==(i=e.fatal)&&void 0!==i?i:r)||void 0===o||o;s.addIssue({code:"custom",...e,fatal:a})}}):ZodAny.create()}function UserProfile(){const{toast:e}=useToast(),{user:r}=useAuth(),[n,s]=reactExports.useState("profile"),i=useForm({resolver:t(profileSchema),defaultValues:{firstName:"",lastName:"",displayName:"",email:""}}),o=useForm({resolver:t(passwordSchema),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),{data:a,isLoading:l}=useQuery({queryKey:["/api/auth/profile"],enabled:!!r});reactExports.useEffect(()=>{if(a&&"object"==typeof a){const e=a;i.reset({firstName:e.firstName||"",lastName:e.lastName||"",displayName:e.displayName||"",email:e.email||""})}},[a,i]);const c=useMutation({mutationFn:async e=>await apiRequest("PUT","/api/auth/profile",e),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/auth/user"]}),queryClient.invalidateQueries({queryKey:["/api/auth/profile"]}),e({title:"Profile updated",description:"Your profile has been successfully updated."})},onError:t=>{e({title:"Error",description:t.message||"Failed to update profile",variant:"destructive"})}}),u=useMutation({mutationFn:async e=>await apiRequest("PUT","/api/auth/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword}),onSuccess:()=>{o.reset(),e({title:"Password changed",description:"Your password has been successfully updated."})},onError:t=>{e({title:"Error",description:t.message||"Failed to change password",variant:"destructive"})}});return l?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(User,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})]})}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-main-heading text-primary",children:"Account Settings"}),jsxRuntimeExports.jsx("p",{className:"font-body text-muted-foreground",children:"Manage your profile information and account security"})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-1 border-b",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>s("profile"),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors "+("profile"===n?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[jsxRuntimeExports.jsx(User,{className:"w-4 h-4 inline mr-2"}),"Profile"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>s("password"),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors "+("password"===n?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[jsxRuntimeExports.jsx(Lock,{className:"w-4 h-4 inline mr-2"}),"Password"]})]}),"profile"===n&&jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(User,{className:"w-5 h-5"}),"Profile Information"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Update your personal information and display preferences"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx(Form,{...i,children:jsxRuntimeExports.jsxs("form",{onSubmit:i.handleSubmit(e=>{c.mutate(e)}),className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(FormField,{control:i.control,name:"firstName",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"First Name"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"John",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:i.control,name:"lastName",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Last Name"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Doe",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})})]}),jsxRuntimeExports.jsx(FormField,{control:i.control,name:"displayName",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Display Name"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"How you want to appear in messages and activities",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:i.control,name:"email",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Email Address"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{type:"email",placeholder:"john@example.com",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsxs(Button,{type:"submit",disabled:c.isPending,className:"btn-tsp-primary",children:[jsxRuntimeExports.jsx(Save,{className:"w-4 h-4 mr-2"}),c.isPending?"Saving...":"Save Changes"]})]})})})]}),"password"===n&&jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Lock,{className:"w-5 h-5"}),"Change Password"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Update your account password for security"})]}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx(Form,{...o,children:jsxRuntimeExports.jsxs("form",{onSubmit:o.handleSubmit(e=>{u.mutate(e)}),className:"space-y-6",children:[jsxRuntimeExports.jsx(FormField,{control:o.control,name:"currentPassword",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Current Password"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{type:"password",placeholder:"Enter your current password",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsx(FormField,{control:o.control,name:"newPassword",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"New Password"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{type:"password",placeholder:"Enter your new password",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:o.control,name:"confirmPassword",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Confirm New Password"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{type:"password",placeholder:"Confirm your new password",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsxs(Button,{type:"submit",disabled:u.isPending,className:"btn-tsp-primary",children:[jsxRuntimeExports.jsx(Lock,{className:"w-4 h-4 mr-2"}),u.isPending?"Changing...":"Change Password"]})]})})})]})]})}function AnnouncementBanner(){const[e,t]=reactExports.useState(()=>{const e=localStorage.getItem("dismissedBanners");return e?JSON.parse(e):[]}),{data:r=[]}=useQuery({queryKey:["/api/announcements"],refetchInterval:3e5}),n=r.filter(t=>{const r=new Date,n=new Date(t.startDate),s=new Date(t.endDate);return t.isActive&&r>=n&&r<=s&&!e.includes(t.id)}).sort((e,t)=>{const r={urgent:4,high:3,medium:2,low:1};return r[t.priority]-r[e.priority]})[0];if(reactExports.useEffect(()=>{const e=localStorage.getItem("lastBannerClear"),r=(new Date).toDateString();e!==r&&(t([]),localStorage.setItem("dismissedBanners",JSON.stringify([])),localStorage.setItem("lastBannerClear",r))},[]),!n)return null;return jsxRuntimeExports.jsx("div",{className:`w-full px-4 py-3 ${((e,t)=>{const r="border-l-4 shadow-sm";return"urgent"===e?`${r} bg-red-50 border-red-500 text-red-900`:"high"===e?`${r} bg-orange-50 border-orange-500 text-orange-900`:"event"===t?`${r} bg-blue-50 border-blue-500 text-blue-900`:"position"===t?`${r} bg-green-50 border-green-500 text-green-900`:`${r} bg-slate-50 border-slate-500 text-slate-900`})(n.priority,n.type)}`,children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto flex items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 mt-0.5",children:(e=>{switch(e){case"event":return jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5"});case"position":return jsxRuntimeExports.jsx(Users,{className:"w-5 h-5"});default:return jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5"})}})(n.type)}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.title}),jsxRuntimeExports.jsx("p",{className:"text-sm leading-relaxed",children:n.message}),n.link&&jsxRuntimeExports.jsx("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-sm font-medium underline hover:no-underline",children:n.linkText||"Learn More"})]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>(r=>{const n=[...e,r];t(n),localStorage.setItem("dismissedBanners",JSON.stringify(n))})(n.id),className:"flex-shrink-0 h-6 w-6 p-0 hover:bg-black/10",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]})})}function MessageNotifications({user:e}){const t=!!e,[r,n]=reactExports.useState(Date.now());if(!t||!e)return null;const{data:s,refetch:i,error:o,isLoading:a}=useQuery({queryKey:["/api/message-notifications/unread-counts"],enabled:!!e,refetchInterval:12e4});if(reactExports.useEffect(()=>{if(!e)return;const t=()=>{console.log("Refreshing notification counts after chat read"),i()};return window.addEventListener("refreshNotifications",t),()=>{window.removeEventListener("refreshNotifications",t)}},[e,i]),reactExports.useEffect(()=>{if(!e)return;let t=null,r=null;try{const s=(()=>{if("undefined"==typeof window)return"";const e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return t.includes("replit.dev")||t.includes("replit.com")?`${e}//${t}/notifications`:t.includes("localhost")||t.startsWith("127.0.0.1")?`${e}//localhost:5000/notifications`:`${e}//${t}/notifications`})();if(console.log("Connecting to WebSocket at:",s),!s)return void console.warn("Unable to construct WebSocket URL");const o=()=>{try{t=new WebSocket(s),t.onopen=()=>{console.log("WebSocket connected successfully"),t&&e&&t.send(JSON.stringify({type:"identify",userId:e.id}))},t.onmessage=e=>{try{const t=JSON.parse(e.data);console.log("WebSocket notification received:",t),"notification"===t.type&&(i(),n(Date.now()))}catch(t){console.error("Error parsing WebSocket message:",t)}},t.onclose=e=>{console.log("WebSocket connection closed:",e.code,e.reason),t=null,1e3!==e.code&&(r=setTimeout(o,5e3))},t.onerror=e=>{console.error("WebSocket error:",e),t=null}}catch(a){console.error("Failed to create WebSocket connection:",a),r=setTimeout(o,1e4)}};o()}catch(s){console.error("Failed to initialize WebSocket:",s)}return()=>{r&&clearTimeout(r),t&&t.close(1e3,"Component unmounting")}},[e,i]),reactExports.useEffect(()=>{"undefined"!=typeof Notification&&"default"===Notification.permission&&Notification.requestPermission()},[]),a)return null;if(o)return null;const l=s||{general:0,committee:0,hosts:0,drivers:0,recipients:0,core_team:0,direct:0,groups:0,total:0},c=l.total||0,u=e=>({general:"General Chat",committee:"Committee Chat",hosts:"Host Chat",drivers:"Driver Chat",recipients:"Recipient Chat",core_team:"Core Team",direct:"Direct Messages",groups:"Group Messages"}[e]||e);return jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",className:"relative",children:[jsxRuntimeExports.jsx(Bell,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-green-400 rounded-full",title:"Notifications Active"}),c>0&&jsxRuntimeExports.jsx(Badge,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0 text-xs",children:c>99?"99+":c})]})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",className:"w-80",children:[jsxRuntimeExports.jsx(DropdownMenuLabel,{className:"font-semibold",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Message Notifications"}),c>0&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:async()=>{try{await apiRequest("POST","/api/message-notifications/mark-all-read"),i()}catch(e){}},className:"text-xs h-6 px-2",children:"Mark all read"})]})}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),0===c?jsxRuntimeExports.jsx(DropdownMenuItem,{className:"text-muted-foreground",children:"No unread messages"}):Object.entries(l).filter(([e,t])=>"total"!==e&&t>0).map(([e,t])=>jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"flex items-center justify-between cursor-pointer",onClick:()=>{return t=e,void(window.location.href="direct"===t||"groups"===t?"/messages":"/dashboard?section=chat");var t},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:u(e)})]}),jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"ml-2",children:t})]},e))]})]})}function WorkLogPage(){const{user:e}=useAuth(),t=hasPermission(e,PERMISSIONS.CREATE_WORK_LOGS);hasPermission(e,PERMISSIONS.CREATE_WORK_LOGS);const r=hasPermission(e,PERMISSIONS.CREATE_WORK_LOGS),n=hasPermission(e,PERMISSIONS.VIEW_ALL_WORK_LOGS);hasPermission(e,PERMISSIONS.EDIT_ALL_WORK_LOGS);const s=hasPermission(e,PERMISSIONS.DELETE_ALL_WORK_LOGS),[i,o]=reactExports.useState(""),[a,l]=reactExports.useState(0),[c,u]=reactExports.useState(0),[d,p]=reactExports.useState(()=>(new Date).toISOString().split("T")[0]),{data:m=[],refetch:x,isLoading:f,error:h}=useQuery({queryKey:["/api/work-logs"],queryFn:async()=>{console.log(" Work logs query function called");const e=await apiRequest("GET","/api/work-logs");return console.log(" Work logs API response data:",e),e},enabled:!!e,staleTime:0,gcTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),g=Array.isArray(m)?m:[],y=useMutation({mutationFn:async()=>await apiRequest("POST","/api/work-logs",{description:i||"Work logged",hours:a,minutes:c,workDate:d+"T12:00:00.000Z"}),onSuccess:()=>{o(""),l(0),u(0),p(()=>(new Date).toISOString().split("T")[0]),queryClient.invalidateQueries({queryKey:["/api/work-logs"]}),x()}}),j=useMutation({mutationFn:async e=>await apiRequest("DELETE",`/api/work-logs/${e}`),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/work-logs"]}),x()}});return jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto py-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400 px-2",children:["Debug: ",g.length," logs loaded  User: ",(null==e?void 0:e.email)||"Unknown"]}),t&&jsxRuntimeExports.jsxs(Card$1,{className:"shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-4",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-lg font-semibold text-gray-900",children:"Log Your Work"})}),jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs("form",{onSubmit:e=>{e.preventDefault(),y.mutate()},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Work Date"}),jsxRuntimeExports.jsx(Input,{type:"date",value:d,onChange:e=>p(e.target.value),required:!0,className:"w-full sm:w-48"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Time Spent"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Input,{type:"number",min:0,max:23,value:a,onChange:e=>l(Number(e.target.value)),placeholder:"0",required:!0,className:"w-16 text-center bg-white"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"hours"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Input,{type:"number",min:0,max:59,value:c,onChange:e=>u(Number(e.target.value)),placeholder:"0",required:!0,className:"w-16 text-center bg-white"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"minutes"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Work Description ",jsxRuntimeExports.jsx("span",{className:"text-gray-500 font-normal",children:"(optional)"})]}),jsxRuntimeExports.jsx(Textarea,{value:i,onChange:e=>o(e.target.value),placeholder:"Describe what you worked on (optional)...",rows:3,className:"resize-none"})]}),jsxRuntimeExports.jsx("div",{className:"pt-2",children:jsxRuntimeExports.jsx(Button,{type:"submit",disabled:y.isPending,className:"bg-[#FBAD3F] hover:bg-[#f09f2b] text-white font-medium px-6",children:y.isPending?"Logging...":"Log Work"})})]})})]}),jsxRuntimeExports.jsxs(Card$1,{className:"shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader$1,{className:"pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-lg font-semibold text-gray-900",children:n?"All Work Logs":"My Work Logs"}),jsxRuntimeExports.jsx(Button,{onClick:()=>x(),variant:"outline",size:"sm",className:"text-xs",children:"Refresh"})]})}),jsxRuntimeExports.jsxs(CardContent$1,{children:[f&&jsxRuntimeExports.jsx("div",{className:"py-8 text-center text-gray-500",children:"Loading work logs..."}),h&&jsxRuntimeExports.jsxs("div",{className:"py-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-red-600 font-medium",children:"Error loading logs"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 mt-1",children:h.message})]}),!f&&!h&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[0===g.length&&jsxRuntimeExports.jsx("div",{className:"py-8 text-center text-gray-500",children:"No work logs found. Start by logging your first work session above."}),g.map(t=>jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"text-gray-900 font-medium leading-relaxed",children:t.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium text-[#FBAD3F]",children:[t.hours,"h ",t.minutes,"m"]}),jsxRuntimeExports.jsx("span",{children:t.workDate?new Date(t.workDate).toLocaleDateString():new Date(t.createdAt).toLocaleDateString()}),(null==t?void 0:t.userId)!==(null==e?void 0:e.id)&&jsxRuntimeExports.jsx("span",{className:"text-blue-600 text-xs px-2 py-1 bg-blue-50 rounded-full",children:"Other user"})]}),(r&&(null==t?void 0:t.userId)===(null==e?void 0:e.id)||s)&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>j.mutate(null==t?void 0:t.id),disabled:j.isPending,className:"text-gray-400 hover:text-red-600 hover:bg-red-50 text-xs px-2 py-1",children:"Remove"})]})]},(null==t?void 0:t.id)||Math.random()))]})]})]})]})}function MessageComposer$1({contextType:e="direct",contextId:t,contextTitle:r,onSent:n,onCancel:s}){const[i,o]=reactExports.useState(""),[a,l]=reactExports.useState([]),{toast:c}=useToast(),{sendMessage:u,isSending:d}=useMessaging(),p=useQueryClient(),{data:m=[],isLoading:x}=useQuery({queryKey:["/api/users"],queryFn:async()=>{try{const e=await apiRequest("GET","/api/users");return Array.isArray(e)?e:[]}catch(e){return console.error("Error fetching users:",e),[]}},enabled:"direct"===e});return jsxRuntimeExports.jsxs(Card$1,{className:"w-full max-w-2xl mx-auto",children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg",children:["Compose Message","direct"!==e&&r&&jsxRuntimeExports.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["to ",r]})]}),s&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:s,children:jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"})})]}),"direct"!==e&&jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"w-fit",children:[e.charAt(0).toUpperCase()+e.slice(1)," Message"]})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-4",children:["direct"===e&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Recipients"}),x?jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Loading users..."}):jsxRuntimeExports.jsx("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto border rounded-lg p-3 bg-white dark:bg-gray-900",children:0===m.length?jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"No users available"}):m.map(e=>jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md transition-colors",children:[jsxRuntimeExports.jsx(Checkbox,{id:e.id,checked:a.includes(e.id),onCheckedChange:t=>{l(t?[...a,e.id]:a.filter(t=>t!==e.id))}}),jsxRuntimeExports.jsxs("label",{htmlFor:e.id,className:"text-sm cursor-pointer text-gray-900 dark:text-gray-100 font-medium flex-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.email}),e.email&&e.firstName&&jsxRuntimeExports.jsxs("span",{className:"text-gray-600 dark:text-gray-400 ml-1 font-normal",children:["(",e.email,")"]})]})]},e.id))}),a.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:"Selected:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.map(e=>{const t=m.find(t=>t.id===e);return t?jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.email},e):null})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Message"}),jsxRuntimeExports.jsx(Textarea,{placeholder:"Type your message...",value:i,onChange:e=>o(e.target.value),rows:4,className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[s&&jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),jsxRuntimeExports.jsxs(Button,{onClick:async()=>{if(i.trim())if(0!==a.length){console.log("Sending message:",{recipientIds:a,content:i.trim(),contextType:e,contextId:t,recipientCount:a.length});try{await u({recipientIds:a,content:i.trim(),contextType:e,contextId:t}),o(""),l([]),null==n||n(),c({description:"Message sent successfully"}),p.invalidateQueries({queryKey:["/api/messages"]})}catch(r){console.error("Failed to send message:",r),c({title:"Failed to send message",description:r instanceof Error?r.message:"Please try again",variant:"destructive"})}}else c({title:"Recipients required",description:"Please select at least one recipient",variant:"destructive"});else c({title:"Message content required",description:"Please enter a message",variant:"destructive"})},disabled:!i.trim()||d||"direct"===e&&0===a.length,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Send$c,{className:"h-4 w-4"}),d?"Sending...":"Send Message"]})]})]})]})}function SuggestionsPortal(){const[e,r]=reactExports.useState(null),[n,s]=reactExports.useState(!1),[i,o]=reactExports.useState(!1),[a,l]=reactExports.useState("all"),[c,u]=reactExports.useState(""),[d,p]=reactExports.useState(!1),[m,x]=reactExports.useState("all"),[f,h]=reactExports.useState("all"),{toast:g}=useToast(),y=useQueryClient(),{data:j}=useQuery({queryKey:["/api/auth/user"],enabled:!0}),b=hasPermission(j,"create_suggestions");hasPermission(j,"manage_suggestions"),hasPermission(j,"respond_to_suggestions");const{data:v=[],isLoading:E}=useQuery({queryKey:["/api/suggestions"],enabled:hasPermission(j,"access_suggestions")||hasPermission(j,"create_suggestions"),staleTime:0});reactExports.useEffect(()=>{if(e&&v.length>0){const t=v.find(t=>t.id===e.id);t&&r(t)}},[v,e]);const R=useMutation({mutationFn:e=>apiRequest("POST","/api/suggestions",e),onSuccess:()=>{y.invalidateQueries({queryKey:["/api/suggestions"]}),s(!1),N.reset(),g({title:"Success",description:"Your suggestion has been submitted successfully!"})},onError:e=>{g({title:"Error",description:(null==e?void 0:e.message)||"Failed to submit suggestion",variant:"destructive"})}}),S=useMutation({mutationFn:e=>apiRequest("POST",`/api/suggestions/${e}/upvote`),onSuccess:()=>{y.invalidateQueries({queryKey:["/api/suggestions"]}),g({title:"Success",description:"Suggestion upvoted!"})}}),w=useMutation({mutationFn:({id:e,updates:t})=>apiRequest("PATCH",`/api/suggestions/${e}`,t),onSuccess:t=>{e&&t&&r({...e,...t}),y.invalidateQueries({queryKey:["/api/suggestions"]}),y.refetchQueries({queryKey:["/api/suggestions"]}),g({title:"Success",description:"Suggestion updated successfully!"})},onError:e=>{g({title:"Error",description:"Failed to update suggestion",variant:"destructive"})}}),$=useMutation({mutationFn:e=>apiRequest("DELETE",`/api/suggestions/${e}`),onSuccess:()=>{y.invalidateQueries({queryKey:["/api/suggestions"]}),r(null),g({title:"Suggestion deleted",description:"The suggestion has been permanently removed."})},onError:e=>{console.error("Failed to delete suggestion:",e),g({title:"Error",description:"Failed to delete suggestion. Please try again.",variant:"destructive"})}}),N=useForm({resolver:t(suggestionSchema),defaultValues:{category:"general",priority:"medium",isAnonymous:!1,tags:[]}}),_=v.filter(e=>{let t=!0;switch(a){case"pending":t="submitted"===e.status||"under_review"===e.status||"needs_clarification"===e.status;break;case"in-progress":t="in_progress"===e.status;break;case"completed":t="completed"===e.status;break;case"mine":t=e.submittedBy===(null==j?void 0:j.id);break;default:t=!0}const r=""===c||e.title.toLowerCase().includes(c.toLowerCase())||e.description.toLowerCase().includes(c.toLowerCase())||e.category.toLowerCase().includes(c.toLowerCase()),n="all"===m||e.category===m,s="all"===f||e.priority===f;return t&&r&&n&&s}),C=e=>{switch(e){case"high":return"bg-red-50 text-red-700 border-red-200";case"medium":return"bg-amber-50 text-amber-700 border-amber-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};if(!hasPermission(j,"access_suggestions")&&!hasPermission(j,"create_suggestions"))return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:jsxRuntimeExports.jsx(Card$1,{className:"w-full max-w-md",children:jsxRuntimeExports.jsxs(CardHeader$1,{className:"text-center",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"h-12 w-12 mx-auto text-gray-400"}),jsxRuntimeExports.jsx(CardTitle,{children:"Access Required"}),jsxRuntimeExports.jsx(CardDescription,{children:"You need permission to view the suggestions portal."})]})})});const O=(()=>{const e=v;return{all:e.length,pending:e.filter(e=>["submitted","under_review","needs_clarification"].includes(e.status)).length,inProgress:e.filter(e=>"in_progress"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,mine:e.filter(e=>e.submittedBy===(null==j?void 0:j.id)).length}})();return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-br from-teal-600 to-teal-700 text-white",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1",children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold font-roboto flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"bg-white/20 rounded-lg p-2",children:jsxRuntimeExports.jsx(Lightbulb,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsx("span",{className:"truncate",children:"Suggestions Portal"})]}),jsxRuntimeExports.jsx("p",{className:"text-teal-100 mt-2 text-lg font-roboto",children:"Share ideas and feedback to improve our operations"}),jsxRuntimeExports.jsx("div",{className:"bg-white/10 rounded-lg p-4 mt-4",children:jsxRuntimeExports.jsx("p",{className:"text-white leading-relaxed",children:"If you need something to work differently, if something is confusing to you, you have tips on how we could better arrange this whole site, or if you run into a bug, please submit your feedback here so we can get this where it serves your needs the best it possibly can!"})})]}),b&&jsxRuntimeExports.jsxs(Dialog,{open:n,onOpenChange:s,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{size:"lg",className:"bg-orange-500 hover:bg-orange-600 text-white shadow-lg w-full sm:w-auto font-semibold",children:[jsxRuntimeExports.jsx(Plus,{className:"h-5 w-5 mr-2"}),"Submit New Suggestion"]})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Submit a New Suggestion"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Share your ideas for improving our operations, processes, or services."})]}),jsxRuntimeExports.jsx(Form,{...N,children:jsxRuntimeExports.jsxs("form",{onSubmit:N.handleSubmit(e=>{R.mutate(e)}),className:"space-y-4",children:[jsxRuntimeExports.jsx(FormField,{control:N.control,name:"title",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Title"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Brief summary of your suggestion",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:N.control,name:"description",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Description"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Textarea,{placeholder:"Detailed description of your suggestion, including benefits and implementation ideas",rows:5,...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(FormField,{control:N.control,name:"category",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Category"}),jsxRuntimeExports.jsxs(Select,{onValueChange:e.onChange,defaultValue:e.value,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select category"})})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"general",children:"General"}),jsxRuntimeExports.jsx(SelectItem,{value:"operations",children:"Operations"}),jsxRuntimeExports.jsx(SelectItem,{value:"technology",children:"Technology"}),jsxRuntimeExports.jsx(SelectItem,{value:"volunteer_experience",children:"Volunteer Experience"}),jsxRuntimeExports.jsx(SelectItem,{value:"communication",children:"Communication"}),jsxRuntimeExports.jsx(SelectItem,{value:"training",children:"Training"}),jsxRuntimeExports.jsx(SelectItem,{value:"logistics",children:"Logistics"})]})]}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:N.control,name:"priority",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Priority"}),jsxRuntimeExports.jsxs(Select,{onValueChange:e.onChange,defaultValue:e.value,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select priority"})})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"low",children:"Low"}),jsxRuntimeExports.jsx(SelectItem,{value:"medium",children:"Medium"}),jsxRuntimeExports.jsx(SelectItem,{value:"high",children:"High"})]})]}),jsxRuntimeExports.jsx(FormMessage,{})]})})]}),jsxRuntimeExports.jsx(FormField,{control:N.control,name:"isAnonymous",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{className:"text-base",children:"Submit Anonymously"}),jsxRuntimeExports.jsx(FormDescription,{children:"Your name will not be shown with this suggestion"})]}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Switch,{checked:e.value,onCheckedChange:e.onChange})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:R.isPending,children:R.isPending?"Submitting...":"Submit Suggestion"})]})]})})]})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 pb-8 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-gray-200 bg-gray-50 rounded-t-xl px-6 py-4",children:jsxRuntimeExports.jsxs("h2",{className:"text-lg font-bold text-gray-800 font-roboto flex items-center gap-2",children:[jsxRuntimeExports.jsx(Search$c,{className:"h-5 w-5 text-teal-600"}),"Search & Filter Suggestions"]})}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Search$c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),jsxRuntimeExports.jsx(Input,{placeholder:"Search suggestions...",value:c,onChange:e=>u(e.target.value),className:"pl-10 h-11 border-gray-300 focus:border-teal-500 focus:ring-teal-500"})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:()=>p(!d),className:"flex items-center gap-2 h-11 border-gray-300 hover:border-teal-500 hover:text-teal-600",children:[jsxRuntimeExports.jsx(Filter,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Filters"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Filter"}),("all"!==m||"all"!==f)&&jsxRuntimeExports.jsx(Badge,{className:"ml-1 bg-orange-500 text-white",children:["all"!==m?1:0,"all"!==f?1:0].reduce((e,t)=>e+t)})]})]}),d&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:flex lg:flex-wrap gap-4 mt-4 pt-4 border-t border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1 sm:min-w-[200px]",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-semibold text-gray-700",children:"Category"}),jsxRuntimeExports.jsxs(Select,{value:m,onValueChange:x,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"mt-1 border-gray-300 focus:border-teal-500 focus:ring-teal-500",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"All Categories"}),jsxRuntimeExports.jsx(SelectItem,{value:"general",children:"General"}),jsxRuntimeExports.jsx(SelectItem,{value:"operations",children:"Operations"}),jsxRuntimeExports.jsx(SelectItem,{value:"technology",children:"Technology"}),jsxRuntimeExports.jsx(SelectItem,{value:"volunteer_experience",children:"Volunteer Experience"}),jsxRuntimeExports.jsx(SelectItem,{value:"communication",children:"Communication"}),jsxRuntimeExports.jsx(SelectItem,{value:"training",children:"Training"}),jsxRuntimeExports.jsx(SelectItem,{value:"logistics",children:"Logistics"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1 sm:min-w-[150px]",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-semibold text-gray-700",children:"Priority"}),jsxRuntimeExports.jsxs(Select,{value:f,onValueChange:h,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"mt-1 border-gray-300 focus:border-teal-500 focus:ring-teal-500",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"All Priorities"}),jsxRuntimeExports.jsx(SelectItem,{value:"high",children:"High"}),jsxRuntimeExports.jsx(SelectItem,{value:"medium",children:"Medium"}),jsxRuntimeExports.jsx(SelectItem,{value:"low",children:"Low"})]})]})]}),("all"!==m||"all"!==f)&&jsxRuntimeExports.jsx("div",{className:"flex items-end",children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>{x("all"),h("all")},className:"text-sm text-orange-600 hover:text-orange-700 hover:bg-orange-50 w-full sm:w-auto",children:"Clear Filters"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-gray-200 bg-gray-50 rounded-t-xl px-6 py-4",children:jsxRuntimeExports.jsxs("h2",{className:"text-lg font-bold text-gray-800 font-roboto flex items-center gap-2",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"h-5 w-5 text-teal-600"}),"Browse Suggestions by Status"]})}),jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsxs(Tabs,{value:a,onValueChange:l,className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:`grid w-full ${b&&hasPermission(j,"submit_suggestions")?"grid-cols-3 sm:grid-cols-5":"grid-cols-2 sm:grid-cols-4"} gap-2 bg-gray-100 p-1 rounded-lg`,children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"all",className:"flex items-center gap-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900",children:[jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"All Suggestions"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"All"}),jsxRuntimeExports.jsx(Badge,{className:"bg-gray-600 text-white text-xs min-w-[20px] justify-center",children:O.all})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"pending",className:"flex items-center gap-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900",children:[jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Pending Review"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Pending"}),jsxRuntimeExports.jsx(Badge,{className:"bg-yellow-600 text-white text-xs min-w-[20px] justify-center",children:O.pending})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"in-progress",className:"flex items-center gap-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900",children:[jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"In Progress"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Active"}),jsxRuntimeExports.jsx(Badge,{className:"bg-blue-600 text-white text-xs min-w-[20px] justify-center",children:O.inProgress})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"completed",className:"flex items-center gap-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900",children:[jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Completed"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Done"}),jsxRuntimeExports.jsx(Badge,{className:"bg-green-600 text-white text-xs min-w-[20px] justify-center",children:O.completed})]}),b&&jsxRuntimeExports.jsxs(TabsTrigger,{value:"mine",className:"flex items-center gap-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-900",children:[jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"My Suggestions"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Mine"}),jsxRuntimeExports.jsx(Badge,{className:"bg-teal-600 text-white text-xs min-w-[20px] justify-center",children:O.mine})]})]}),jsxRuntimeExports.jsx(TabsContent,{value:a,className:"mt-0",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 mt-6",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-gray-200 bg-gray-50 rounded-t-xl px-6 py-4",children:jsxRuntimeExports.jsxs("h2",{className:"text-lg font-bold text-gray-800 font-roboto flex items-center gap-2",children:[jsxRuntimeExports.jsx(MessageSquare,{className:"h-5 w-5 text-teal-600"}),"all"===a&&"All Suggestions","pending"===a&&"Pending Review","in-progress"===a&&"In Progress","completed"===a&&"Completed","mine"===a&&"My Suggestions",jsxRuntimeExports.jsx(Badge,{className:"bg-gray-600 text-white ml-2",children:_.length})]})}),jsxRuntimeExports.jsx("div",{className:"p-6",children:E?jsxRuntimeExports.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>jsxRuntimeExports.jsxs("div",{className:"animate-pulse border border-gray-200 rounded-lg p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),jsxRuntimeExports.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),jsxRuntimeExports.jsx("div",{className:"h-5 w-5 bg-gray-200 rounded"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 rounded"}),jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]},e))}):0===_.length?jsxRuntimeExports.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200 rounded-lg",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:c||"all"!==m||"all"!==f?"No suggestions match your filters":"No suggestions found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 mb-6",children:"mine"===a&&b?"You haven't submitted any suggestions yet.":c||"all"!==m||"all"!==f?"Try adjusting your search or filter criteria.":"Be the first to share an idea for improvement."}),b&&("mine"===a||!c&&"all"===m&&"all"===f)&&jsxRuntimeExports.jsxs(Button,{onClick:()=>s(!0),className:"bg-orange-500 hover:bg-orange-600 text-white",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"Submit Your First Suggestion"]})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:_.map(e=>{const t=(e=>{switch(e){case"completed":return{icon:jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4"}),color:"text-green-600",bg:"bg-green-50",label:"Completed"};case"in_progress":return{icon:jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4"}),color:"text-blue-600",bg:"bg-blue-50",label:"In Progress"};case"under_review":return{icon:jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4"}),color:"text-purple-600",bg:"bg-purple-50",label:"Under Review"};case"needs_clarification":return{icon:jsxRuntimeExports.jsx(MessageSquare,{className:"h-4 w-4"}),color:"text-orange-600",bg:"bg-orange-50",label:"Needs Clarification"};case"on_hold":return{icon:jsxRuntimeExports.jsx(Pause,{className:"h-4 w-4"}),color:"text-yellow-600",bg:"bg-yellow-50",label:"On Hold"};case"rejected":return{icon:jsxRuntimeExports.jsx(CircleX,{className:"h-4 w-4"}),color:"text-red-600",bg:"bg-red-50",label:"Rejected"};default:return{icon:jsxRuntimeExports.jsx(Star,{className:"h-4 w-4"}),color:"text-gray-600",bg:"bg-gray-50",label:"Submitted"}}})(e.status);return jsxRuntimeExports.jsx("div",{className:`border border-gray-200 rounded-lg hover:shadow-md transition-all duration-200 border-l-4 ${(e=>{switch(e){case"completed":return"border-l-green-500";case"in_progress":return"border-l-blue-500";case"under_review":return"border-l-purple-500";case"needs_clarification":return"border-l-orange-500";case"on_hold":return"border-l-yellow-500";case"rejected":return"border-l-red-500";default:return"border-l-gray-400"}})(e.status)} group bg-white`,children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>r(e),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:`${t.bg} ${t.color} border-0 text-xs font-medium`,children:[t.icon,jsxRuntimeExports.jsx("span",{className:"ml-1",children:t.label})]}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:`${C(e.priority)} border text-xs`,children:e.priority.charAt(0).toUpperCase()+e.priority.slice(1)})]}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold group-hover:text-blue-600 transition-colors line-clamp-2 mb-2",children:e.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 line-clamp-2 text-sm",children:e.description.length>120?`${e.description.substring(0,120)}...`:e.description})]}),jsxRuntimeExports.jsx(ArrowUpRight,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-500 transition-colors flex-shrink-0"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:e.isAnonymous?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(EyeOff,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Anonymous"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(User,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:e.submitterName||"Unknown"})]})}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:e.category.replace("_"," ")}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),S.mutate(e.id)},className:"flex items-center gap-1 h-8 px-2 hover:bg-blue-50 hover:text-blue-600",children:[jsxRuntimeExports.jsx(ThumbsUp,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:e.upvotes||0})]})})]}),hasPermission(j,"manage_suggestions")&&jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-gray-100",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),w.mutate({id:e.id,updates:{status:"under_review",assignedTo:null==j?void 0:j.id}})},disabled:"under_review"===e.status,className:"h-8 px-3 text-xs text-blue-700 hover:bg-blue-50 hover:text-blue-800",children:[jsxRuntimeExports.jsx(Eye,{className:"h-3 w-3 mr-1.5"}),"Review"]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),w.mutate({id:e.id,updates:{status:"in_progress",assignedTo:null==j?void 0:j.id}})},disabled:"in_progress"===e.status,className:"h-8 px-3 text-xs text-orange-700 hover:bg-orange-50 hover:text-orange-800",children:[jsxRuntimeExports.jsx(Clock,{className:"h-3 w-3 mr-1.5"}),"In Progress"]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),w.mutate({id:e.id,updates:{status:"completed",assignedTo:null==j?void 0:j.id}})},disabled:"completed"===e.status,className:"h-8 px-3 text-xs text-green-700 hover:bg-green-50 hover:text-green-800",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-3 w-3 mr-1.5"}),"Complete"]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),(e=>{r(e),o(!0)})(e)},className:"h-8 px-3 text-xs text-purple-700 hover:bg-purple-50 hover:text-purple-800",children:[jsxRuntimeExports.jsx(Mail,{className:"h-3 w-3 mr-1.5"}),"Ask for Details"]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),confirm("Are you sure you want to delete this suggestion? This action cannot be undone.")&&$.mutate(e.id)},className:"h-8 px-3 text-xs text-red-700 hover:bg-red-50 hover:text-red-800",children:[jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3 mr-1.5"}),"Delete"]})]})]})]})},e.id)})})})]})})]})})]})]}),jsxRuntimeExports.jsx(Dialog,{open:!!e&&!i,onOpenChange:()=>r(null),children:jsxRuntimeExports.jsx(DialogContent,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:e&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{className:"text-xl",children:e.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[jsxRuntimeExports.jsxs(Badge,{className:C(e.priority),children:[e.priority," priority"]}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:e.category}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:e.isAnonymous?"Anonymous":e.submitterName||"Unknown"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.description})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[jsxRuntimeExports.jsxs("span",{children:["Submitted: ",new Date(e.createdAt).toLocaleDateString()]}),jsxRuntimeExports.jsxs("span",{children:["Status: ",e.status.replace("_"," ")]})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>S.mutate(e.id),className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx(ThumbsUp,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:e.upvotes||0})]})]})]})]})})}),jsxRuntimeExports.jsx(Dialog,{open:i,onOpenChange:o,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsxs(DialogTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Mail,{className:"h-5 w-5 text-blue-600"}),"Request Clarification"]}),jsxRuntimeExports.jsxs(DialogDescription,{children:["Send a message to ",(null==e?void 0:e.isAnonymous)?"the anonymous submitter":null==e?void 0:e.submitterName," requesting more details about their suggestion."]})]}),e&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2",children:e.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:e.description})]}),jsxRuntimeExports.jsx(MessageComposer$1,{contextType:"suggestion",contextId:String(e.id),contextTitle:e.title,defaultRecipients:e.isAnonymous?[]:[{id:e.submittedBy,name:e.submitterName||"Unknown"}],compact:!0,onSent:()=>{o(!1),g({title:"Clarification Request Sent",description:"The author will be notified and can respond through the messaging system."})},onCancel:()=>o(!1)})]})]})})]})}function GoogleSheetsViewer({initialUrl:e="",title:t="Google Sheets Viewer",height:r=600}){const[n,s]=reactExports.useState(!1),[i,o]=reactExports.useState(""),[a,l]=reactExports.useState(!1),[c,u]=reactExports.useState(null),[d,p]=reactExports.useState(!1),[m,x]=reactExports.useState(!1),{user:f}=useAuth();reactExports.useEffect(()=>{h()},[]);const h=async()=>{try{const e=await apiRequest("GET","/api/project-data/status");u(e)}catch(e){console.error("Failed to check fallback status:",e)}},g=()=>{window.open("/api/project-data/current","_blank")};return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsxs(CardHeader$1,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"h-5 w-5"}),t]}),jsxRuntimeExports.jsx(CardDescription,{children:"Displays the most recent copy of our sandwich totals spreadsheet. This is a static file that shows our complete collection data."})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Sandwich Totals Spreadsheet"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Complete collection data from 2023-2025"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:g,title:"Download spreadsheet",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Download"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:g,title:"Open in new tab",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"h-4 w-4"}),"Open"]})]})]}),!(null==c?void 0:c.hasFile)&&jsxRuntimeExports.jsxs(Alert,{variant:"default",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"h-4 w-4"}),jsxRuntimeExports.jsx(AlertDescription,{children:"No sandwich data file is currently available. Please contact an administrator to upload the latest spreadsheet."})]}),hasPermission(f,"manage_files")&&jsxRuntimeExports.jsxs("div",{className:"border-t pt-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-2",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Update Sandwich Data"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Upload the latest sandwich totals spreadsheet"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"file-upload",className:"cursor-pointer",children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",disabled:d,className:"flex items-center gap-2",asChild:!0,children:jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4"}),d?"Uploading...":"Upload New File"]})})}),jsxRuntimeExports.jsx(Input,{id:"file-upload",type:"file",accept:".xlsx,.xls,.csv,.pdf",onChange:async e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(r){p(!0);try{const e=new FormData;e.append("file",r),await apiRequest("POST","/api/project-data/upload",e),await h(),o("")}catch(n){o("Failed to upload file. Please try again.")}finally{p(!1)}}},className:"hidden"}),(null==c?void 0:c.hasFile)&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-green-600",children:["Current: ",c.fileName]})]}),i&&d&&jsxRuntimeExports.jsxs(Alert,{variant:"destructive",className:"mt-3",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"h-4 w-4"}),jsxRuntimeExports.jsx(AlertDescription,{children:i})]})]})]})]}),jsxRuntimeExports.jsxs(Card$1,{children:[jsxRuntimeExports.jsx(CardHeader$1,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Sandwich Totals Data Sheet"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[jsxRuntimeExports.jsx("span",{children:"Read-only view"}),n&&jsxRuntimeExports.jsx(RefreshCw,{className:"h-4 w-4 animate-spin"})]})]})}),jsxRuntimeExports.jsx(CardContent$1,{children:(null==c?void 0:c.hasFile)?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"border rounded-lg overflow-hidden",children:jsxRuntimeExports.jsx("iframe",{src:"/api/project-data/current",width:"100%",height:r,style:{border:"none"},title:"Sandwich Totals Data Sheet",onLoad:()=>s(!1)})}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-600",children:["File: ",c.fileName]})})]}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64 border-2 border-dashed border-gray-300 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"No sandwich data file available"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Contact an administrator to upload the spreadsheet"})]})})})]})]})}function GoogleSheetsPage(){const{user:e}=useAuth();return hasPermission(e,PERMISSIONS.VIEW_SANDWICH_DATA)?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sandwich Totals Data Sheet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-2",children:"Complete sandwich collection data from 2023-2025. This displays the latest version of the sandwich totals spreadsheet in read-only format."})]}),jsxRuntimeExports.jsx(GoogleSheetsViewer,{title:"Sandwich Totals Data Sheet",height:700}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"About This Data Sheet:"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Complete sandwich collection totals spanning 2023-2025"}),jsxRuntimeExports.jsx("li",{children:" Shows the most recent version of the data spreadsheet"}),jsxRuntimeExports.jsx("li",{children:" Automatically displays static backup if live version isn't accessible"}),jsxRuntimeExports.jsx("li",{children:" Data is read-only for viewing and analysis purposes"}),jsxRuntimeExports.jsx("li",{children:' Click "Open" to view in a new tab for better navigation'})]})]})]}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Restricted"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"You don't have permission to view the sandwich data spreadsheet."})]})})}function GmailStyleInbox(){var e;const{user:t}=useAuth(),{toast:r}=useToast(),[n,s]=reactExports.useState("inbox"),[i,o]=reactExports.useState(new Set),[a,l]=reactExports.useState(null),[c,u]=reactExports.useState(""),[d,p]=reactExports.useState(!1),[m,x]=reactExports.useState(!1),[f,h]=reactExports.useState(!1),[g,y]=reactExports.useState(!1),[j,b]=reactExports.useState("desktop");reactExports.useEffect(()=>{const e=()=>{const e=window.innerWidth;e<768?(b("mobile"),h(!0),y(!0)):e<900?(b("small-tablet"),h(!0),y(!1)):e<1200?(b("large-tablet"),h(!1),y(!1)):(b("desktop"),h(!1),y(!1))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const[v,E]=reactExports.useState(""),[R,S]=reactExports.useState(""),[w,$]=reactExports.useState(""),[N,_]=reactExports.useState(""),[C,O]=reactExports.useState(null),[T,P]=reactExports.useState(null),{data:A=[]}=useQuery({queryKey:["/api/users"]}),k="/api/emails",{data:I=[],refetch:D}=useQuery({queryKey:[k,n],queryFn:async()=>{const e=await apiRequest("GET",`/api/emails?folder=${n}`),t=Array.isArray(e)?e:e.messages||[];return console.log(`Fetched ${t.length} emails from ${n} folder`),t}}),{data:M=[]}=useQuery({queryKey:["/api/drafts"],enabled:"drafts"===n}),L=useMutation({mutationFn:async e=>e.id?await apiRequest("PUT",`/api/drafts/${e.id}`,e):await apiRequest("POST","/api/drafts",e),onSuccess:()=>{queryClient.invalidateQueries({queryKey:["/api/drafts"]})}}),F=useMutation({mutationFn:async e=>{const t={recipientId:e.recipientId,recipientName:e.recipientName,recipientEmail:e.recipientEmail,subject:e.subject||"Project Discussion",content:e.content,isDraft:e.isDraft||!1};return console.log("Sending email with data:",t),await apiRequest("POST","/api/emails",t)},onSuccess:()=>{queryClient.invalidateQueries({queryKey:[k]}),queryClient.invalidateQueries({queryKey:["/api/emails/unread-count"]}),p(!1),q(),r({description:"Message sent successfully"})},onError:e=>{console.error("Send email error:",e),r({description:"Failed to send message",variant:"destructive"})}}),B=useMutation({mutationFn:async e=>{var t;if(!a)throw new Error("No message selected for reply");const r={recipientId:a.senderId,recipientName:a.senderName,recipientEmail:a.senderEmail,subject:(null==(t=a.subject)?void 0:t.startsWith("Re: "))?a.subject:`Re: ${a.subject||"No Subject"}`,content:e.content,isDraft:!1};return console.log("Sending reply:",r),await apiRequest("POST","/api/emails",r)},onSuccess:()=>{queryClient.invalidateQueries({queryKey:[k]}),queryClient.invalidateQueries({queryKey:["/api/emails/unread-count"]}),x(!1),_(""),r({description:"Reply sent successfully"})},onError:e=>{console.error("Reply error:",e),r({description:"Failed to send reply",variant:"destructive"})}}),U=useMutation({mutationFn:async e=>{const t=e.map(e=>apiRequest("PATCH",`/api/emails/${e}`,{isRead:!0}));return await Promise.all(t)},onSuccess:()=>{queryClient.invalidateQueries({queryKey:[k]}),queryClient.invalidateQueries({queryKey:["/api/emails/unread-count"]}),r({description:"Marked as read"})},onError:e=>{console.error("Mark as read error:",e),r({description:"Failed to mark as read",variant:"destructive"})}});useMutation({mutationFn:async({messageId:e,isStarred:t})=>(console.log("Star not implemented for conversation messages:",e,t),Promise.resolve()),onSuccess:()=>{queryClient.invalidateQueries({queryKey:[k]})}});const H=useMutation({mutationFn:async e=>{const t=e.map(e=>apiRequest("PATCH",`/api/emails/${e}`,{isArchived:!0}));return await Promise.all(t)},onSuccess:()=>{queryClient.invalidateQueries({queryKey:[k]}),queryClient.invalidateQueries({queryKey:["/api/emails/unread-count"]}),o(new Set),r({description:"Messages archived successfully"})},onError:e=>{console.error("Archive error:",e),r({description:"Failed to archive messages",variant:"destructive"})}}),V=useMutation({mutationFn:async e=>{const t=e.map(e=>apiRequest("PATCH",`/api/emails/${e}`,{isTrashed:!0}));return await Promise.all(t)},onSuccess:()=>{queryClient.invalidateQueries({queryKey:[k]}),queryClient.invalidateQueries({queryKey:["/api/emails/unread-count"]}),o(new Set),r({description:"Messages moved to trash"})},onError:e=>{console.error("Trash error:",e),r({description:"Failed to move messages to trash",variant:"destructive"})}});useMutation({mutationFn:async e=>{const t=e.map(e=>apiRequest("DELETE",`/api/messages/${e}`));return Promise.all(t)},onSuccess:()=>{queryClient.invalidateQueries({queryKey:[k]}),o(new Set),r({description:"Messages deleted permanently"})}}),reactExports.useEffect(()=>{if(v||R||w){T&&clearTimeout(T);const e=setTimeout(()=>{var e,t;const r={id:null==C?void 0:C.id,recipientId:v,recipientName:(null==(e=A.find(e=>e.id===v))?void 0:e.firstName)+" "+(null==(t=A.find(e=>e.id===v))?void 0:t.lastName)||"",subject:R,content:w,lastSaved:(new Date).toISOString()};L.mutate(r),O(r)},2e3);P(e)}return()=>{T&&clearTimeout(T)}},[v,R,w]);const q=()=>{E(""),S(""),$(""),O(null)},W=I.filter(e=>{if(!c)return!0;const t=c.toLowerCase();return e.content.toLowerCase().includes(t)||e.senderName.toLowerCase().includes(t)}),G=e=>I.filter(t=>"inbox"===e&&!t.isRead).length,z=[{id:"inbox",label:"Inbox",icon:Inbox$1,count:G("inbox")},{id:"starred",label:"Starred",icon:Star,count:G("starred")},{id:"sent",label:"Sent",icon:Send$c,count:0},{id:"drafts",label:"Drafts",icon:PenLine,count:M.length},{id:"archived",label:"Archived",icon:Archive$c,count:G("archived")},{id:"trash",label:"Trash",icon:Trash2,count:G("trash")}];return jsxRuntimeExports.jsxs("div",{className:"flex h-[calc(100vh-120px)] bg-white relative",children:[!f&&("mobile"===j||"small-tablet"===j)&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>h(!0)}),jsxRuntimeExports.jsxs("div",{className:`\n        ${f?"hidden":"flex"} \n        ${"large-tablet"===j?"w-48":"w-64"} \n        border-r bg-white flex-col flex-shrink-0\n        transition-all duration-300 ease-in-out\n        ${"mobile"!==j&&"small-tablet"!==j||f?"relative":"fixed left-0 top-0 h-full w-64 z-50"}\n      `,children:[jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4 "+("desktop"===j?"hidden":"flex"),children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Navigation"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>h(!0),className:"h-6 w-6 p-1",children:jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>p(!0),className:"w-full gap-2 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white font-['Roboto'] font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"Compose"]})]}),jsxRuntimeExports.jsx(ScrollArea,{className:"flex-1",children:jsxRuntimeExports.jsx("div",{className:"px-2",children:z.map(e=>jsxRuntimeExports.jsxs("button",{onClick:()=>s(e.id),className:`\n                  w-full flex items-center justify-between px-3 py-2 mb-1 rounded-lg text-left transition-colors font-['Roboto']\n                  ${n===e.id?"bg-gradient-to-r from-amber-500 to-amber-600 text-white shadow-md":"hover:bg-amber-50 hover:border-amber-200 text-gray-700"}\n                `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(e.icon,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:e.label})]}),e.count>0&&jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:`\n                      h-5 px-2 text-xs\n                      ${n===e.id?"bg-white/20 text-white":"bg-gray-200 text-gray-800"}\n                    `,children:e.count})]},e.id))})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex bg-white min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:`\n          ${g?"hidden":"flex"} \n          ${a&&"desktop"===j?"w-2/5":""}\n          ${a&&"large-tablet"===j?"w-1/2":""}\n          ${!a||"small-tablet"!==j&&"mobile"!==j?"":"flex-1"}\n          ${a?"":"flex-1"}\n          border-r flex-col bg-white min-w-0\n          transition-all duration-300 ease-in-out\n        `,children:[jsxRuntimeExports.jsxs("div",{className:"border-b p-4 space-y-3 bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[f&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>h(!1),title:"Show folders",children:jsxRuntimeExports.jsx(Menu$d,{className:"h-4 w-4"})}),"mobile"===j&&a&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>y(!0),title:"Hide message list",children:jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold capitalize",children:n})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>D(),children:jsxRuntimeExports.jsx(RefreshCw,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search$c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),jsxRuntimeExports.jsx(Input,{placeholder:"Search messages...",value:c,onChange:e=>u(e.target.value),className:"pl-9 bg-white border-gray-300 text-gray-900 placeholder-gray-500"})]}),i.size>0&&jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-1 lg:gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>{i.size===I.length?o(new Set):o(new Set(I.map(e=>e.id)))},className:"text-xs lg:text-sm px-2 lg:px-3",children:i.size===I.length?"Deselect":"Select All"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>console.log("Mark Read not implemented for conversation messages"),className:"text-xs lg:text-sm px-2 lg:px-3",children:"Mark Read"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>{i.size>0&&H.mutate(Array.from(i))},disabled:0===i.size||H.isPending,className:"text-xs lg:text-sm px-2 lg:px-3",children:"Archive"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>{i.size>0&&V.mutate(Array.from(i))},disabled:0===i.size||V.isPending,className:"text-xs lg:text-sm px-2 lg:px-3",children:"Trash"})]})]}),jsxRuntimeExports.jsx(ScrollArea,{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:"divide-y",children:[W.map(e=>{var t,r;return jsxRuntimeExports.jsx("div",{onClick:()=>(e=>{l(e),e.isRead||U.mutate([e.id])})(e),className:`\n                    p-3 lg:p-5 cursor-pointer transition-colors hover:bg-amber-50 font-['Roboto'] border-b border-gray-100\n                    ${(null==a?void 0:a.id)===e.id?"bg-amber-100 border-r-4 border-amber-500 shadow-sm":""}\n                    ${e.isRead?"bg-white font-normal":"bg-blue-50 font-bold border-l-4 border-blue-500"}\n                  `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 lg:gap-3",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:i.has(e.id),onChange:t=>{t.stopPropagation(),(e=>{const t=new Set(i);t.has(e)?t.delete(e):t.add(e),o(t)})(e.id)},className:"mt-1 h-4 w-4 text-blue-600 bg-white border-gray-300 rounded focus:ring-blue-500"}),jsxRuntimeExports.jsx("button",{onClick:t=>{t.stopPropagation(),console.log("Star clicked for message",e.id)},className:"mt-1",children:jsxRuntimeExports.jsx(Star,{className:"h-4 w-4 text-gray-300"})}),jsxRuntimeExports.jsx(Avatar$1,{className:"h-7 w-7 lg:h-8 lg:w-8 flex-shrink-0",children:jsxRuntimeExports.jsx(AvatarFallback,{className:"text-xs bg-gray-200 text-gray-800",children:"sent"===n?(null==(t=e.recipientName||"U")?void 0:t.split(" ").map(e=>e[0]).join("").toUpperCase())||"U":(null==(r=e.senderName||"U")?void 0:r.split(" ").map(e=>e[0]).join("").toUpperCase())||"U"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2 gap-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm flex-1 truncate "+(e.isRead?"font-medium text-gray-700":"font-bold text-gray-900"),children:"sent"===n?e.recipientName||"Unknown":e.senderName||"Unknown"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:(()=>{try{return e.createdAt?formatDistanceToNow(new Date(e.createdAt),{addSuffix:!0}):"No date"}catch(t){return"Invalid date"}})()})]}),jsxRuntimeExports.jsx("p",{className:"text-sm leading-relaxed "+(e.isRead?"font-normal text-gray-600":"font-bold text-gray-900"),style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word"},children:e.content})]})]})},e.id)}),0===W.length&&jsxRuntimeExports.jsx("div",{className:"p-8 text-center text-gray-500",children:c?"No messages found matching your search":`No ${n} messages`})]})})]}),jsxRuntimeExports.jsx("div",{className:`\n          ${a?"flex-1":""} \n          ${a||"desktop"!==j?"":"flex flex-1"}\n          ${a||"desktop"===j?"":"hidden"}\n          ${a?"flex":""}\n          flex-col bg-white\n        `,children:a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"border-b p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[g&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>y(!1),title:"Show message list",children:jsxRuntimeExports.jsx(Menu$d,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>l(null),children:" Back"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:a.content.length>40?`${a.content.substring(0,40)}...`:a.content})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>x(!0),children:jsxRuntimeExports.jsx(Reply$c,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>console.log("Star clicked for message",a.id),children:jsxRuntimeExports.jsx(Star,{className:"h-4 w-4 text-gray-300"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>{a&&(H.mutate([a.id]),l(null))},disabled:H.isPending,children:jsxRuntimeExports.jsx(Archive$c,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>{a&&(V.mutate([a.id]),l(null))},disabled:V.isPending,children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Avatar$1,{className:"h-10 w-10",children:jsxRuntimeExports.jsx(AvatarFallback,{className:"bg-gray-200 text-gray-800",children:(null==(e=a.senderName)?void 0:e.split(" ").map(e=>e[0]).join("").toUpperCase())||"U"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"font-medium",children:["From: ",a.senderName]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:a.senderEmail})]}),jsxRuntimeExports.jsx("div",{className:"ml-auto text-sm text-gray-500",children:(()=>{try{return a.createdAt?new Date(a.createdAt).toLocaleString():"No date"}catch(e){return"Invalid date"}})()})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 "+(a.content.length>500?"flex-1 overflow-y-auto":"flex-shrink-0"),children:jsxRuntimeExports.jsx("div",{className:"prose max-w-none",children:jsxRuntimeExports.jsx("div",{className:"whitespace-pre-wrap",children:a.content})})}),a.content.length<=500&&jsxRuntimeExports.jsx("div",{className:"flex-1 min-h-0"}),m&&jsxRuntimeExports.jsx("div",{className:"border-t p-4 flex-shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs(Label$1,{children:["Reply to ",a.senderName]}),jsxRuntimeExports.jsx(Textarea,{placeholder:"Type your reply...",value:N,onChange:e=>_(e.target.value),rows:4}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:()=>x(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{a&&N?(console.log("Sending reply with data:",{content:N,sender:null,recipientId:a.userId,conversationName:null,conversationId:a.conversationId}),B.mutate({content:N,sender:null,recipientId:a.userId,conversationName:null,conversationId:a.conversationId})):r({description:"Please enter a reply message",variant:"destructive"})},disabled:B.isPending,children:B.isPending?"Sending...":"Send Reply"})]})]})})]}):jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx(Inbox$1,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),jsxRuntimeExports.jsx("p",{className:"text-lg",children:"Select a message to read"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mt-6",children:[f&&jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>h(!1),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Menu$d,{className:"h-4 w-4"}),"Show Folders"]}),g&&jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>y(!1),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Menu$d,{className:"h-4 w-4"}),"Show Messages"]})]})]})})})]}),jsxRuntimeExports.jsx(Dialog,{open:d,onOpenChange:p,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl bg-white border border-gray-200 rounded-xl shadow-xl",children:[jsxRuntimeExports.jsx(DialogHeader,{className:"pb-4 border-b border-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-1 h-8 bg-gradient-to-b from-amber-400 to-amber-500 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(DialogTitle,{className:"text-xl font-bold text-gray-800 font-['Roboto']",children:"New Message"}),jsxRuntimeExports.jsx(DialogDescription,{className:"text-gray-600 font-['Roboto']",children:"Send a message to your team member"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-5 py-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"recipient",className:"text-sm font-semibold text-gray-700 font-['Roboto']",children:"To"}),jsxRuntimeExports.jsxs(Select,{value:v,onValueChange:E,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"rounded-lg border border-gray-300 bg-white focus:border-amber-400 focus:ring-2 focus:ring-amber-200 h-11 transition-colors",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Choose team member..."})}),jsxRuntimeExports.jsx(SelectContent,{className:"rounded-lg border border-gray-200 bg-white shadow-lg z-50",children:A.filter(e=>e.id!==(null==t?void 0:t.id)).map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.id,className:"py-2 px-3 hover:bg-amber-50 focus:bg-amber-50 data-[highlighted]:bg-amber-50",style:{color:"#1f2937",fontWeight:"500",fontSize:"14px"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",style:{color:"#1f2937"},children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full"}),jsxRuntimeExports.jsxs("span",{style:{color:"#1f2937",fontWeight:"600"},children:[e.firstName," ",e.lastName]}),jsxRuntimeExports.jsxs("span",{style:{color:"#6b7280",fontSize:"12px"},children:["(",e.email,")"]})]})},e.id))})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label$1,{htmlFor:"subject",className:"text-sm font-semibold text-gray-700 font-['Roboto'] flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-amber-400 rounded-full"}),"Project/Task name (optional)"]}),jsxRuntimeExports.jsx(Input,{id:"subject",value:R,onChange:e=>S(e.target.value),placeholder:"Budget Review, Website Updates, Event Planning...",className:"rounded-lg border border-gray-300 bg-white focus:border-amber-400 focus:ring-2 focus:ring-amber-200 h-11 font-['Roboto'] placeholder:text-gray-500 transition-colors text-gray-900",style:{color:"#1f2937"}}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 font-['Roboto'] italic",children:"Leave blank for general conversation"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"content",className:"text-sm font-semibold text-gray-700 font-['Roboto']",children:"Message"}),jsxRuntimeExports.jsx(Textarea,{id:"content",value:w,onChange:e=>$(e.target.value),placeholder:"Type your message here...",rows:6,className:"rounded-lg border border-gray-300 bg-white focus:border-amber-400 focus:ring-2 focus:ring-amber-200 font-['Roboto'] placeholder:text-gray-500 resize-none transition-colors text-gray-900",style:{color:"#1f2937"}})]}),L.isPending&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-700 bg-amber-50 border border-amber-200 p-3 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse"}),"Auto-saving draft..."]})]}),jsxRuntimeExports.jsxs(DialogFooter,{className:"pt-4 border-t border-gray-100 gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:()=>p(!1),className:"rounded-lg px-6 py-2 text-gray-600 hover:bg-gray-100 font-['Roboto'] font-medium transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{if(!v||!w)return void r({description:"Please select a recipient and enter a message",variant:"destructive"});const e=A.find(e=>e.id===v);F.mutate({recipientId:v,recipientName:e?`${e.firstName} ${e.lastName}`.trim():"",recipientEmail:(null==e?void 0:e.email)||"",subject:R||"Project Discussion",content:w,isDraft:!1})},disabled:F.isPending,className:"rounded-lg px-8 py-2 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white font-['Roboto'] font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50",children:F.isPending?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):"Send Message"})]})]})})]})}function Inbox(){return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50",children:jsxRuntimeExports.jsx(GmailStyleInbox,{})})}function EmailStyleMessaging(){const{user:e}=useAuth(),{toast:t}=useToast(),r=useQueryClient(),[n,s]=reactExports.useState(null),[i,o]=reactExports.useState("inbox"),a=e=>{o(e),s(null),m([])},[l,c]=reactExports.useState(""),[u,d]=reactExports.useState(!1),[p,m]=reactExports.useState([]),[x,f]=reactExports.useState({to:"",subject:"",content:""}),[h,g]=reactExports.useState(null),y=e=>{const t=new Date(e),r=new Date;return t.toDateString()===r.toDateString()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString()},j=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),{data:b=[],isLoading:v,error:E}=useQuery({queryKey:["/api/real-time-messages",i],queryFn:()=>apiRequest("GET",`/api/real-time-messages?folder=${i}`),retry:!1}),{data:R=[]}=useQuery({queryKey:["/api/users"],queryFn:()=>apiRequest("GET","/api/users"),retry:!1}),{data:S}=useQuery({queryKey:["/api/auth/user"],retry:!1}),w=useMutation({mutationFn:async e=>{console.log("Sending message data:",e);const t=await apiRequest("POST","/api/real-time-messages",e);return console.log("Send message response:",t),t},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/real-time-messages"]}),t({title:"Message sent",description:"Your message has been delivered successfully."}),d(!1),g(null),f({to:"",subject:"",content:""})},onError:e=>{var r,n;console.error("Send message error:",e);let s="Failed to send message. Please try again.";(null==(r=e.message)?void 0:r.includes("401"))?s="Authentication required. Please log in first.":(null==(n=e.message)?void 0:n.includes("403"))&&(s="Permission denied. You may not have access to send messages."),t({title:"Error",description:s,variant:"destructive"})}}),$=Array.isArray(b)?b.filter(e=>e.subject.toLowerCase().includes(l.toLowerCase())||e.from.name.toLowerCase().includes(l.toLowerCase())||e.content.toLowerCase().includes(l.toLowerCase())):[],N=useMutation({mutationFn:async e=>apiRequest("DELETE",`/api/real-time-messages/${e}`),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/real-time-messages"]}),t({title:"Message deleted",description:"The message has been moved to trash."})}}),_=useMutation({mutationFn:async e=>apiRequest("POST",`/api/real-time-messages/${e}/read`),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/real-time-messages"]})}});return e?jsxRuntimeExports.jsxs("div",{className:"flex h-[calc(100vh-120px)] bg-white rounded-lg border overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:(n?"hidden md:block":"block")+" w-56 lg:w-64 border-r bg-gray-50 flex-shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"p-4 border-b",children:jsxRuntimeExports.jsxs(Button,{className:"w-full",onClick:()=>d(!0),children:[jsxRuntimeExports.jsx(PenLine,{className:"h-4 w-4 mr-2"}),"Compose"]})}),jsxRuntimeExports.jsx("div",{className:"p-2",children:jsxRuntimeExports.jsxs("nav",{className:"space-y-1",children:[jsxRuntimeExports.jsxs(Button,{variant:"inbox"===i?"default":"ghost",className:"w-full justify-start",onClick:()=>a("inbox"),children:[jsxRuntimeExports.jsx(Inbox$1,{className:"h-4 w-4 mr-2"}),"Inbox",jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"ml-auto",children:Array.isArray(b)?b.filter(e=>"inbox"===e.folder&&!e.read).length:0})]}),jsxRuntimeExports.jsxs(Button,{variant:"sent"===i?"default":"ghost",className:"w-full justify-start",onClick:()=>a("sent"),children:[jsxRuntimeExports.jsx(Send$c,{className:"h-4 w-4 mr-2"}),"Sent"]}),jsxRuntimeExports.jsxs(Button,{variant:"drafts"===i?"default":"ghost",className:"w-full justify-start",onClick:()=>a("drafts"),children:[jsxRuntimeExports.jsx(Archive$c,{className:"h-4 w-4 mr-2"}),"Drafts"]}),jsxRuntimeExports.jsxs(Button,{variant:"trash"===i?"default":"ghost",className:"w-full justify-start",onClick:()=>a("trash"),children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4 mr-2"}),"Trash"]})]})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:u?jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"p-4 border-b",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:h?h.subject.startsWith("Re:")?"Reply to Message":h.subject.startsWith("Fwd:")?"Forward Message":"Reply to Message":"New Message"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>d(!1),children:jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"To:"}),h?jsxRuntimeExports.jsx(Input,{value:x.to,onChange:e=>f(t=>({...t,to:e.target.value})),placeholder:"Recipient email..."}):jsxRuntimeExports.jsxs("select",{value:x.to,onChange:e=>f(t=>({...t,to:e.target.value})),className:"w-full p-2 border rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select recipient..."}),R.map(e=>jsxRuntimeExports.jsxs("option",{value:e.email,children:[e.firstName||e.email," (",e.email,")"]},e.id))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subject:"}),jsxRuntimeExports.jsx(Input,{value:x.subject,onChange:e=>f(t=>({...t,subject:e.target.value})),placeholder:"Enter subject..."})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Message:"}),jsxRuntimeExports.jsx(Textarea,{value:x.content,onChange:e=>f(t=>({...t,content:e.target.value})),placeholder:"Type your message...",className:"min-h-[200px]"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Paperclip,{className:"h-4 w-4 mr-2"}),"Attach"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4 mr-2"}),"Schedule"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{d(!1),g(null),f({to:"",subject:"",content:""})},children:"Cancel"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{x.to&&x.subject&&x.content?w.mutate(x):t({title:"Error",description:"Please fill in all fields",variant:"destructive"})},disabled:w.isPending,children:[jsxRuntimeExports.jsx(Send$c,{className:"h-4 w-4 mr-2"}),w.isPending?"Sending...":"Send"]})]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex-1 flex min-h-0",children:[jsxRuntimeExports.jsxs("div",{className:(n?"hidden md:flex md:w-1/2 lg:w-2/5":"w-full")+" min-w-0 border-r flex flex-col bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b bg-gray-50 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search$c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsx(Input,{placeholder:"Search messages...",value:l,onChange:e=>c(e.target.value),className:"pl-10"})]}),p.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground",children:[p.length," selected"]}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:async()=>{for(const e of p)await _.mutateAsync(e);m([])},children:"Mark Read"}),jsxRuntimeExports.jsxs(Button,{size:"sm",variant:"outline",onClick:async()=>{for(const e of p)await N.mutateAsync(e);m([])},children:[jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]}),jsxRuntimeExports.jsx(ScrollArea,{className:"flex-1",children:jsxRuntimeExports.jsx("div",{className:"",children:0===$.length?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-32",children:jsxRuntimeExports.jsx("p",{className:"text-muted-foreground text-sm",children:"No messages"})}):$.map(e=>jsxRuntimeExports.jsx("div",{className:`px-3 py-4 cursor-pointer transition-colors border-b border-gray-100 ${(null==n?void 0:n.id)===e.id?"bg-blue-50 border-l-4 border-l-blue-500":e.read?"bg-white hover:bg-gray-50":"bg-blue-25 hover:bg-blue-50"} ${p.includes(e.id)?"bg-blue-25":""} ${e.read?"":"shadow-sm"}`,onClick:()=>(e=>{s(e),e.read||_.mutate(e.id)})(e),children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:p.includes(e.id),onChange:()=>{return t=e.id,void m(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},onClick:e=>e.stopPropagation(),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 mt-1"}),jsxRuntimeExports.jsx(Avatar$1,{className:"h-8 w-8 flex-shrink-0",children:jsxRuntimeExports.jsx(AvatarFallback,{className:"text-xs bg-gray-200 text-gray-600",children:j(e.from.name)})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[jsxRuntimeExports.jsx("span",{className:"text-sm truncate "+(e.read?"font-normal text-gray-600":"font-bold text-gray-900"),children:"sent"===i?Array.isArray(e.to)?e.to.join(", "):e.to||"Unknown Recipient":e.from.name}),!e.read&&jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full flex-shrink-0"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 min-w-0",children:[e.starred&&jsxRuntimeExports.jsx(Star,{className:"h-4 w-4 text-yellow-500 fill-current flex-shrink-0"}),e.attachments&&e.attachments.length>0&&jsxRuntimeExports.jsx(Paperclip,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-xs whitespace-nowrap "+(e.read?"text-gray-500 font-normal":"text-gray-700 font-semibold"),children:y(e.timestamp)})]})]}),jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsx("h4",{className:"text-sm truncate "+(e.read?"font-normal text-gray-700":"font-bold text-gray-900"),children:e.subject||"(No Subject)"})}),jsxRuntimeExports.jsx("p",{className:"text-xs leading-relaxed line-clamp-2 pr-4 "+(e.read?"text-gray-500 font-normal":"text-gray-700 font-medium"),children:e.content}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mt-2",children:!e.read&&jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 font-medium",children:"New"})})]})]})},e.id))})})]}),jsxRuntimeExports.jsx("div",{className:(n?"flex-1":"hidden md:flex md:flex-1")+" flex flex-col overflow-hidden",children:n?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>s(null),children:" Back"}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:n.subject})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",children:n.starred?jsxRuntimeExports.jsx(StarOff,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Star,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>N.mutate(n.id),children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Avatar$1,{className:"h-8 w-8",children:jsxRuntimeExports.jsx(AvatarFallback,{children:j(n.from.name)})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:["sent"===i?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-red-600",children:"TO:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:n.to&&Array.isArray(n.to)?n.to.join(", "):n.to||"Unknown Recipient"})]})}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-blue-600",children:"FROM:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:n.from.name}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground",children:["<",n.from.email,">"]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:y(n.timestamp)})]})]})]}),jsxRuntimeExports.jsx(ScrollArea,{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("div",{className:"prose max-w-none",children:jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap text-sm",children:n.content})}),n.attachments&&n.attachments.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Paperclip,{className:"h-4 w-4"}),"Attachments"]}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:n.attachments.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("span",{children:e.name}),jsxRuntimeExports.jsxs("span",{className:"text-muted-foreground",children:["(",e.size,")"]})]},t))})]})]})}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{return g(e=n),f({to:e.from.email,subject:e.subject.startsWith("Re:")?e.subject:`Re: ${e.subject}`,content:`\n\n--- Original Message ---\nFrom: ${e.from.name} <${e.from.email}>\nDate: ${y(e.timestamp)}\nSubject: ${e.subject}\n\n${e.content}`}),void d(!0);var e},children:[jsxRuntimeExports.jsx(Reply$c,{className:"h-4 w-4 mr-2"}),"Reply"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>(e=>{const t=(null==S?void 0:S.email)||"",r=[e.from.email,...e.to.filter(e=>e!==t)];g(e),f({to:r.join(", "),subject:e.subject.startsWith("Re:")?e.subject:`Re: ${e.subject}`,content:`\n\n--- Original Message ---\nFrom: ${e.from.name} <${e.from.email}>\nDate: ${y(e.timestamp)}\nSubject: ${e.subject}\n\n${e.content}`}),d(!0)})(n),children:[jsxRuntimeExports.jsx(ReplyAll,{className:"h-4 w-4 mr-2"}),"Reply All"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{return g(e=n),f({to:"",subject:e.subject.startsWith("Fwd:")?e.subject:`Fwd: ${e.subject}`,content:`\n\n--- Forwarded Message ---\nFrom: ${e.from.name} <${e.from.email}>\nDate: ${y(e.timestamp)}\nSubject: ${e.subject}\n\n${e.content}`}),void d(!0);var e},children:[jsxRuntimeExports.jsx(Forward,{className:"h-4 w-4 mr-2"}),"Forward"]})]})})]}):jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Mail,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Select a message to view"})]})})})]})})]}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Please log in to access messages"})})}function RealTimeMessages(){return jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Messages"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-2",children:"Send and receive messages instantly with other users in your organization"})]}),jsxRuntimeExports.jsx(EmailStyleMessaging,{})]})}function GovernanceDocuments(){const[e,t]=reactExports.useState("All"),[r,n]=reactExports.useState(null),s=["All",...Array.from(new Set(governanceDocuments.map(e=>e.category)))],i="All"===e?governanceDocuments:governanceDocuments.filter(t=>t.category===e);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Governance Documents"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Essential legal and governance documents for The Sandwich Project"})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(r=>jsxRuntimeExports.jsx(Button,{variant:e===r?"default":"outline",size:"sm",onClick:()=>t(r),className:"text-sm",children:r},r))}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((e,t)=>jsxRuntimeExports.jsxs(Card$1,{className:"hover:shadow-lg transition-shadow duration-200",children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"pb-3",children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[getFileIcon$1(e.type),jsxRuntimeExports.jsx(CardTitle,{className:"text-lg font-semibold line-clamp-2",children:e.name})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Badge,{className:getCategoryColor$1(e.category),children:e.category}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:e.type.toUpperCase()})]})]}),jsxRuntimeExports.jsxs(CardContent$1,{className:"pt-0",children:[e.description&&jsxRuntimeExports.jsx(CardDescription,{className:"mb-4 line-clamp-3",children:e.description}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsxs(Button,{size:"sm",variant:"outline",onClick:()=>(e=>{n(e)})(e),className:"flex-1",children:[jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4 mr-1"}),"Preview"]}),jsxRuntimeExports.jsxs(Button,{size:"sm",variant:"outline",onClick:()=>(e=>{window.open(e.path,"_blank")})(e),className:"flex-1",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"h-4 w-4 mr-1"}),"Open"]})]})]})]},t))}),0===i.length&&jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No documents found in the selected category."})}),r&&jsxRuntimeExports.jsx(DocumentPreview,{documentPath:r.path,documentName:r.name,documentType:r.type,onClose:()=>n(null)})]})}function Governance(){return jsxRuntimeExports.jsx(GovernanceDocuments,{})}function AdminPage(){const[e,t]=reactExports.useState("All"),[r,n]=reactExports.useState(null),s=adminDocuments.filter(t=>"All"===e||t.category===e),i=e=>{const t=document.createElement("a");t.href=e.path,t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t)},o=e=>{switch(e){case"critical":return jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"Important"});case"high":return jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:"Reference"});default:return null}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Important Documents"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Key documents for The Sandwich Project, including our nonprofit paperwork and bylaws."})]}),jsxRuntimeExports.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:categories.map(r=>jsxRuntimeExports.jsx(Button,{variant:e===r?"default":"outline",onClick:()=>t(r),className:"text-sm",children:r},r))}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:s.map(e=>jsxRuntimeExports.jsxs(Card$1,{className:"h-full hover:shadow-lg transition-shadow",children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"pb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx(CardTitle,{className:"text-lg leading-tight",children:e.name})]}),o(e.importance)]}),jsxRuntimeExports.jsx(CardDescription,{className:"text-sm text-gray-600 mt-2",children:e.description})]}),jsxRuntimeExports.jsx(CardContent$1,{className:"pt-0",children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:e.category}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs uppercase",children:e.type})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>(e=>{n(e)})(e),className:"flex-1 text-sm",children:[jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4 mr-1"}),"Preview"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>i(e),className:"flex-1 text-sm",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-1"}),"Download"]})]})]})})]},e.id))}),r&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg",children:r.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:r.description})]}),o(r.importance)]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>i(r),children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-1"}),"Download"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>window.open(r.path,"_blank"),children:[jsxRuntimeExports.jsx(ExternalLink,{className:"h-4 w-4 mr-1"}),"Open"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>n(null),children:"Close"})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 overflow-auto",style:{maxHeight:"calc(90vh - 120px)"},children:jsxRuntimeExports.jsx(DocumentPreview,{documentName:r.name,documentPath:r.path,documentType:r.type,onClose:()=>n(null)})})]})})]})})}function isString$1(e){return"string"==typeof e}function isMapStringCallback(e,t){return!!t&&isString$1(e)}function map$3(e,t){const r=[];if(isString$1(e)&&isMapStringCallback(e,t)){for(let n=0,s=e.length;n<s;n++)if(e.charAt(n)){const s=t(e.charAt(n),n,e);r[n]=s}}else if(!isString$1(e)&&!isMapStringCallback(e,t))for(let n=0,s=e.length;n<s;n++)if(n in e){const s=t(e[n],n,e);r[n]=s}return r}function bind(e,t){return function(){return e.apply(t,arguments)}}function isBuffer(e){return null!==e&&!isUndefined(e)&&null!==e.constructor&&!isUndefined(e.constructor)&&isFunction(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}function isArrayBufferView(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&isArrayBuffer(e.buffer),t}function forEach(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,s;if("object"!=typeof e&&(e=[e]),isArray$1(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let o;for(n=0;n<i;n++)o=s[n],t.call(null,e[o],o,e)}}function findKey(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}function merge$2(){const{caseless:e}=isContextDefined(this)&&this||{},t={},r=(r,n)=>{const s=e&&findKey(t,n)||n;isPlainObject$2(t[s])&&isPlainObject$2(r)?t[s]=merge$2(t[s],r):isPlainObject$2(r)?t[s]=merge$2({},r):isArray$1(r)?t[s]=r.slice():t[s]=r};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&forEach(arguments[n],r);return t}function isSpecCompliantForm(e){return!!(e&&isFunction(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])}function AxiosError(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}function isVisitable(e){return utils_default.isPlainObject(e)||utils_default.isArray(e)}function removeBrackets(e){return utils_default.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,r){return e?e.concat(t).map(function(e,t){return e=removeBrackets(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}function isFlatArray(e){return utils_default.isArray(e)&&!e.some(isVisitable)}function toFormData(e,t,r){if(!utils_default.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=utils_default.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!utils_default.isUndefined(t[e])})).metaTokens,s=r.visitor||c,i=r.dots,o=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&utils_default.isSpecCompliantForm(t);if(!utils_default.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(utils_default.isDate(e))return e.toISOString();if(!a&&utils_default.isBlob(e))throw new AxiosError_default("Blob is not supported. Use a Buffer instead.");return utils_default.isArrayBuffer(e)||utils_default.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,s){let a=e;if(e&&!s&&"object"==typeof e)if(utils_default.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(utils_default.isArray(e)&&isFlatArray(e)||(utils_default.isFileList(e)||utils_default.endsWith(r,"[]"))&&(a=utils_default.toArray(e)))return r=removeBrackets(r),a.forEach(function(e,n){!utils_default.isUndefined(e)&&null!==e&&t.append(!0===o?renderKey([r],n,i):null===o?r:r+"[]",l(e))}),!1;return!!isVisitable(e)||(t.append(renderKey(s,r,i),l(e)),!1)}const u=[],d=Object.assign(predicates,{defaultVisitor:c,convertValue:l,isVisitable:isVisitable});if(!utils_default.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!utils_default.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),utils_default.forEach(r,function(r,i){!0===(!(utils_default.isUndefined(r)||null===r)&&s.call(t,r,utils_default.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])}),u.pop()}}(e),t}function encode(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData_default(e,this,t)}function encode2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,r){if(!t)return e;const n=r&&r.encode||encode2,s=r&&r.serialize;let i;if(i=s?s(t,r):utils_default.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams_default(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}function toURLEncodedForm(e,t){return toFormData_default(e,new browser_default.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return browser_default.isNode&&utils_default.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(e){return utils_default.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}function arrayToObject(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function formDataToJSON(e){function t(e,r,n,s){let i=e[s++];const o=Number.isFinite(+i),a=s>=e.length;if(i=!i&&utils_default.isArray(n)?n.length:i,a)return utils_default.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!o;n[i]&&utils_default.isObject(n[i])||(n[i]=[]);return t(e,r,n[i],s)&&utils_default.isArray(n[i])&&(n[i]=arrayToObject(n[i])),!o}if(utils_default.isFormData(e)&&utils_default.isFunction(e.entries)){const r={};return utils_default.forEachEntry(e,(e,n)=>{t(parsePropPath(e),n,r,0)}),r}return null}function stringifySafely(e,t,r){if(utils_default.isString(e))try{return(t||JSON.parse)(e),utils_default.trim(e)}catch(e3){if("SyntaxError"!==e3.name)throw e3}return(r||JSON.stringify)(e)}function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return!1===e||null==e?e:utils_default.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}function matchHeaderValue(e,t,r,n,s){return utils_default.isFunction(n)?n.call(this,t,r):(s&&(t=r),utils_default.isString(t)?utils_default.isString(n)?-1!==t.indexOf(n):utils_default.isRegExp(n)?n.test(t):void 0:void 0)}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function buildAccessors(e,t){const r=utils_default.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})})}function transformData(e,t){const r=this||defaults_default,n=t||r,s=AxiosHeaders_default.from(n.headers);let i=n.data;return utils_default.forEach(e,function(e){i=e.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function isCancel(e){return!(!e||!e.__CANCEL__)}function CanceledError(e,t,r){AxiosError_default.call(this,null==e?"canceled":e,AxiosError_default.ERR_CANCELED,t,r),this.name="CanceledError"}function settle(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new AxiosError_default("Request failed with status code "+r.status,[AxiosError_default.ERR_BAD_REQUEST,AxiosError_default.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=n[o];s||(s=l),r[i]=a,n[i]=l;let u=o,d=0;for(;u!==i;)d+=r[u++],u%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-s<t)return;const p=c&&l-c;return p?Math.round(1e3*d/p):void 0}}function progressEventReducer(e,t){let r=0;const n=speedometer_default(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-r,l=n(a);r=i;const c={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&i<=o?(o-i)/l:void 0,event:s};c[t?"download":"upload"]=!0,e(c)}}function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError_default(null,e)}function dispatchRequest(e){throwIfCancellationRequested(e),e.headers=AxiosHeaders_default.from(e.headers),e.data=transformData.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return adapters_default.getAdapter(e.adapter||defaults_default.adapter)(e).then(function(t){return throwIfCancellationRequested(e),t.data=transformData.call(e,e.transformResponse,t),t.headers=AxiosHeaders_default.from(t.headers),t},function(t){return isCancel(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData.call(e,e.transformResponse,t.response),t.response.headers=AxiosHeaders_default.from(t.response.headers))),Promise.reject(t)})}function mergeConfig(e,t){t=t||{};const r={};function n(e,t,r){return utils_default.isPlainObject(e)&&utils_default.isPlainObject(t)?utils_default.merge.call({caseless:r},e,t):utils_default.isPlainObject(t)?utils_default.merge({},t):utils_default.isArray(t)?t.slice():t}function s(e,t,r){return utils_default.isUndefined(t)?utils_default.isUndefined(e)?void 0:n(void 0,e,r):n(e,t,r)}function i(e,t){if(!utils_default.isUndefined(t))return n(void 0,t)}function o(e,t){return utils_default.isUndefined(t)?utils_default.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,s,i){return i in t?n(r,s):i in e?n(void 0,r):void 0}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>s(headersToObject(e),headersToObject(t),!0)};return utils_default.forEach(Object.keys(Object.assign({},e,t)),function(n){const i=l[n]||s,o=i(e[n],t[n],n);utils_default.isUndefined(o)&&i!==a||(r[n]=o)}),r}function assertOptions(e,t,r){if("object"!=typeof e)throw new AxiosError_default("options must be an object",AxiosError_default.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const t=e[i],r=void 0===t||o(t,i,e);if(!0!==r)throw new AxiosError_default("option "+i+" must be "+r,AxiosError_default.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new AxiosError_default("Unknown option "+i,AxiosError_default.ERR_BAD_OPTION)}}function spread(e){return function(t){return e.apply(null,t)}}function isAxiosError(e){return utils_default.isObject(e)&&!0===e.isAxiosError}function createInstance(e){const t=new Axios_default(e),r=bind(Axios_default.prototype.request,t);return utils_default.extend(r,Axios_default.prototype,t,{allOwnKeys:!0}),utils_default.extend(r,t,null,{allOwnKeys:!0}),r.create=function(t){return createInstance(mergeConfig(e,t))},r}function logChatPromiseExecution(e,t){e.then().catch(e=>{console.warn(`failed to do ${t}, ran into error: `,e)})}function isFunction2(e){return"function"==typeof e||e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function isReadableStream(e){return null!==e&&"object"==typeof e&&(e.readable||"function"==typeof e._read)}function isBuffer2(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isFileWebAPI(e){return"undefined"!=typeof window&&"File"in window&&e instanceof File}function isBlobWebAPI(e){return"undefined"!=typeof window&&"Blob"in window&&e instanceof Blob}function isOwnUserBaseProperty(e){return{channel_mutes:!0,devices:!0,mutes:!0,total_unread_count:!0,unread_channels:!0,unread_count:!0,unread_threads:!0,invisible:!0,privacy_settings:!0,roles:!0,push_preferences:!0}[e]}function addFileToFormData(e,t,r){const n=new import_form_data.default;return isReadableStream(e)||isBuffer2(e)||isFileWebAPI(e)||isBlobWebAPI(e)?t?n.append("file",e,t):n.append("file",e):n.append("file",{uri:e,name:t||e.split("/").reverse()[0],contentType:r,type:r}),n}function normalizeQuerySort(e){const t=[],r=Array.isArray(e)?e:[e];for(const n of r){const e=Object.entries(n);e.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(const[r,n]of e)t.push({field:r,direction:n})}return t}function retryInterval(e){const t=Math.min(500+2e3*e,25e3),r=Math.min(Math.max(250,2e3*(e-1)),25e3);return Math.floor(Math.random()*(t-r)+r)}function randomId(){return generateUUIDv4()}function hex(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].toString(16).padStart(2,"0");return t}function generateUUIDv4(){const e=getRandomBytes(16);return e[6]=15&e[6]|64,e[8]=191&e[8]|128,hex(e.subarray(0,4))+"-"+hex(e.subarray(4,6))+"-"+hex(e.subarray(6,8))+"-"+hex(e.subarray(8,10))+"-"+hex(e.subarray(10,16))}function getRandomValuesWithMathRandom(e){const t=Math.pow(2,8*e.byteLength/e.length);for(let r=0;r<e.length;r++)e[r]=Math.random()*t}function getRandomBytes(e){const t=new Uint8Array(e);return getRandomValues(t),t}function convertErrorToJson(e){const t={};if(!e)return t;try{Object.getOwnPropertyNames(e).forEach(r=>{t[r]=Object.getOwnPropertyDescriptor(e,r)})}catch(r){return{error:"failed to serialize the error"}}return t}function isOnline(){const e="undefined"!=typeof navigator?navigator:"undefined"!=typeof window&&window.navigator?window.navigator:void 0;return e?"boolean"!=typeof e.onLine||e.onLine:(console.warn("isOnline failed to access window.navigator and assume browser is online"),!0)}function addConnectionEventListeners(e){"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("offline",e),window.addEventListener("online",e))}function removeConnectionEventListeners(e){"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("offline",e),window.removeEventListener("online",e))}function formatMessage(e){const t=t=>t?{...t,created_at:e.created_at?new Date(e.created_at):new Date,deleted_at:e.deleted_at?new Date(e.deleted_at):null,pinned_at:e.pinned_at?new Date(e.pinned_at):null,reaction_groups:maybeGetReactionGroupsFallback(e.reaction_groups,e.reaction_counts,e.reaction_scores),status:e.status||"received",updated_at:e.updated_at?new Date(e.updated_at):new Date}:null;return{...t(e),error:e.error??null,quoted_message:t(e.quoted_message)}}function unformatMessage(e){const t=t=>{if(!t)return null;const r=(new Date).toISOString();return{...t,created_at:e.created_at?e.created_at.toISOString():r,deleted_at:e.deleted_at?e.deleted_at.toISOString():void 0,pinned_at:e.pinned_at?e.pinned_at.toISOString():void 0,updated_at:e.updated_at?e.updated_at.toISOString():r}};return{...t(e),quoted_message:t(e.quoted_message)}}function addToMessageList(e,t,r=!1,n="created_at",s=!0){const i=s||r;let o=[...e];if(r&&(o=o.filter(e=>!(e.id&&t.id===e.id))),0===o.length&&i)return o.concat(t);if(0===o.length)return o;const a=t[n].getTime(),l=o.at(-1)[n].getTime()<a;if(l&&i)return o.concat(t);if(l)return o;const c=findIndexInSortedArray({needle:t,sortedArray:o,sortDirection:"ascending",selectValueToCompare:e=>e[n].getTime(),selectKey:e=>e.id});return!r&&t.id&&o[c]&&t.id===o[c].id?(o[c]=t,o):(i&&o.splice(c,0,t),o)}function maybeGetReactionGroupsFallback(e,t,r){if(e)return e;if(t&&r){const e={};for(const n of Object.keys(t))e[n]={count:t[n],sum_scores:r[n]};return e}return null}function binarySearchByDateEqualOrNearestGreater(e,t){let r=0,n=e.length-1;for(;r<=n;){const s=Math.floor((r+n)/2),i=e[s].created_at;if(!i){r+=1;continue}const o=new Date(i);if(o.getTime()===t.getTime())return s;o.getTime()<t.getTime()?r=s+1:n=s-1}return r}function generateDiff(e,t){const r={children:{}};return compareAndBuildDiff(e,t,r),cleanupDiffTree(r)}function compareAndBuildDiff(e,t,r,n,s=new Set,i=new Set){if(isEqual$2(e,t,new Set(s)))return;if(null==e)return void(void 0!==n&&(r.children[String(n)]={type:"added",value:t,children:{}}));if("object"==typeof e&&null!==e){if(i.has(e))return void(void 0!==n&&(r.children[String(n)]={type:"circular",value:t,oldValue:e,children:{}}));i.add(e)}if("object"!=typeof e||"object"!=typeof t||null===e||null===t||Array.isArray(e)!==Array.isArray(t)||isClassInstance(e)||isClassInstance(t))return void 0!==n&&(r.children[String(n)]={type:"updated",value:t,oldValue:e,children:{}}),void("object"==typeof e&&null!==e&&i.delete(e));const o=e,a=t,l=void 0!==n?{type:"updated",children:{},oldValue:e,value:t}:r;void 0!==n&&(r.children[String(n)]=l);const c=[e,t];if(s.has(c))return void("object"==typeof e&&null!==e&&i.delete(e));s.add(c);const u=new Set([...Object.keys(o),...Object.getOwnPropertySymbols(o),...Object.keys(a),...Object.getOwnPropertySymbols(a)]);for(const d of u){const e=o[d],t=a[d];d in a&&(d in o?compareAndBuildDiff(e,t,l,d,s,i):l.children[String(d)]={type:"added",value:t,children:{}})}s.delete(c),"object"==typeof e&&null!==e&&i.delete(e)}function createMergeCore(e={}){const{trackDiff:t=!1}=e;return function({target:e,source:r,customizer:n}){const s=Array.isArray(r)?r:[r],i=t?structuredClone(e):void 0;function o(e,t,r,s,i){const o=t[r],a=e[r];if(!function(e,t,r,s,i,o){const a=null==n?void 0:n(e,t,r,s,i,o);return void 0!==a&&(Object.defineProperty(s,r,{value:a,enumerable:!0,writable:!0,configurable:!0}),!0)}(a,o,r,e,t,s))if(o&&"object"==typeof o){if(!s.has(o)){const t=function(e,t){if(null==e)return t;if(!Array.isArray(e)&&"object"!=typeof e)return t;if(e&&"object"==typeof e){const r=isClassInstance(e),n=isClassInstance(t);return r||n?n?t:e:Array.isArray(e)?[...e]:{...e}}return Array.isArray(t)?[]:{}}(a,o);if(Object.defineProperty(e,r,{value:t,enumerable:!0,writable:!0,configurable:!0}),isClassInstance(t))return;i.push({target:t,source:o,sourceKey:r,parentTarget:e})}}else void 0!==o&&(e[r]=o)}function a(e,t,r,n){const s=[...Object.keys(t),...Object.getOwnPropertySymbols(t)];for(const i of s)o(e,t,i,r,n)}function l({target:e,source:r,sourceKey:n,parentTarget:s},i,o){i.has(r)?t&&n&&s&&Object.defineProperty(s,n,{value:e,enumerable:!0,writable:!0,configurable:!0}):i.has(e)||i.has(r)||(i.add(e),i.add(r),a(e,r,i,o),i.delete(r),i.delete(e))}const c=s.reduce((e,t)=>function(e,t,r=new Set){if(r.has(e)||r.has(t))return{...e};const n={...e},s=[];for(r.add(n),r.add(t),a(n,t,r,s);s.length;)l(s.pop(),r,s);return r.delete(t),r.delete(n),n}(e,t),{...e});return{result:c,diff:t&&i?generateDiff(i,c):null}}}function cleanupDiffTree(e){const t={};let r=!1;for(const n in e.children){const s=cleanupDiffTree(e.children[n]);s&&(t[n]=s,r=!0)}return e.type||r?{...e,children:t}:null}function mergeWith$1(e,t,r){return createMergeCore()({target:e,source:t,customizer:r}).result}function mergeWithDiff(e,t,r){const n=createMergeCore({trackDiff:!0}),{result:s,diff:i}=n({target:e,source:t,customizer:r});return{result:s,diff:cleanupDiffTree(i??{children:{}})||{children:{}}}}function registerGroup$1(e,t){return e in t||(t[e]=[]),t[e]}function addToGroups$1(e,t,r){t[numeric$1]&&(t[asciinumeric$1]=!0,t[alphanumeric$1]=!0),t[ascii$1]&&(t[asciinumeric$1]=!0,t[alpha$1]=!0),t[asciinumeric$1]&&(t[alphanumeric$1]=!0),t[alpha$1]&&(t[alphanumeric$1]=!0),t[alphanumeric$1]&&(t[domain$2]=!0),t[emoji$1]&&(t[domain$2]=!0);for(const n in t){const t=registerGroup$1(n,r);t.indexOf(e)<0&&t.push(e)}}function flagsForToken$1(e,t){const r={};for(const n in t)t[n].indexOf(e)>=0&&(r[n]=!0);return r}function State$1(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}function init$2$1(e=[]){const t={};State$1.groups=t;const r=new State$1;null==tlds$1&&(tlds$1=decodeTlds$1(encodedTlds$1)),null==utlds$1&&(utlds$1=decodeTlds$1(encodedUtlds$1)),tt$2(r,"'",APOSTROPHE$1),tt$2(r,"{",OPENBRACE$1),tt$2(r,"}",CLOSEBRACE$1),tt$2(r,"[",OPENBRACKET$1),tt$2(r,"]",CLOSEBRACKET$1),tt$2(r,"(",OPENPAREN$1),tt$2(r,")",CLOSEPAREN$1),tt$2(r,"<",OPENANGLEBRACKET$1),tt$2(r,">",CLOSEANGLEBRACKET$1),tt$2(r,"",FULLWIDTHLEFTPAREN$1),tt$2(r,"",FULLWIDTHRIGHTPAREN$1),tt$2(r,"",LEFTCORNERBRACKET$1),tt$2(r,"",RIGHTCORNERBRACKET$1),tt$2(r,"",LEFTWHITECORNERBRACKET$1),tt$2(r,"",RIGHTWHITECORNERBRACKET$1),tt$2(r,"",FULLWIDTHLESSTHAN$1),tt$2(r,"",FULLWIDTHGREATERTHAN$1),tt$2(r,"&",AMPERSAND$1),tt$2(r,"*",ASTERISK$2),tt$2(r,"@",AT$1),tt$2(r,"`",BACKTICK$1),tt$2(r,"^",CARET$1),tt$2(r,":",COLON$1),tt$2(r,",",COMMA$1),tt$2(r,"$",DOLLAR$1),tt$2(r,".",DOT$1),tt$2(r,"=",EQUALS$1),tt$2(r,"!",EXCLAMATION$1),tt$2(r,"-",HYPHEN$1),tt$2(r,"%",PERCENT$1),tt$2(r,"|",PIPE$1),tt$2(r,"+",PLUS$1),tt$2(r,"#",POUND$1),tt$2(r,"?",QUERY$1),tt$2(r,'"',QUOTE$1),tt$2(r,"/",SLASH$1),tt$2(r,";",SEMI$1),tt$2(r,"~",TILDE$1),tt$2(r,"_",UNDERSCORE$1),tt$2(r,"\\",BACKSLASH$1),tt$2(r,"",FULLWIDTHMIDDLEDOT$1);const n=tr$2(r,DIGIT2,NUM$1,{[numeric$1]:!0});tr$2(n,DIGIT2,n);const s=tr$2(n,ASCII_LETTER$1,ASCIINUMERICAL$1,{[asciinumeric$1]:!0}),i=tr$2(n,LETTER$1,ALPHANUMERICAL$1,{[alphanumeric$1]:!0}),o=tr$2(r,ASCII_LETTER$1,WORD$1,{[ascii$1]:!0});tr$2(o,DIGIT2,s),tr$2(o,ASCII_LETTER$1,o),tr$2(s,DIGIT2,s),tr$2(s,ASCII_LETTER$1,s);const a=tr$2(r,LETTER$1,UWORD$1,{[alpha$1]:!0});tr$2(a,ASCII_LETTER$1),tr$2(a,DIGIT2,i),tr$2(a,LETTER$1,a),tr$2(i,DIGIT2,i),tr$2(i,ASCII_LETTER$1),tr$2(i,LETTER$1,i);const l=tt$2(r,LF$1,NL$1,{[whitespace$2]:!0}),c=tt$2(r,CR$1,WS$1,{[whitespace$2]:!0}),u=tr$2(r,SPACE$1,WS$1,{[whitespace$2]:!0});tt$2(r,OBJECT_REPLACEMENT$1,u),tt$2(c,LF$1,l),tt$2(c,OBJECT_REPLACEMENT$1,u),tr$2(c,SPACE$1,u),tt$2(u,CR$1),tt$2(u,LF$1),tr$2(u,SPACE$1,u),tt$2(u,OBJECT_REPLACEMENT$1,u);const d=tr$2(r,EMOJI$2,EMOJI$1$1,{[emoji$1]:!0});tt$2(d,"#"),tr$2(d,EMOJI$2,d),tt$2(d,EMOJI_VARIATION$1,d);const p=tt$2(d,EMOJI_JOINER$1);tt$2(p,"#"),tr$2(p,EMOJI$2,d);const m=[[ASCII_LETTER$1,o],[DIGIT2,s]],x=[[ASCII_LETTER$1,null],[LETTER$1,a],[DIGIT2,i]];for(let f=0;f<tlds$1.length;f++)fastts$1(r,tlds$1[f],TLD$1,WORD$1,m);for(let f=0;f<utlds$1.length;f++)fastts$1(r,utlds$1[f],UTLD$1,UWORD$1,x);addToGroups$1(TLD$1,{tld:!0,ascii:!0},t),addToGroups$1(UTLD$1,{utld:!0,alpha:!0},t),fastts$1(r,"file",SCHEME$1,WORD$1,m),fastts$1(r,"mailto",SCHEME$1,WORD$1,m),fastts$1(r,"http",SLASH_SCHEME$1,WORD$1,m),fastts$1(r,"https",SLASH_SCHEME$1,WORD$1,m),fastts$1(r,"ftp",SLASH_SCHEME$1,WORD$1,m),fastts$1(r,"ftps",SLASH_SCHEME$1,WORD$1,m),addToGroups$1(SCHEME$1,{scheme:!0,ascii:!0},t),addToGroups$1(SLASH_SCHEME$1,{slashscheme:!0,ascii:!0},t),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let f=0;f<e.length;f++){const t=e[f][0],n=e[f][1]?{[scheme$1]:!0}:{[slashscheme$1]:!0};t.indexOf("-")>=0?n[domain$2]=!0:ASCII_LETTER$1.test(t)?DIGIT2.test(t)?n[asciinumeric$1]=!0:n[ascii$1]=!0:n[numeric$1]=!0,ts$1(r,t,t,n)}return ts$1(r,"localhost",LOCALHOST$1,{ascii:!0}),r.jd=new State$1(SYM$1),{start:r,tokens:assign$1({groups:t},tk$1)}}function run$1$1(e,t){const r=stringToArray$1(t.replace(/[A-Z]/g,e=>e.toLowerCase())),n=r.length,s=[];let i=0,o=0;for(;o<n;){let a=e,l=null,c=0,u=null,d=-1,p=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(d=0,p=0,u=a):d>=0&&(d+=r[o].length,p++),c+=r[o].length,i+=r[o].length,o++;i-=d,o-=p,c-=d,s.push({t:u.t,v:t.slice(i-c,i),s:i-c,e:i})}return s}function stringToArray$1(e){const t=[],r=e.length;let n=0;for(;n<r;){let s,i=e.charCodeAt(n),o=i<55296||i>56319||n+1===r||(s=e.charCodeAt(n+1))<56320||s>57343?e[n]:e.slice(n,n+2);t.push(o),n+=o.length}return t}function fastts$1(e,t,r,n,s){let i;const o=t.length;for(let a=0;a<o-1;a++){const r=t[a];e.j[r]?i=e.j[r]:(i=new State$1(n),i.jr=s.slice(),e.j[r]=i),e=i}return i=new State$1(r),i.jr=s.slice(),e.j[t[o-1]]=i,i}function decodeTlds$1(e){const t=[],r=[];let n=0;for(;n<e.length;){let s=0;for(;"0123456789".indexOf(e[n+s])>=0;)s++;if(s>0){t.push(r.join(""));for(let t=parseInt(e.substring(n,n+s),10);t>0;t--)r.pop();n+=s}else r.push(e[n]),n++}return t}function Options$d(e,t=null){let r=assign$1({},defaults2);e&&(r=assign$1(r,e instanceof Options$d?e.o:e));const n=r.ignoreTags,s=[];for(let i=0;i<n.length;i++)s.push(n[i].toUpperCase());this.o=r,t&&(this.defaultRender=t),this.ignoreTags=s}function noop3(e){return e}function MultiToken$1(e,t){this.t="token",this.v=e,this.tk=t}function createTokenClass$1(e,t){class r extends MultiToken$1{constructor(t,r){super(t,r),this.t=e}}for(const n in t)r.prototype[n]=t[n];return r.t=e,r}function init$1$1({groups:e}){const t=e.domain.concat([AMPERSAND$1,ASTERISK$2,AT$1,BACKSLASH$1,BACKTICK$1,CARET$1,DOLLAR$1,EQUALS$1,HYPHEN$1,NUM$1,PERCENT$1,PIPE$1,PLUS$1,POUND$1,SLASH$1,SYM$1,TILDE$1,UNDERSCORE$1]),r=[COLON$1,COMMA$1,DOT$1,EXCLAMATION$1,PERCENT$1,QUERY$1,QUOTE$1,SEMI$1,OPENANGLEBRACKET$1,CLOSEANGLEBRACKET$1,OPENBRACE$1,CLOSEBRACE$1,CLOSEBRACKET$1,OPENBRACKET$1,OPENPAREN$1,CLOSEPAREN$1,FULLWIDTHLEFTPAREN$1,FULLWIDTHRIGHTPAREN$1,LEFTCORNERBRACKET$1,RIGHTCORNERBRACKET$1,LEFTWHITECORNERBRACKET$1,RIGHTWHITECORNERBRACKET$1,FULLWIDTHLESSTHAN$1,FULLWIDTHGREATERTHAN$1],n=[AMPERSAND$1,APOSTROPHE$1,ASTERISK$2,BACKSLASH$1,BACKTICK$1,CARET$1,DOLLAR$1,EQUALS$1,HYPHEN$1,OPENBRACE$1,CLOSEBRACE$1,PERCENT$1,PIPE$1,PLUS$1,POUND$1,QUERY$1,SLASH$1,SYM$1,TILDE$1,UNDERSCORE$1],s=makeState$1(),i=tt$2(s,TILDE$1);ta$1(i,n,i),ta$1(i,e.domain,i);const o=makeState$1(),a=makeState$1(),l=makeState$1();ta$1(s,e.domain,o),ta$1(s,e.scheme,a),ta$1(s,e.slashscheme,l),ta$1(o,n,i),ta$1(o,e.domain,o);const c=tt$2(o,AT$1);tt$2(i,AT$1,c),tt$2(a,AT$1,c),tt$2(l,AT$1,c);const u=tt$2(i,DOT$1);ta$1(u,n,i),ta$1(u,e.domain,i);const d=makeState$1();ta$1(c,e.domain,d),ta$1(d,e.domain,d);const p=tt$2(d,DOT$1);ta$1(p,e.domain,d);const m=makeState$1(Email$1);ta$1(p,e.tld,m),ta$1(p,e.utld,m),tt$2(c,LOCALHOST$1,m);const x=tt$2(d,HYPHEN$1);tt$2(x,HYPHEN$1,x),ta$1(x,e.domain,d),ta$1(m,e.domain,d),tt$2(m,DOT$1,p),tt$2(m,HYPHEN$1,x);const f=tt$2(m,COLON$1);ta$1(f,e.numeric,Email$1);const h=tt$2(o,HYPHEN$1),g=tt$2(o,DOT$1);tt$2(h,HYPHEN$1,h),ta$1(h,e.domain,o),ta$1(g,n,i),ta$1(g,e.domain,o);const y=makeState$1(Url$1);ta$1(g,e.tld,y),ta$1(g,e.utld,y),ta$1(y,e.domain,o),ta$1(y,n,i),tt$2(y,DOT$1,g),tt$2(y,HYPHEN$1,h),tt$2(y,AT$1,c);const j=tt$2(y,COLON$1),b=makeState$1(Url$1);ta$1(j,e.numeric,b);const v=makeState$1(Url$1),E=makeState$1();ta$1(v,t,v),ta$1(v,r,E),ta$1(E,t,v),ta$1(E,r,E),tt$2(y,SLASH$1,v),tt$2(b,SLASH$1,v);const R=tt$2(a,COLON$1),S=tt$2(l,COLON$1),w=tt$2(S,SLASH$1),$=tt$2(w,SLASH$1);ta$1(a,e.domain,o),tt$2(a,DOT$1,g),tt$2(a,HYPHEN$1,h),ta$1(l,e.domain,o),tt$2(l,DOT$1,g),tt$2(l,HYPHEN$1,h),ta$1(R,e.domain,v),tt$2(R,SLASH$1,v),tt$2(R,QUERY$1,v),ta$1($,e.domain,v),ta$1($,t,v),tt$2($,SLASH$1,v);const N=[[OPENBRACE$1,CLOSEBRACE$1],[OPENBRACKET$1,CLOSEBRACKET$1],[OPENPAREN$1,CLOSEPAREN$1],[OPENANGLEBRACKET$1,CLOSEANGLEBRACKET$1],[FULLWIDTHLEFTPAREN$1,FULLWIDTHRIGHTPAREN$1],[LEFTCORNERBRACKET$1,RIGHTCORNERBRACKET$1],[LEFTWHITECORNERBRACKET$1,RIGHTWHITECORNERBRACKET$1],[FULLWIDTHLESSTHAN$1,FULLWIDTHGREATERTHAN$1]];for(let _=0;_<N.length;_++){const[e,n]=N[_],s=tt$2(v,e);tt$2(E,e,s),tt$2(s,n,v);const i=makeState$1(Url$1);ta$1(s,t,i);const o=makeState$1();ta$1(s,r),ta$1(i,t,i),ta$1(i,r,o),ta$1(o,t,i),ta$1(o,r,o),tt$2(i,n,v),tt$2(o,n,v)}return tt$2(s,LOCALHOST$1,y),tt$2(s,NL$1,Nl$1),{start:s,tokens:tk$1}}function run$2(e,t,r){let n=r.length,s=0,i=[],o=[];for(;s<n;){let a=e,l=null,c=null,u=0,d=null,p=-1;for(;s<n&&!(l=a.go(r[s].t));)o.push(r[s++]);for(;s<n&&(c=l||a.go(r[s].t));)l=null,a=c,a.accepts()?(p=0,d=a):p>=0&&p++,s++,u++;if(p<0)s-=u,s<n&&(o.push(r[s]),s++);else{o.length>0&&(i.push(initMultiToken$1(Text$1,t,o)),o=[]),s-=p,u-=p;const e=d.t,n=r.slice(s-u,s);i.push(initMultiToken$1(e,t,n))}}return o.length>0&&i.push(initMultiToken$1(Text$1,t,o)),i}function initMultiToken$1(e,t,r){const n=r[0].s,s=r[r.length-1].e;return new e(t.slice(n,s),r)}function init$4(){INIT$1.scanner=init$2$1(INIT$1.customSchemes);for(let e=0;e<INIT$1.tokenQueue.length;e++)INIT$1.tokenQueue[e][1]({scanner:INIT$1.scanner});INIT$1.parser=init$1$1(INIT$1.scanner.tokens);for(let e=0;e<INIT$1.pluginQueue.length;e++)INIT$1.pluginQueue[e][1]({scanner:INIT$1.scanner,parser:INIT$1.parser});return INIT$1.initialized=!0,INIT$1}function tokenize$1(e){return INIT$1.initialized||init$4(),run$2(INIT$1.parser.start,e,run$1$1(INIT$1.scanner.start,e))}function find$2(e,t=null,r=null){if(t&&"object"==typeof t){if(r)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);r=t,t=null}const n=new Options$d(r),s=tokenize$1(e),i=[];for(let o=0;o<s.length;o++){const e=s[o];!e.isLink||t&&e.t!==t||!n.check(e)||i.push(e.toFormattedObject(n))}return i}function createRunner(e){return function(t,r){const{cb:n,onContinued:s}=e(t,r),i=pendingPromises.get(t);null==i||i.onContinued();const o=i?i.promise.then(n,n):n();return pendingPromises.set(t,{promise:o,onContinued:s}),o}}function wrapWithCancellation(e,t){const r=new AbortController;return{cb:()=>r.signal.aborted?Promise.resolve("canceled"):t(r.signal).finally(()=>{r.signal.aborted||pendingPromises.delete(e)}),onContinued:()=>r.abort()}}function escapeRegExp$1(e){return e.replace(/[-[\]{}()*+?.,/\\^$|#]/g,"\\$&")}function buildWsFatalInsight(e,t){return{...t,...buildWsBaseInsight(e)}}function buildWsBaseInsight(e){var t;const{client:r}=e;return{ready_state:null==(t=e.ws)?void 0:t.readyState,url:e._buildUrl(),api_key:r.key,start_ts:r.insightMetrics.connectionStartTimestamp,end_ts:(new Date).getTime(),auth_type:r.getAuthType(),token:r.tokenManager.token,user_id:r.userID,user_details:r._user,device:r.options.device,client_id:e.connectionID,ws_details:e.ws,ws_consecutive_failures:r.insightMetrics.wsConsecutiveFailures,ws_total_failures:r.insightMetrics.wsTotalFailures,request_id:e.requestID,online:"undefined"!=typeof navigator?null==navigator?void 0:navigator.onLine:null,user_agent:"undefined"!=typeof navigator?null==navigator?void 0:navigator.userAgent:null,instance_client_id:r.insightMetrics.instanceClientId}}function buildWsSuccessAfterFailureInsight(e){return buildWsBaseInsight(e)}function JWTUserToken(e,t,r={},n={}){if("string"!=typeof t)throw new TypeError("userId should be a string");const s={user_id:t,...r};if(null==import_jsonwebtoken.default||null==import_jsonwebtoken.default.sign)throw Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.");const i=Object.assign({algorithm:"HS256",noTimestamp:!0},n);return s.iat&&(i.noTimestamp=!1),import_jsonwebtoken.default.sign(s,e,i)}function JWTServerToken(e,t={}){const r=Object.assign({algorithm:"HS256",noTimestamp:!0},t);return import_jsonwebtoken.default.sign({server:!0},e,r)}function UserFromToken(e){const t=e.split(".");if(3!==t.length)return"";const r=t[1],n=decodeBase64(r);return JSON.parse(n).user_id}function DevToken(e){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",encodeBase64(JSON.stringify({user_id:e})),"devtoken"].join(".")}function CheckSignature(e,t,r){const n=Buffer.from(t,"utf8"),s=import_crypto.default.createHmac("sha256",n).update(e).digest("hex");try{return import_crypto.default.timingSafeEqual(Buffer.from(s),Buffer.from(r))}catch{return!1}}function isAPIError(e){return void 0!==e.code}function isErrorRetryable(e){if(!e.code)return!1;const t=APIErrorCodes[`${e.code}`];return!!t&&t.retryable}function isConnectionIDError(e){return 46===e.code}function isWSFailure(e){if("boolean"==typeof e.isWSFailure)return e.isWSFailure;try{return JSON.parse(e.message).isWSFailure}catch(t){return!1}}function isErrorResponse(e){return!e.status||e.status<200||300<=e.status}function getMaxVotedOptionIds(e){let t=0,r=[];for(const[n,s]of Object.entries(e??{}))s>t?(r=[n],t=s):s===t&&r.push(n);return r}function getOwnVotesByOptionId(e){return e?e.reduce((e,t)=>(isVoteAnswer(t)||!t.option_id||(e[t.option_id]=t),e),{}):{}}function extractPollData(e){return{allow_answers:e.allow_answers,allow_user_suggested_options:e.allow_user_suggested_options,description:e.description,enforce_unique_vote:e.enforce_unique_vote,id:e.id,is_closed:e.is_closed,max_votes_allowed:e.max_votes_allowed,name:e.name,options:e.options,voting_visibility:e.voting_visibility}}function mapPollStateToResponse(e){const{lastActivityAt:t,maxVotedOptionIds:r,ownVotesByOptionId:n,ownAnswer:s,...i}=e.data;return{...i,own_votes:[...Object.values(n),...s?[s]:[]].sort((e,t)=>Date.parse(e.created_at)-Date.parse(t.created_at)),id:e.id}}function extractPollEnrichedData(e){return{answers_count:e.answers_count,latest_votes_by_option:e.latest_votes_by_option,vote_count:e.vote_count,vote_counts_by_option:e.vote_counts_by_option}}function isString3(e){return"string"==typeof e||e instanceof String}function setAttributes(e,t){for(var r in t)e.setAttribute(r,t[r])}function stdOnEnd(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function ieOnEnd(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}function isNonNullObject(e){return!!e&&"object"==typeof e}function isSpecial(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||isReactElement(e)}function isReactElement(e){return e.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(e){return Array.isArray(e)?[]:{}}function cloneUnlessOtherwiseSpecified(e,t){return!1!==t.clone&&t.isMergeableObject(e)?deepmerge(emptyTarget(e),e,t):e}function defaultArrayMerge(e,t,r){return e.concat(t).map(function(e){return cloneUnlessOtherwiseSpecified(e,r)})}function getMergeFunction(e,t){if(!t.customMerge)return deepmerge;var r=t.customMerge(e);return"function"==typeof r?r:deepmerge}function getEnumerableOwnPropertySymbols(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function getKeys(e){return Object.keys(e).concat(getEnumerableOwnPropertySymbols(e))}function propertyIsOnObject(e,t){try{return t in e}catch(r){return!1}}function propertyIsUnsafe(e,t){return propertyIsOnObject(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function mergeObject(e,t,r){var n={};return r.isMergeableObject(e)&&getKeys(e).forEach(function(t){n[t]=cloneUnlessOtherwiseSpecified(e[t],r)}),getKeys(t).forEach(function(s){propertyIsUnsafe(e,s)||(propertyIsOnObject(e,s)&&r.isMergeableObject(t[s])?n[s]=getMergeFunction(s,r)(e[s],t[s],r):n[s]=cloneUnlessOtherwiseSpecified(t[s],r))}),n}function deepmerge(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||defaultArrayMerge,r.isMergeableObject=r.isMergeableObject||isMergeableObject,r.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):mergeObject(e,t,r):cloneUnlessOtherwiseSpecified(t,r)}function _interopRequireDefault$2(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray$2(e,t){return _arrayWithHoles$2(e)||_iterableToArrayLimit$2(e,t)||_unsupportedIterableToArray$5(e,t)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$5(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$5(e,t):void 0}}function _arrayLikeToArray$5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$2(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,s=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return r}}function _arrayWithHoles$2(e){if(Array.isArray(e))return e}function parseTimeParam(e,t){if(!(e instanceof Array)){var r=e.match(t);if(r){var n=r[1];if(n.match(MATCH_START_STAMP))return parseTimeString(n);if(MATCH_NUMERIC.test(n))return parseInt(n)}}}function parseTimeString(e){for(var t=0,r=MATCH_START_STAMP.exec(e);null!==r;){var n=_slicedToArray$2(r,3),s=n[1],i=n[2];"h"===i&&(t+=60*parseInt(s,10)*60),"m"===i&&(t+=60*parseInt(s,10)),"s"===i&&(t+=parseInt(s,10)),r=MATCH_START_STAMP.exec(e)}return t}function parseStartTime(e){return parseTimeParam(e,MATCH_START_QUERY)}function parseEndTime(e){return parseTimeParam(e,MATCH_END_QUERY)}function randomString(){return Math.random().toString(36).substr(2,5)}function queryString(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&")}function getGlobal(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}function getSDK(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_loadScript.default,i=getGlobal(t);return i&&n(i)?Promise.resolve(i):new Promise(function(n,i){if(requests[e])requests[e].push({resolve:n,reject:i});else{requests[e]=[{resolve:n,reject:i}];var o=function(t){requests[e].forEach(function(e){return e.resolve(t)})};if(r){var a=window[r];window[r]=function(){a&&a(),o(getGlobal(t))}}s(e,function(n){n?(requests[e].forEach(function(e){return e.reject(n)}),requests[e]=null):r||o(getGlobal(t))})}})}function getConfig(e,t){return(0,_deepmerge$1.default)(t.config,e.config)}function omit$1(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];for(var i=(t=[]).concat.apply(t,n),o={},a=0,l=Object.keys(e);a<l.length;a++){var c=l[a];-1===i.indexOf(c)&&(o[c]=e[c])}return o}function callPlayer(e){var t;if(!this.player||!this.player[e]){var r="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c  ");return this.player?this.player[e]||(r+="The method was not available"):r+="The player was not available",console.warn(r,"font-weight: bold",""),null}for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return(t=this.player)[e].apply(t,s)}function isMediaStream(e){return"undefined"!=typeof window&&void 0!==window.MediaStream&&e instanceof window.MediaStream}function isBlobUrl(e){return/^blob:/.test(e)}function supportsWebKitPresentationMode(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("video"),t=!1===/iPhone|iPod/.test(navigator.userAgent);return e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode&&t}function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray$4(e))||t){r&&(e=r);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray$4(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$4(e,t):void 0}}function _arrayLikeToArray$4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function requireYouTube(){return hasRequiredYouTube||(hasRequiredYouTube=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,s=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=x(e);if(r){var i=x(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return m(e)}(this,n)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,g=/user\/([a-zA-Z0-9_-]+)\/?/,y=/youtube-nocookie\.com/,j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t=p(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return f(m(e=t.call.apply(t,[this].concat(s))),"callPlayer",n.callPlayer),f(m(e),"parsePlaylist",function(t){return t instanceof Array?{listType:"playlist",playlist:t.map(e.getID).join(",")}:h.test(t)?{listType:"playlist",list:l(t.match(h),2)[1].replace(/^UC/,"UU")}:g.test(t)?{listType:"user_uploads",list:l(t.match(g),2)[1]}:{}}),f(m(e),"onStateChange",function(t){var r=t.data,n=e.props,s=n.onPlay,i=n.onPause,o=n.onBuffer,a=n.onBufferEnd,l=n.onEnded,c=n.onReady,u=n.loop,d=n.config,p=d.playerVars,m=d.onUnstarted,x=window.YT.PlayerState,f=x.UNSTARTED,h=x.PLAYING,g=x.PAUSED,y=x.BUFFERING,j=x.ENDED,b=x.CUED;if(r===f&&m(),r===h&&(s(),a()),r===g&&i(),r===y&&o(),r===j){var v=!!e.callPlayer("getPlaylist");u&&!v&&(p.start?e.seekTo(p.start):e.play()),l()}r===b&&c()}),f(m(e),"mute",function(){e.callPlayer("mute")}),f(m(e),"unmute",function(){e.callPlayer("unMute")}),f(m(e),"ref",function(t){e.container=t}),e}return u(i,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(e){return!e||e instanceof Array||h.test(e)?null:e.match(s.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(e,t){var r=this,s=this.props,i=s.playing,o=s.muted,l=s.playsinline,c=s.controls,u=s.loop,d=s.config,p=s.onError,m=d.playerVars,x=d.embedOptions,f=this.getID(e);if(t)return h.test(e)||g.test(e)||e instanceof Array?void this.player.loadPlaylist(this.parsePlaylist(e)):void this.player.cueVideoById({videoId:f,startSeconds:(0,n.parseStartTime)(e)||m.start,endSeconds:(0,n.parseEndTime)(e)||m.end});(0,n.getSDK)("https://www.youtube.com/iframe_api","YT","onYouTubeIframeAPIReady",function(e){return e.loaded}).then(function(t){r.container&&(r.player=new t.Player(r.container,a({width:"100%",height:"100%",videoId:f,playerVars:a(a({autoplay:i?1:0,mute:o?1:0,controls:c?1:0,start:(0,n.parseStartTime)(e),end:(0,n.parseEndTime)(e),origin:window.location.origin,playsinline:l?1:0},r.parsePlaylist(e)),m),events:{onReady:function(){u&&r.player.setLoop(!0),r.props.onReady()},onPlaybackRateChange:function(e){return r.props.onPlaybackRateChange(e.data)},onStateChange:r.onStateChange,onError:function(e){return p(e.data)}},host:y.test(e)?"https://www.youtube-nocookie.com":void 0},x)))},p),x.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayers callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",e),this.props.playing||this.pause()}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return r.default.createElement("div",{style:e},r.default.createElement("div",{ref:this.ref}))}}]),i}(r.Component);e.default=j,f(j,"displayName","YouTube"),f(j,"canPlay",s.canPlay.youtube)}(YouTube)),YouTube}function requireSoundCloud(){return hasRequiredSoundCloud||(hasRequiredSoundCloud=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=p(e);if(r){var i=p(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return d(e)}(this,n)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t=u(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return m(d(e=t.call.apply(t,[this].concat(i))),"callPlayer",n.callPlayer),m(d(e),"duration",null),m(d(e),"currentTime",null),m(d(e),"fractionLoaded",null),m(d(e),"mute",function(){e.setVolume(0)}),m(d(e),"unmute",function(){null!==e.props.volume&&e.setVolume(e.props.volume)}),m(d(e),"ref",function(t){e.iframe=t}),e}return l(s,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var r=this;(0,n.getSDK)("https://w.soundcloud.com/player/api.js","SC").then(function(n){if(r.iframe){var s=n.Widget.Events,i=s.PLAY,o=s.PLAY_PROGRESS,l=s.PAUSE,c=s.FINISH,u=s.ERROR;t||(r.player=n.Widget(r.iframe),r.player.bind(i,r.props.onPlay),r.player.bind(l,function(){r.duration-r.currentTime<.05||r.props.onPause()}),r.player.bind(o,function(e){r.currentTime=e.currentPosition/1e3,r.fractionLoaded=e.loadedProgress}),r.player.bind(c,function(){return r.props.onEnded()}),r.player.bind(u,function(e){return r.props.onError(e)})),r.player.load(e,a(a({},r.props.config.options),{},{callback:function(){r.player.getDuration(function(e){r.duration=e/1e3,r.props.onReady()})}}))}})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",1e3*e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.fractionLoaded*this.duration}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return r.default.createElement("iframe",{ref:this.ref,src:"https://w.soundcloud.com/player/?url=".concat(encodeURIComponent(this.props.url)),style:e,frameBorder:0,allow:"autoplay"})}}]),s}(r.Component);e.default=x,m(x,"displayName","SoundCloud"),m(x,"canPlay",s.canPlay.soundcloud),m(x,"loopOnEnded",!0)}(SoundCloud)),SoundCloud}function requireVimeo(){return hasRequiredVimeo||(hasRequiredVimeo=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=d(e);if(r){var i=d(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var t=c(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return p(u(e=t.call.apply(t,[this].concat(i))),"callPlayer",n.callPlayer),p(u(e),"duration",null),p(u(e),"currentTime",null),p(u(e),"secondsLoaded",null),p(u(e),"mute",function(){e.setVolume(0)}),p(u(e),"unmute",function(){null!==e.props.volume&&e.setVolume(e.props.volume)}),p(u(e),"ref",function(t){e.container=t}),e}return a(s,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;this.duration=null,(0,n.getSDK)("https://player.vimeo.com/api/player.js","Vimeo").then(function(r){if(t.container){var n=t.props.config,s=n.playerOptions,i=n.title;t.player=new r.Player(t.container,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({url:e,autoplay:t.props.playing,muted:t.props.muted,loop:t.props.loop,playsinline:t.props.playsinline,controls:t.props.controls},s)),t.player.ready().then(function(){var e=t.container.querySelector("iframe");e.style.width="100%",e.style.height="100%",i&&(e.title=i)}).catch(t.props.onError),t.player.on("loaded",function(){t.props.onReady(),t.refreshDuration()}),t.player.on("play",function(){t.props.onPlay(),t.refreshDuration()}),t.player.on("pause",t.props.onPause),t.player.on("seeked",function(e){return t.props.onSeek(e.seconds)}),t.player.on("ended",t.props.onEnded),t.player.on("error",t.props.onError),t.player.on("timeupdate",function(e){var r=e.seconds;t.currentTime=r}),t.player.on("progress",function(e){var r=e.seconds;t.secondsLoaded=r}),t.player.on("bufferstart",t.props.onBuffer),t.player.on("bufferend",t.props.onBufferEnd)}},this.props.onError)}},{key:"refreshDuration",value:function(){var e=this;this.player.getDuration().then(function(t){e.duration=t})}},{key:"play",value:function(){var e=this.callPlayer("play");e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("unload")}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var e={width:"100%",height:"100%",overflow:"hidden",display:this.props.display};return r.default.createElement("div",{key:this.props.url,ref:this.ref,style:e})}}]),s}(r.Component);e.default=m,p(m,"displayName","Vimeo"),p(m,"canPlay",s.canPlay.vimeo),p(m,"forceLoad",!0)}(Vimeo)),Vimeo}function requireFacebook(){return hasRequiredFacebook||(hasRequiredFacebook=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=d(e);if(r){var i=d(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m="https://connect.facebook.net/en_US/sdk.js",x="fbAsyncInit",f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var t=c(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return p(u(e=t.call.apply(t,[this].concat(i))),"callPlayer",n.callPlayer),p(u(e),"playerID",e.props.config.playerId||"".concat("facebook-player-").concat((0,n.randomString)())),p(u(e),"mute",function(){e.callPlayer("mute")}),p(u(e),"unmute",function(){e.callPlayer("unmute")}),e}return a(s,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var r=this;t?(0,n.getSDK)(m,"FB",x).then(function(e){return e.XFBML.parse()}):(0,n.getSDK)(m,"FB",x).then(function(e){e.init({appId:r.props.config.appId,xfbml:!0,version:r.props.config.version}),e.Event.subscribe("xfbml.render",function(e){r.props.onLoaded()}),e.Event.subscribe("xfbml.ready",function(e){"video"===e.type&&e.id===r.playerID&&(r.player=e.instance,r.player.subscribe("startedPlaying",r.props.onPlay),r.player.subscribe("paused",r.props.onPause),r.player.subscribe("finishedPlaying",r.props.onEnded),r.player.subscribe("startedBuffering",r.props.onBuffer),r.player.subscribe("finishedBuffering",r.props.onBufferEnd),r.player.subscribe("error",r.props.onError),r.props.muted?r.callPlayer("mute"):r.callPlayer("unmute"),r.props.onReady(),document.getElementById(r.playerID).querySelector("iframe").style.visibility="visible")})})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentPosition")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props.config.attributes;return r.default.createElement("div",o({style:{width:"100%",height:"100%"},id:this.playerID,className:"fb-video","data-href":this.props.url,"data-autoplay":this.props.playing?"true":"false","data-allowfullscreen":"true","data-controls":this.props.controls?"true":"false"},e))}}]),s}(r.Component);e.default=f,p(f,"displayName","Facebook"),p(f,"canPlay",s.canPlay.facebook),p(f,"loopOnEnded",!0)}(Facebook)),Facebook}function requireStreamable(){return hasRequiredStreamable||(hasRequiredStreamable=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=u(e);if(r){var i=u(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return c(e)}(this,n)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(i,e);var t=l(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return d(c(e=t.call.apply(t,[this].concat(s))),"callPlayer",n.callPlayer),d(c(e),"duration",null),d(c(e),"currentTime",null),d(c(e),"secondsLoaded",null),d(c(e),"mute",function(){e.callPlayer("mute")}),d(c(e),"unmute",function(){e.callPlayer("unmute")}),d(c(e),"ref",function(t){e.iframe=t}),e}return o(i,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,n.getSDK)("https://cdn.embed.ly/player-0.1.0.min.js","playerjs").then(function(e){t.iframe&&(t.player=new e.Player(t.iframe),t.player.setLoop(t.props.loop),t.player.on("ready",t.props.onReady),t.player.on("play",t.props.onPlay),t.player.on("pause",t.props.onPause),t.player.on("seeked",t.props.onSeek),t.player.on("ended",t.props.onEnded),t.player.on("error",t.props.onError),t.player.on("timeupdate",function(e){var r=e.duration,n=e.seconds;t.duration=r,t.currentTime=n}),t.player.on("buffered",function(e){var r=e.percent;t.duration&&(t.secondsLoaded=t.duration*r)}),t.props.muted&&t.player.mute())},this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var e=this.props.url.match(s.MATCH_URL_STREAMABLE)[1];return r.default.createElement("iframe",{ref:this.ref,src:"https://streamable.com/o/".concat(e),frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allow:"encrypted-media; autoplay; fullscreen;"})}}]),i}(r.Component);e.default=p,d(p,"displayName","Streamable"),d(p,"canPlay",s.canPlay.streamable)}(Streamable)),Streamable}function requireWistia(){return hasRequiredWistia||(hasRequiredWistia=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=p(e);if(r){var i=p(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return d(e)}(this,n)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,e);var t=u(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return m(d(e=t.call.apply(t,[this].concat(s))),"callPlayer",n.callPlayer),m(d(e),"playerID",e.props.config.playerId||"".concat("wistia-player-").concat((0,n.randomString)())),m(d(e),"onPlay",function(){var t;return(t=e.props).onPlay.apply(t,arguments)}),m(d(e),"onPause",function(){var t;return(t=e.props).onPause.apply(t,arguments)}),m(d(e),"onSeek",function(){var t;return(t=e.props).onSeek.apply(t,arguments)}),m(d(e),"onEnded",function(){var t;return(t=e.props).onEnded.apply(t,arguments)}),m(d(e),"onPlaybackRateChange",function(){var t;return(t=e.props).onPlaybackRateChange.apply(t,arguments)}),m(d(e),"mute",function(){e.callPlayer("mute")}),m(d(e),"unmute",function(){e.callPlayer("unmute")}),e}return l(i,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this,r=this.props,s=r.playing,i=r.muted,o=r.controls,l=r.onReady,c=r.config,u=r.onError;(0,n.getSDK)("https://fast.wistia.com/assets/external/E-v1.js","Wistia").then(function(e){c.customControls&&c.customControls.forEach(function(t){return e.defineControl(t)}),window._wq=window._wq||[],window._wq.push({id:t.playerID,options:a({autoPlay:s,silentAutoPlay:"allow",muted:i,controlsVisibleOnLoad:o,fullscreenButton:o,playbar:o,playbackRateControl:o,qualityControl:o,volumeControl:o,settingsControl:o,smallPlayButton:o},c.options),onReady:function(e){t.player=e,t.unbind(),t.player.bind("play",t.onPlay),t.player.bind("pause",t.onPause),t.player.bind("seek",t.onSeek),t.player.bind("end",t.onEnded),t.player.bind("playbackratechange",t.onPlaybackRateChange),l()}})},u)}},{key:"unbind",value:function(){this.player.unbind("play",this.onPlay),this.player.unbind("pause",this.onPause),this.player.unbind("seek",this.onSeek),this.player.unbind("end",this.onEnded),this.player.unbind("playbackratechange",this.onPlaybackRateChange)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.unbind(),this.callPlayer("remove")}},{key:"seekTo",value:function(e){this.callPlayer("time",e)}},{key:"setVolume",value:function(e){this.callPlayer("volume",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("playbackRate",e)}},{key:"getDuration",value:function(){return this.callPlayer("duration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("time")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props.url,t=e&&e.match(s.MATCH_URL_WISTIA)[1],n="wistia_embed wistia_async_".concat(t);return r.default.createElement("div",{id:this.playerID,key:t,className:n,style:{width:"100%",height:"100%"}})}}]),i}(r.Component);e.default=x,m(x,"displayName","Wistia"),m(x,"canPlay",s.canPlay.wistia),m(x,"loopOnEnded",!0)}(Wistia)),Wistia}function requireTwitch(){return hasRequiredTwitch||(hasRequiredTwitch=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=d(e);if(r){var i=d(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t=c(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return p(u(e=t.call.apply(t,[this].concat(s))),"callPlayer",n.callPlayer),p(u(e),"playerID",e.props.config.playerId||"".concat("twitch-player-").concat((0,n.randomString)())),p(u(e),"mute",function(){e.callPlayer("setMuted",!0)}),p(u(e),"unmute",function(){e.callPlayer("setMuted",!1)}),e}return a(i,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var r=this,i=this.props,a=i.playsinline,l=i.onError,c=i.config,u=i.controls,d=s.MATCH_URL_TWITCH_CHANNEL.test(e),m=d?e.match(s.MATCH_URL_TWITCH_CHANNEL)[1]:e.match(s.MATCH_URL_TWITCH_VIDEO)[1];t?d?this.player.setChannel(m):this.player.setVideo("v"+m):(0,n.getSDK)("https://player.twitch.tv/js/embed/v1.js","Twitch").then(function(t){r.player=new t.Player(r.playerID,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({video:d?"":m,channel:d?m:"",height:"100%",width:"100%",playsinline:a,autoplay:r.props.playing,muted:r.props.muted,controls:!!d||u,time:(0,n.parseStartTime)(e)},c.options));var s=t.Player,i=s.READY,l=s.PLAYING,x=s.PAUSE,f=s.ENDED,h=s.ONLINE,g=s.OFFLINE,y=s.SEEK;r.player.addEventListener(i,r.props.onReady),r.player.addEventListener(l,r.props.onPlay),r.player.addEventListener(x,r.props.onPause),r.player.addEventListener(f,r.props.onEnded),r.player.addEventListener(y,r.props.onSeek),r.player.addEventListener(h,r.props.onLoaded),r.player.addEventListener(g,r.props.onLoaded)},l)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("pause")}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){return r.default.createElement("div",{style:{width:"100%",height:"100%"},id:this.playerID})}}]),i}(r.Component);e.default=m,p(m,"displayName","Twitch"),p(m,"canPlay",s.canPlay.twitch),p(m,"loopOnEnded",!0)}(Twitch)),Twitch}function requireDailyMotion(){return hasRequiredDailyMotion||(hasRequiredDailyMotion=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,s=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=x(e);if(r){var i=x(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return m(e)}(this,n)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t=p(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return f(m(e=t.call.apply(t,[this].concat(s))),"callPlayer",n.callPlayer),f(m(e),"onDurationChange",function(){var t=e.getDuration();e.props.onDuration(t)}),f(m(e),"mute",function(){e.callPlayer("setMuted",!0)}),f(m(e),"unmute",function(){e.callPlayer("setMuted",!1)}),f(m(e),"ref",function(t){e.container=t}),e}return u(i,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this,r=this.props,i=r.controls,o=r.config,c=r.onError,u=r.playing,d=l(e.match(s.MATCH_URL_DAILYMOTION),2)[1];this.player?this.player.load(d,{start:(0,n.parseStartTime)(e),autoplay:u}):(0,n.getSDK)("https://api.dmcdn.net/all.js","DM","dmAsyncInit",function(e){return e.player}).then(function(r){if(t.container){var s=r.player;t.player=new s(t.container,{width:"100%",height:"100%",video:d,params:a({controls:i,autoplay:t.props.playing,mute:t.props.muted,start:(0,n.parseStartTime)(e),origin:window.location.origin},o.params),events:{apiready:t.props.onReady,seeked:function(){return t.props.onSeek(t.player.currentTime)},video_end:t.props.onEnded,durationchange:t.onDurationChange,pause:t.props.onPause,playing:t.props.onPlay,waiting:t.props.onBuffer,error:function(e){return c(e)}}})}},c)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.player.duration||null}},{key:"getCurrentTime",value:function(){return this.player.currentTime}},{key:"getSecondsLoaded",value:function(){return this.player.bufferedTime}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return r.default.createElement("div",{style:e},r.default.createElement("div",{ref:this.ref}))}}]),i}(r.Component);e.default=h,f(h,"displayName","DailyMotion"),f(h,"canPlay",s.canPlay.dailymotion),f(h,"loopOnEnded",!0)}(DailyMotion)),DailyMotion}function requireMixcloud(){return hasRequiredMixcloud||(hasRequiredMixcloud=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=p(e);if(r){var i=p(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return d(e)}(this,n)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,e);var t=u(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return m(d(e=t.call.apply(t,[this].concat(s))),"callPlayer",n.callPlayer),m(d(e),"duration",null),m(d(e),"currentTime",null),m(d(e),"secondsLoaded",null),m(d(e),"mute",function(){}),m(d(e),"unmute",function(){}),m(d(e),"ref",function(t){e.iframe=t}),e}return l(i,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,n.getSDK)("https://widget.mixcloud.com/media/js/widgetApi.js","Mixcloud").then(function(e){t.player=e.PlayerWidget(t.iframe),t.player.ready.then(function(){t.player.events.play.on(t.props.onPlay),t.player.events.pause.on(t.props.onPause),t.player.events.ended.on(t.props.onEnded),t.player.events.error.on(t.props.error),t.player.events.progress.on(function(e,r){t.currentTime=e,t.duration=r}),t.props.onReady()})},this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props,t=e.url,i=e.config,o=t.match(s.MATCH_URL_MIXCLOUD)[1],l=(0,n.queryString)(a(a({},i.options),{},{feed:"/".concat(o,"/")}));return r.default.createElement("iframe",{key:o,ref:this.ref,style:{width:"100%",height:"100%"},src:"https://www.mixcloud.com/widget/iframe/?".concat(l),frameBorder:"0"})}}]),i}(r.Component);e.default=x,m(x,"displayName","Mixcloud"),m(x,"canPlay",s.canPlay.mixcloud),m(x,"loopOnEnded",!0)}(Mixcloud)),Mixcloud}function requireVidyard(){return hasRequiredVidyard||(hasRequiredVidyard=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=d(e);if(r){var i=d(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t=c(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return p(u(e=t.call.apply(t,[this].concat(s))),"callPlayer",n.callPlayer),p(u(e),"mute",function(){e.setVolume(0)}),p(u(e),"unmute",function(){null!==e.props.volume&&e.setVolume(e.props.volume)}),p(u(e),"ref",function(t){e.container=t}),e}return a(i,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this,r=this.props,i=r.playing,a=r.config,l=r.onError,c=r.onDuration,u=e&&e.match(s.MATCH_URL_VIDYARD)[1];this.player&&this.stop(),(0,n.getSDK)("https://play.vidyard.com/embed/v4.js","VidyardV4","onVidyardAPI").then(function(e){t.container&&(e.api.addReadyListener(function(e,r){t.player||(t.player=r,t.player.on("ready",t.props.onReady),t.player.on("play",t.props.onPlay),t.player.on("pause",t.props.onPause),t.player.on("seek",t.props.onSeek),t.player.on("playerComplete",t.props.onEnded))},u),e.api.renderPlayer(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({uuid:u,container:t.container,autoplay:i?1:0},a.options)),e.api.getPlayerMetadata(u).then(function(e){t.duration=e.length_in_seconds,c(e.length_in_seconds)}))},l)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){window.VidyardV4.api.destroyPlayer(this.player)}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackSpeed",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.callPlayer("currentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return r.default.createElement("div",{style:e},r.default.createElement("div",{ref:this.ref}))}}]),i}(r.Component);e.default=m,p(m,"displayName","Vidyard"),p(m,"canPlay",s.canPlay.vidyard)}(Vidyard)),Vidyard}function requireKaltura(){return hasRequiredKaltura||(hasRequiredKaltura=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=u(e);if(r){var i=u(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return c(e)}(this,n)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t=l(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return d(c(e=t.call.apply(t,[this].concat(i))),"callPlayer",n.callPlayer),d(c(e),"duration",null),d(c(e),"currentTime",null),d(c(e),"secondsLoaded",null),d(c(e),"mute",function(){e.callPlayer("mute")}),d(c(e),"unmute",function(){e.callPlayer("unmute")}),d(c(e),"ref",function(t){e.iframe=t}),e}return o(s,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,n.getSDK)("https://cdn.embed.ly/player-0.1.0.min.js","playerjs").then(function(e){t.iframe&&(t.player=new e.Player(t.iframe),t.player.on("ready",function(){setTimeout(function(){t.player.isReady=!0,t.player.setLoop(t.props.loop),t.props.muted&&t.player.mute(),t.addListeners(t.player,t.props),t.props.onReady()},500)}))},this.props.onError)}},{key:"addListeners",value:function(e,t){var r=this;e.on("play",t.onPlay),e.on("pause",t.onPause),e.on("ended",t.onEnded),e.on("error",t.onError),e.on("timeupdate",function(e){var t=e.duration,n=e.seconds;r.duration=t,r.currentTime=n})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){return r.default.createElement("iframe",{ref:this.ref,src:this.props.url,frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allow:"encrypted-media; autoplay; fullscreen;",referrerPolicy:"no-referrer-when-downgrade"})}}]),s}(r.Component);e.default=p,d(p,"displayName","Kaltura"),d(p,"canPlay",s.canPlay.kaltura)}(Kaltura)),Kaltura}function requireFilePlayer(){return hasRequiredFilePlayer||(hasRequiredFilePlayer=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(reactExports),n=utils,s=patterns;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=d(e);if(r){var i=d(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m="undefined"!=typeof navigator,x=m&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,f=m&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||x)&&!window.MSStream,h=/www\.dropbox\.com\/.+/,g=/https:\/\/watch\.cloudflarestream\.com\/([a-z0-9]+)/,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t=c(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return p(u(e=t.call.apply(t,[this].concat(a))),"onReady",function(){var t;return(t=e.props).onReady.apply(t,arguments)}),p(u(e),"onPlay",function(){var t;return(t=e.props).onPlay.apply(t,arguments)}),p(u(e),"onBuffer",function(){var t;return(t=e.props).onBuffer.apply(t,arguments)}),p(u(e),"onBufferEnd",function(){var t;return(t=e.props).onBufferEnd.apply(t,arguments)}),p(u(e),"onPause",function(){var t;return(t=e.props).onPause.apply(t,arguments)}),p(u(e),"onEnded",function(){var t;return(t=e.props).onEnded.apply(t,arguments)}),p(u(e),"onError",function(){var t;return(t=e.props).onError.apply(t,arguments)}),p(u(e),"onPlayBackRateChange",function(t){return e.props.onPlaybackRateChange(t.target.playbackRate)}),p(u(e),"onEnablePIP",function(){var t;return(t=e.props).onEnablePIP.apply(t,arguments)}),p(u(e),"onDisablePIP",function(t){var r=e.props,n=r.onDisablePIP,s=r.playing;n(t),s&&e.play()}),p(u(e),"onPresentationModeChange",function(t){if(e.player&&(0,n.supportsWebKitPresentationMode)(e.player)){var r=e.player.webkitPresentationMode;"picture-in-picture"===r?e.onEnablePIP(t):"inline"===r&&e.onDisablePIP(t)}}),p(u(e),"onSeek",function(t){e.props.onSeek(t.target.currentTime)}),p(u(e),"mute",function(){e.player.muted=!0}),p(u(e),"unmute",function(){e.player.muted=!1}),p(u(e),"renderSourceElement",function(e,t){return"string"==typeof e?r.default.createElement("source",{key:t,src:e}):r.default.createElement("source",o({key:t},e))}),p(u(e),"renderTrack",function(e,t){return r.default.createElement("track",o({key:t},e))}),p(u(e),"ref",function(t){e.player&&(e.prevPlayer=e.player),e.player=t}),e}return a(i,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this),this.addListeners(this.player),f&&this.player.load()}},{key:"componentDidUpdate",value:function(e){this.shouldUseAudio(this.props)!==this.shouldUseAudio(e)&&(this.removeListeners(this.prevPlayer,e.url),this.addListeners(this.player)),this.props.url===e.url||(0,n.isMediaStream)(this.props.url)||(this.player.srcObject=null)}},{key:"componentWillUnmount",value:function(){this.removeListeners(this.player),this.hls&&this.hls.destroy()}},{key:"addListeners",value:function(e){var t=this.props,r=t.url,n=t.playsinline;e.addEventListener("play",this.onPlay),e.addEventListener("waiting",this.onBuffer),e.addEventListener("playing",this.onBufferEnd),e.addEventListener("pause",this.onPause),e.addEventListener("seeked",this.onSeek),e.addEventListener("ended",this.onEnded),e.addEventListener("error",this.onError),e.addEventListener("ratechange",this.onPlayBackRateChange),e.addEventListener("enterpictureinpicture",this.onEnablePIP),e.addEventListener("leavepictureinpicture",this.onDisablePIP),e.addEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(r)||e.addEventListener("canplay",this.onReady),n&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(e,t){e.removeEventListener("canplay",this.onReady),e.removeEventListener("play",this.onPlay),e.removeEventListener("waiting",this.onBuffer),e.removeEventListener("playing",this.onBufferEnd),e.removeEventListener("pause",this.onPause),e.removeEventListener("seeked",this.onSeek),e.removeEventListener("ended",this.onEnded),e.removeEventListener("error",this.onError),e.removeEventListener("ratechange",this.onPlayBackRateChange),e.removeEventListener("enterpictureinpicture",this.onEnablePIP),e.removeEventListener("leavepictureinpicture",this.onDisablePIP),e.removeEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(t)||e.removeEventListener("canplay",this.onReady)}},{key:"shouldUseAudio",value:function(e){return!e.config.forceVideo&&(!e.config.attributes.poster&&(s.AUDIO_EXTENSIONS.test(e.url)||e.config.forceAudio))}},{key:"shouldUseHLS",value:function(e){return!!this.props.config.forceHLS||!f&&(s.HLS_EXTENSIONS.test(e)||g.test(e))}},{key:"shouldUseDASH",value:function(e){return s.DASH_EXTENSIONS.test(e)||this.props.config.forceDASH}},{key:"shouldUseFLV",value:function(e){return s.FLV_EXTENSIONS.test(e)||this.props.config.forceFLV}},{key:"load",value:function(e){var t=this,r=this.props.config,s=r.hlsVersion,i=r.hlsOptions,o=r.dashVersion,a=r.flvVersion;if(this.hls&&this.hls.destroy(),this.dash&&this.dash.reset(),this.shouldUseHLS(e)&&(0,n.getSDK)("https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js".replace("VERSION",s),"Hls").then(function(r){if(t.hls=new r(i),t.hls.on(r.Events.MANIFEST_PARSED,function(){t.props.onReady()}),t.hls.on(r.Events.ERROR,function(e,n){t.props.onError(e,n,t.hls,r)}),g.test(e)){var n=e.match(g)[1];t.hls.loadSource("https://videodelivery.net/{id}/manifest/video.m3u8".replace("{id}",n))}else t.hls.loadSource(e);t.hls.attachMedia(t.player),t.props.onLoaded()}),this.shouldUseDASH(e)&&(0,n.getSDK)("https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js".replace("VERSION",o),"dashjs").then(function(r){t.dash=r.MediaPlayer().create(),t.dash.initialize(t.player,e,t.props.playing),t.dash.on("error",t.props.onError),parseInt(o)<3?t.dash.getDebug().setLogToBrowserConsole(!1):t.dash.updateSettings({debug:{logLevel:r.Debug.LOG_LEVEL_NONE}}),t.props.onLoaded()}),this.shouldUseFLV(e)&&(0,n.getSDK)("https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js".replace("VERSION",a),"flvjs").then(function(r){t.flv=r.createPlayer({type:"flv",url:e}),t.flv.attachMediaElement(t.player),t.flv.on(r.Events.ERROR,function(e,n){t.props.onError(e,n,t.flv,r)}),t.flv.load(),t.props.onLoaded()}),e instanceof Array)this.player.load();else if((0,n.isMediaStream)(e))try{this.player.srcObject=e}catch(e3){this.player.src=window.URL.createObjectURL(e)}}},{key:"play",value:function(){var e=this.player.play();e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src"),this.dash&&this.dash.reset()}},{key:"seekTo",value:function(e){this.player.currentTime=e}},{key:"setVolume",value:function(e){this.player.volume=e}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player?this.player.requestPictureInPicture():(0,n.supportsWebKitPresentationMode)(this.player)&&"picture-in-picture"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("picture-in-picture")}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&document.pictureInPictureElement===this.player?document.exitPictureInPicture():(0,n.supportsWebKitPresentationMode)(this.player)&&"inline"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("inline")}},{key:"setPlaybackRate",value:function(e){try{this.player.playbackRate=e}catch(t){this.props.onError(t)}}},{key:"getDuration",value:function(){if(!this.player)return null;var e=this.player,t=e.duration,r=e.seekable;return t===1/0&&r.length>0?r.end(r.length-1):t}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var e=this.player.buffered;if(0===e.length)return 0;var t=e.end(e.length-1),r=this.getDuration();return t>r?r:t}},{key:"getSource",value:function(e){var t=this.shouldUseHLS(e),r=this.shouldUseDASH(e),s=this.shouldUseFLV(e);if(!(e instanceof Array||(0,n.isMediaStream)(e)||t||r||s))return h.test(e)?e.replace("www.dropbox.com","dl.dropboxusercontent.com"):e}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.playing,s=e.loop,i=e.controls,a=e.muted,l=e.config,c=e.width,u=e.height,d=this.shouldUseAudio(this.props)?"audio":"video",p={width:"auto"===c?c:"100%",height:"auto"===u?u:"100%"};return r.default.createElement(d,o({ref:this.ref,src:this.getSource(t),style:p,preload:"auto",autoPlay:n||void 0,controls:i,muted:a,loop:s},l.attributes),t instanceof Array&&t.map(this.renderSourceElement),l.tracks.map(this.renderTrack))}}]),i}(r.Component);e.default=y,p(y,"displayName","FilePlayer"),p(y,"canPlay",s.canPlay.file)}(FilePlayer)),FilePlayer}function isEqual$1(e,t){return e===t||!(!safeIsNaN(e)||!safeIsNaN(t))}function areInputsEqual(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!isEqual$1(e[r],t[r]))return!1;return!0}function memoizeOne(e,t){var r;void 0===t&&(t=areInputsEqual);var n,s=[],i=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return i&&r===this&&t(o,s)||(n=e.apply(this,o),i=!0,r=this,s=o),n}}function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var r,n,s,i;if(Array.isArray(e)){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(!equal(e[n],t[n]))return!1;return!0}if(hasMap&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;for(i=e.entries();!(n=i.next()).done;)if(!equal(n.value[1],t.get(n.value[0])))return!1;return!0}if(hasSet&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((r=(s=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!Object.prototype.hasOwnProperty.call(t,s[n]))return!1;if(hasElementType&&e instanceof Element)return!1;for(n=r;0!==n--;)if(("_owner"!==s[n]&&"__v"!==s[n]&&"__o"!==s[n]||!e.$$typeof)&&!equal(e[s[n]],t[s[n]]))return!1;return!0}return e!=e&&t!=t}function _interopRequireDefault$1(e){return e&&e.__esModule?e:{default:e}}function requirePreview(){return hasRequiredPreview||(hasRequiredPreview=1,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(s,o,a):s[o]=e[o]}s.default=e,r&&r.set(e,s);return s}(reactExports);function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}();return function(){var n,s=u(e);if(r){var i=u(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return c(e)}(this,n)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p="64px",m={},x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,e);var t=l(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return d(c(e=t.call.apply(t,[this].concat(s))),"mounted",!1),d(c(e),"state",{image:null}),d(c(e),"handleKeyPress",function(t){"Enter"!==t.key&&" "!==t.key||e.props.onClick()}),e}return o(n,[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.url,n=t.light;e.url===r&&e.light===n||this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(e){var t=this,r=e.url,n=e.light,s=e.oEmbedUrl;if("string"!=typeof n){if(!m[r])return this.setState({image:null}),window.fetch(s.replace("{url}",r)).then(function(e){return e.json()}).then(function(e){if(e.thumbnail_url&&t.mounted){var n=e.thumbnail_url.replace("height=100","height=480");t.setState({image:n}),m[r]=n}});this.setState({image:m[r]})}else this.setState({image:n})}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.playIcon,s=e.previewTabIndex,o=this.state.image,a={display:"flex",alignItems:"center",justifyContent:"center"},l={preview:i({width:"100%",height:"100%",backgroundImage:o?"url(".concat(o,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},a),shadow:i({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:p,width:p,height:p},a),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},c=r.default.createElement("div",{style:l.shadow,className:"react-player__shadow"},r.default.createElement("div",{style:l.playIcon,className:"react-player__play-icon"}));return r.default.createElement("div",{style:l.preview,className:"react-player__preview",onClick:t,tabIndex:s,onKeyPress:this.handleKeyPress},n||c)}}]),n}(r.Component);e.default=x}(Preview$1)),Preview$1}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys$2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(r),!0).forEach(function(t){_defineProperty$2(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends.apply(this,arguments)}function _toConsumableArray$2(e){return _arrayWithoutHoles$2(e)||_iterableToArray$2(e)||_unsupportedIterableToArray$3(e)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$3(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$3(e,t):void 0}}function _iterableToArray$2(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles$2(e){if(Array.isArray(e))return _arrayLikeToArray$3(e)}function _arrayLikeToArray$3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e3){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty$2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var i=n?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}return r.default=e,t&&t.set(e,r),r}function registerGroup(e,t){return e in t||(t[e]=[]),t[e]}function addToGroups(e,t,r){t[numeric]&&(t[asciinumeric]=!0,t[alphanumeric]=!0),t[ascii]&&(t[asciinumeric]=!0,t[alpha]=!0),t[asciinumeric]&&(t[alphanumeric]=!0),t[alpha]&&(t[alphanumeric]=!0),t[alphanumeric]&&(t[domain$1]=!0),t[emoji]&&(t[domain$1]=!0);for(const n in t){const t=registerGroup(n,r);t.indexOf(e)<0&&t.push(e)}}function flagsForToken(e,t){const r={};for(const n in t)t[n].indexOf(e)>=0&&(r[n]=!0);return r}function State(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}function init$2(e=[]){const t={};State.groups=t;const r=new State;null==tlds&&(tlds=decodeTlds(encodedTlds)),null==utlds&&(utlds=decodeTlds(encodedUtlds)),tt$1(r,"'",APOSTROPHE),tt$1(r,"{",OPENBRACE),tt$1(r,"}",CLOSEBRACE),tt$1(r,"[",OPENBRACKET),tt$1(r,"]",CLOSEBRACKET),tt$1(r,"(",OPENPAREN),tt$1(r,")",CLOSEPAREN),tt$1(r,"<",OPENANGLEBRACKET),tt$1(r,">",CLOSEANGLEBRACKET),tt$1(r,"",FULLWIDTHLEFTPAREN),tt$1(r,"",FULLWIDTHRIGHTPAREN),tt$1(r,"",LEFTCORNERBRACKET),tt$1(r,"",RIGHTCORNERBRACKET),tt$1(r,"",LEFTWHITECORNERBRACKET),tt$1(r,"",RIGHTWHITECORNERBRACKET),tt$1(r,"",FULLWIDTHLESSTHAN),tt$1(r,"",FULLWIDTHGREATERTHAN),tt$1(r,"&",AMPERSAND),tt$1(r,"*",ASTERISK$1),tt$1(r,"@",AT),tt$1(r,"`",BACKTICK),tt$1(r,"^",CARET),tt$1(r,":",COLON),tt$1(r,",",COMMA),tt$1(r,"$",DOLLAR),tt$1(r,".",DOT),tt$1(r,"=",EQUALS),tt$1(r,"!",EXCLAMATION),tt$1(r,"-",HYPHEN),tt$1(r,"%",PERCENT),tt$1(r,"|",PIPE),tt$1(r,"+",PLUS),tt$1(r,"#",POUND),tt$1(r,"?",QUERY),tt$1(r,'"',QUOTE),tt$1(r,"/",SLASH),tt$1(r,";",SEMI),tt$1(r,"~",TILDE),tt$1(r,"_",UNDERSCORE),tt$1(r,"\\",BACKSLASH),tt$1(r,"",FULLWIDTHMIDDLEDOT);const n=tr$1(r,DIGIT,NUM,{[numeric]:!0});tr$1(n,DIGIT,n);const s=tr$1(n,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),i=tr$1(n,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),o=tr$1(r,ASCII_LETTER,WORD,{[ascii]:!0});tr$1(o,DIGIT,s),tr$1(o,ASCII_LETTER,o),tr$1(s,DIGIT,s),tr$1(s,ASCII_LETTER,s);const a=tr$1(r,LETTER,UWORD,{[alpha]:!0});tr$1(a,ASCII_LETTER),tr$1(a,DIGIT,i),tr$1(a,LETTER,a),tr$1(i,DIGIT,i),tr$1(i,ASCII_LETTER),tr$1(i,LETTER,i);const l=tt$1(r,LF,NL,{[whitespace$1]:!0}),c=tt$1(r,CR,WS,{[whitespace$1]:!0}),u=tr$1(r,SPACE,WS,{[whitespace$1]:!0});tt$1(r,OBJECT_REPLACEMENT,u),tt$1(c,LF,l),tt$1(c,OBJECT_REPLACEMENT,u),tr$1(c,SPACE,u),tt$1(u,CR),tt$1(u,LF),tr$1(u,SPACE,u),tt$1(u,OBJECT_REPLACEMENT,u);const d=tr$1(r,EMOJI,EMOJI$1,{[emoji]:!0});tt$1(d,"#"),tr$1(d,EMOJI,d),tt$1(d,EMOJI_VARIATION,d);const p=tt$1(d,EMOJI_JOINER);tt$1(p,"#"),tr$1(p,EMOJI,d);const m=[[ASCII_LETTER,o],[DIGIT,s]],x=[[ASCII_LETTER,null],[LETTER,a],[DIGIT,i]];for(let f=0;f<tlds.length;f++)fastts(r,tlds[f],TLD,WORD,m);for(let f=0;f<utlds.length;f++)fastts(r,utlds[f],UTLD,UWORD,x);addToGroups(TLD,{tld:!0,ascii:!0},t),addToGroups(UTLD,{utld:!0,alpha:!0},t),fastts(r,"file",SCHEME,WORD,m),fastts(r,"mailto",SCHEME,WORD,m),fastts(r,"http",SLASH_SCHEME,WORD,m),fastts(r,"https",SLASH_SCHEME,WORD,m),fastts(r,"ftp",SLASH_SCHEME,WORD,m),fastts(r,"ftps",SLASH_SCHEME,WORD,m),addToGroups(SCHEME,{scheme:!0,ascii:!0},t),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},t),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let f=0;f<e.length;f++){const t=e[f][0],n=e[f][1]?{[scheme]:!0}:{[slashscheme]:!0};t.indexOf("-")>=0?n[domain$1]=!0:ASCII_LETTER.test(t)?DIGIT.test(t)?n[asciinumeric]=!0:n[ascii]=!0:n[numeric]=!0,ts(r,t,t,n)}return ts(r,"localhost",LOCALHOST,{ascii:!0}),r.jd=new State(SYM),{start:r,tokens:assign({groups:t},tk)}}function run$1(e,t){const r=stringToArray(t.replace(/[A-Z]/g,e=>e.toLowerCase())),n=r.length,s=[];let i=0,o=0;for(;o<n;){let a=e,l=null,c=0,u=null,d=-1,p=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(d=0,p=0,u=a):d>=0&&(d+=r[o].length,p++),c+=r[o].length,i+=r[o].length,o++;i-=d,o-=p,c-=d,s.push({t:u.t,v:t.slice(i-c,i),s:i-c,e:i})}return s}function stringToArray(e){const t=[],r=e.length;let n=0;for(;n<r;){let s,i=e.charCodeAt(n),o=i<55296||i>56319||n+1===r||(s=e.charCodeAt(n+1))<56320||s>57343?e[n]:e.slice(n,n+2);t.push(o),n+=o.length}return t}function fastts(e,t,r,n,s){let i;const o=t.length;for(let a=0;a<o-1;a++){const r=t[a];e.j[r]?i=e.j[r]:(i=new State(n),i.jr=s.slice(),e.j[r]=i),e=i}return i=new State(r),i.jr=s.slice(),e.j[t[o-1]]=i,i}function decodeTlds(e){const t=[],r=[];let n=0;for(;n<e.length;){let s=0;for(;"0123456789".indexOf(e[n+s])>=0;)s++;if(s>0){t.push(r.join(""));for(let t=parseInt(e.substring(n,n+s),10);t>0;t--)r.pop();n+=s}else r.push(e[n]),n++}return t}function Options$c(e,t=null){let r=assign({},defaults);e&&(r=assign(r,e instanceof Options$c?e.o:e));const n=r.ignoreTags,s=[];for(let i=0;i<n.length;i++)s.push(n[i].toUpperCase());this.o=r,t&&(this.defaultRender=t),this.ignoreTags=s}function noop$6(e){return e}function MultiToken(e,t){this.t="token",this.v=e,this.tk=t}function createTokenClass(e,t){class r extends MultiToken{constructor(t,r){super(t,r),this.t=e}}for(const n in t)r.prototype[n]=t[n];return r.t=e,r}function init$1({groups:e}){const t=e.domain.concat([AMPERSAND,ASTERISK$1,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),r=[APOSTROPHE,COLON,COMMA,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],n=[AMPERSAND,APOSTROPHE,ASTERISK$1,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],s=makeState(),i=tt$1(s,TILDE);ta(i,n,i),ta(i,e.domain,i);const o=makeState(),a=makeState(),l=makeState();ta(s,e.domain,o),ta(s,e.scheme,a),ta(s,e.slashscheme,l),ta(o,n,i),ta(o,e.domain,o);const c=tt$1(o,AT);tt$1(i,AT,c),tt$1(a,AT,c),tt$1(l,AT,c);const u=tt$1(i,DOT);ta(u,n,i),ta(u,e.domain,i);const d=makeState();ta(c,e.domain,d),ta(d,e.domain,d);const p=tt$1(d,DOT);ta(p,e.domain,d);const m=makeState(Email);ta(p,e.tld,m),ta(p,e.utld,m),tt$1(c,LOCALHOST,m);const x=tt$1(d,HYPHEN);tt$1(x,HYPHEN,x),ta(x,e.domain,d),ta(m,e.domain,d),tt$1(m,DOT,p),tt$1(m,HYPHEN,x);const f=tt$1(m,COLON);ta(f,e.numeric,Email);const h=tt$1(o,HYPHEN),g=tt$1(o,DOT);tt$1(h,HYPHEN,h),ta(h,e.domain,o),ta(g,n,i),ta(g,e.domain,o);const y=makeState(Url);ta(g,e.tld,y),ta(g,e.utld,y),ta(y,e.domain,o),ta(y,n,i),tt$1(y,DOT,g),tt$1(y,HYPHEN,h),tt$1(y,AT,c);const j=tt$1(y,COLON),b=makeState(Url);ta(j,e.numeric,b);const v=makeState(Url),E=makeState();ta(v,t,v),ta(v,r,E),ta(E,t,v),ta(E,r,E),tt$1(y,SLASH,v),tt$1(b,SLASH,v);const R=tt$1(a,COLON),S=tt$1(l,COLON),w=tt$1(S,SLASH),$=tt$1(w,SLASH);ta(a,e.domain,o),tt$1(a,DOT,g),tt$1(a,HYPHEN,h),ta(l,e.domain,o),tt$1(l,DOT,g),tt$1(l,HYPHEN,h),ta(R,e.domain,v),tt$1(R,SLASH,v),tt$1(R,QUERY,v),ta($,e.domain,v),ta($,t,v),tt$1($,SLASH,v);const N=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let _=0;_<N.length;_++){const[e,n]=N[_],s=tt$1(v,e);tt$1(E,e,s),tt$1(s,n,v);const i=makeState(Url);ta(s,t,i);const o=makeState();ta(s,r),ta(i,t,i),ta(i,r,o),ta(o,t,i),ta(o,r,o),tt$1(i,n,v),tt$1(o,n,v)}return tt$1(s,LOCALHOST,y),tt$1(s,NL,Nl),{start:s,tokens:tk}}function run(e,t,r){let n=r.length,s=0,i=[],o=[];for(;s<n;){let a=e,l=null,c=null,u=0,d=null,p=-1;for(;s<n&&!(l=a.go(r[s].t));)o.push(r[s++]);for(;s<n&&(c=l||a.go(r[s].t));)l=null,a=c,a.accepts()?(p=0,d=a):p>=0&&p++,s++,u++;if(p<0)s-=u,s<n&&(o.push(r[s]),s++);else{o.length>0&&(i.push(initMultiToken(Text,t,o)),o=[]),s-=p,u-=p;const e=d.t,n=r.slice(s-u,s);i.push(initMultiToken(e,t,n))}}return o.length>0&&i.push(initMultiToken(Text,t,o)),i}function initMultiToken(e,t,r){const n=r[0].s,s=r[r.length-1].e;return new e(t.slice(n,s),r)}function init$3(){INIT.scanner=init$2(INIT.customSchemes);for(let e=0;e<INIT.tokenQueue.length;e++)INIT.tokenQueue[e][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let e=0;e<INIT.pluginQueue.length;e++)INIT.pluginQueue[e][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(e){return INIT.initialized||init$3(),run(INIT.parser.start,e,run$1(INIT.scanner.start,e))}function find$1(e,t=null,r=null){if(t&&"object"==typeof t){if(r)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);r=t,t=null}const n=new Options$c(r),s=tokenize(e),i=[];for(let o=0;o<s.length;o++){const e=s[o];!e.isLink||t&&e.t!==t||!n.check(e)||i.push(e.toFormattedObject(n))}return i}function test(e,t=null){const r=tokenize(e);return 1===r.length&&r[0].isLink&&(!t||r[0].t===t)}function useStateStore(e,t){const r=reactExports.useCallback(r=>(null==e?void 0:e.subscribeWithSelector(t,r))??noop$5,[e,t]),n=reactExports.useMemo(()=>{let r;return()=>{const n=null==e?void 0:e.getLatestValue();if(!n)return;if(r&&r[0]===n)return r[1];const s=t(n);if(r){let e=!0;for(const t in r[1])if(r[1][t]!==s[t]){e=!1;break}if(e)return r[1]}return r=[n,s],r[1]}},[e,t]);return shimExports.useSyncExternalStore(r,n)}function useMessageBounceContext(e){const t=reactExports.useContext(MessageBounceContext);return t||(console.warn(`The useMessageBounceContext hook was called outside of the MessageBounceContext provider. The errored call is located in the ${e} component.`),{})}function MessageBounceProvider({children:e}){const{handleRetry:t,message:r,setEditingState:n}=useMessageContext();isMessageBounced(r)||console.warn('The MessageBounceProvider was rendered for a message that is not bounced. Have you missed the "isMessageBounced" check?');const{removeMessage:s}=useChannelActionContext("MessageBounceProvider"),i=reactExports.useCallback(()=>{s(r)},[r,s]),o=reactExports.useCallback(e=>{n(e)},[n]),a=reactExports.useCallback(()=>{t(r)},[t,r]),l=reactExports.useMemo(()=>({handleDelete:i,handleEdit:o,handleRetry:a,message:r}),[i,o,a,r]);return React$2.createElement(MessageBounceContext.Provider,{value:l},e)}function getDateString({calendar:e,calendarFormats:t,format:r,formatDate:n,messageCreatedAt:s,t:i,tDateTimeParser:o,timestampTranslationKey:a}){if(!s||"string"==typeof s&&!Date.parse(s))return console.warn(notValidDateWarning),null;if("function"==typeof n)return n(new Date(s));if(i&&a){const n={};null!=e&&(n.calendar=e),null!=t&&(n.calendarFormats=t),null!=r&&(n.format=r);const o=i(a,{...n,timestamp:new Date(s)});if(a!==o)return o}if(!o)return console.warn(noParsingFunctionWarning),null;const l=o(s);return isDayOrMoment(l)?e&&l.calendar?l.calendar(void 0,t||void 0):l.format(r||void 0):isDate(l)?l.toDateString():isNumberOrString(l)?l:null}function WithComponents({children:e,overrides:t}){const r={...reactExports.useContext(ComponentContext),...t};return React$2.createElement(ComponentContext.Provider,{value:r},e)}function prettifyFileSize(e,t=3){const r=["B","kB","MB","GB"],n=Math.min(Math.floor(Math.log(e)/Math.log(1024)),r.length-1),s=e/1024**n;return`${0===t?Math.round(s).toString():s.toPrecision(t)} ${r[n]}`}function debounce$3(e,t,r){var n,s,i,o,a,l,c=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);function m(t){var r=n,i=s;return n=s=void 0,c=t,o=e.apply(i,r)}function x(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-c>=i}function f(){var e=now$1();if(x(e))return h(e);a=setTimeout(f,function(e){var r=t-(e-l);return d?nativeMin$1(r,i-(e-c)):r}(e))}function h(e){return a=void 0,p&&n?m(e):(n=s=void 0,o)}function g(){var e=now$1(),r=x(e);if(n=arguments,s=this,l=e,r){if(void 0===a)return function(e){return c=e,a=setTimeout(f,t),u?m(e):o}(l);if(d)return a=setTimeout(f,t),m(l)}return void 0===a&&(a=setTimeout(f,t)),o}return t=toNumber$1(t)||0,isObject$2(r)&&(u=!!r.leading,i=(d="maxWait"in r)?nativeMax$1(toNumber$1(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p),g.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=s=a=void 0},g.flush=function(){return void 0===a?o:h(now$1())},g}function throttle(e,t,r){var n=!0,s=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);return isObject$2(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),debounce$3(e,t,{leading:n,maxWait:t,trailing:s})}function isObject$2(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike$1(e){return!!e&&"object"==typeof e}function isSymbol$1(e){return"symbol"==typeof e||isObjectLike$1(e)&&objectToString$1.call(e)==symbolTag$1}function toNumber$1(e){if("number"==typeof e)return e;if(isSymbol$1(e))return NAN$1;if(isObject$2(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$2(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim$1,"");var r=reIsBinary$1.test(e);return r||reIsOctal$1.test(e)?freeParseInt$1(e.slice(2),r?2:8):reIsBadHex$1.test(e)?NAN$1:+e}function downSample(e,t){if(e.length<=t||0===t)return e;if(1===t)return[mean(e)];const r=[],n=(e.length-2)/(t-2);let s,i,o,a=0;r.push(e[a]);for(let l=1;l<t-1;l++){const t=e[a],c=getNextBucketMean(e,l,n),u=Math.floor((l-1)*n)+1,d=Math.floor(l*n)+1,p=1+d-u;i=o=-1;for(let r=u;r<d;r++){const n=Math.abs(r-u)+1,l=p-n,d=e[r];o=triangleAreaHeron(triangleBase(Math.abs(t-d),n),triangleBase(Math.abs(d-c),l),triangleBase(Math.abs(t-c),p)),o>i&&(i=o,s=e[r],a=r)}void 0!==s&&r.push(s)}return r.push(e[e.length-1]),r}function generateMimeTypeToIconMap({FileArchiveIcon:e,FileCodeIcon:t,FileExcelIcon:r,FilePdfIcon:n,FilePowerPointIcon:s,FileWordIcon:i}){const o={"application/pdf":n};for(const a of wordMimeTypes)o[a]=i;for(const a of excelMimeTypes)o[a]=r;for(const a of powerpointMimeTypes)o[a]=s;for(const a of archiveFileTypes)o[a]=e;for(const a of codeFileTypes)o[a]=t;return o}function generateGeneralTypeToIconMap({FileAltIcon:e,FileAudioIcon:t,FileImageIcon:r,FileVideoIcon:n}){return{"audio/":t,"image/":r,"text/":e,"video/":n}}function mimeTypeToIcon(e="standard",t){const r=iconMap[e]||iconMap.standard;if(!t)return r.fallback;const n=r[t];return n||(t.startsWith("audio/")?r["audio/"]:t.startsWith("video/")?r["video/"]:t.startsWith("image/")?r["image/"]:t.startsWith("text/")?r["text/"]:r.fallback)}async function dataTransferItemsToFiles(e){if(!e||!e.length)return[];const t=getFileLikes(e);if(t.length)return t;const r=[];for(const n of e)"text/html"===n.type&&r.push(new Promise(e=>{n.getAsString(async r=>{const n=extractImageSources(r).map(e=>getImageSource(t,e));await Promise.all(n),e()})}));return await Promise.all(r),t}function getFileLikes(e){const t=[];for(const r of e)if("file"===r.kind){const e=r.getAsFile();e&&t.push(e)}return t}async function getImageSource(e,t){let r;try{r=await fetch(t)}catch(e3){return}const n=r.headers.get("Content-type")||"application/octet-stream",s=await r.arrayBuffer(),i=new Blob([s],{type:n});e.push(i)}function compose(e,t){return function(r){return e(t(r))}}function thrush(e,t){return t(e)}function curry2to1(e,t){return function(r){return e(t,r)}}function curry1to0(e,t){return function(){return e(t)}}function tap(e,t){return t(e),e}function tup(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t}function call(e){e()}function always(e){return function(){return e}}function joinProc(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){t.map(call)}}function noop$4(){}function subscribe(e,t){return e(SUBSCRIBE,t)}function publish(e,t){e(PUBLISH,t)}function reset(e){e(RESET)}function getValue(e){return e(VALUE)}function connect(e,t){return subscribe(e,curry2to1(t,PUBLISH))}function handleNext(e,t){var r=e(SUBSCRIBE,function(e){r(),t(e)});return r}function stream(){var e=[];return function(t,r){switch(t){case RESET:return void e.splice(0,e.length);case SUBSCRIBE:return e.push(r),function(){var t=e.indexOf(r);t>-1&&e.splice(t,1)};case PUBLISH:return void e.slice().forEach(function(e){e(r)});default:throw new Error("unrecognized action "+t)}}}function statefulStream(e){var t=e,r=stream();return function(e,n){switch(e){case SUBSCRIBE:n(t);break;case PUBLISH:t=n;break;case VALUE:return t}return r(e,n)}}function eventHandler(e){var t,r,n=function(){return t&&t()};return function(s,i){switch(s){case SUBSCRIBE:if(i){if(r===i)return;return n(),r=i,t=subscribe(e,i)}return n(),noop$4;case RESET:return n(),void(r=null);default:throw new Error("unrecognized action "+s)}}}function streamFromEmitter(e){return tap(stream(),function(t){return connect(e,t)})}function statefulStreamFromEmitter(e,t){return tap(statefulStream(t),function(t){return connect(e,t)})}function combineOperators(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight(thrush,e)}}function pipe(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s=combineOperators.apply(void 0,r);return function(t,r){switch(t){case SUBSCRIBE:return subscribe(e,s(r));case RESET:return void reset(e);default:throw new Error("unrecognized action "+t)}}}function defaultComparator(e,t){return e===t}function distinctUntilChanged(e){var t;return void 0===e&&(e=defaultComparator),function(r){return function(n){e(t,n)||(t=n,r(n))}}}function filter(e){return function(t){return function(r){e(r)&&t(r)}}}function map$2(e){return function(t){return compose(t,e)}}function mapTo(e){return function(t){return function(){return t(e)}}}function scan(e,t){return function(r){return function(n){return r(t=e(t,n))}}}function skip(e){return function(t){return function(r){e>0?e--:t(r)}}}function throttleTime(e){var t,r;return function(n){return function(s){t=s,r||(r=setTimeout(function(){r=void 0,n(t)},e))}}}function debounceTime(e){var t,r;return function(n){return function(s){t=s,r&&clearTimeout(r),r=setTimeout(function(){n(t)},e)}}}function withLatestFrom(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new Array(t.length),s=0,i=null,o=Math.pow(2,t.length)-1;return t.forEach(function(e,t){var r=Math.pow(2,t);subscribe(e,function(e){var a=s;s|=r,n[t]=e,a!==o&&s===o&&i&&(i(),i=null)})}),function(e){return function(t){var r=function(){return e([t].concat(n))};s===o?r():i=r}}}function merge$1(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){switch(e){case SUBSCRIBE:return joinProc.apply(void 0,t.map(function(e){return subscribe(e,r)}));case RESET:return;default:throw new Error("unrecognized action "+e)}}}function duc(e,t){return void 0===t&&(t=defaultComparator),pipe(e,distinctUntilChanged(t))}function combineLatest(){for(var e=stream(),t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=new Array(r.length),i=0,o=Math.pow(2,r.length)-1;return r.forEach(function(t,r){var n=Math.pow(2,r);subscribe(t,function(t){s[r]=t,(i|=n)===o&&publish(e,s)})}),function(t,r){switch(t){case SUBSCRIBE:return i===o&&r(s),subscribe(e,r);case RESET:return reset(e);default:throw new Error("unrecognized action "+t)}}}function system(e,t,r){void 0===t&&(t=[]);var n=(void 0===r?{singleton:!0}:r).singleton;return{id:id(),constructor:e,dependencies:t,singleton:n}}function init(e){var t=new Map;return function e(r){var n=r.id,s=r.constructor,i=r.dependencies,o=r.singleton;if(o&&t.has(n))return t.get(n);var a=s(i.map(function(t){return e(t)}));return o&&t.set(n,a),a}(e)}function _objectWithoutPropertiesLoose$1(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}function _unsupportedIterableToArray$2(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$2(e,t):void 0}}function _arrayLikeToArray$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _createForOfIteratorHelperLoose(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=_unsupportedIterableToArray$2(e))||t){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function omit(e,t){for(var r={},n={},s=0,i=e.length;s<i;)n[e[s]]=1,s+=1;for(var o in t)n.hasOwnProperty(o)||(r[o]=t[o]);return r}function systemToComponent(e,t,r){var n=Object.keys(t.required||{}),s=Object.keys(t.optional||{}),i=Object.keys(t.methods||{}),o=Object.keys(t.events||{}),a=reactExports.createContext({});function l(e,r){e.propsReady&&publish(e.propsReady,!1);for(var i,o=_createForOfIteratorHelperLoose(n);!(i=o()).done;){var a=i.value;publish(e[t.required[a]],r[a])}for(var l,c=_createForOfIteratorHelperLoose(s);!(l=c()).done;){var u=l.value;if(u in r)publish(e[t.optional[u]],r[u])}e.propsReady&&publish(e.propsReady,!0)}function c(e){return o.reduce(function(r,n){return r[n]=eventHandler(e[t.events[n]]),r},{})}return{Component:reactExports.forwardRef(function(u,d){var p=u.children,m=_objectWithoutPropertiesLoose$1(u,_excluded$2),x=reactExports.useState(function(){return tap(init(e),function(e){return l(e,m)})})[0],f=reactExports.useState(curry1to0(c,x))[0];return useIsomorphicLayoutEffect$1(function(){for(var e,t=_createForOfIteratorHelperLoose(o);!(e=t()).done;){var r=e.value;r in m&&subscribe(f[r],m[r])}return function(){Object.values(f).map(reset)}},[m,f,x]),useIsomorphicLayoutEffect$1(function(){l(x,m)}),reactExports.useImperativeHandle(d,always(function(e){return i.reduce(function(r,n){return r[n]=function(r){publish(e[t.methods[n]],r)},r},{})}(x))),reactExports.createElement(a.Provider,{value:x},r?reactExports.createElement(r,omit([].concat(n,s,o),m),p):p)}),usePublisher:function(e){return reactExports.useCallback(curry2to1(publish,reactExports.useContext(a)[e]),[e])},useEmitterValue:function(e){var t=reactExports.useContext(a)[e],r=reactExports.useState(curry1to0(getValue,t)),n=r[0],s=r[1];return useIsomorphicLayoutEffect$1(function(){return subscribe(t,function(e){e!==n&&s(always(e))})},[t,n]),n},useEmitter:function(e,t){var r=reactExports.useContext(a)[e];useIsomorphicLayoutEffect$1(function(){return subscribe(r,t)},[t,r])}}}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function m(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||(s[r]=e[r]);return s}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e))||t){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){void 0===t&&(t=!0);var r=reactExports.useRef(null),n=function(e){};if("undefined"!=typeof ResizeObserver){var s=new ResizeObserver(function(t){var r=t[0].target;null!==r.offsetParent&&e(r)});n=function(e){e&&t?(s.observe(e),r.current=e):(r.current&&s.unobserve(r.current),r.current=null)}}return{ref:r,callbackRef:n}}function C(e,t){return void 0===t&&(t=!0),I(e,t).callbackRef}function T(e,t,r,n,s,i,o){return I(function(r){for(var a=function(e,t,r,n){var s=e.length;if(0===s)return null;for(var i=[],o=0;o<s;o++){var a=e.item(o);if(a&&void 0!==a.dataset.index){var l=parseInt(a.dataset.index),c=parseFloat(a.dataset.knownSize),u=t(a,"offsetHeight");if(0===u&&n("Zero-sized element, this should not happen",{child:a},h.ERROR),u!==c){var d=i[i.length-1];0===i.length||d.size!==u||d.endIndex!==l-1?i.push({startIndex:l,endIndex:l,size:u}):i[i.length-1].endIndex++}}}return i}(r.children,t,0,s),l=r.parentElement;!l.dataset.virtuosoScroller;)l=l.parentElement;var c,u,d="window"===l.firstElementChild.dataset.viewportType,p=o?o.scrollTop:d?window.pageYOffset||document.documentElement.scrollTop:l.scrollTop,m=o?o.scrollHeight:d?document.documentElement.scrollHeight:l.scrollHeight,x=o?o.offsetHeight:d?window.innerHeight:l.offsetHeight;n({scrollTop:Math.max(p,0),scrollHeight:m,viewportHeight:x}),null==i||i((c=getComputedStyle(r).rowGap,u=s,"normal"===c||null!=c&&c.endsWith("px")||u("row-gap was not resolved to pixel value correctly",c,h.WARN),"normal"===c?0:parseInt(null!=c?c:"0",10))),null!==a&&e(a)},r)}function w(e,t){return Math.round(e.getBoundingClientRect()[t])}function x(e,t){return Math.abs(e-t)<1.01}function b(e,t,r,n,s){void 0===n&&(n=noop$4);var i=reactExports.useRef(null),o=reactExports.useRef(null),a=reactExports.useRef(null),l=reactExports.useRef(!1),c=reactExports.useCallback(function(r){var n=r.target,s=n===window||n===document,i=s?window.pageYOffset||document.documentElement.scrollTop:n.scrollTop,c=s?document.documentElement.scrollHeight:n.scrollHeight,u=s?window.innerHeight:n.offsetHeight,d=function(){e({scrollTop:Math.max(i,0),scrollHeight:c,viewportHeight:u})};l.current?reactDomExports.flushSync(d):d(),l.current=!1,null!==o.current&&(i===o.current||i<=0||i===c-u)&&(o.current=null,t(!0),a.current&&(clearTimeout(a.current),a.current=null))},[e,t]);return reactExports.useEffect(function(){var e=s||i.current;return n(s||i.current),c({target:e}),e.addEventListener("scroll",c,{passive:!0}),function(){n(null),e.removeEventListener("scroll",c)}},[i,c,r,n,s]),{scrollerRef:i,scrollByCallback:function(e){l.current=!0,i.current.scrollBy(e)},scrollToCallback:function(r){var n=i.current;if(n&&(!("offsetHeight"in n)||0!==n.offsetHeight)){var s,l,c,u="smooth"===r.behavior;if(n===window?(l=Math.max(w(document.documentElement,"height"),document.documentElement.scrollHeight),s=window.innerHeight,c=document.documentElement.scrollTop):(l=n.scrollHeight,s=w(n,"height"),c=n.scrollTop),r.top=Math.ceil(Math.max(Math.min(l-s,r.top),0)),x(s,l)||r.top===c)return e({scrollTop:c,scrollHeight:l,viewportHeight:s}),void(u&&t(!0));u?(o.current=r.top,a.current&&clearTimeout(a.current),a.current=setTimeout(function(){a.current=null,o.current=null,t(!0)},1e3)):o.current=null,n.scrollTo(r)}}}}function E(e,t,r,n,s){return void 0===n&&(n=H),void 0===s&&(s=H),{k:e,v:t,lvl:r,l:n,r:s}}function R(e){return e===H}function L(){return H}function k(e,t){if(R(e))return H;var r=e.k,n=e.l,s=e.r;if(t===r){if(R(n))return s;if(R(s))return n;var i=O(n);return A(V(e,{k:i[0],v:i[1],l:M(n)}))}return A(V(e,t<r?{l:k(n,t)}:{r:k(s,t)}))}function F(e,t,r){if(void 0===r&&(r="k"),R(e))return[-1/0,void 0];if(e[r]===t)return[e.k,e.v];if(e[r]<t){var n=F(e.r,t,r);return-1/0===n[0]?[e.k,e.v]:n}return F(e.l,t,r)}function z(e,t,r){return R(e)?E(t,r,1):t===e.k?V(e,{k:t,v:r}):D(G(V(e,t<e.k?{l:z(e.l,t,r)}:{r:z(e.r,t,r)})))}function B(e,t,r){if(R(e))return[];var n=e.k,s=e.v,i=e.r,o=[];return n>t&&(o=o.concat(B(e.l,t,r))),n>=t&&n<=r&&o.push({k:n,v:s}),n<=r&&(o=o.concat(B(i,t,r))),o}function P(e){return R(e)?[]:[].concat(P(e.l),[{k:e.k,v:e.v}],P(e.r))}function O(e){return R(e.r)?[e.k,e.v]:O(e.r)}function M(e){return R(e.r)?e.l:A(V(e,{r:M(e.r)}))}function V(e,t){return E(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function U(e){return R(e)||e.lvl>e.r.lvl}function A(e){var t=e.l,r=e.r,n=e.lvl;if(r.lvl>=n-1&&t.lvl>=n-1)return e;if(n>r.lvl+1){if(U(t))return G(V(e,{lvl:n-1}));if(R(t)||R(t.r))throw new Error("Unexpected empty nodes");return V(t.r,{l:V(t,{r:t.r.l}),r:V(e,{l:t.r.r,lvl:n-1}),lvl:n})}if(U(e))return D(V(e,{lvl:n-1}));if(R(r)||R(r.l))throw new Error("Unexpected empty nodes");var s=r.l,i=U(s)?r.lvl-1:r.lvl;return V(s,{l:V(e,{r:s.l,lvl:n-1}),r:D(V(r,{l:s.r,lvl:i})),lvl:s.lvl+1})}function W(e,t,r){return R(e)?[]:N(B(e,F(e,t)[0],r),function(e){return{index:e.k,value:e.v}})}function N(e,t){var r=e.length;if(0===r)return[];for(var n=t(e[0]),s=n.index,i=n.value,o=[],a=1;a<r;a++){var l=t(e[a]),c=l.index,u=l.value;o.push({start:s,end:c-1,value:i}),s=c,i=u}return o.push({start:s,end:1/0,value:i}),o}function D(e){var t=e.r,r=e.lvl;return R(t)||R(t.r)||t.lvl!==r||t.r.lvl!==r?e:V(t,{l:V(e,{r:t.l}),lvl:r+1})}function G(e){var t=e.l;return R(t)||t.lvl!==e.lvl?e:V(t,{r:V(e,{l:t.r})})}function _(e,t,r,n){void 0===n&&(n=0);for(var s=e.length-1;n<=s;){var i=Math.floor((n+s)/2),o=r(e[i],t);if(0===o)return i;if(-1===o){if(s-n<2)return i-1;s=i-1}else{if(s===n)return i;n=i+1}}throw new Error("Failed binary finding record in array - "+e.join(",")+", searched for "+t)}function j(e,t,r){return e[_(e,t,r)]}function Y(e){var t=e.size,r=e.startIndex,n=e.endIndex;return function(e){return e.start===r&&(e.end===n||1/0===e.end)&&e.value===t}}function q(e,t){var r=e.index;return t===r?0:t<r?-1:1}function Z(e,t){var r=e.offset;return t===r?0:t<r?-1:1}function J(e){return{index:e.index,value:e}}function $(e,t,r,n){var s=e,i=0,o=0,a=0,l=0;if(0!==t){a=s[l=_(s,t-1,q)].offset;var c=F(r,t-1);i=c[0],o=c[1],s.length&&s[l].size===F(r,t)[1]&&(l-=1),s=s.slice(0,l+1)}else s=[];for(var u,d=f(W(r,t,1/0));!(u=d()).done;){var p=u.value,m=p.start,x=p.value,h=m-i,g=h*o+a+h*n;s.push({offset:g,size:x,index:m}),i=m,a=g,o=x}return{offsetTree:s,lastIndex:i,lastOffset:a,lastSize:o}}function Q(e,t){var r=t[0],n=t[1],s=t[3];r.length>0&&(0,t[2])("received item sizes",r,h.DEBUG);var i=e.sizeTree,o=i,a=0;if(n.length>0&&R(i)&&2===r.length){var l=r[0].size,c=r[1].size;o=n.reduce(function(e,t){return z(z(e,t,l),t+1,c)},o)}else{var u=function(e,t){for(var r,n=R(e)?0:1/0,s=f(t);!(r=s()).done;){var i=r.value,o=i.size,a=i.startIndex,l=i.endIndex;if(n=Math.min(n,a),R(e))e=z(e,0,o);else{var c=W(e,a-1,l+1);if(!c.some(Y(i))){for(var u,d=!1,p=!1,m=f(c);!(u=m()).done;){var x=u.value,h=x.start,g=x.end,y=x.value;d?(l>=h||o===y)&&(e=k(e,h)):(p=y!==o,d=!0),g>l&&l>=h&&y!==o&&(e=z(e,l+1,y))}p&&(e=z(e,a,o))}}}return[e,n]}(o,r);o=u[0],a=u[1]}if(o===i)return e;var d=$(e.offsetTree,a,o,s),p=d.offsetTree;return{sizeTree:o,offsetTree:p,lastIndex:d.lastIndex,lastOffset:d.lastOffset,lastSize:d.lastSize,groupOffsetTree:n.reduce(function(e,t){return z(e,t,X(t,p,s))},L()),groupIndices:n}}function X(e,t,r){if(0===t.length)return 0;var n=j(t,e,q),s=e-n.index,i=n.size*s+(s-1)*r+n.offset;return i>0?i+r:i}function tt(e,t,r){if(void 0!==e.groupIndex)return t.groupIndices[e.groupIndex]+1;var n=et("LAST"===e.index?r:e.index,t);return Math.max(0,n,Math.min(r,n))}function et(e,t){if(!nt(t))return e;for(var r=0;t.groupIndices[r]<=e+r;)r++;return e+r}function nt(e){return!R(e.groupOffsetTree)}function at(e){var t="number"==typeof e?{index:e}:e;return t.align||(t.align="start"),t.behavior&&it$1||(t.behavior="auto"),t.offset||(t.offset=0),t}function ft(e){return!!e&&("smooth"===e?"smooth":"auto")}function ht(e){return e.reduce(function(e,t){return e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e},{totalCount:0,groupIndices:[]})}function vt(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function St(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}function It(e,t,r){return"number"==typeof e?r===st&&"top"===t||"down"===r&&"bottom"===t?e:0:r===st?"top"===t?e.main:e.reverse:"bottom"===t?e.main:e.reverse}function Ct(e,t){return"number"==typeof e?e:e[t]||0}function xt(e,t,r){if(0===e.length)return[];if(!nt(t))return e.map(function(e){return c({},e,{index:e.index+r,originalIndex:e.index})});for(var n,s=[],i=W(t.groupOffsetTree,e[0].index,e[e.length-1].index),o=void 0,a=0,l=f(e);!(n=l()).done;){var u=n.value;(!o||o.end<u.index)&&(o=i.shift(),a=t.groupIndices.indexOf(o.start)),s.push(c({},u.index===o.start?{type:"group",index:a}:{index:u.index-(a+1)+r,groupIndex:a},{size:u.size,offset:u.offset,originalIndex:u.index,data:u.data}))}return s}function bt(e,t,r,n,s,i){var o=0,a=0;if(e.length>0){o=e[0].offset;var l=e[e.length-1];a=l.offset+l.size}var c=r-s.lastIndex,u=o,d=s.lastOffset+c*s.lastSize+(c-1)*n-a;return{items:xt(e,s,i),topItems:xt(t,s,i),topListHeight:t.reduce(function(e,t){return t.size+e},0),offsetTop:o,offsetBottom:d,top:u,bottom:a,totalCount:r,firstItemIndex:i}}function kt(e){var t,r=!1;return function(){return r||(r=!0,t=e()),t}}function Dt(e,t){var r=reactExports.useRef(null),n=reactExports.useCallback(function(n){if(null!==n&&n.offsetParent){var s,i,o=n.getBoundingClientRect(),a=o.width;if(t){var l=t.getBoundingClientRect(),c=o.top-l.top;s=l.height-Math.max(0,c),i=c+t.scrollTop}else s=window.innerHeight-Math.max(0,o.top),i=o.top+window.pageYOffset;r.current={offsetTop:i,visibleHeight:s,visibleWidth:a},e(r.current)}},[e,t]),s=I(n),i=s.callbackRef,o=s.ref,a=reactExports.useCallback(function(){n(o.current)},[n,o]);return reactExports.useEffect(function(){if(t){t.addEventListener("scroll",a);var e=new ResizeObserver(a);return e.observe(t),function(){t.removeEventListener("scroll",a),e.unobserve(t)}}return window.addEventListener("scroll",a),window.addEventListener("resize",a),function(){window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}},[a,t]),i}function Yt(e){return e}function Zt(e,t){var r=stream();return subscribe(r,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+t,"color: red;","color: inherit;","color: blue;")}),connect(r,e),r}function re$1(e,t){if("string"!=typeof e)return{context:t}}function le(e){var t=e.usePublisher,r=e.useEmitter,n=e.useEmitterValue;return reactExports.memo(function(e){var s=e.style,i=e.children,o=m(e,jt),a=t("scrollContainerState"),l=n("ScrollerComponent"),u=t("smoothScrollTargetReached"),d=n("scrollerRef"),p=n("context"),x=b(a,u,l,d),f=x.scrollerRef,h=x.scrollByCallback;return r("scrollTo",x.scrollToCallback),r("scrollBy",h),reactExports.createElement(l,c({ref:f,style:c({},ee,s),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},o,re$1(l,p)),i)})}function se(e){var t=e.usePublisher,r=e.useEmitter,n=e.useEmitterValue;return reactExports.memo(function(e){var s=e.style,i=e.children,o=m(e,Kt),a=t("windowScrollContainerState"),l=n("ScrollerComponent"),u=t("smoothScrollTargetReached"),d=n("totalListHeight"),p=n("deviation"),x=n("customScrollParent"),f=n("context"),h=b(a,u,l,noop$4,x),y=h.scrollerRef,j=h.scrollByCallback,v=h.scrollToCallback;return g(function(){return y.current=x||window,function(){y.current=null}},[y,x]),r("windowScrollTo",v),r("scrollBy",j),reactExports.createElement(l,c({style:c({position:"relative"},s,0!==d?{height:d+p}:{}),"data-virtuoso-scroller":!0},o,re$1(l,f)),i)})}function He(e,t){return Array.from({length:t-e+1}).map(function(t,r){return{index:r+e}})}function Ee(e,t){return e&&e.column===t.column&&e.row===t.row}function Le(e,t,r,n){var s=r.height;return void 0===s||0===n.length?{top:0,bottom:0}:{top:ke(e,t,r,n[0].index),bottom:ke(e,t,r,n[n.length-1].index)+s}}function ke(e,t,r,n){var s=Fe(e.width,r.width,t.column),i=xe(n/s),o=i*r.height+ye(0,i-1)*t.row;return o>0?o+t.row:o}function Fe(e,t,r){return ye(1,xe((e+r)/(t+r)))}function je(e,t,r){return"normal"===t||null!=t&&t.endsWith("px")||r(e+" was not resolved to pixel value correctly",t,h.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}function Timestamp(e){const{calendar:t,calendarFormats:r,customClass:n,format:s,timestamp:i}=e,{formatDate:o}=useMessageContext(),{t:a,tDateTimeParser:l}=useTranslationContext("MessageTimestamp"),c=i&&isDate(i)?i.toISOString():i,u=reactExports.useMemo(()=>getDateString({calendar:t,calendarFormats:r,format:s,formatDate:o,messageCreatedAt:c,t:a,tDateTimeParser:l,timestampTranslationKey:"timestamp/MessageTimestamp"}),[t,r,s,o,c,a,l]);return u?React$2.createElement("time",{className:n,dateTime:c,title:c},u):null}function findLastPinnedChannelIndex({channels:e}){let t=null;for(const r of e){if(!isChannelPinned(r))break;"number"==typeof t?t++:t=0}return t}function debounce$1(e,t,r){var n,s,i,o,a,l,c=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);function m(t){var r=n,i=s;return n=s=void 0,c=t,o=e.apply(i,r)}function x(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-c>=i}function f(){var e=now();if(x(e))return h(e);a=setTimeout(f,function(e){var r=t-(e-l);return d?nativeMin(r,i-(e-c)):r}(e))}function h(e){return a=void 0,p&&n?m(e):(n=s=void 0,o)}function g(){var e=now(),r=x(e);if(n=arguments,s=this,l=e,r){if(void 0===a)return function(e){return c=e,a=setTimeout(f,t),u?m(e):o}(l);if(d)return a=setTimeout(f,t),m(l)}return void 0===a&&(a=setTimeout(f,t)),o}return t=toNumber(t)||0,isObject$1(r)&&(u=!!r.leading,i=(d="maxWait"in r)?nativeMax(toNumber(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p),g.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=s=a=void 0},g.flush=function(){return void 0===a?o:h(now())},g}function isObject$1(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject$1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}function useSelectedChannelState({channel:e,selector:t,stateChangeEventKeys:r=["all"]}){const n=reactExports.useCallback(n=>{if(!e)return noop$3;const s=r.map(r=>e.on(r,()=>{n(t(e))}));return()=>s.forEach(e=>e.unsubscribe())},[e,t,r]),s=reactExports.useCallback(()=>{if(e)return t(e)},[e,t]);return shimExports.useSyncExternalStore(n,s)}function useChannelMembershipState(e){return useSelectedChannelState({channel:e,selector:selector$2,stateChangeEventKeys:keys$1})}function ChannelPreviewActionButtons({channel:e}){const t=useChannelMembershipState(e),{t:r}=useTranslationContext();return React$2.createElement("div",{className:"str-chat__channel-preview__action-buttons"},React$2.createElement("button",{"aria-label":t.pinned_at?r("Unpin"):r("Pin"),className:clsx("str-chat__channel-preview__action-button","str-chat__channel-preview__action-button--pin",t.pinned_at&&"str-chat__channel-preview__action-button--active"),onClick:r=>{r.stopPropagation(),t.pinned_at?e.unpin():e.pin()},title:t.pinned_at?r("Unpin"):r("Pin")},React$2.createElement(Icon.Pin,null)),React$2.createElement("button",{"aria-label":t.archived_at?r("Unarchive"):r("Archive"),className:clsx("str-chat__channel-preview__action-button","str-chat__channel-preview__action-button--archive",t.archived_at&&"str-chat__channel-preview__action-button--active"),onClick:r=>{r.stopPropagation(),t.archived_at?e.unarchive():e.archive()},title:t.archived_at?r("Unarchive"):r("Archive")},React$2.createElement(Icon.ArchiveBox,null)))}function ok$1(){}function unreachable(){}function stringify$1(e,t){const r={};return(""===e[e.length-1]?[...e,""]:e).join((r.padRight?" ":"")+","+(!1===r.padLeft?"":" ")).trim()}function name(e,t){return(emptyOptions$4.jsx?nameReJsx:nameRe).test(e)}function whitespace(e){return"object"==typeof e?"text"===e.type&&empty$1(e.value):empty$1(e)}function empty$1(e){return""===e.replace(re,"")}function merge(e,t){const r={},n={};for(const s of e)Object.assign(r,s.property),Object.assign(n,s.normal);return new Schema(r,n,t)}function normalize$1(e){return e.toLowerCase()}function increment(){return 2**++powers}function mark(e,t,r){r&&(e[t]=r)}function create(e){const t={},r={};for(const[n,s]of Object.entries(e.properties)){const i=new DefinedInfo(n,e.transform(e.attributes||{},n),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[normalize$1(n)]=n,r[normalize$1(i.attribute)]=n}return new Schema(t,r,e.space)}function caseSensitiveTransform(e,t){return t in e?e[t]:t}function caseInsensitiveTransform(e,t){return caseSensitiveTransform(e,t.toLowerCase())}function find(e,t){const r=normalize$1(t);let n=t,s=Info;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&"data"===r.slice(0,4)&&valid.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(dash,camelcase);n="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!dash.test(e)){let r=e.replace(cap$1,kebab);"-"!==r.charAt(0)&&(r="-"+r),t="data"+r}}s=DefinedInfo}return new s(n,t)}function kebab(e){return"-"+e.toLowerCase()}function camelcase(e){return e.charAt(1).toUpperCase()}function stringify(e){return e.join(" ").trim()}function trim(e){return e?e.replace(TRIM_REGEX,EMPTY_STRING):EMPTY_STRING}function StyleToObject(e,t){var r=null;if(!e||"string"!=typeof e)return r;var n=(0,inline_style_parser_1.default)(e),s="function"==typeof t;return n.forEach(function(e){if("declaration"===e.type){var n=e.property,i=e.value;s?t(n,i,e):i&&((r=r||{})[n]=i)}}),r}function StyleToJS(e,t){var r={};return e&&"string"==typeof e?((0,style_to_object_1.default)(e,function(e,n){e&&n&&(r[(0,utilities_1.camelCase)(e,t)]=n)}),r):r}function point$2(e){return function(t){const r=t&&t.position&&t.position[e]||{};if("number"==typeof r.line&&r.line>0&&"number"==typeof r.column&&r.column>0)return{line:r.line,column:r.column,offset:"number"==typeof r.offset&&r.offset>-1?r.offset:void 0}}}function position$1(e){const t=pointStart(e),r=pointEnd(e);if(t&&r)return{start:t,end:r}}function stringifyPosition(e){return e&&"object"==typeof e?"position"in e||"type"in e?position(e.position):"start"in e||"end"in e?position(e):"line"in e||"column"in e?point$1(e):"":""}function point$1(e){return index$2(e&&e.line)+":"+index$2(e&&e.column)}function position(e){return point$1(e&&e.start)+"-"+point$1(e&&e.end)}function index$2(e){return e&&"number"==typeof e?e:1}function toJsxRuntime(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=developmentCreate(r,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");n=productionCreate(r,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?svg:html$2,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},i=one$1(s,e,void 0);return i&&"string"!=typeof i?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function one$1(e,t,r){return"element"===t.type?element$2(e,t,r):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?mdxExpression(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?mdxJsxElement(e,t,r):"mdxjsEsm"===t.type?mdxEsm(e,t):"root"===t.type?root$2(e,t,r):"text"===t.type?text$5(e,t):void 0}function element$2(e,t,r){const n=e.schema;let s=n;"svg"===t.tagName.toLowerCase()&&"html"===n.space&&(s=svg,e.schema=s),e.ancestors.push(t);const i=findComponentFromName(e,t.tagName,!1),o=createElementProps(e,t);let a=createChildren(e,t);return tableElements.has(t.tagName)&&(a=a.filter(function(e){return"string"!=typeof e||!whitespace(e)})),addNode(e,o,i,t),addChildren(o,a),e.ancestors.pop(),e.schema=n,e.create(t,i,o,r)}function mdxExpression(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return ok$1("ExpressionStatement"===r.type),e.evaluater.evaluateExpression(r.expression)}crashEstree(e,t.position)}function mdxEsm(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);crashEstree(e,t.position)}function mdxJsxElement(e,t,r){const n=e.schema;let s=n;"svg"===t.name&&"html"===n.space&&(s=svg,e.schema=s),e.ancestors.push(t);const i=null===t.name?e.Fragment:findComponentFromName(e,t.name,!0),o=createJsxElementProps(e,t),a=createChildren(e,t);return addNode(e,o,i,t),addChildren(o,a),e.ancestors.pop(),e.schema=n,e.create(t,i,o,r)}function root$2(e,t,r){const n={};return addChildren(n,createChildren(e,t)),e.create(t,e.Fragment,n,r)}function text$5(e,t){return t.value}function addNode(e,t,r,n){"string"!=typeof r&&r!==e.Fragment&&e.passNode&&(t.node=n)}function addChildren(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function productionCreate(e,t,r){return function(e,n,s,i){const o=Array.isArray(s.children)?r:t;return i?o(n,s,i):o(n,s)}}function developmentCreate(e,t){return function(r,n,s,i){const o=Array.isArray(s.children),a=pointStart(r);return t(n,s,i,o,{columnNumber:a?a.column-1:void 0,fileName:e,lineNumber:a?a.line:void 0},void 0)}}function createElementProps(e,t){const r={};let n,s;for(s in t.properties)if("children"!==s&&own$3.call(t.properties,s)){const i=createProperty(e,s,t.properties[s]);if(i){const[s,o]=i;e.tableCellAlignToStyle&&"align"===s&&"string"==typeof o&&tableCellElement.has(t.tagName)?n=o:r[s]=o}}if(n){(r.style||(r.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=n}return r}function createJsxElementProps(e,t){const r={};for(const n of t.attributes)if("mdxJsxExpressionAttribute"===n.type)if(n.data&&n.data.estree&&e.evaluater){const t=n.data.estree.body[0];ok$1("ExpressionStatement"===t.type);const s=t.expression;ok$1("ObjectExpression"===s.type);const i=s.properties[0];ok$1("SpreadElement"===i.type),Object.assign(r,e.evaluater.evaluateExpression(i.argument))}else crashEstree(e,t.position);else{const s=n.name;let i;if(n.value&&"object"==typeof n.value)if(n.value.data&&n.value.data.estree&&e.evaluater){const t=n.value.data.estree.body[0];ok$1("ExpressionStatement"===t.type),i=e.evaluater.evaluateExpression(t.expression)}else crashEstree(e,t.position);else i=null===n.value||n.value;r[s]=i}return r}function createChildren(e,t){const r=[];let n=-1;const s=e.passKeys?new Map:emptyMap;for(;++n<t.children.length;){const i=t.children[n];let o;if(e.passKeys){const e="element"===i.type?i.tagName:"mdxJsxFlowElement"===i.type||"mdxJsxTextElement"===i.type?i.name:void 0;if(e){const t=s.get(e)||0;o=e+"-"+t,s.set(e,t+1)}}const a=one$1(e,i,o);void 0!==a&&r.push(a)}return r}function createProperty(e,t,r){const n=find(e.schema,t);if(!(null==r||"number"==typeof r&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?stringify$1(r):stringify(r)),"style"===n.property){let t="object"==typeof r?r:parseStyle(e,String(r));return"css"===e.stylePropertyNameCase&&(t=transformStylesToCssCasing(t)),["style",t]}return["react"===e.elementAttributeNameCase&&n.space?hastToReact[n.property]||n.property:n.attribute,r]}}function parseStyle(e,t){try{return styleToJs(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const t=r,n=new VFileMessage("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=docs+"#cannot-parse-style-attribute",n}}function findComponentFromName(e,t,r){let n;if(r)if(t.includes(".")){const e=t.split(".");let r,s=-1;for(;++s<e.length;){const t=name(e[s])?{type:"Identifier",name:e[s]}:{type:"Literal",value:e[s]};r=r?{type:"MemberExpression",object:r,property:t,computed:Boolean(s&&"Literal"===t.type),optional:!1}:t}n=r}else n=name(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else n={type:"Literal",value:t};if("Literal"===n.type){const t=n.value;return own$3.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(n);crashEstree(e)}function crashEstree(e,t){const r=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",r}function transformStylesToCssCasing(e){const t={};let r;for(r in e)own$3.call(e,r)&&(t[transformStyleToCssCasing(r)]=e[r]);return t}function transformStyleToCssCasing(e){let t=e.replace(cap,toDash);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function toDash(e){return"-"+e.toLowerCase()}function toString$1(e,t){const r=emptyOptions$3;return one(e,"boolean"!=typeof r.includeImageAlt||r.includeImageAlt,"boolean"!=typeof r.includeHtml||r.includeHtml)}function one(e,t,r){if(node(e)){if("value"in e)return"html"!==e.type||r?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return all(e.children,t,r)}return Array.isArray(e)?all(e,t,r):""}function all(e,t,r){const n=[];let s=-1;for(;++s<e.length;)n[s]=one(e[s],t,r);return n.join("")}function node(e){return Boolean(e&&"object"==typeof e)}function decodeNamedCharacterReference(e){const t="&"+e+";";element$1.innerHTML=t;const r=element$1.textContent;return(59!==r.charCodeAt(r.length-1)||"semi"===e)&&(r!==t&&r)}function splice(e,t,r,n){const s=e.length;let i,o=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,r=r>0?r:0,n.length<1e4)i=Array.from(n),i.unshift(t,r),e.splice(...i);else for(r&&e.splice(t,r);o<n.length;)i=n.slice(o,o+1e4),i.unshift(t,0),e.splice(...i),o+=1e4,t+=1e4}function push(e,t){return e.length>0?(splice(e,e.length,0,t),e):t}function combineExtensions(e){const t={};let r=-1;for(;++r<e.length;)syntaxExtension(t,e[r]);return t}function syntaxExtension(e,t){let r;for(r in t){const n=(hasOwnProperty.call(e,r)?e[r]:void 0)||(e[r]={}),s=t[r];let i;if(s)for(i in s){hasOwnProperty.call(n,i)||(n[i]=[]);const e=s[i];constructs(n[i],Array.isArray(e)?e:e?[e]:[])}}}function constructs(e,t){let r=-1;const n=[];for(;++r<t.length;)("after"===t[r].add?e:n).push(t[r]);splice(e,0,0,n)}function decodeNumericCharacterReference(e,t){const r=Number.parseInt(e,t);return r<9||11===r||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||!(65535&~r)||65534==(65535&r)||r>1114111?"":String.fromCodePoint(r)}function normalizeIdentifier(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function asciiControl(e){return null!==e&&(e<32||127===e)}function markdownLineEnding(e){return null!==e&&e<-2}function markdownLineEndingOrSpace(e){return null!==e&&(e<0||32===e)}function markdownSpace(e){return-2===e||-1===e||32===e}function regexCheck(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function normalizeUri(e){const t=[];let r=-1,n=0,s=0;for(;++r<e.length;){const i=e.charCodeAt(r);let o="";if(37===i&&asciiAlphanumeric(e.charCodeAt(r+1))&&asciiAlphanumeric(e.charCodeAt(r+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const t=e.charCodeAt(r+1);i<56320&&t>56319&&t<57344?(o=String.fromCharCode(i,t),s=1):o=""}else o=String.fromCharCode(i);o&&(t.push(e.slice(n,r),encodeURIComponent(o)),n=r+s+1,o=""),s&&(r+=s,s=0)}return t.join("")+e.slice(n)}function factorySpace(e,t,r,n){const s=n?n-1:Number.POSITIVE_INFINITY;let i=0;return function(n){if(markdownSpace(n))return e.enter(r),o(n);return t(n)};function o(n){return markdownSpace(n)&&i++<s?(e.consume(n),o):(e.exit(r),t(n))}}function initializeContent(e){const t=e.attempt(this.parser.constructs.contentInitial,function(r){if(null===r)return void e.consume(r);return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),factorySpace(e,t,"linePrefix")},function(t){return e.enter("paragraph"),n(t)});let r;return t;function n(t){const n=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=n),r=n,s(t)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):markdownLineEnding(t)?(e.consume(t),e.exit("chunkText"),n):(e.consume(t),s)}}function initializeDocument(e){const t=this,r=[];let n,s,i,o=0;return a;function a(n){if(o<r.length){const s=r[o];return t.containerState=s[1],e.attempt(s[0].continuation,l,c)(n)}return c(n)}function l(e){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,n&&y();const r=t.events.length;let s,i=r;for(;i--;)if("exit"===t.events[i][0]&&"chunkFlow"===t.events[i][1].type){s=t.events[i][1].end;break}g(o);let a=r;for(;a<t.events.length;)t.events[a][1].end={...s},a++;return splice(t.events,i+1,0,t.events.slice(r)),t.events.length=a,c(e)}return a(e)}function c(s){if(o===r.length){if(!n)return p(s);if(n.currentConstruct&&n.currentConstruct.concrete)return x(s);t.interrupt=Boolean(n.currentConstruct&&!n._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(containerConstruct,u,d)(s)}function u(e){return n&&y(),g(o),p(e)}function d(e){return t.parser.lazy[t.now().line]=o!==r.length,i=t.now().offset,x(e)}function p(r){return t.containerState={},e.attempt(containerConstruct,m,x)(r)}function m(e){return o++,r.push([t.currentConstruct,t.containerState]),p(e)}function x(r){return null===r?(n&&y(),g(0),void e.consume(r)):(n=n||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:n,contentType:"flow",previous:s}),f(r))}function f(r){return null===r?(h(e.exit("chunkFlow"),!0),g(0),void e.consume(r)):markdownLineEnding(r)?(e.consume(r),h(e.exit("chunkFlow")),o=0,t.interrupt=void 0,a):(e.consume(r),f)}function h(e,r){const a=t.sliceStream(e);if(r&&a.push(null),e.previous=s,s&&(s.next=e),s=e,n.defineSkip(e.start),n.write(a),t.parser.lazy[e.start.line]){let e=n.events.length;for(;e--;)if(n.events[e][1].start.offset<i&&(!n.events[e][1].end||n.events[e][1].end.offset>i))return;const r=t.events.length;let s,a,l=r;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(s){a=t.events[l][1].end;break}s=!0}for(g(o),e=r;e<t.events.length;)t.events[e][1].end={...a},e++;splice(t.events,l+1,0,t.events.slice(r)),t.events.length=e}}function g(n){let s=r.length;for(;s-- >n;){const n=r[s];t.containerState=n[1],n[0].exit.call(t,e)}r.length=n}function y(){n.write([null]),s=void 0,n=void 0,t.containerState._closeFlow=void 0}}function tokenizeContainer(e,t,r){return factorySpace(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(e){return null===e||markdownLineEndingOrSpace(e)||unicodeWhitespace(e)?1:unicodePunctuation(e)?2:void 0}function resolveAll(e,t,r){const n=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!n.includes(i)&&(t=i(t,r),n.push(i))}return t}function resolveAllAttention(e,t){let r,n,s,i,o,a,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(r=u;r--;)if("exit"===e[r][0]&&"attentionSequence"===e[r][1].type&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[r][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;a=e[r][1].end.offset-e[r][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d={...e[r][1].end},p={...e[u][1].start};movePoint(d,-a),movePoint(p,a),i={type:a>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},o={type:a>1?"strongSequence":"emphasisSequence",start:{...e[u][1].start},end:p},s={type:a>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[u][1].start}},n={type:a>1?"strong":"emphasis",start:{...i.start},end:{...o.end}},e[r][1].end={...i.start},e[u][1].start={...o.end},l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=push(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=push(l,[["enter",n,t],["enter",i,t],["exit",i,t],["enter",s,t]]),l=push(l,resolveAll(t.parser.constructs.insideSpan.null,e.slice(r+1,u),t)),l=push(l,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",n,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=push(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,splice(e,r-1,u-r+3,l),u=r+l.length-c-2;break}for(u=-1;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}function tokenizeAttention(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,s=classifyCharacter(n);let i;return function(t){return i=t,e.enter("attentionSequence"),o(t)};function o(a){if(a===i)return e.consume(a),o;const l=e.exit("attentionSequence"),c=classifyCharacter(a),u=!c||2===c&&s||r.includes(a),d=!s||2===s&&c||r.includes(n);return l._open=Boolean(42===i?u:u&&(s||!d)),l._close=Boolean(42===i?d:d&&(c||!u)),t(a)}}function movePoint(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}function tokenizeAutolink(e,t,r){let n=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s};function s(t){return asciiAlpha(t)?(e.consume(t),i):64===t?r(t):l(t)}function i(e){return 43===e||45===e||46===e||asciiAlphanumeric(e)?(n=1,o(e)):l(e)}function o(t){return 58===t?(e.consume(t),n=0,a):(43===t||45===t||46===t||asciiAlphanumeric(t))&&n++<32?(e.consume(t),o):(n=0,l(t))}function a(n){return 62===n?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):null===n||32===n||60===n||asciiControl(n)?r(n):(e.consume(n),a)}function l(t){return 64===t?(e.consume(t),c):asciiAtext(t)?(e.consume(t),l):r(t)}function c(e){return asciiAlphanumeric(e)?u(e):r(e)}function u(r){return 46===r?(e.consume(r),n=0,c):62===r?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):d(r)}function d(t){if((45===t||asciiAlphanumeric(t))&&n++<63){const r=45===t?d:u;return e.consume(t),r}return r(t)}}function tokenizeBlankLine(e,t,r){return function(t){return markdownSpace(t)?factorySpace(e,n,"linePrefix")(t):n(t)};function n(e){return null===e||markdownLineEnding(e)?t(e):r(e)}}function tokenizeBlockQuoteStart(e,t,r){const n=this;return function(t){if(62===t){const r=n.containerState;return r.open||(e.enter("blockQuote",{_container:!0}),r.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),s}return r(t)};function s(r){return markdownSpace(r)?(e.enter("blockQuotePrefixWhitespace"),e.consume(r),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(r))}}function tokenizeBlockQuoteContinuation(e,t,r){const n=this;return function(t){if(markdownSpace(t))return factorySpace(e,s,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return s(t)};function s(n){return e.attempt(blockQuote,t,r)(n)}}function exit$1(e){e.exit("blockQuote")}function tokenizeCharacterEscape(e,t,r){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),n};function n(n){return asciiPunctuation(n)?(e.enter("characterEscapeValue"),e.consume(n),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(n)}}function tokenizeCharacterReference(e,t,r){const n=this;let s,i,o=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),a};function a(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,i=asciiAlphanumeric,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,i=asciiHexDigit,c):(e.enter("characterReferenceValue"),s=7,i=asciiDigit,c(t))}function c(a){if(59===a&&o){const s=e.exit("characterReferenceValue");return i!==asciiAlphanumeric||decodeNamedCharacterReference(n.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(a),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):r(a)}return i(a)&&o++<s?(e.consume(a),c):r(a)}}function tokenizeCodeFenced(e,t,r){const n=this,s={partial:!0,tokenize:function(e,t,r){let s=0;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o};function o(t){return e.enter("codeFencedFence"),markdownSpace(t)?factorySpace(e,l,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):l(t)}function l(t){return t===i?(e.enter("codeFencedFenceSequence"),c(t)):r(t)}function c(t){return t===i?(s++,e.consume(t),c):s>=a?(e.exit("codeFencedFenceSequence"),markdownSpace(t)?factorySpace(e,u,"whitespace")(t):u(t)):r(t)}function u(n){return null===n||markdownLineEnding(n)?(e.exit("codeFencedFence"),t(n)):r(n)}}};let i,o=0,a=0;return function(t){return function(t){const r=n.events[n.events.length-1];return o=r&&"linePrefix"===r[1].type?r[2].sliceSerialize(r[1],!0).length:0,i=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===i?(a++,e.consume(t),l):a<3?r(t):(e.exit("codeFencedFenceSequence"),markdownSpace(t)?factorySpace(e,c,"whitespace")(t):c(t))}function c(r){return null===r||markdownLineEnding(r)?(e.exit("codeFencedFence"),n.interrupt?t(r):e.check(nonLazyContinuation,m,y)(r)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(r))}function u(t){return null===t||markdownLineEnding(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):markdownSpace(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),factorySpace(e,d,"whitespace")(t)):96===t&&t===i?r(t):(e.consume(t),u)}function d(t){return null===t||markdownLineEnding(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||markdownLineEnding(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===i?r(t):(e.consume(t),p)}function m(t){return e.attempt(s,y,x)(t)}function x(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),f}function f(t){return o>0&&markdownSpace(t)?factorySpace(e,h,"linePrefix",o+1)(t):h(t)}function h(t){return null===t||markdownLineEnding(t)?e.check(nonLazyContinuation,m,y)(t):(e.enter("codeFlowValue"),g(t))}function g(t){return null===t||markdownLineEnding(t)?(e.exit("codeFlowValue"),h(t)):(e.consume(t),g)}function y(r){return e.exit("codeFenced"),t(r)}}function tokenizeNonLazyContinuation(e,t,r){const n=this;return function(t){if(null===t)return r(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(e){return n.parser.lazy[n.now().line]?r(e):t(e)}}function tokenizeCodeIndented(e,t,r){const n=this;return function(t){return e.enter("codeIndented"),factorySpace(e,s,"linePrefix",5)(t)};function s(e){const t=n.events[n.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?i(e):r(e)}function i(t){return null===t?a(t):markdownLineEnding(t)?e.attempt(furtherStart,i,a)(t):(e.enter("codeFlowValue"),o(t))}function o(t){return null===t||markdownLineEnding(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),o)}function a(r){return e.exit("codeIndented"),t(r)}}function tokenizeFurtherStart(e,t,r){const n=this;return s;function s(t){return n.parser.lazy[n.now().line]?r(t):markdownLineEnding(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):factorySpace(e,i,"linePrefix",5)(t)}function i(e){const i=n.events[n.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):markdownLineEnding(e)?s(e):r(e)}}function resolveCodeText(e){let t,r,n=e.length-4,s=3;if(!("lineEnding"!==e[s][1].type&&"space"!==e[s][1].type||"lineEnding"!==e[n][1].type&&"space"!==e[n][1].type))for(t=s;++t<n;)if("codeTextData"===e[t][1].type){e[s][1].type="codeTextPadding",e[n][1].type="codeTextPadding",s+=2,n-=2;break}for(t=s-1,n++;++t<=n;)void 0===r?t!==n&&"lineEnding"!==e[t][1].type&&(r=t):t!==n&&"lineEnding"!==e[t][1].type||(e[r][1].type="codeTextData",t!==r+2&&(e[r][1].end=e[t-1][1].end,e.splice(r+2,t-r-2),n-=t-r-2,t=r+2),r=void 0);return e}function previous$1(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}function tokenizeCodeText(e,t,r){let n,s,i=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),o(t)};function o(t){return 96===t?(e.consume(t),i++,o):(e.exit("codeTextSequence"),a(t))}function a(t){return null===t?r(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),a):96===t?(s=e.enter("codeTextSequence"),n=0,c(t)):markdownLineEnding(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||markdownLineEnding(t)?(e.exit("codeTextData"),a(t)):(e.consume(t),l)}function c(r){return 96===r?(e.consume(r),n++,c):n===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(r)):(s.type="codeTextData",l(r))}}function chunkedPush(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function subtokenize(e){const t={};let r,n,s,i,o,a,l,c=-1;const u=new SpliceBuffer(e);for(;++c<u.length;){for(;c in t;)c=t[c];if(r=u.get(c),c&&"chunkFlow"===r[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&(a=r[1]._tokenizer.events,s=0,s<a.length&&"lineEndingBlank"===a[s][1].type&&(s+=2),s<a.length&&"content"===a[s][1].type))for(;++s<a.length&&"content"!==a[s][1].type;)"chunkText"===a[s][1].type&&(a[s][1]._isInFirstContentOfListItem=!0,s++);if("enter"===r[0])r[1].contentType&&(Object.assign(t,subcontent(u,c)),c=t[c],l=!0);else if(r[1]._container){for(s=c,n=void 0;s--;)if(i=u.get(s),"lineEnding"===i[1].type||"lineEndingBlank"===i[1].type)"enter"===i[0]&&(n&&(u.get(n)[1].type="lineEndingBlank"),i[1].type="lineEnding",n=s);else if("linePrefix"!==i[1].type&&"listItemIndent"!==i[1].type)break;n&&(r[1].end={...u.get(n)[1].start},o=u.slice(n,c),o.unshift(r),u.splice(n,c-n+1,o))}}return splice(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function subcontent(e,t){const r=e.get(t)[1],n=e.get(t)[2];let s=t-1;const i=[];let o=r._tokenizer;o||(o=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,d,p=-1,m=r,x=0,f=0;const h=[f];for(;m;){for(;e.get(++s)[1]!==m;);i.push(s),m._tokenizer||(u=n.sliceStream(m),m.next||u.push(null),d&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=m,m=m.next}for(m=r;++p<a.length;)"exit"===a[p][0]&&"enter"===a[p-1][0]&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(f=p+1,h.push(f),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):h.pop(),p=h.length;p--;){const t=a.slice(h[p],h[p+1]),r=i.pop();l.push([r,r+t.length-1]),e.splice(r,2,t)}for(l.reverse(),p=-1;++p<l.length;)c[x+l[p][0]]=x+l[p][1],x+=l[p][1]-l[p][0]-1;return c}function resolveContent(e){return subtokenize(e),e}function tokenizeContent(e,t){let r;return function(t){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),n(t)};function n(t){return null===t?s(t):markdownLineEnding(t)?e.check(continuationConstruct,i,s)(t):(e.consume(t),n)}function s(r){return e.exit("chunkContent"),e.exit("content"),t(r)}function i(t){return e.consume(t),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,n}}function tokenizeContinuation(e,t,r){const n=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),factorySpace(e,s,"linePrefix")};function s(s){if(null===s||markdownLineEnding(s))return r(s);const i=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(s):e.interrupt(n.parser.constructs.flow,r,t)(s)}}function factoryDestination(e,t,r,n,s,i,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(n),e.enter(s),e.enter(i),e.consume(t),e.exit(i),d;if(null===t||32===t||41===t||asciiControl(t))return r(t);return e.enter(n),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),x(t)};function d(r){return 62===r?(e.enter(i),e.consume(r),e.exit(i),e.exit(s),e.exit(n),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),p(r))}function p(t){return 62===t?(e.exit("chunkString"),e.exit(a),d(t)):null===t||60===t||markdownLineEnding(t)?r(t):(e.consume(t),92===t?m:p)}function m(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function x(s){return u||null!==s&&41!==s&&!markdownLineEndingOrSpace(s)?u<c&&40===s?(e.consume(s),u++,x):41===s?(e.consume(s),u--,x):null===s||32===s||40===s||asciiControl(s)?r(s):(e.consume(s),92===s?f:x):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(n),t(s))}function f(t){return 40===t||41===t||92===t?(e.consume(t),x):x(t)}}function factoryLabel(e,t,r,n,s,i){const o=this;let a,l=0;return function(t){return e.enter(n),e.enter(s),e.consume(t),e.exit(s),e.enter(i),c};function c(d){return l>999||null===d||91===d||93===d&&!a||94===d&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?r(d):93===d?(e.exit(i),e.enter(s),e.consume(d),e.exit(s),e.exit(n),t):markdownLineEnding(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||markdownLineEnding(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),a||(a=!markdownSpace(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function factoryTitle(e,t,r,n,s,i){let o;return function(t){if(34===t||39===t||40===t)return e.enter(n),e.enter(s),e.consume(t),e.exit(s),o=40===t?41:t,a;return r(t)};function a(r){return r===o?(e.enter(s),e.consume(r),e.exit(s),e.exit(n),t):(e.enter(i),l(r))}function l(t){return t===o?(e.exit(i),a(o)):null===t?r(t):markdownLineEnding(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),factorySpace(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===o||null===t||markdownLineEnding(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===o||92===t?(e.consume(t),c):c(t)}}function factoryWhitespace(e,t){let r;return function n(s){if(markdownLineEnding(s))return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),r=!0,n;if(markdownSpace(s))return factorySpace(e,n,r?"linePrefix":"lineSuffix")(s);return t(s)}}function tokenizeDefinition(e,t,r){const n=this;let s;return function(t){return e.enter("definition"),function(t){return factoryLabel.call(n,e,i,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function i(t){return s=normalizeIdentifier(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),o):r(t)}function o(t){return markdownLineEndingOrSpace(t)?factoryWhitespace(e,a)(t):a(t)}function a(t){return factoryDestination(e,l,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(titleBefore,c,c)(t)}function c(t){return markdownSpace(t)?factorySpace(e,u,"whitespace")(t):u(t)}function u(i){return null===i||markdownLineEnding(i)?(e.exit("definition"),n.parser.defined.push(s),t(i)):r(i)}}function tokenizeTitleBefore(e,t,r){return function(t){return markdownLineEndingOrSpace(t)?factoryWhitespace(e,n)(t):r(t)};function n(t){return factoryTitle(e,s,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function s(t){return markdownSpace(t)?factorySpace(e,i,"whitespace")(t):i(t)}function i(e){return null===e||markdownLineEnding(e)?t(e):r(e)}}function tokenizeHardBreakEscape(e,t,r){return function(t){return e.enter("hardBreakEscape"),e.consume(t),n};function n(n){return markdownLineEnding(n)?(e.exit("hardBreakEscape"),t(n)):r(n)}}function resolveHeadingAtx(e,t){let r,n,s=e.length-2,i=3;return"whitespace"===e[i][1].type&&(i+=2),s-2>i&&"whitespace"===e[s][1].type&&(s-=2),"atxHeadingSequence"===e[s][1].type&&(i===s-1||s-4>i&&"whitespace"===e[s-2][1].type)&&(s-=i+1===s?2:4),s>i&&(r={type:"atxHeadingText",start:e[i][1].start,end:e[s][1].end},n={type:"chunkText",start:e[i][1].start,end:e[s][1].end,contentType:"text"},splice(e,i,s-i+1,[["enter",r,t],["enter",n,t],["exit",n,t],["exit",r,t]])),e}function tokenizeHeadingAtx(e,t,r){let n=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),s(t)}(t)};function s(t){return 35===t&&n++<6?(e.consume(t),s):null===t||markdownLineEndingOrSpace(t)?(e.exit("atxHeadingSequence"),i(t)):r(t)}function i(r){return 35===r?(e.enter("atxHeadingSequence"),o(r)):null===r||markdownLineEnding(r)?(e.exit("atxHeading"),t(r)):markdownSpace(r)?factorySpace(e,i,"whitespace")(r):(e.enter("atxHeadingText"),a(r))}function o(t){return 35===t?(e.consume(t),o):(e.exit("atxHeadingSequence"),i(t))}function a(t){return null===t||35===t||markdownLineEndingOrSpace(t)?(e.exit("atxHeadingText"),i(t)):(e.consume(t),a)}}function resolveToHtmlFlow(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function tokenizeHtmlFlow(e,t,r){const n=this;let s,i,o,a,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(a){return 33===a?(e.consume(a),u):47===a?(e.consume(a),i=!0,m):63===a?(e.consume(a),s=3,n.interrupt?t:k):asciiAlpha(a)?(e.consume(a),o=String.fromCharCode(a),x):r(a)}function u(i){return 45===i?(e.consume(i),s=2,d):91===i?(e.consume(i),s=5,a=0,p):asciiAlpha(i)?(e.consume(i),s=4,n.interrupt?t:k):r(i)}function d(s){return 45===s?(e.consume(s),n.interrupt?t:k):r(s)}function p(s){const i="CDATA[";return s===i.charCodeAt(a++)?(e.consume(s),6===a?n.interrupt?t:$:p):r(s)}function m(t){return asciiAlpha(t)?(e.consume(t),o=String.fromCharCode(t),x):r(t)}function x(a){if(null===a||47===a||62===a||markdownLineEndingOrSpace(a)){const l=47===a,c=o.toLowerCase();return l||i||!htmlRawNames.includes(c)?htmlBlockNames.includes(o.toLowerCase())?(s=6,l?(e.consume(a),f):n.interrupt?t(a):$(a)):(s=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(a):i?h(a):g(a)):(s=1,n.interrupt?t(a):$(a))}return 45===a||asciiAlphanumeric(a)?(e.consume(a),o+=String.fromCharCode(a),x):r(a)}function f(s){return 62===s?(e.consume(s),n.interrupt?t:$):r(s)}function h(t){return markdownSpace(t)?(e.consume(t),h):S(t)}function g(t){return 47===t?(e.consume(t),S):58===t||95===t||asciiAlpha(t)?(e.consume(t),y):markdownSpace(t)?(e.consume(t),g):S(t)}function y(t){return 45===t||46===t||58===t||95===t||asciiAlphanumeric(t)?(e.consume(t),y):j(t)}function j(t){return 61===t?(e.consume(t),b):markdownSpace(t)?(e.consume(t),j):g(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?r(t):34===t||39===t?(e.consume(t),l=t,v):markdownSpace(t)?(e.consume(t),b):E(t)}function v(t){return t===l?(e.consume(t),l=null,R):null===t||markdownLineEnding(t)?r(t):(e.consume(t),v)}function E(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||markdownLineEndingOrSpace(t)?j(t):(e.consume(t),E)}function R(e){return 47===e||62===e||markdownSpace(e)?g(e):r(e)}function S(t){return 62===t?(e.consume(t),w):r(t)}function w(t){return null===t||markdownLineEnding(t)?$(t):markdownSpace(t)?(e.consume(t),w):r(t)}function $(t){return 45===t&&2===s?(e.consume(t),O):60===t&&1===s?(e.consume(t),T):62===t&&4===s?(e.consume(t),I):63===t&&3===s?(e.consume(t),k):93===t&&5===s?(e.consume(t),A):!markdownLineEnding(t)||6!==s&&7!==s?null===t||markdownLineEnding(t)?(e.exit("htmlFlowData"),N(t)):(e.consume(t),$):(e.exit("htmlFlowData"),e.check(blankLineBefore,D,N)(t))}function N(t){return e.check(nonLazyContinuationStart,_,D)(t)}function _(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),C}function C(t){return null===t||markdownLineEnding(t)?N(t):(e.enter("htmlFlowData"),$(t))}function O(t){return 45===t?(e.consume(t),k):$(t)}function T(t){return 47===t?(e.consume(t),o="",P):$(t)}function P(t){if(62===t){const r=o.toLowerCase();return htmlRawNames.includes(r)?(e.consume(t),I):$(t)}return asciiAlpha(t)&&o.length<8?(e.consume(t),o+=String.fromCharCode(t),P):$(t)}function A(t){return 93===t?(e.consume(t),k):$(t)}function k(t){return 62===t?(e.consume(t),I):45===t&&2===s?(e.consume(t),k):$(t)}function I(t){return null===t||markdownLineEnding(t)?(e.exit("htmlFlowData"),D(t)):(e.consume(t),I)}function D(r){return e.exit("htmlFlow"),t(r)}}function tokenizeNonLazyContinuationStart(e,t,r){const n=this;return function(t){if(markdownLineEnding(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s;return r(t)};function s(e){return n.parser.lazy[n.now().line]?r(e):t(e)}}function tokenizeBlankLineBefore(e,t,r){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),e.attempt(blankLine,t,r)}}function tokenizeHtmlText(e,t,r){const n=this;let s,i,o;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),a};function a(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),b):63===t?(e.consume(t),y):asciiAlpha(t)?(e.consume(t),R):r(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),i=0,m):asciiAlpha(t)?(e.consume(t),g):r(t)}function c(t){return 45===t?(e.consume(t),p):r(t)}function u(t){return null===t?r(t):45===t?(e.consume(t),d):markdownLineEnding(t)?(o=u,P(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),p):u(t)}function p(e){return 62===e?T(e):45===e?d(e):u(e)}function m(t){const n="CDATA[";return t===n.charCodeAt(i++)?(e.consume(t),6===i?x:m):r(t)}function x(t){return null===t?r(t):93===t?(e.consume(t),f):markdownLineEnding(t)?(o=x,P(t)):(e.consume(t),x)}function f(t){return 93===t?(e.consume(t),h):x(t)}function h(t){return 62===t?T(t):93===t?(e.consume(t),h):x(t)}function g(t){return null===t||62===t?T(t):markdownLineEnding(t)?(o=g,P(t)):(e.consume(t),g)}function y(t){return null===t?r(t):63===t?(e.consume(t),j):markdownLineEnding(t)?(o=y,P(t)):(e.consume(t),y)}function j(e){return 62===e?T(e):y(e)}function b(t){return asciiAlpha(t)?(e.consume(t),v):r(t)}function v(t){return 45===t||asciiAlphanumeric(t)?(e.consume(t),v):E(t)}function E(t){return markdownLineEnding(t)?(o=E,P(t)):markdownSpace(t)?(e.consume(t),E):T(t)}function R(t){return 45===t||asciiAlphanumeric(t)?(e.consume(t),R):47===t||62===t||markdownLineEndingOrSpace(t)?S(t):r(t)}function S(t){return 47===t?(e.consume(t),T):58===t||95===t||asciiAlpha(t)?(e.consume(t),w):markdownLineEnding(t)?(o=S,P(t)):markdownSpace(t)?(e.consume(t),S):T(t)}function w(t){return 45===t||46===t||58===t||95===t||asciiAlphanumeric(t)?(e.consume(t),w):$(t)}function $(t){return 61===t?(e.consume(t),N):markdownLineEnding(t)?(o=$,P(t)):markdownSpace(t)?(e.consume(t),$):S(t)}function N(t){return null===t||60===t||61===t||62===t||96===t?r(t):34===t||39===t?(e.consume(t),s=t,_):markdownLineEnding(t)?(o=N,P(t)):markdownSpace(t)?(e.consume(t),N):(e.consume(t),C)}function _(t){return t===s?(e.consume(t),s=void 0,O):null===t?r(t):markdownLineEnding(t)?(o=_,P(t)):(e.consume(t),_)}function C(t){return null===t||34===t||39===t||60===t||61===t||96===t?r(t):47===t||62===t||markdownLineEndingOrSpace(t)?S(t):(e.consume(t),C)}function O(e){return 47===e||62===e||markdownLineEndingOrSpace(e)?S(e):r(e)}function T(n){return 62===n?(e.consume(n),e.exit("htmlTextData"),e.exit("htmlText"),t):r(n)}function P(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),A}function A(t){return markdownSpace(t)?factorySpace(e,k,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):k(t)}function k(t){return e.enter("htmlTextData"),o(t)}}function resolveAllLabelEnd(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),"labelImage"===n.type||"labelLink"===n.type||"labelEnd"===n.type){const e="labelImage"===n.type?4:2;n.type="data",t+=e}}return e.length!==r.length&&splice(e,0,e.length,r),e}function resolveToLabelEnd(e,t){let r,n,s,i,o=e.length,a=0;for(;o--;)if(r=e[o][1],n){if("link"===r.type||"labelLink"===r.type&&r._inactive)break;"enter"===e[o][0]&&"labelLink"===r.type&&(r._inactive=!0)}else if(s){if("enter"===e[o][0]&&("labelImage"===r.type||"labelLink"===r.type)&&!r._balanced&&(n=o,"labelLink"!==r.type)){a=2;break}}else"labelEnd"===r.type&&(s=o);const l={type:"labelLink"===e[n][1].type?"link":"image",start:{...e[n][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[n][1].start},end:{...e[s][1].end}},u={type:"labelText",start:{...e[n+a+2][1].end},end:{...e[s-2][1].start}};return i=[["enter",l,t],["enter",c,t]],i=push(i,e.slice(n+1,n+a+3)),i=push(i,[["enter",u,t]]),i=push(i,resolveAll(t.parser.constructs.insideSpan.null,e.slice(n+a+4,s-3),t)),i=push(i,[["exit",u,t],e[s-2],e[s-1],["exit",c,t]]),i=push(i,e.slice(s+1)),i=push(i,[["exit",l,t]]),splice(e,n,e.length,i),e}function tokenizeLabelEnd(e,t,r){const n=this;let s,i,o=n.events.length;for(;o--;)if(("labelImage"===n.events[o][1].type||"labelLink"===n.events[o][1].type)&&!n.events[o][1]._balanced){s=n.events[o][1];break}return function(t){if(!s)return r(t);if(s._inactive)return u(t);return i=n.parser.defined.includes(normalizeIdentifier(n.sliceSerialize({start:s.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),a};function a(t){return 40===t?e.attempt(resourceConstruct,c,i?c:u)(t):91===t?e.attempt(referenceFullConstruct,c,i?l:u)(t):i?c(t):u(t)}function l(t){return e.attempt(referenceCollapsedConstruct,c,u)(t)}function c(e){return t(e)}function u(e){return s._balanced=!0,r(e)}}function tokenizeResource(e,t,r){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),n};function n(t){return markdownLineEndingOrSpace(t)?factoryWhitespace(e,s)(t):s(t)}function s(t){return 41===t?c(t):factoryDestination(e,i,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return markdownLineEndingOrSpace(t)?factoryWhitespace(e,a)(t):c(t)}function o(e){return r(e)}function a(t){return 34===t||39===t||40===t?factoryTitle(e,l,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return markdownLineEndingOrSpace(t)?factoryWhitespace(e,c)(t):c(t)}function c(n){return 41===n?(e.enter("resourceMarker"),e.consume(n),e.exit("resourceMarker"),e.exit("resource"),t):r(n)}}function tokenizeReferenceFull(e,t,r){const n=this;return function(t){return factoryLabel.call(n,e,s,i,"reference","referenceMarker","referenceString")(t)};function s(e){return n.parser.defined.includes(normalizeIdentifier(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(e):r(e)}function i(e){return r(e)}}function tokenizeReferenceCollapsed(e,t,r){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),n};function n(n){return 93===n?(e.enter("referenceMarker"),e.consume(n),e.exit("referenceMarker"),e.exit("reference"),t):r(n)}}function tokenizeLabelStartImage(e,t,r){const n=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),s};function s(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),i):r(t)}function i(e){return 94===e&&"_hiddenFootnoteSupport"in n.parser.constructs?r(e):t(e)}}function tokenizeLabelStartLink(e,t,r){const n=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),s};function s(e){return 94===e&&"_hiddenFootnoteSupport"in n.parser.constructs?r(e):t(e)}}function tokenizeLineEnding(e,t){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),factorySpace(e,t,"linePrefix")}}function tokenizeThematicBreak(e,t,r){let n,s=0;return function(t){return e.enter("thematicBreak"),function(e){return n=e,i(e)}(t)};function i(i){return i===n?(e.enter("thematicBreakSequence"),o(i)):s>=3&&(null===i||markdownLineEnding(i))?(e.exit("thematicBreak"),t(i)):r(i)}function o(t){return t===n?(e.consume(t),s++,o):(e.exit("thematicBreakSequence"),markdownSpace(t)?factorySpace(e,i,"whitespace")(t):i(t))}}function tokenizeListStart(e,t,r){const n=this,s=n.events[n.events.length-1];let i=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,o=0;return function(t){const s=n.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===s?!n.containerState.marker||t===n.containerState.marker:asciiDigit(t)){if(n.containerState.type||(n.containerState.type=s,e.enter(s,{_container:!0})),"listUnordered"===s)return e.enter("listItemPrefix"),42===t||45===t?e.check(thematicBreak$2,r,l)(t):l(t);if(!n.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),a(t)}return r(t)};function a(t){return asciiDigit(t)&&++o<10?(e.consume(t),a):(!n.interrupt||o<2)&&(n.containerState.marker?t===n.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):r(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||t,e.check(blankLine,n.interrupt?r:c,e.attempt(listItemPrefixWhitespaceConstruct,d,u))}function c(e){return n.containerState.initialBlankLine=!0,i++,d(e)}function u(t){return markdownSpace(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):r(t)}function d(r){return n.containerState.size=i+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(r)}}function tokenizeListContinuation(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(blankLine,function(r){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,factorySpace(e,t,"listItemIndent",n.containerState.size+1)(r)},function(r){if(n.containerState.furtherBlankLines||!markdownSpace(r))return n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,s(r);return n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(indentConstruct,t,s)(r)});function s(s){return n.containerState._closeFlow=!0,n.interrupt=void 0,factorySpace(e,e.attempt(list$2,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function tokenizeIndent$1(e,t,r){const n=this;return factorySpace(e,function(e){const s=n.events[n.events.length-1];return s&&"listItemIndent"===s[1].type&&s[2].sliceSerialize(s[1],!0).length===n.containerState.size?t(e):r(e)},"listItemIndent",n.containerState.size+1)}function tokenizeListEnd(e){e.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(e,t,r){const n=this;return factorySpace(e,function(e){const s=n.events[n.events.length-1];return!markdownSpace(e)&&s&&"listItemPrefixWhitespace"===s[1].type?t(e):r(e)},"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}function resolveToSetextUnderline(e,t){let r,n,s,i=e.length;for(;i--;)if("enter"===e[i][0]){if("content"===e[i][1].type){r=i;break}"paragraph"===e[i][1].type&&(n=i)}else"content"===e[i][1].type&&e.splice(i,1),s||"definition"!==e[i][1].type||(s=i);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[n][1].type="setextHeadingText",s?(e.splice(n,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function tokenizeSetextUnderline(e,t,r){const n=this;let s;return function(t){let o,a=n.events.length;for(;a--;)if("lineEnding"!==n.events[a][1].type&&"linePrefix"!==n.events[a][1].type&&"content"!==n.events[a][1].type){o="paragraph"===n.events[a][1].type;break}if(!n.parser.lazy[n.now().line]&&(n.interrupt||o))return e.enter("setextHeadingLine"),s=t,function(t){return e.enter("setextHeadingLineSequence"),i(t)}(t);return r(t)};function i(t){return t===s?(e.consume(t),i):(e.exit("setextHeadingLineSequence"),markdownSpace(t)?factorySpace(e,o,"lineSuffix")(t):o(t))}function o(n){return null===n||markdownLineEnding(n)?(e.exit("setextHeadingLine"),t(n)):r(n)}}function initializeFlow(e){const t=this,r=e.attempt(blankLine,function(n){if(null===n)return void e.consume(n);return e.enter("lineEndingBlank"),e.consume(n),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r},e.attempt(this.parser.constructs.flowInitial,n,factorySpace(e,e.attempt(this.parser.constructs.flow,n,e.attempt(content,n)),"linePrefix")));return r;function n(n){if(null!==n)return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),t.currentConstruct=void 0,r;e.consume(n)}}function initializeFactory(e){return{resolveAll:createResolver("text"===e?resolveAllLineSuffixes:void 0),tokenize:function(t){const r=this,n=this.parser.constructs[e],s=t.attempt(n,i,o);return i;function i(e){return l(e)?s(e):o(e)}function o(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return l(e)?(t.exit("data"),s(e)):(t.consume(e),a)}function l(e){if(null===e)return!0;const t=n[e];let s=-1;if(t)for(;++s<t.length;){const e=t[s];if(!e.previous||e.previous.call(r,r.previous))return!0}return!1}}}}function createResolver(e){return function(t,r){let n,s=-1;for(;++s<=t.length;)void 0===n?t[s]&&"data"===t[s][1].type&&(n=s,s++):t[s]&&"data"===t[s][1].type||(s!==n+2&&(t[n][1].end=t[s-1][1].end,t.splice(n+2,s-n-2),s=n+2),n=void 0);return e?e(t,r):t}}function resolveAllLineSuffixes(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||"lineEnding"===e[r][1].type)&&"data"===e[r-1][1].type){const n=e[r-1][1],s=t.sliceStream(n);let i,o=s.length,a=-1,l=0;for(;o--;){const e=s[o];if("string"==typeof e){for(a=e.length;32===e.charCodeAt(a-1);)l++,a--;if(a)break;a=-1}else if(-2===e)i=!0,l++;else if(-1!==e){o++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(l=0),l){const s={type:r===e.length||i||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:n.start._bufferIndex+a,_index:n.start._index+o,line:n.end.line,column:n.end.column-l,offset:n.end.offset-l},end:{...n.end}};n.end={...s.start},n.start.offset===n.end.offset?Object.assign(n,s):(e.splice(r,0,["enter",s,t],["exit",s,t]),r+=2)}r++}return e}function createTokenizer(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const s={},i=[];let o=[],a=[];const l={attempt:h(function(e,t){g(e,t.from)}),check:h(f),consume:function(e){markdownLineEnding(e)?(n.line++,n.column=1,n.offset+=-3===e?2:1,y()):-1!==e&&(n.column++,n.offset++);n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++));c.previous=e},enter:function(e,t){const r=t||{};return r.type=e,r.start=p(),c.events.push(["enter",r,c]),a.push(r),r},exit:function(e){const t=a.pop();return t.end=p(),c.events.push(["exit",t,c]),t},interrupt:h(f,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){s[e.line]=e.column,y()},events:[],now:p,parser:e,previous:null,sliceSerialize:function(e,t){return serializeChunks(d(e),t)},sliceStream:d,write:function(e){if(o=push(o,e),m(),null!==o[o.length-1])return[];return g(t,0),c.events=resolveAll(i,c.events,c),c.events}};let u=t.tokenize.call(c,l);return t.resolveAll&&i.push(t),c;function d(e){return sliceChunks(o,e)}function p(){const{_bufferIndex:e,_index:t,line:r,column:s,offset:i}=n;return{_bufferIndex:e,_index:t,line:r,column:s,offset:i}}function m(){let e;for(;n._index<o.length;){const t=o[n._index];if("string"==typeof t)for(e=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===e&&n._bufferIndex<t.length;)x(t.charCodeAt(n._bufferIndex));else x(t)}}function x(e){u=u(e)}function f(e,t){t.restore()}function h(e,t){return function(r,s,i){let o,u,d,m;return Array.isArray(r)?x(r):"tokenize"in r?x([r]):function(e){return t;function t(t){const r=null!==t&&e[t],n=null!==t&&e.null;return x([...Array.isArray(r)?r:r?[r]:[],...Array.isArray(n)?n:n?[n]:[]])(t)}}(r);function x(e){return o=e,u=0,0===e.length?i:f(e[u])}function f(e){return function(r){m=function(){const e=p(),t=c.previous,r=c.currentConstruct,s=c.events.length,i=Array.from(a);return{from:s,restore:o};function o(){n=e,c.previous=t,c.currentConstruct=r,c.events.length=s,a=i,y()}}(),d=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return g();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,h,g)(r)}}function h(t){return e(d,m),s}function g(e){return m.restore(),++u<o.length?f(o[u]):i}}}function g(e,t){e.resolveAll&&!i.includes(e)&&i.push(e),e.resolve&&splice(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function y(){n.line in s&&n.column<2&&(n.column=s[n.line],n.offset+=s[n.line]-1)}}function sliceChunks(e,t){const r=t.start._index,n=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let o;if(r===s)o=[e[r].slice(n,i)];else{if(o=e.slice(r,s),n>-1){const e=o[0];"string"==typeof e?o[0]=e.slice(n):o.shift()}i>0&&o.push(e[s].slice(0,i))}return o}function serializeChunks(e,t){let r=-1;const n=[];let s;for(;++r<e.length;){const i=e[r];let o;if("string"==typeof i)o=i;else switch(i){case-5:o="\r";break;case-4:o="\n";break;case-3:o="\r\n";break;case-2:o=t?" ":"\t";break;case-1:if(!t&&s)continue;o=" ";break;default:o=String.fromCharCode(i)}s=-2===i,n.push(o)}return n.join("")}function parse(e){const t={constructs:combineExtensions([defaultConstructs,...(e||{}).extensions||[]]),content:r(content$1),defined:[],document:r(document$2),flow:r(flow$1),lazy:{},string:r(string$1),text:r(text$4)};return t;function r(e){return function(r){return createTokenizer(t,e,r)}}}function postprocess(e){for(;!subtokenize(e););return e}function preprocess(){let e,t=1,r="",n=!0;return function(s,i,o){const a=[];let l,c,u,d,p;s=r+("string"==typeof s?s.toString():new TextDecoder(i||void 0).decode(s)),u=0,r="",n&&(65279===s.charCodeAt(0)&&u++,n=void 0);for(;u<s.length;){if(search.lastIndex=u,l=search.exec(s),d=l&&void 0!==l.index?l.index:s.length,p=s.charCodeAt(d),!l){r=s.slice(u);break}if(10===p&&u===d&&e)a.push(-3),e=void 0;else switch(e&&(a.push(-5),e=void 0),u<d&&(a.push(s.slice(u,d)),t+=d-u),p){case 0:a.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),a.push(-2);t++<c;)a.push(-1);break;case 10:a.push(-4),t=1;break;default:e=!0,t=1}u=d+1}o&&(e&&a.push(-5),r&&a.push(r),a.push(null));return a}}function decodeString(e){return e.replace(characterEscapeOrReference,decode)}function decode(e,t,r){if(t)return t;if(35===r.charCodeAt(0)){const e=r.charCodeAt(1),t=120===e||88===e;return decodeNumericCharacterReference(r.slice(t?2:1),t?16:10)}return decodeNamedCharacterReference(r)||e}function fromMarkdown(e,t,r){return"string"!=typeof t&&(r=t,t=void 0),compiler(r)(postprocess(parse(r).document().write(preprocess()(e,t,!0))))}function compiler(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(y),autolinkProtocol:u,autolinkEmail:u,atxHeading:s(f),blockQuote:s(function(){return{type:"blockquote",children:[]}}),characterEscape:u,characterReference:u,codeFenced:s(x),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:s(x,i),codeText:s(function(){return{type:"inlineCode",value:""}},i),codeTextData:u,data:u,codeFlowValue:u,definition:s(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:s(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:s(h),hardBreakTrailing:s(h),htmlFlow:s(g,i),htmlFlowData:u,htmlText:s(g,i),htmlTextData:u,image:s(function(){return{type:"image",title:null,url:"",alt:null}}),label:i,link:s(y),listItem:s(function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}),listItemValue:function(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}},listOrdered:s(j,function(){this.data.expectingFirstListItemValue=!0}),listUnordered:s(j),paragraph:s(function(){return{type:"paragraph",children:[]}}),reference:function(){this.data.referenceType="collapsed"},referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:s(f),strong:s(function(){return{type:"strong",children:[]}}),thematicBreak:s(function(){return{type:"thematicBreak"}})},exit:{atxHeading:a(),atxHeadingSequence:function(e){const t=this.stack[this.stack.length-1];if(!t.depth){const r=this.sliceSerialize(e).length;t.depth=r}},autolink:a(),autolinkEmail:function(e){d.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){d.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:a(),characterEscapeValue:d,characterReferenceMarkerHexadecimal:m,characterReferenceMarkerNumeric:m,characterReferenceValue:function(e){const t=this.sliceSerialize(e),r=this.data.characterReferenceType;let n;if(r)n=decodeNumericCharacterReference(t,"characterReferenceMarkerNumeric"===r?10:16),this.data.characterReferenceType=void 0;else{n=decodeNamedCharacterReference(t)}this.stack[this.stack.length-1].value+=n},characterReference:function(e){this.stack.pop().position.end=point(e.end)},codeFenced:a(function(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}),codeFencedFence:function(){if(this.data.flowCodeInside)return;this.buffer(),this.data.flowCodeInside=!0},codeFencedFenceInfo:function(){const e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){const e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:d,codeIndented:a(function(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}),codeText:a(function(){const e=this.resume();this.stack[this.stack.length-1].value=e}),codeTextData:d,data:d,definition:a(),definitionDestinationString:function(){const e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.label=t,r.identifier=normalizeIdentifier(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){const e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:a(),hardBreakEscape:a(p),hardBreakTrailing:a(p),htmlFlow:a(function(){const e=this.resume();this.stack[this.stack.length-1].value=e}),htmlFlowData:d,htmlText:a(function(){const e=this.resume();this.stack[this.stack.length-1].value=e}),htmlTextData:d,image:a(function(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),label:function(){const e=this.stack[this.stack.length-1],t=this.resume(),r=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===r.type){const t=e.children;r.children=t}else r.alt=t},labelText:function(e){const t=this.sliceSerialize(e),r=this.stack[this.stack.length-2];r.label=decodeString(t),r.identifier=normalizeIdentifier(t).toLowerCase()},lineEnding:function(e){const r=this.stack[this.stack.length-1];if(this.data.atHardBreak){return r.children[r.children.length-1].position.end=point(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(r.type)&&(u.call(this,e),d.call(this,e))},link:a(function(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),listItem:a(),listOrdered:a(),listUnordered:a(),paragraph:a(),referenceString:function(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.label=t,r.identifier=normalizeIdentifier(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){const e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){const e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){this.data.inReference=void 0},setextHeading:a(function(){this.data.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:a(),thematicBreak:a()}};configure(t,(e||{}).mdastExtensions||[]);const r={};return function(e){let s={type:"root",children:[]};const a={stack:[s],tokenStack:[],config:t,enter:o,exit:l,buffer:i,resume:c,data:r},u=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])u.push(d);else{d=n(e,u.pop(),d)}d=-1;for(;++d<e.length;){const r=t[e[d][0]];own$2.call(r,e[d][1].type)&&r[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},a),e[d][1])}if(a.tokenStack.length>0){const e=a.tokenStack[a.tokenStack.length-1];(e[1]||defaultOnError).call(a,void 0,e[0])}s.position={start:point(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:point(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;for(;++d<t.transforms.length;)s=t.transforms[d](s)||s;return s};function n(e,t,r){let n,s,i,o,a=t-1,l=-1,c=!1;for(;++a<=r;){const t=e[a];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,o=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!n||o||l||i||(i=a),o=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:o=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(n){let o=a;for(s=void 0;o--;){const t=e[o];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;s&&(e[s][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",s=o}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}i&&(!s||i<s)&&(n._spread=!0),n.end=Object.assign({},s?e[s][1].start:t[1].end),e.splice(s||a,0,["exit",n,t[2]]),a++,r++}if("listItemPrefix"===t[1].type){const s={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};n=s,e.splice(a,0,["enter",s,t[2]]),a++,r++,i=void 0,o=!0}}}return e[t][1]._spread=c,r}function s(e,t){return function(r){o.call(this,e(r),r),t&&t.call(this,r)}}function i(){this.stack.push({type:"fragment",children:[]})}function o(e,t,r){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,r||void 0]),e.position={start:point(t.start),end:void 0}}function a(e){return function(t){e&&e.call(this,t);l.call(this,t)}}function l(e,t){const r=this.stack.pop(),n=this.tokenStack.pop();if(!n)throw new Error("Cannot close `"+e.type+"` ("+stringifyPosition({start:e.start,end:e.end})+"): its not open");if(n[0].type!==e.type)if(t)t.call(this,e,n[0]);else{(n[1]||defaultOnError).call(this,e,n[0])}r.position.end=point(e.end)}function c(){return toString$1(this.stack.pop())}function u(e){const t=this.stack[this.stack.length-1].children;let r=t[t.length-1];r&&"text"===r.type||(r={type:"text",value:""},r.position={start:point(e.start),end:void 0},t.push(r)),this.stack.push(r)}function d(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=point(e.end)}function p(){this.data.atHardBreak=!0}function m(e){this.data.characterReferenceType=e.type}function x(){return{type:"code",lang:null,meta:null,value:""}}function f(){return{type:"heading",depth:0,children:[]}}function h(){return{type:"break"}}function g(){return{type:"html",value:""}}function y(){return{type:"link",title:null,url:"",children:[]}}function j(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}}function point(e){return{line:e.line,column:e.column,offset:e.offset}}function configure(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?configure(e,n):extension(e,n)}}function extension(e,t){let r;for(r in t)if(own$2.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function defaultOnError(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+stringifyPosition({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+stringifyPosition({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+stringifyPosition({start:t.start,end:t.end})+") is still open")}function remarkParse(e){const t=this;t.parser=function(r){return fromMarkdown(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function blockquote$1(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function hardBreak$1(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:"\n"}]}function code$2(e,t){const r=t.value?t.value+"\n":"",n={};t.lang&&(n.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function strikethrough(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function emphasis$1(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function footnoteReference$1(e,t){const r="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),s=normalizeUri(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let o,a=e.footnoteCounts.get(n);void 0===a?(a=0,e.footnoteOrder.push(n),o=e.footnoteOrder.length):o=i+1,a+=1,e.footnoteCounts.set(n,a);const l={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+s,id:r+"fnref-"+s+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}function heading$1(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function html$1(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function revert(e,t){const r=t.referenceType;let n="]";if("collapsed"===r?n+="[]":"full"===r&&(n+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+n}];const s=e.all(t),i=s[0];i&&"text"===i.type?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&"text"===o.type?o.value+=n:s.push({type:"text",value:n}),s}function imageReference$1(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return revert(e,t);const s={src:normalizeUri(n.url||""),alt:t.alt};null!==n.title&&void 0!==n.title&&(s.title=n.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function image$1(e,t){const r={src:normalizeUri(t.url)};null!==t.alt&&void 0!==t.alt&&(r.alt=t.alt),null!==t.title&&void 0!==t.title&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function inlineCode$1(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function linkReference$1(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return revert(e,t);const s={href:normalizeUri(n.url||"")};null!==n.title&&void 0!==n.title&&(s.title=n.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function link$1(e,t){const r={href:normalizeUri(t.url)};null!==t.title&&void 0!==t.title&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function listItem$1(e,t,r){const n=e.all(t),s=r?listLoose(r):listItemLoose(t),i={},o=[];if("boolean"==typeof t.checked){const e=n[0];let r;e&&"element"===e.type&&"p"===e.tagName?r=e:(r={type:"element",tagName:"p",properties:{},children:[]},n.unshift(r)),r.children.length>0&&r.children.unshift({type:"text",value:" "}),r.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let a=-1;for(;++a<n.length;){const e=n[a];(s||0!==a||"element"!==e.type||"p"!==e.tagName)&&o.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||s?o.push(e):o.push(...e.children)}const l=n[n.length-1];l&&(s||"element"!==l.type||"p"!==l.tagName)&&o.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:i,children:o};return e.patch(t,c),e.applyData(t,c)}function listLoose(e){let t=!1;if("list"===e.type){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=listItemLoose(r[n])}return t}function listItemLoose(e){const t=e.spread;return null==t?e.children.length>1:t}function list$1(e,t){const r={},n=e.all(t);let s=-1;for("number"==typeof t.start&&1!==t.start&&(r.start=t.start);++s<n.length;){const e=n[s];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,i),e.applyData(t,i)}function paragraph$1(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function root$1(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function strong$1(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function table(e,t){const r=e.all(t),n=r.shift(),s=[];if(n){const r={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],r),s.push(r)}if(r.length>0){const n={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},i=pointStart(t.children[1]),o=pointEnd(t.children[t.children.length-1]);i&&o&&(n.position={start:i,end:o}),s.push(n)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function tableRow(e,t,r){const n=r?r.children:void 0,s=0===(n?n.indexOf(t):1)?"th":"td",i=r&&"table"===r.type?r.align:void 0,o=i?i.length:t.children.length;let a=-1;const l=[];for(;++a<o;){const r=t.children[a],n={},o=i?i[a]:void 0;o&&(n.align=o);let c={type:"element",tagName:s,properties:n,children:[]};r&&(c.children=e.all(r),e.patch(r,c),c=e.applyData(r,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function tableCell(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function trimLines(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),s=0;const i=[];for(;n;)i.push(trimLine(t.slice(s,n.index),s>0,!0),n[0]),s=n.index+n[0].length,n=r.exec(t);return i.push(trimLine(t.slice(s),s>0,!1)),i.join("")}function trimLine(e,t,r){let n=0,s=e.length;if(t){let t=e.codePointAt(n);for(;t===tab||t===space;)n++,t=e.codePointAt(n)}if(r){let t=e.codePointAt(s-1);for(;t===tab||t===space;)s--,t=e.codePointAt(s-1)}return s>n?e.slice(n,s):""}function text$2(e,t){const r={type:"text",value:trimLines(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function thematicBreak$1(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}function ignore(){}function defaultFootnoteBackContent(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function defaultFootnoteBackLabel(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function footer(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||defaultFootnoteBackContent,n=e.options.footnoteBackLabel||defaultFootnoteBackLabel,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const s=e.footnoteById.get(e.footnoteOrder[l]);if(!s)continue;const i=e.all(s),o=String(s.identifier).toUpperCase(),c=normalizeUri(o.toLowerCase());let u=0;const d=[],p=e.footnoteCounts.get(o);for(;void 0!==p&&++u<=p;){d.length>0&&d.push({type:"text",value:" "});let e="string"==typeof r?r:r(l,u);"string"==typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof n?n:n(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const m=i[i.length-1];if(m&&"element"===m.type&&"p"===m.tagName){const e=m.children[m.children.length-1];e&&"text"===e.type?e.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...d)}else i.push(...d);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(i,!0)};e.patch(s,x),a.push(x)}if(0!==a.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...structuredClone$1(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:"\n"}]}}function anyFactory$1(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=convert(e[r]);return castFactory$1(function(...e){let r=-1;for(;++r<t.length;)if(t[r].apply(this,e))return!0;return!1})}function propsFactory(e){const t=e;return castFactory$1(function(r){const n=r;let s;for(s in e)if(n[s]!==t[s])return!1;return!0})}function typeFactory(e){return castFactory$1(function(t){return t&&t.type===e})}function castFactory$1(e){return function(t,r,n){return Boolean(looksLikeANode(t)&&e.call(this,t,"number"==typeof r?r:void 0,n||void 0))}}function ok(){return!0}function looksLikeANode(e){return null!==e&&"object"==typeof e&&"type"in e}function color(e){return e}function visitParents(e,t,r,n){let s;"function"==typeof t&&"function"!=typeof r?(n=r,r=t):s=t;const i=convert(s),o=n?-1:1;!function e(s,a,l){const c=s&&"object"==typeof s?s:{};if("string"==typeof c.type){const e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+color(s.type+(e?"<"+e+">":""))+")"})}return u;function u(){let c,u,d,p=empty;if((!t||i(s,a,l[l.length-1]||void 0))&&(p=toResult(r(s,l)),p[0]===EXIT))return p;if("children"in s&&s.children){const t=s;if(t.children&&p[0]!==SKIP)for(u=(n?t.children.length:-1)+o,d=l.concat(t);u>-1&&u<t.children.length;){const r=t.children[u];if(c=e(r,u,d)(),c[0]===EXIT)return c;u="number"==typeof c[1]?c[1]:u+o}}return p}}(e,void 0,[])()}function toResult(e){return Array.isArray(e)?e:"number"==typeof e?[CONTINUE,e]:null==e?empty:[e]}function visit(e,t,r,n){let s,i,o;"function"==typeof t&&"function"!=typeof r?(i=void 0,o=t,s=r):(i=t,o=r,s=n),visitParents(e,i,function(e,t){const r=t[t.length-1],n=r?r.children.indexOf(e):void 0;return o(e,n,r)},s)}function createState(e,t){const r=t||emptyOptions$2,n=new Map,s=new Map,i=new Map,o={...handlers,...r.handlers},a={all:function(e){const t=[];if("children"in e){const r=e.children;let n=-1;for(;++n<r.length;){const s=a.one(r[n],e);if(s){if(n&&"break"===r[n-1].type&&(Array.isArray(s)||"text"!==s.type||(s.value=trimMarkdownSpaceStart(s.value)),!Array.isArray(s)&&"element"===s.type)){const e=s.children[0];e&&"text"===e.type&&(e.value=trimMarkdownSpaceStart(e.value))}Array.isArray(s)?t.push(...s):t.push(s)}}}return t},applyData:applyData,definitionById:n,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:function(e,t){const r=e.type,n=a.handlers[r];if(own$1.call(a.handlers,r)&&n)return n(a,e,t);if(a.options.passThrough&&a.options.passThrough.includes(r)){if("children"in e){const{children:t,...r}=e,n=structuredClone$1(r);return n.children=a.all(e),n}return structuredClone$1(e)}return(a.options.unknownHandler||defaultUnknownHandler)(a,e,t)},options:r,patch:patch,wrap:wrap$1};return visit(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?n:s,r=String(e.identifier).toUpperCase();t.has(r)||t.set(r,e)}}),a}function patch(e,t){e.position&&(t.position=position$1(e))}function applyData(e,t){let r=t;if(e&&e.data){const t=e.data.hName,n=e.data.hChildren,s=e.data.hProperties;if("string"==typeof t)if("element"===r.type)r.tagName=t;else{r={type:"element",tagName:t,properties:{},children:"children"in r?r.children:[r]}}"element"===r.type&&s&&Object.assign(r.properties,structuredClone$1(s)),"children"in r&&r.children&&null!=n&&(r.children=n)}return r}function defaultUnknownHandler(e,t){const r=t.data||{},n=!("value"in t)||own$1.call(r,"hProperties")||own$1.call(r,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,n),e.applyData(t,n)}function wrap$1(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:"\n"});++n<e.length;)n&&r.push({type:"text",value:"\n"}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:"\n"}),r}function trimMarkdownSpaceStart(e){let t=0,r=e.charCodeAt(t);for(;9===r||32===r;)t++,r=e.charCodeAt(t);return e.slice(t)}function toHast(e,t){const r=createState(e,t),n=r.one(e,void 0),s=footer(r),i=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return s&&i.children.push({type:"text",value:"\n"},s),i}function remarkRehype(e,t){return e&&"run"in e?async function(r,n){const s=toHast(r,{file:n,...t});await e.run(s,n)}:function(r,n){return toHast(r,{file:n,...e||t})}}function bail(e){if(e)throw e}function isPlainObject(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function trough(){const e=[],t={run:function(...t){let r=-1;const n=t.pop();if("function"!=typeof n)throw new TypeError("Expected function as last argument, not "+n);!function s(i,...o){const a=e[++r];let l=-1;if(i)n(i);else{for(;++l<t.length;)null!==o[l]&&void 0!==o[l]||(o[l]=t[l]);t=o,a?wrap(a,s)(...o):n(null,...o)}}(null,...t)},use:function(r){if("function"!=typeof r)throw new TypeError("Expected `middelware` to be a function, not "+r);return e.push(r),t}};return t}function wrap(e,t){let r;return function(...t){const i=e.length>t.length;let o;i&&t.push(n);try{o=e.apply(this,t)}catch(a){if(i&&r)throw a;return n(a)}i||(o&&o.then&&"function"==typeof o.then?o.then(s,n):o instanceof Error?n(o):s(o))};function n(e,...n){r||(r=!0,t(e,...n))}function s(e){n(null,e)}}function basename(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');assertPath$1(e);let r,n=0,s=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;i--;)if(47===e.codePointAt(i)){if(r){n=i+1;break}}else s<0&&(r=!0,s=i+1);return s<0?"":e.slice(n,s)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(47===e.codePointAt(i)){if(r){n=i+1;break}}else o<0&&(r=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(s=i):(a=-1,s=o));return n===s?s=o:s<0&&(s=e.length),e.slice(n,s)}function dirname(e){if(assertPath$1(e),0===e.length)return".";let t,r=-1,n=e.length;for(;--n;)if(47===e.codePointAt(n)){if(t){r=n;break}}else t||(t=!0);return r<0?47===e.codePointAt(0)?"/":".":1===r&&47===e.codePointAt(0)?"//":e.slice(0,r)}function extname(e){assertPath$1(e);let t,r=e.length,n=-1,s=0,i=-1,o=0;for(;r--;){const a=e.codePointAt(r);if(47!==a)n<0&&(t=!0,n=r+1),46===a?i<0?i=r:1!==o&&(o=1):i>-1&&(o=-1);else if(t){s=r+1;break}}return i<0||n<0||0===o||1===o&&i===n-1&&i===s+1?"":e.slice(i,n)}function join(...e){let t,r=-1;for(;++r<e.length;)assertPath$1(e[r]),e[r]&&(t=void 0===t?e[r]:t+"/"+e[r]);return void 0===t?".":normalize(t)}function normalize(e){assertPath$1(e);const t=47===e.codePointAt(0);let r=normalizeString(e,!t);return 0!==r.length||t||(r="."),r.length>0&&47===e.codePointAt(e.length-1)&&(r+="/"),t?"/"+r:r}function normalizeString(e,t){let r,n,s="",i=0,o=-1,a=0,l=-1;for(;++l<=e.length;){if(l<e.length)r=e.codePointAt(l);else{if(47===r)break;r=47}if(47===r){if(o===l-1||1===a);else if(o!==l-1&&2===a){if(s.length<2||2!==i||46!==s.codePointAt(s.length-1)||46!==s.codePointAt(s.length-2))if(s.length>2){if(n=s.lastIndexOf("/"),n!==s.length-1){n<0?(s="",i=0):(s=s.slice(0,n),i=s.length-1-s.lastIndexOf("/")),o=l,a=0;continue}}else if(s.length>0){s="",i=0,o=l,a=0;continue}t&&(s=s.length>0?s+"/..":"..",i=2)}else s.length>0?s+="/"+e.slice(o+1,l):s=e.slice(o+1,l),i=l-o-1;o=l,a=0}else 46===r&&a>-1?a++:a=-1}return s}function assertPath$1(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function cwd(){return"/"}function isUrl(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function urlToPath(e){if("string"==typeof e)e=new URL(e);else if(!isUrl(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(e)}function getPathFromURLPosix(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let r=-1;for(;++r<t.length;)if(37===t.codePointAt(r)&&50===t.codePointAt(r+1)){const e=t.codePointAt(r+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}function assertPart(e,t){if(e&&e.includes(minpath.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function assertPath(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function isUint8Array$1(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}function assertParser(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function assertCompiler(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function assertUnfrozen(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(e){if(!isPlainObject(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function assertDone(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function vfile(e){return looksLikeAVFile(e)?e:new VFile(e)}function looksLikeAVFile(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}function looksLikeAValue(e){return"string"==typeof e||isUint8Array(e)}function isUint8Array(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}function Markdown(e){const t=createProcessor(e),r=createFile(e);return post(t.runSync(t.parse(r),r),e)}function createProcessor(e){const t=e.rehypePlugins||emptyPlugins,r=e.remarkPlugins||emptyPlugins,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions;return unified().use(remarkParse).use(r).use(remarkRehype,n).use(t)}function createFile(e){const t=e.children||"",r=new VFile;return"string"==typeof t&&(r.value=t),r}function post(e,t){const r=t.allowedElements,n=t.allowElement,s=t.components,i=t.disallowedElements,o=t.skipHtml,a=t.unwrapDisallowed,l=t.urlTransform||defaultUrlTransform;for(const c of deprecations)Object.hasOwn(t,c.from)&&unreachable("Unexpected `"+c.from+"` prop, "+(c.to?"use `"+c.to+"` instead":"remove it")+" (see <"+changelog+"#"+c.id+"> for more info)");return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:"root"===e.type?e.children:[e]}),visit(e,function(e,t,s){if("raw"===e.type&&s&&"number"==typeof t)return o?s.children.splice(t,1):s.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in urlAttributes)if(Object.hasOwn(urlAttributes,t)&&Object.hasOwn(e.properties,t)){const r=e.properties[t],n=urlAttributes[t];(null===n||n.includes(e.tagName))&&(e.properties[t]=l(String(r||""),t,e))}}if("element"===e.type){let o=r?!r.includes(e.tagName):!!i&&i.includes(e.tagName);if(!o&&n&&"number"==typeof t&&(o=!n(e,t,s)),o&&s&&"number"==typeof t)return a&&e.children?s.children.splice(t,1,...e.children):s.children.splice(t,1),t}}),toJsxRuntime(e,{Fragment:jsxRuntimeExports.Fragment,components:s,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0})}function defaultUrlTransform(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),s=e.indexOf("/");return-1===t||-1!==s&&t>s||-1!==r&&t>r||-1!==n&&t>n||safeProtocol.test(e.slice(0,t))?e:""}function useActionHandler(e){const{removeMessage:t,updateMessage:r}=useChannelActionContext("useActionHandler"),{channel:n}=useChannelStateContext("useActionHandler");return async(s,i,o)=>{if(o&&o.preventDefault(),!(e&&r&&t&&n))return void console.warn(handleActionWarning);const a=e.id;let l={};if("string"==typeof s?l[s]=i:l={...s},a){const s=await n.sendAction(a,l);(null==s?void 0:s.message)?r(s.message):t(e)}}}function areMessagesEqual(e,t){const r=(e,t)=>{var r,n,s,i,o,a;return e.deleted_at===t.deleted_at&&(null==(r=e.latest_reactions)?void 0:r.length)===(null==(n=t.latest_reactions)?void 0:n.length)&&(null==(s=e.own_reactions)?void 0:s.length)===(null==(i=t.own_reactions)?void 0:i.length)&&e.pinned===t.pinned&&e.reply_count===t.reply_count&&e.status===t.status&&e.text===t.text&&e.type===t.type&&e.updated_at===t.updated_at&&(null==(o=e.user)?void 0:o.updated_at)===(null==(a=t.user)?void 0:a.updated_at)};return r(e,t)&&Boolean(e.quoted_message)===Boolean(t.quoted_message)&&(!e.quoted_message&&!t.quoted_message||r(e.quoted_message,t.quoted_message))}function createEventHandler(e,t){return r=>{var n;"function"==typeof e&&(null==(n=null==t?void 0:t.mentioned_users)?void 0:n.length)&&e(r,t.mentioned_users)}}function useReactionsFetcher(e,t={}){const{client:r}=useChatContext("useRectionsFetcher"),{t:n}=useTranslationContext("useReactionFetcher"),{getErrorNotification:s,notify:i}=t;return async(t,o)=>{try{return await fetchMessageReactions(r,e.id,t,o)}catch(e3){const r=null==s?void 0:s(e);throw null==i||i(r||n("Error fetching reactions"),"error"),e3}}}async function fetchMessageReactions(e,t,r,n){const s=[];let i,o=!0;for(;o&&s.length<MAX_MESSAGE_REACTIONS_TO_FETCH;){const a=await e.queryReactions(t,r?{type:r}:{},n,{limit:25,next:i});s.push(...a.reactions),i=a.next,o=Boolean(i)}return s}function $431fbd86ca7dc216$var$isNode(e){return null!==e&&"object"==typeof e&&"nodeType"in e&&"number"==typeof e.nodeType}function $431fbd86ca7dc216$export$af51f0f06c0f328a(e){return $431fbd86ca7dc216$var$isNode(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}function $f4e2df6bd15f8569$export$98658e8c59125e6a(){return $f4e2df6bd15f8569$var$_shadowDOM}function $d4ee10de306f2510$export$4282f70798064fe0(e,t){if(!$f4e2df6bd15f8569$export$98658e8c59125e6a())return!(!t||!e)&&e.contains(t);if(!e||!t)return!1;let r=t;for(;null!==r;){if(r===e)return!0;r="SLOT"===r.tagName&&r.assignedSlot?r.assignedSlot.parentNode:$431fbd86ca7dc216$export$af51f0f06c0f328a(r)?r.host:r.parentNode}return!1}function $d4ee10de306f2510$export$e58f029f0fbfdb29(e){return $f4e2df6bd15f8569$export$98658e8c59125e6a()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function $dfc540311bf7f109$export$4d0f8be8b12a7ef6(e,t,r,n){return $f4e2df6bd15f8569$export$98658e8c59125e6a()?new $dfc540311bf7f109$export$63eb3ababa9c55c4(e,t,r,n):e.createTreeWalker(t,r,n)}function $7215afc6de606d6b$export$de79e2c695e052f3(e){if($7215afc6de606d6b$var$supportsPreventScroll())e.focus({preventScroll:!0});else{let t=$7215afc6de606d6b$var$getScrollableElements(e);e.focus(),$7215afc6de606d6b$var$restoreScrollPosition(t)}}function $7215afc6de606d6b$var$supportsPreventScroll(){if(null==$7215afc6de606d6b$var$supportsPreventScrollCached){$7215afc6de606d6b$var$supportsPreventScrollCached=!1;try{document.createElement("div").focus({get preventScroll(){return $7215afc6de606d6b$var$supportsPreventScrollCached=!0,!0}})}catch{}}return $7215afc6de606d6b$var$supportsPreventScrollCached}function $7215afc6de606d6b$var$getScrollableElements(e){let t=e.parentNode,r=[],n=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==n;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&r.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return n instanceof HTMLElement&&r.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),r}function $7215afc6de606d6b$var$restoreScrollPosition(e){for(let{element:t,scrollTop:r,scrollLeft:n}of e)t.scrollTop=r,t.scrollLeft=n}function $c87311424ea30a05$var$testUserAgent(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function $c87311424ea30a05$var$testPlatform(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function $c87311424ea30a05$var$cached(e){let t=null;return()=>(null==t&&(t=e()),t)}function $bbed8b41f857bcc0$var$setupGlobalEvents(){if("undefined"==typeof window)return;function e(e){return"propertyName"in e}let t=r=>{if(!e(r)||!r.target)return;let n=$bbed8b41f857bcc0$var$transitionsByElement.get(r.target);if(n&&(n.delete(r.propertyName),0===n.size&&(r.target.removeEventListener("transitioncancel",t),$bbed8b41f857bcc0$var$transitionsByElement.delete(r.target)),0===$bbed8b41f857bcc0$var$transitionsByElement.size)){for(let e of $bbed8b41f857bcc0$var$transitionCallbacks)e();$bbed8b41f857bcc0$var$transitionCallbacks.clear()}};document.body.addEventListener("transitionrun",r=>{if(!e(r)||!r.target)return;let n=$bbed8b41f857bcc0$var$transitionsByElement.get(r.target);n||(n=new Set,$bbed8b41f857bcc0$var$transitionsByElement.set(r.target,n),r.target.addEventListener("transitioncancel",t,{once:!0})),n.add(r.propertyName)}),document.body.addEventListener("transitionend",t)}function $bbed8b41f857bcc0$var$cleanupDetachedElements(){for(const[e]of $bbed8b41f857bcc0$var$transitionsByElement)"isConnected"in e&&!e.isConnected&&$bbed8b41f857bcc0$var$transitionsByElement.delete(e)}function $bbed8b41f857bcc0$export$24490316f764c430(e){requestAnimationFrame(()=>{$bbed8b41f857bcc0$var$cleanupDetachedElements(),0===$bbed8b41f857bcc0$var$transitionsByElement.size?e():$bbed8b41f857bcc0$var$transitionCallbacks.add(e)})}function $6a7db85432448f7f$export$60278871457622de(e){return!(0!==e.mozInputSource||!e.isTrusted)||($c87311424ea30a05$export$a11b0059900ceec8()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function $b4b717babfbb907b$export$4c063cf1350e6fed(e){return e.matches($b4b717babfbb907b$var$FOCUSABLE_ELEMENT_SELECTOR)}function $b4b717babfbb907b$export$bebd5a1431fec25d(e){return e.matches($b4b717babfbb907b$var$TABBABLE_ELEMENT_SELECTOR)}function $645f2e67b85a24c9$var$isStyleVisible(e){const t=$431fbd86ca7dc216$export$f21a1ffae260145a(e);if(!(e instanceof t.HTMLElement||e instanceof t.SVGElement))return!1;let{display:r,visibility:n}=e.style,s="none"!==r&&"hidden"!==n&&"collapse"!==n;if(s){const{getComputedStyle:t}=e.ownerDocument.defaultView;let{display:r,visibility:n}=t(e);s="none"!==r&&"hidden"!==n&&"collapse"!==n}return s}function $645f2e67b85a24c9$var$isAttributeVisible(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&("DETAILS"!==e.nodeName||!t||"SUMMARY"===t.nodeName||e.hasAttribute("open"))}function $645f2e67b85a24c9$export$e989c0fffaa6b27a(e,t){return"#comment"!==e.nodeName&&$645f2e67b85a24c9$var$isStyleVisible(e)&&$645f2e67b85a24c9$var$isAttributeVisible(e,t)&&(!e.parentElement||$645f2e67b85a24c9$export$e989c0fffaa6b27a(e.parentElement,e))}function $507fabe10e71c6fb$var$triggerChangeHandlers(e,t){for(let r of $507fabe10e71c6fb$var$changeHandlers)r(e,t)}function $507fabe10e71c6fb$var$isValidKey(e){return!(e.metaKey||!$c87311424ea30a05$export$9ac100e40613ea10()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}function $507fabe10e71c6fb$var$handleKeyboardEvent(e){$507fabe10e71c6fb$var$hasEventBeforeFocus=!0,$507fabe10e71c6fb$var$isValidKey(e)&&($507fabe10e71c6fb$var$currentModality="keyboard",$507fabe10e71c6fb$var$triggerChangeHandlers("keyboard",e))}function $507fabe10e71c6fb$var$handlePointerEvent(e){$507fabe10e71c6fb$var$currentModality="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||($507fabe10e71c6fb$var$hasEventBeforeFocus=!0,$507fabe10e71c6fb$var$triggerChangeHandlers("pointer",e))}function $507fabe10e71c6fb$var$handleClickEvent(e){$6a7db85432448f7f$export$60278871457622de(e)&&($507fabe10e71c6fb$var$hasEventBeforeFocus=!0,$507fabe10e71c6fb$var$currentModality="virtual")}function $507fabe10e71c6fb$var$handleFocusEvent(e){e.target!==window&&e.target!==document&&!$8a9cb279dc87e130$export$fda7da73ab5d4c48&&e.isTrusted&&($507fabe10e71c6fb$var$hasEventBeforeFocus||$507fabe10e71c6fb$var$hasBlurredWindowRecently||($507fabe10e71c6fb$var$currentModality="virtual",$507fabe10e71c6fb$var$triggerChangeHandlers("virtual",e)),$507fabe10e71c6fb$var$hasEventBeforeFocus=!1,$507fabe10e71c6fb$var$hasBlurredWindowRecently=!1)}function $507fabe10e71c6fb$var$handleWindowBlur(){$507fabe10e71c6fb$var$hasEventBeforeFocus=!1,$507fabe10e71c6fb$var$hasBlurredWindowRecently=!0}function $507fabe10e71c6fb$var$setupGlobalFocusEvents(e){if("undefined"==typeof window||"undefined"==typeof document||$507fabe10e71c6fb$export$d90243b58daecda7.get($431fbd86ca7dc216$export$f21a1ffae260145a(e)))return;const t=$431fbd86ca7dc216$export$f21a1ffae260145a(e),r=$431fbd86ca7dc216$export$b204af158042fbac(e);let n=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){$507fabe10e71c6fb$var$hasEventBeforeFocus=!0,n.apply(this,arguments)},r.addEventListener("keydown",$507fabe10e71c6fb$var$handleKeyboardEvent,!0),r.addEventListener("keyup",$507fabe10e71c6fb$var$handleKeyboardEvent,!0),r.addEventListener("click",$507fabe10e71c6fb$var$handleClickEvent,!0),t.addEventListener("focus",$507fabe10e71c6fb$var$handleFocusEvent,!0),t.addEventListener("blur",$507fabe10e71c6fb$var$handleWindowBlur,!1),"undefined"!=typeof PointerEvent&&(r.addEventListener("pointerdown",$507fabe10e71c6fb$var$handlePointerEvent,!0),r.addEventListener("pointermove",$507fabe10e71c6fb$var$handlePointerEvent,!0),r.addEventListener("pointerup",$507fabe10e71c6fb$var$handlePointerEvent,!0)),t.addEventListener("beforeunload",()=>{$507fabe10e71c6fb$var$tearDownWindowFocusTracking(e)},{once:!0}),$507fabe10e71c6fb$export$d90243b58daecda7.set(t,{focus:n})}function $507fabe10e71c6fb$export$2f1888112f558a7d(e){const t=$431fbd86ca7dc216$export$b204af158042fbac(e);let r;return"loading"!==t.readyState?$507fabe10e71c6fb$var$setupGlobalFocusEvents(e):(r=()=>{$507fabe10e71c6fb$var$setupGlobalFocusEvents(e)},t.addEventListener("DOMContentLoaded",r)),()=>$507fabe10e71c6fb$var$tearDownWindowFocusTracking(e,r)}function $507fabe10e71c6fb$export$630ff653c5ada6a9(){return $507fabe10e71c6fb$var$currentModality}function $3ad3f6e1647bc98d$export$80f3e147d781571c(e){const t=$431fbd86ca7dc216$export$b204af158042fbac(e),r=$d4ee10de306f2510$export$cd4e5573fbe2b576(t);if("virtual"===$507fabe10e71c6fb$export$630ff653c5ada6a9()){let n=r;$bbed8b41f857bcc0$export$24490316f764c430(()=>{$d4ee10de306f2510$export$cd4e5573fbe2b576(t)===n&&e.isConnected&&$7215afc6de606d6b$export$de79e2c695e052f3(e)})}else $7215afc6de606d6b$export$de79e2c695e052f3(e)}function $9bf71ea28793e738$export$20e40289641fbbb6(e){let{children:t,contain:r,restoreFocus:n,autoFocus:s}=e,i=reactExports.useRef(null),o=reactExports.useRef(null),a=reactExports.useRef([]),{parentNode:l}=reactExports.useContext($9bf71ea28793e738$var$FocusContext)||{},c=reactExports.useMemo(()=>new $9bf71ea28793e738$var$TreeNode({scopeRef:a}),[a]);$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{let e=l||$9bf71ea28793e738$export$d06fae2ee68b101e.root;if($9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(e.scopeRef)&&$9bf71ea28793e738$var$activeScope&&!$9bf71ea28793e738$var$isAncestorScope($9bf71ea28793e738$var$activeScope,e.scopeRef)){let t=$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode($9bf71ea28793e738$var$activeScope);t&&(e=t)}e.addChild(c),$9bf71ea28793e738$export$d06fae2ee68b101e.addNode(c)},[c,l]),$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{let e=$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(a);e&&(e.contain=!!r)},[r]),$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{var e;let t=null===(e=i.current)||void 0===e?void 0:e.nextSibling,r=[],n=e=>e.stopPropagation();for(;t&&t!==o.current;)r.push(t),t.addEventListener($9bf71ea28793e738$var$RESTORE_FOCUS_EVENT,n),t=t.nextSibling;return a.current=r,()=>{for(let e of r)e.removeEventListener($9bf71ea28793e738$var$RESTORE_FOCUS_EVENT,n)}},[t]),$9bf71ea28793e738$var$useActiveScopeTracker(a,n,r),$9bf71ea28793e738$var$useFocusContainment(a,r),$9bf71ea28793e738$var$useRestoreFocus(a,n,r),$9bf71ea28793e738$var$useAutoFocus(a,s),reactExports.useEffect(()=>{const e=$d4ee10de306f2510$export$cd4e5573fbe2b576($431fbd86ca7dc216$export$b204af158042fbac(a.current?a.current[0]:void 0));let t=null;if($9bf71ea28793e738$var$isElementInScope(e,a.current)){for(let r of $9bf71ea28793e738$export$d06fae2ee68b101e.traverse())r.scopeRef&&$9bf71ea28793e738$var$isElementInScope(e,r.scopeRef.current)&&(t=r);t===$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(a)&&($9bf71ea28793e738$var$activeScope=t.scopeRef)}},[a]),$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>()=>{var e,t,r;let n=null!==(r=null===(t=$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(a))||void 0===t||null===(e=t.parent)||void 0===e?void 0:e.scopeRef)&&void 0!==r?r:null;a!==$9bf71ea28793e738$var$activeScope&&!$9bf71ea28793e738$var$isAncestorScope(a,$9bf71ea28793e738$var$activeScope)||n&&!$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(n)||($9bf71ea28793e738$var$activeScope=n),$9bf71ea28793e738$export$d06fae2ee68b101e.removeTreeNode(a)},[a]);let u=reactExports.useMemo(()=>$9bf71ea28793e738$var$createFocusManagerForScope(a),[]),d=reactExports.useMemo(()=>({focusManager:u,parentNode:c}),[c,u]);return React$2.createElement($9bf71ea28793e738$var$FocusContext.Provider,{value:d},React$2.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),t,React$2.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:o}))}function $9bf71ea28793e738$var$createFocusManagerForScope(e){return{focusNext(t={}){let r=e.current,{from:n,tabbable:s,wrap:i,accept:o}=t;var a;let l=n||$d4ee10de306f2510$export$cd4e5573fbe2b576($431fbd86ca7dc216$export$b204af158042fbac(null!==(a=r[0])&&void 0!==a?a:void 0)),c=r[0].previousElementSibling,u=$9bf71ea28793e738$export$2d6ec8fc375ceafa($9bf71ea28793e738$var$getScopeRoot(r),{tabbable:s,accept:o},r);u.currentNode=$9bf71ea28793e738$var$isElementInScope(l,r)?l:c;let d=u.nextNode();return!d&&i&&(u.currentNode=c,d=u.nextNode()),d&&$9bf71ea28793e738$var$focusElement(d,!0),d},focusPrevious(t={}){let r=e.current,{from:n,tabbable:s,wrap:i,accept:o}=t;var a;let l=n||$d4ee10de306f2510$export$cd4e5573fbe2b576($431fbd86ca7dc216$export$b204af158042fbac(null!==(a=r[0])&&void 0!==a?a:void 0)),c=r[r.length-1].nextElementSibling,u=$9bf71ea28793e738$export$2d6ec8fc375ceafa($9bf71ea28793e738$var$getScopeRoot(r),{tabbable:s,accept:o},r);u.currentNode=$9bf71ea28793e738$var$isElementInScope(l,r)?l:c;let d=u.previousNode();return!d&&i&&(u.currentNode=c,d=u.previousNode()),d&&$9bf71ea28793e738$var$focusElement(d,!0),d},focusFirst(t={}){let r=e.current,{tabbable:n,accept:s}=t,i=$9bf71ea28793e738$export$2d6ec8fc375ceafa($9bf71ea28793e738$var$getScopeRoot(r),{tabbable:n,accept:s},r);i.currentNode=r[0].previousElementSibling;let o=i.nextNode();return o&&$9bf71ea28793e738$var$focusElement(o,!0),o},focusLast(t={}){let r=e.current,{tabbable:n,accept:s}=t,i=$9bf71ea28793e738$export$2d6ec8fc375ceafa($9bf71ea28793e738$var$getScopeRoot(r),{tabbable:n,accept:s},r);i.currentNode=r[r.length-1].nextElementSibling;let o=i.previousNode();return o&&$9bf71ea28793e738$var$focusElement(o,!0),o}}}function $9bf71ea28793e738$var$getScopeRoot(e){return e[0].parentElement}function $9bf71ea28793e738$var$shouldContainFocus(e){let t=$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode($9bf71ea28793e738$var$activeScope);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function $9bf71ea28793e738$var$useFocusContainment(e,t){let r=reactExports.useRef(void 0),n=reactExports.useRef(void 0);$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{let s=e.current;if(!t)return void(n.current&&(cancelAnimationFrame(n.current),n.current=void 0));const i=$431fbd86ca7dc216$export$b204af158042fbac(s?s[0]:void 0);let o=t=>{if("Tab"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!$9bf71ea28793e738$var$shouldContainFocus(e)||t.isComposing)return;let r=$d4ee10de306f2510$export$cd4e5573fbe2b576(i),n=e.current;if(!n||!$9bf71ea28793e738$var$isElementInScope(r,n))return;let s=$9bf71ea28793e738$export$2d6ec8fc375ceafa($9bf71ea28793e738$var$getScopeRoot(n),{tabbable:!0},n);if(!r)return;s.currentNode=r;let o=t.shiftKey?s.previousNode():s.nextNode();o||(s.currentNode=t.shiftKey?n[n.length-1].nextElementSibling:n[0].previousElementSibling,o=t.shiftKey?s.previousNode():s.nextNode()),t.preventDefault(),o&&$9bf71ea28793e738$var$focusElement(o,!0)},a=t=>{$9bf71ea28793e738$var$activeScope&&!$9bf71ea28793e738$var$isAncestorScope($9bf71ea28793e738$var$activeScope,e)||!$9bf71ea28793e738$var$isElementInScope($d4ee10de306f2510$export$e58f029f0fbfdb29(t),e.current)?$9bf71ea28793e738$var$shouldContainFocus(e)&&!$9bf71ea28793e738$var$isElementInChildScope($d4ee10de306f2510$export$e58f029f0fbfdb29(t),e)?r.current?r.current.focus():$9bf71ea28793e738$var$activeScope&&$9bf71ea28793e738$var$activeScope.current&&$9bf71ea28793e738$var$focusFirstInScope($9bf71ea28793e738$var$activeScope.current):$9bf71ea28793e738$var$shouldContainFocus(e)&&(r.current=$d4ee10de306f2510$export$e58f029f0fbfdb29(t)):($9bf71ea28793e738$var$activeScope=e,r.current=$d4ee10de306f2510$export$e58f029f0fbfdb29(t))},l=t=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{let n=$507fabe10e71c6fb$export$630ff653c5ada6a9(),s=("virtual"===n||null===n)&&$c87311424ea30a05$export$a11b0059900ceec8()&&$c87311424ea30a05$export$6446a186d09e379e(),o=$d4ee10de306f2510$export$cd4e5573fbe2b576(i);if(!s&&o&&$9bf71ea28793e738$var$shouldContainFocus(e)&&!$9bf71ea28793e738$var$isElementInChildScope(o,e)){$9bf71ea28793e738$var$activeScope=e;let n=$d4ee10de306f2510$export$e58f029f0fbfdb29(t);var a;if(n&&n.isConnected)r.current=n,null===(a=r.current)||void 0===a||a.focus();else $9bf71ea28793e738$var$activeScope.current&&$9bf71ea28793e738$var$focusFirstInScope($9bf71ea28793e738$var$activeScope.current)}})};return i.addEventListener("keydown",o,!1),i.addEventListener("focusin",a,!1),null==s||s.forEach(e=>e.addEventListener("focusin",a,!1)),null==s||s.forEach(e=>e.addEventListener("focusout",l,!1)),()=>{i.removeEventListener("keydown",o,!1),i.removeEventListener("focusin",a,!1),null==s||s.forEach(e=>e.removeEventListener("focusin",a,!1)),null==s||s.forEach(e=>e.removeEventListener("focusout",l,!1))}},[e,t]),$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function $9bf71ea28793e738$var$isElementInAnyScope(e){return $9bf71ea28793e738$var$isElementInChildScope(e)}function $9bf71ea28793e738$var$isElementInScope(e,t){return!!e&&(!!t&&t.some(t=>t.contains(e)))}function $9bf71ea28793e738$var$isElementInChildScope(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:r}of $9bf71ea28793e738$export$d06fae2ee68b101e.traverse($9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(t)))if(r&&$9bf71ea28793e738$var$isElementInScope(e,r.current))return!0;return!1}function $9bf71ea28793e738$var$isAncestorScope(e,t){var r;let n=null===(r=$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(t))||void 0===r?void 0:r.parent;for(;n;){if(n.scopeRef===e)return!0;n=n.parent}return!1}function $9bf71ea28793e738$var$focusElement(e,t=!1){if(null==e||t){if(null!=e)try{e.focus()}catch{}}else try{$3ad3f6e1647bc98d$export$80f3e147d781571c(e)}catch{}}function $9bf71ea28793e738$var$getFirstInScope(e,t=!0){let r=e[0].previousElementSibling,n=$9bf71ea28793e738$var$getScopeRoot(e),s=$9bf71ea28793e738$export$2d6ec8fc375ceafa(n,{tabbable:t},e);s.currentNode=r;let i=s.nextNode();return t&&!i&&(n=$9bf71ea28793e738$var$getScopeRoot(e),s=$9bf71ea28793e738$export$2d6ec8fc375ceafa(n,{tabbable:!1},e),s.currentNode=r,i=s.nextNode()),i}function $9bf71ea28793e738$var$focusFirstInScope(e,t=!0){$9bf71ea28793e738$var$focusElement($9bf71ea28793e738$var$getFirstInScope(e,t))}function $9bf71ea28793e738$var$useAutoFocus(e,t){const r=React$2.useRef(t);reactExports.useEffect(()=>{if(r.current){$9bf71ea28793e738$var$activeScope=e;const t=$431fbd86ca7dc216$export$b204af158042fbac(e.current?e.current[0]:void 0);!$9bf71ea28793e738$var$isElementInScope($d4ee10de306f2510$export$cd4e5573fbe2b576(t),$9bf71ea28793e738$var$activeScope.current)&&e.current&&$9bf71ea28793e738$var$focusFirstInScope(e.current)}r.current=!1},[e])}function $9bf71ea28793e738$var$useActiveScopeTracker(e,t,r){$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{if(t||r)return;let n=e.current;const s=$431fbd86ca7dc216$export$b204af158042fbac(n?n[0]:void 0);let i=t=>{let r=$d4ee10de306f2510$export$e58f029f0fbfdb29(t);$9bf71ea28793e738$var$isElementInScope(r,e.current)?$9bf71ea28793e738$var$activeScope=e:$9bf71ea28793e738$var$isElementInAnyScope(r)||($9bf71ea28793e738$var$activeScope=null)};return s.addEventListener("focusin",i,!1),null==n||n.forEach(e=>e.addEventListener("focusin",i,!1)),()=>{s.removeEventListener("focusin",i,!1),null==n||n.forEach(e=>e.removeEventListener("focusin",i,!1))}},[e,t,r])}function $9bf71ea28793e738$var$shouldRestoreFocus(e){let t=$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode($9bf71ea28793e738$var$activeScope);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(null==t?void 0:t.scopeRef)===e}function $9bf71ea28793e738$var$useRestoreFocus(e,t,r){const n=reactExports.useRef("undefined"!=typeof document?$d4ee10de306f2510$export$cd4e5573fbe2b576($431fbd86ca7dc216$export$b204af158042fbac(e.current?e.current[0]:void 0)):null);$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{let n=e.current;const s=$431fbd86ca7dc216$export$b204af158042fbac(n?n[0]:void 0);if(!t||r)return;let i=()=>{$9bf71ea28793e738$var$activeScope&&!$9bf71ea28793e738$var$isAncestorScope($9bf71ea28793e738$var$activeScope,e)||!$9bf71ea28793e738$var$isElementInScope($d4ee10de306f2510$export$cd4e5573fbe2b576(s),e.current)||($9bf71ea28793e738$var$activeScope=e)};return s.addEventListener("focusin",i,!1),null==n||n.forEach(e=>e.addEventListener("focusin",i,!1)),()=>{s.removeEventListener("focusin",i,!1),null==n||n.forEach(e=>e.removeEventListener("focusin",i,!1))}},[e,r]),$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{const n=$431fbd86ca7dc216$export$b204af158042fbac(e.current?e.current[0]:void 0);if(!t)return;let s=t=>{if("Tab"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!$9bf71ea28793e738$var$shouldContainFocus(e)||t.isComposing)return;let r=n.activeElement;if(!$9bf71ea28793e738$var$isElementInChildScope(r,e)||!$9bf71ea28793e738$var$shouldRestoreFocus(e))return;let s=$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(e);if(!s)return;let i=s.nodeToRestore,o=$9bf71ea28793e738$export$2d6ec8fc375ceafa(n.body,{tabbable:!0});o.currentNode=r;let a=t.shiftKey?o.previousNode():o.nextNode();if(i&&i.isConnected&&i!==n.body||(i=void 0,s.nodeToRestore=void 0),(!a||!$9bf71ea28793e738$var$isElementInChildScope(a,e))&&i){o.currentNode=i;do{a=t.shiftKey?o.previousNode():o.nextNode()}while($9bf71ea28793e738$var$isElementInChildScope(a,e));t.preventDefault(),t.stopPropagation(),a?$9bf71ea28793e738$var$focusElement(a,!0):$9bf71ea28793e738$var$isElementInAnyScope(i)?$9bf71ea28793e738$var$focusElement(i,!0):r.blur()}};return r||n.addEventListener("keydown",s,!0),()=>{r||n.removeEventListener("keydown",s,!0)}},[e,t,r]),$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{const r=$431fbd86ca7dc216$export$b204af158042fbac(e.current?e.current[0]:void 0);if(!t)return;let s=$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(e);var i;return s?(s.nodeToRestore=null!==(i=n.current)&&void 0!==i?i:void 0,()=>{let n=$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(e);if(!n)return;let s=n.nodeToRestore,i=$d4ee10de306f2510$export$cd4e5573fbe2b576(r);if(t&&s&&(i&&$9bf71ea28793e738$var$isElementInChildScope(i,e)||i===r.body&&$9bf71ea28793e738$var$shouldRestoreFocus(e))){let t=$9bf71ea28793e738$export$d06fae2ee68b101e.clone();requestAnimationFrame(()=>{if(r.activeElement===r.body){let r=t.getTreeNode(e);for(;r;){if(r.nodeToRestore&&r.nodeToRestore.isConnected)return void $9bf71ea28793e738$var$restoreFocusToElement(r.nodeToRestore);r=r.parent}for(r=t.getTreeNode(e);r;){if(r.scopeRef&&r.scopeRef.current&&$9bf71ea28793e738$export$d06fae2ee68b101e.getTreeNode(r.scopeRef)){return void $9bf71ea28793e738$var$restoreFocusToElement($9bf71ea28793e738$var$getFirstInScope(r.scopeRef.current,!0))}r=r.parent}}})}}):void 0},[e,t])}function $9bf71ea28793e738$var$restoreFocusToElement(e){e.dispatchEvent(new CustomEvent($9bf71ea28793e738$var$RESTORE_FOCUS_EVENT,{bubbles:!0,cancelable:!0}))&&$9bf71ea28793e738$var$focusElement(e)}function $9bf71ea28793e738$export$2d6ec8fc375ceafa(e,t,r){let n=(null==t?void 0:t.tabbable)?$b4b717babfbb907b$export$bebd5a1431fec25d:$b4b717babfbb907b$export$4c063cf1350e6fed,s=(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE?e:null,i=$431fbd86ca7dc216$export$b204af158042fbac(s),o=$dfc540311bf7f109$export$4d0f8be8b12a7ef6(i,e||i,NodeFilter.SHOW_ELEMENT,{acceptNode(e){var s;return(null==t||null===(s=t.from)||void 0===s?void 0:s.contains(e))?NodeFilter.FILTER_REJECT:!n(e)||!$645f2e67b85a24c9$export$e989c0fffaa6b27a(e)||r&&!$9bf71ea28793e738$var$isElementInScope(e,r)||(null==t?void 0:t.accept)&&!t.accept(e)?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}});return(null==t?void 0:t.from)&&(o.currentNode=t.from),o}function getNodeName(e){return e?(e.nodeName||"").toLowerCase():null}function getWindow(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function isElement(e){return e instanceof getWindow(e).Element||e instanceof Element}function isHTMLElement(e){return e instanceof getWindow(e).HTMLElement||e instanceof HTMLElement}function isShadowRoot(e){return"undefined"!=typeof ShadowRoot&&(e instanceof getWindow(e).ShadowRoot||e instanceof ShadowRoot)}function applyStyles(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var r=t.styles[e]||{},n=t.attributes[e]||{},s=t.elements[e];isHTMLElement(s)&&getNodeName(s)&&(Object.assign(s.style,r),Object.keys(n).forEach(function(e){var t=n[e];!1===t?s.removeAttribute(e):s.setAttribute(e,!0===t?"":t)}))})}function effect$2(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(e){var n=t.elements[e],s=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:r[e]).reduce(function(e,t){return e[t]="",e},{});isHTMLElement(n)&&getNodeName(n)&&(Object.assign(n.style,i),Object.keys(s).forEach(function(e){n.removeAttribute(e)}))})}}function getBasePlacement(e){return e.split("-")[0]}function getUAString(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=e.getBoundingClientRect(),s=1,i=1;t&&isHTMLElement(e)&&(s=e.offsetWidth>0&&round(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&round(n.height)/e.offsetHeight||1);var o=(isElement(e)?getWindow(e):window).visualViewport,a=!isLayoutViewport()&&r,l=(n.left+(a&&o?o.offsetLeft:0))/s,c=(n.top+(a&&o?o.offsetTop:0))/i,u=n.width/s,d=n.height/i;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function getLayoutRect(e){var t=getBoundingClientRect(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function contains(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&isShadowRoot(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function getComputedStyle$1(e){return getWindow(e).getComputedStyle(e)}function isTableElement(e){return["table","td","th"].indexOf(getNodeName(e))>=0}function getDocumentElement(e){return((isElement(e)?e.ownerDocument:e.document)||window.document).documentElement}function getParentNode(e){return"html"===getNodeName(e)?e:e.assignedSlot||e.parentNode||(isShadowRoot(e)?e.host:null)||getDocumentElement(e)}function getTrueOffsetParent(e){return isHTMLElement(e)&&"fixed"!==getComputedStyle$1(e).position?e.offsetParent:null}function getContainingBlock(e){var t=/firefox/i.test(getUAString());if(/Trident/i.test(getUAString())&&isHTMLElement(e)&&"fixed"===getComputedStyle$1(e).position)return null;var r=getParentNode(e);for(isShadowRoot(r)&&(r=r.host);isHTMLElement(r)&&["html","body"].indexOf(getNodeName(r))<0;){var n=getComputedStyle$1(r);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return r;r=r.parentNode}return null}function getOffsetParent(e){for(var t=getWindow(e),r=getTrueOffsetParent(e);r&&isTableElement(r)&&"static"===getComputedStyle$1(r).position;)r=getTrueOffsetParent(r);return r&&("html"===getNodeName(r)||"body"===getNodeName(r)&&"static"===getComputedStyle$1(r).position)?t:r||getContainingBlock(e)||t}function getMainAxisFromPlacement(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function within(e,t,r){return max(e,min(t,r))}function withinMaxClamp(e,t,r){var n=within(e,t,r);return n>r?r:n}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(e){return Object.assign({},getFreshSideObject(),e)}function expandToHashMap(e,t){return t.reduce(function(t,r){return t[r]=e,t},{})}function arrow(e){var t,r=e.state,n=e.name,s=e.options,i=r.elements.arrow,o=r.modifiersData.popperOffsets,a=getBasePlacement(r.placement),l=getMainAxisFromPlacement(a),c=[left,right].indexOf(a)>=0?"height":"width";if(i&&o){var u=toPaddingObject(s.padding,r),d=getLayoutRect(i),p="y"===l?top:left,m="y"===l?bottom:right,x=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],f=o[l]-r.rects.reference[l],h=getOffsetParent(i),g=h?"y"===l?h.clientHeight||0:h.clientWidth||0:0,y=x/2-f/2,j=u[p],b=g-d[c]-u[m],v=g/2-d[c]/2+y,E=within(j,v,b),R=l;r.modifiersData[n]=((t={})[R]=E,t.centerOffset=E-v,t)}}function effect$1(e){var t=e.state,r=e.options.element,n=void 0===r?"[data-popper-arrow]":r;null!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&contains(t.elements.popper,n)&&(t.elements.arrow=n)}function getVariation(e){return e.split("-")[1]}function roundOffsetsByDPR(e,t){var r=e.x,n=e.y,s=t.devicePixelRatio||1;return{x:round(r*s)/s||0,y:round(n*s)/s||0}}function mapToStyles(e){var t,r=e.popper,n=e.popperRect,s=e.placement,i=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,p=o.x,m=void 0===p?0:p,x=o.y,f=void 0===x?0:x,h="function"==typeof u?u({x:m,y:f}):{x:m,y:f};m=h.x,f=h.y;var g=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),j=left,b=top,v=window;if(c){var E=getOffsetParent(r),R="clientHeight",S="clientWidth";if(E===getWindow(r)&&"static"!==getComputedStyle$1(E=getDocumentElement(r)).position&&"absolute"===a&&(R="scrollHeight",S="scrollWidth"),s===top||(s===left||s===right)&&i===end)b=bottom,f-=(d&&E===v&&v.visualViewport?v.visualViewport.height:E[R])-n.height,f*=l?1:-1;if(s===left||(s===top||s===bottom)&&i===end)j=right,m-=(d&&E===v&&v.visualViewport?v.visualViewport.width:E[S])-n.width,m*=l?1:-1}var w,$=Object.assign({position:a},c&&unsetSides),N=!0===u?roundOffsetsByDPR({x:m,y:f},getWindow(r)):{x:m,y:f};return m=N.x,f=N.y,l?Object.assign({},$,((w={})[b]=y?"0":"",w[j]=g?"0":"",w.transform=(v.devicePixelRatio||1)<=1?"translate("+m+"px, "+f+"px)":"translate3d("+m+"px, "+f+"px, 0)",w)):Object.assign({},$,((t={})[b]=y?f+"px":"",t[j]=g?m+"px":"",t.transform="",t))}function computeStyles(e){var t=e.state,r=e.options,n=r.gpuAcceleration,s=void 0===n||n,i=r.adaptive,o=void 0===i||i,a=r.roundOffsets,l=void 0===a||a,c={placement:getBasePlacement(t.placement),variation:getVariation(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,mapToStyles(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,mapToStyles(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}function effect(e){var t=e.state,r=e.instance,n=e.options,s=n.scroll,i=void 0===s||s,o=n.resize,a=void 0===o||o,l=getWindow(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach(function(e){e.addEventListener("scroll",r.update,passive)}),a&&l.addEventListener("resize",r.update,passive),function(){i&&c.forEach(function(e){e.removeEventListener("scroll",r.update,passive)}),a&&l.removeEventListener("resize",r.update,passive)}}function getOppositePlacement(e){return e.replace(/left|right|bottom|top/g,function(e){return hash$1[e]})}function getOppositeVariationPlacement(e){return e.replace(/start|end/g,function(e){return hash[e]})}function getWindowScroll(e){var t=getWindow(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function getWindowScrollBarX(e){return getBoundingClientRect(getDocumentElement(e)).left+getWindowScroll(e).scrollLeft}function getViewportRect(e,t){var r=getWindow(e),n=getDocumentElement(e),s=r.visualViewport,i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;var c=isLayoutViewport();(c||!c&&"fixed"===t)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a+getWindowScrollBarX(e),y:l}}function getDocumentRect(e){var t,r=getDocumentElement(e),n=getWindowScroll(e),s=null==(t=e.ownerDocument)?void 0:t.body,i=max(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=max(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+getWindowScrollBarX(e),l=-n.scrollTop;return"rtl"===getComputedStyle$1(s||r).direction&&(a+=max(r.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:l}}function isScrollParent(e){var t=getComputedStyle$1(e),r=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+n)}function getScrollParent(e){return["html","body","#document"].indexOf(getNodeName(e))>=0?e.ownerDocument.body:isHTMLElement(e)&&isScrollParent(e)?e:getScrollParent(getParentNode(e))}function listScrollParents(e,t){var r;void 0===t&&(t=[]);var n=getScrollParent(e),s=n===(null==(r=e.ownerDocument)?void 0:r.body),i=getWindow(n),o=s?[i].concat(i.visualViewport||[],isScrollParent(n)?n:[]):n,a=t.concat(o);return s?a:a.concat(listScrollParents(getParentNode(o)))}function rectToClientRect(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function getInnerBoundingClientRect(e,t){var r=getBoundingClientRect(e,!1,"fixed"===t);return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function getClientRectFromMixedType(e,t,r){return t===viewport?rectToClientRect(getViewportRect(e,r)):isElement(t)?getInnerBoundingClientRect(t,r):rectToClientRect(getDocumentRect(getDocumentElement(e)))}function getClippingParents(e){var t=listScrollParents(getParentNode(e)),r=["absolute","fixed"].indexOf(getComputedStyle$1(e).position)>=0&&isHTMLElement(e)?getOffsetParent(e):e;return isElement(r)?t.filter(function(e){return isElement(e)&&contains(e,r)&&"body"!==getNodeName(e)}):[]}function getClippingRect(e,t,r,n){var s="clippingParents"===t?getClippingParents(e):[].concat(t),i=[].concat(s,[r]),o=i[0],a=i.reduce(function(t,r){var s=getClientRectFromMixedType(e,r,n);return t.top=max(s.top,t.top),t.right=min(s.right,t.right),t.bottom=min(s.bottom,t.bottom),t.left=max(s.left,t.left),t},getClientRectFromMixedType(e,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function computeOffsets(e){var t,r=e.reference,n=e.element,s=e.placement,i=s?getBasePlacement(s):null,o=s?getVariation(s):null,a=r.x+r.width/2-n.width/2,l=r.y+r.height/2-n.height/2;switch(i){case top:t={x:a,y:r.y-n.height};break;case bottom:t={x:a,y:r.y+r.height};break;case right:t={x:r.x+r.width,y:l};break;case left:t={x:r.x-n.width,y:l};break;default:t={x:r.x,y:r.y}}var c=i?getMainAxisFromPlacement(i):null;if(null!=c){var u="y"===c?"height":"width";switch(o){case start:t[c]=t[c]-(r[u]/2-n[u]/2);break;case end:t[c]=t[c]+(r[u]/2-n[u]/2)}}return t}function detectOverflow(e,t){void 0===t&&(t={});var r=t,n=r.placement,s=void 0===n?e.placement:n,i=r.strategy,o=void 0===i?e.strategy:i,a=r.boundary,l=void 0===a?clippingParents:a,c=r.rootBoundary,u=void 0===c?viewport:c,d=r.elementContext,p=void 0===d?popper:d,m=r.altBoundary,x=void 0!==m&&m,f=r.padding,h=void 0===f?0:f,g=mergePaddingObject("number"!=typeof h?h:expandToHashMap(h,basePlacements)),y=p===popper?reference:popper,j=e.rects.popper,b=e.elements[x?y:p],v=getClippingRect(isElement(b)?b:b.contextElement||getDocumentElement(e.elements.popper),l,u,o),E=getBoundingClientRect(e.elements.reference),R=computeOffsets({reference:E,element:j,placement:s}),S=rectToClientRect(Object.assign({},j,R)),w=p===popper?S:E,$={top:v.top-w.top+g.top,bottom:w.bottom-v.bottom+g.bottom,left:v.left-w.left+g.left,right:w.right-v.right+g.right},N=e.modifiersData.offset;if(p===popper&&N){var _=N[s];Object.keys($).forEach(function(e){var t=[right,bottom].indexOf(e)>=0?1:-1,r=[top,bottom].indexOf(e)>=0?"y":"x";$[e]+=_[r]*t})}return $}function computeAutoPlacement(e,t){void 0===t&&(t={});var r=t,n=r.placement,s=r.boundary,i=r.rootBoundary,o=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,c=void 0===l?placements:l,u=getVariation(n),d=u?a?variationPlacements:variationPlacements.filter(function(e){return getVariation(e)===u}):basePlacements,p=d.filter(function(e){return c.indexOf(e)>=0});0===p.length&&(p=d);var m=p.reduce(function(t,r){return t[r]=detectOverflow(e,{placement:r,boundary:s,rootBoundary:i,padding:o})[getBasePlacement(r)],t},{});return Object.keys(m).sort(function(e,t){return m[e]-m[t]})}function getExpandedFallbackPlacements(e){if(getBasePlacement(e)===auto)return[];var t=getOppositePlacement(e);return[getOppositeVariationPlacement(e),t,getOppositeVariationPlacement(t)]}function flip(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var s=r.mainAxis,i=void 0===s||s,o=r.altAxis,a=void 0===o||o,l=r.fallbackPlacements,c=r.padding,u=r.boundary,d=r.rootBoundary,p=r.altBoundary,m=r.flipVariations,x=void 0===m||m,f=r.allowedAutoPlacements,h=t.options.placement,g=getBasePlacement(h),y=l||(g===h||!x?[getOppositePlacement(h)]:getExpandedFallbackPlacements(h)),j=[h].concat(y).reduce(function(e,r){return e.concat(getBasePlacement(r)===auto?computeAutoPlacement(t,{placement:r,boundary:u,rootBoundary:d,padding:c,flipVariations:x,allowedAutoPlacements:f}):r)},[]),b=t.rects.reference,v=t.rects.popper,E=new Map,R=!0,S=j[0],w=0;w<j.length;w++){var $=j[w],N=getBasePlacement($),_=getVariation($)===start,C=[top,bottom].indexOf(N)>=0,O=C?"width":"height",T=detectOverflow(t,{placement:$,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),P=C?_?right:left:_?bottom:top;b[O]>v[O]&&(P=getOppositePlacement(P));var A=getOppositePlacement(P),k=[];if(i&&k.push(T[N]<=0),a&&k.push(T[P]<=0,T[A]<=0),k.every(function(e){return e})){S=$,R=!1;break}E.set($,k)}if(R)for(var I=function(e){var t=j.find(function(t){var r=E.get(t);if(r)return r.slice(0,e).every(function(e){return e})});if(t)return S=t,"break"},D=x?3:1;D>0;D--){if("break"===I(D))break}t.placement!==S&&(t.modifiersData[n]._skip=!0,t.placement=S,t.reset=!0)}}function getSideOffsets(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function isAnySideFullyClipped(e){return[top,right,bottom,left].some(function(t){return e[t]>=0})}function hide(e){var t=e.state,r=e.name,n=t.rects.reference,s=t.rects.popper,i=t.modifiersData.preventOverflow,o=detectOverflow(t,{elementContext:"reference"}),a=detectOverflow(t,{altBoundary:!0}),l=getSideOffsets(o,n),c=getSideOffsets(a,s,i),u=isAnySideFullyClipped(l),d=isAnySideFullyClipped(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}function distanceAndSkiddingToXY(e,t,r){var n=getBasePlacement(e),s=[left,top].indexOf(n)>=0?-1:1,i="function"==typeof r?r(Object.assign({},t,{placement:e})):r,o=i[0],a=i[1];return o=o||0,a=(a||0)*s,[left,right].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function offset(e){var t=e.state,r=e.options,n=e.name,s=r.offset,i=void 0===s?[0,0]:s,o=placements.reduce(function(e,r){return e[r]=distanceAndSkiddingToXY(r,t.rects,i),e},{}),a=o[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=o}function popperOffsets(e){var t=e.state,r=e.name;t.modifiersData[r]=computeOffsets({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}function getAltAxis(e){return"x"===e?"y":"x"}function preventOverflow(e){var t=e.state,r=e.options,n=e.name,s=r.mainAxis,i=void 0===s||s,o=r.altAxis,a=void 0!==o&&o,l=r.boundary,c=r.rootBoundary,u=r.altBoundary,d=r.padding,p=r.tether,m=void 0===p||p,x=r.tetherOffset,f=void 0===x?0:x,h=detectOverflow(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),g=getBasePlacement(t.placement),y=getVariation(t.placement),j=!y,b=getMainAxisFromPlacement(g),v=getAltAxis(b),E=t.modifiersData.popperOffsets,R=t.rects.reference,S=t.rects.popper,w="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,$="number"==typeof w?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),N=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,_={x:0,y:0};if(E){if(i){var C,O="y"===b?top:left,T="y"===b?bottom:right,P="y"===b?"height":"width",A=E[b],k=A+h[O],I=A-h[T],D=m?-S[P]/2:0,M=y===start?R[P]:S[P],L=y===start?-S[P]:-R[P],F=t.elements.arrow,B=m&&F?getLayoutRect(F):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:getFreshSideObject(),H=U[O],V=U[T],q=within(0,R[P],B[P]),W=j?R[P]/2-D-q-H-$.mainAxis:M-q-H-$.mainAxis,G=j?-R[P]/2+D+q+V+$.mainAxis:L+q+V+$.mainAxis,z=t.elements.arrow&&getOffsetParent(t.elements.arrow),K=z?"y"===b?z.clientTop||0:z.clientLeft||0:0,Q=null!=(C=null==N?void 0:N[b])?C:0,Y=A+G-Q,X=within(m?min(k,A+W-Q-K):k,A,m?max(I,Y):I);E[b]=X,_[b]=X-A}if(a){var J,Z="x"===b?top:left,ee="x"===b?bottom:right,te=E[v],re="y"===v?"height":"width",ne=te+h[Z],se=te-h[ee],ie=-1!==[top,left].indexOf(g),oe=null!=(J=null==N?void 0:N[v])?J:0,ae=ie?ne:te-R[re]-S[re]-oe+$.altAxis,le=ie?te+R[re]+S[re]-oe-$.altAxis:se,ce=m&&ie?withinMaxClamp(ae,te,le):within(m?ae:ne,te,m?le:se);E[v]=ce,_[v]=ce-te}t.modifiersData[n]=_}}function getHTMLElementScroll(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function getNodeScroll(e){return e!==getWindow(e)&&isHTMLElement(e)?getHTMLElementScroll(e):getWindowScroll(e)}function isElementScaled(e){var t=e.getBoundingClientRect(),r=round(t.width)/e.offsetWidth||1,n=round(t.height)/e.offsetHeight||1;return 1!==r||1!==n}function getCompositeRect(e,t,r){void 0===r&&(r=!1);var n=isHTMLElement(t),s=isHTMLElement(t)&&isElementScaled(t),i=getDocumentElement(t),o=getBoundingClientRect(e,s,r),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&(("body"!==getNodeName(t)||isScrollParent(i))&&(a=getNodeScroll(t)),isHTMLElement(t)?((l=getBoundingClientRect(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):i&&(l.x=getWindowScrollBarX(i))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function order(e){var t=new Map,r=new Set,n=[];function s(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!r.has(e)){var n=t.get(e);n&&s(n)}}),n.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){r.has(e.name)||s(e)}),n}function orderModifiers(e){var t=order(e);return modifierPhases.reduce(function(e,r){return e.concat(t.filter(function(e){return e.phase===r}))},[])}function debounce(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function mergeByName(e){var t=e.reduce(function(e,t){var r=e[t.name];return e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}function areValidElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function popperGenerator(e){void 0===e&&(e={});var t=e,r=t.defaultModifiers,n=void 0===r?[]:r,s=t.defaultOptions,i=void 0===s?DEFAULT_OPTIONS:s;return function(e,t,r){void 0===r&&(r=i);var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],a=!1,l={state:s,setOptions:function(r){var a="function"==typeof r?r(s.options):r;c(),s.options=Object.assign({},i,s.options,a),s.scrollParents={reference:isElement(e)?listScrollParents(e):e.contextElement?listScrollParents(e.contextElement):[],popper:listScrollParents(t)};var u=orderModifiers(mergeByName([].concat(n,s.options.modifiers)));return s.orderedModifiers=u.filter(function(e){return e.enabled}),s.orderedModifiers.forEach(function(e){var t=e.name,r=e.options,n=void 0===r?{}:r,i=e.effect;if("function"==typeof i){var a=i({state:s,name:t,instance:l,options:n}),c=function(){};o.push(a||c)}}),l.update()},forceUpdate:function(){if(!a){var e=s.elements,t=e.reference,r=e.popper;if(areValidElements(t,r)){s.rects={reference:getCompositeRect(t,getOffsetParent(r),"fixed"===s.options.strategy),popper:getLayoutRect(r)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach(function(e){return s.modifiersData[e.name]=Object.assign({},e.data)});for(var n=0;n<s.orderedModifiers.length;n++)if(!0!==s.reset){var i=s.orderedModifiers[n],o=i.fn,c=i.options,u=void 0===c?{}:c,d=i.name;"function"==typeof o&&(s=o({state:s,options:u,name:d,instance:l})||s)}else s.reset=!1,n=-1}}},update:debounce(function(){return new Promise(function(e){l.forceUpdate(),e(s)})}),destroy:function(){c(),a=!0}};if(!areValidElements(e,t))return l;function c(){o.forEach(function(e){return e()}),o=[]}return l.setOptions(r).then(function(e){!a&&r.onFirstUpdate&&r.onFirstUpdate(e)}),l}}function useDialogAnchor({open:e,placement:t,referenceElement:r}){const[n,s]=reactExports.useState(null),{attributes:i,styles:o,update:a}=usePopper(r,n,{modifiers:[{name:"eventListeners",options:{resize:!1,scroll:!1}}],placement:t});return reactExports.useEffect(()=>{e&&n&&(null==a||a())},[e,n,a]),n&&!e&&s(null),{attributes:i,setPopperElement:s,styles:o}}function escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,/\\^$|#]/g,"\\$&")}function anyFactory(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=convertElement(e[r]);return castFactory(function(...e){let r=-1;for(;++r<t.length;)if(t[r].apply(this,e))return!0;return!1})}function tagNameFactory(e){return castFactory(function(t){return t.tagName===e})}function castFactory(e){return function(t,r,n){return Boolean(looksLikeAnElement(t)&&e.call(this,t,"number"==typeof r?r:void 0,n||void 0))}}function element(e){return Boolean(e&&"object"==typeof e&&"type"in e&&"element"===e.type&&"tagName"in e&&"string"==typeof e.tagName)}function looksLikeAnElement(e){return null!==e&&"object"==typeof e&&"type"in e&&"tagName"in e}function escapeStringRegexp$1(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function findAndReplace$1(e,t,r){const n=convertElement(emptyOptions$1.ignore||defaultIgnore),s=toPairs$1(t);let i=-1;for(;++i<s.length;)visitParents(e,"text",o);function o(e,t){let r,o=-1;for(;++o<t.length;){const e=t[o],s=r?r.children:void 0;if(n(e,s?s.indexOf(e):void 0,r))return;r=e}if(r)return function(e,t){const r=t[t.length-1],n=s[i][0],o=s[i][1];let a=0;const l=r.children.indexOf(e);let c=!1,u=[];n.lastIndex=0;let d=n.exec(e.value);for(;d;){const r=d.index,s={index:d.index,input:d.input,stack:[...t,e]};let i=o(...d,s);if("string"==typeof i&&(i=i.length>0?{type:"text",value:i}:void 0),!1===i?n.lastIndex=r+1:(a!==r&&u.push({type:"text",value:e.value.slice(a,r)}),Array.isArray(i)?u.push(...i):i&&u.push(i),a=r+d[0].length,c=!0),!n.global)break;d=n.exec(e.value)}c?(a<e.value.length&&u.push({type:"text",value:e.value.slice(a)}),r.children.splice(l,1,...u)):u=[e];return l+u.length}(e,t)}}function toPairs$1(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let n=-1;for(;++n<r.length;){const e=r[n];t.push([toExpression$1(e[0]),toFunction$1(e[1])])}return t}function toExpression$1(e){return"string"==typeof e?new RegExp(escapeStringRegexp$1(e),"g"):e}function toFunction$1(e){return"function"==typeof e?e:function(){return e}}function u(e,t,r){const n={type:String(e)};return null!=r||"string"!=typeof t&&!Array.isArray(t)?Object.assign(n,t):r=t,Array.isArray(r)?n.children=r:null!=r&&(n.value=String(r)),n}function ccount(e,t){const r=String(e);if("string"!=typeof t)throw new TypeError("Expected character");let n=0,s=r.indexOf(t);for(;-1!==s;)n++,s=r.indexOf(t,s+t.length);return n}function escapeStringRegexp(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function findAndReplace(e,t,r){const n=convert((r||{}).ignore||[]),s=toPairs(t);let i=-1;for(;++i<s.length;)visitParents(e,"text",o);function o(e,t){let r,o=-1;for(;++o<t.length;){const e=t[o],s=r?r.children:void 0;if(n(e,s?s.indexOf(e):void 0,r))return;r=e}if(r)return function(e,t){const r=t[t.length-1],n=s[i][0],o=s[i][1];let a=0;const l=r.children.indexOf(e);let c=!1,u=[];n.lastIndex=0;let d=n.exec(e.value);for(;d;){const r=d.index,s={index:d.index,input:d.input,stack:[...t,e]};let i=o(...d,s);if("string"==typeof i&&(i=i.length>0?{type:"text",value:i}:void 0),!1===i?n.lastIndex=r+1:(a!==r&&u.push({type:"text",value:e.value.slice(a,r)}),Array.isArray(i)?u.push(...i):i&&u.push(i),a=r+d[0].length,c=!0),!n.global)break;d=n.exec(e.value)}c?(a<e.value.length&&u.push({type:"text",value:e.value.slice(a)}),r.children.splice(l,1,...u)):u=[e];return l+u.length}(e,t)}}function toPairs(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let n=-1;for(;++n<r.length;){const e=r[n];t.push([toExpression(e[0]),toFunction(e[1])])}return t}function toExpression(e){return"string"==typeof e?new RegExp(escapeStringRegexp(e),"g"):e}function toFunction(e){return"function"==typeof e?e:function(){return e}}function gfmAutolinkLiteralFromMarkdown(){return{transforms:[transformGfmAutolinkLiterals],enter:{literalAutolink:enterLiteralAutolink,literalAutolinkEmail:enterLiteralAutolinkValue,literalAutolinkHttp:enterLiteralAutolinkValue,literalAutolinkWww:enterLiteralAutolinkValue},exit:{literalAutolink:exitLiteralAutolink,literalAutolinkEmail:exitLiteralAutolinkEmail,literalAutolinkHttp:exitLiteralAutolinkHttp,literalAutolinkWww:exitLiteralAutolinkWww}}}function gfmAutolinkLiteralToMarkdown(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:inConstruct,notInConstruct:notInConstruct},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:inConstruct,notInConstruct:notInConstruct},{character:":",before:"[ps]",after:"\\/",inConstruct:inConstruct,notInConstruct:notInConstruct}]}}function enterLiteralAutolink(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function enterLiteralAutolinkValue(e){this.config.enter.autolinkProtocol.call(this,e)}function exitLiteralAutolinkHttp(e){this.config.exit.autolinkProtocol.call(this,e)}function exitLiteralAutolinkWww(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];ok$1("link"===t.type),t.url="http://"+this.sliceSerialize(e)}function exitLiteralAutolinkEmail(e){this.config.exit.autolinkEmail.call(this,e)}function exitLiteralAutolink(e){this.exit(e)}function transformGfmAutolinkLiterals(e){findAndReplace(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,findUrl],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),findEmail]],{ignore:["link","linkReference"]})}function findUrl(e,t,r,n,s){let i="";if(!previous(s))return!1;if(/^w/i.test(t)&&(r=t+r,t="",i="http://"),!isCorrectDomain(r))return!1;const o=splitUrl(r+n);if(!o[0])return!1;const a={type:"link",title:null,url:i+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function findEmail(e,t,r,n){return!(!previous(n,!0)||/[-\d_]$/.test(r))&&{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function isCorrectDomain(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function splitUrl(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],n=r.indexOf(")");const s=ccount(e,"(");let i=ccount(e,")");for(;-1!==n&&s>i;)e+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),i++;return[e,r]}function previous(e,t){const r=e.input.charCodeAt(e.index-1);return(0===e.index||unicodeWhitespace(r)||unicodePunctuation(r))&&(!t||47!==r)}function enterFootnoteCallString(){this.buffer()}function enterFootnoteCall(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function enterFootnoteDefinitionLabelString(){this.buffer()}function enterFootnoteDefinition(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function exitFootnoteCallString(e){const t=this.resume(),r=this.stack[this.stack.length-1];ok$1("footnoteReference"===r.type),r.identifier=normalizeIdentifier(this.sliceSerialize(e)).toLowerCase(),r.label=t}function exitFootnoteCall(e){this.exit(e)}function exitFootnoteDefinitionLabelString(e){const t=this.resume(),r=this.stack[this.stack.length-1];ok$1("footnoteDefinition"===r.type),r.identifier=normalizeIdentifier(this.sliceSerialize(e)).toLowerCase(),r.label=t}function exitFootnoteDefinition(e){this.exit(e)}function footnoteReferencePeek(){return"["}function footnoteReference(e,t,r,n){const s=r.createTracker(n);let i=s.move("[^");const o=r.enter("footnoteReference"),a=r.enter("reference");return i+=s.move(r.safe(r.associationId(e),{after:"]",before:i})),a(),o(),i+=s.move("]"),i}function gfmFootnoteFromMarkdown(){return{enter:{gfmFootnoteCallString:enterFootnoteCallString,gfmFootnoteCall:enterFootnoteCall,gfmFootnoteDefinitionLabelString:enterFootnoteDefinitionLabelString,gfmFootnoteDefinition:enterFootnoteDefinition},exit:{gfmFootnoteCallString:exitFootnoteCallString,gfmFootnoteCall:exitFootnoteCall,gfmFootnoteDefinitionLabelString:exitFootnoteDefinitionLabelString,gfmFootnoteDefinition:exitFootnoteDefinition}}}function gfmFootnoteToMarkdown(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,r,n,s){const i=n.createTracker(s);let o=i.move("[^");const a=n.enter("footnoteDefinition"),l=n.enter("label");o+=i.move(n.safe(n.associationId(e),{before:o,after:"]"})),l(),o+=i.move("]:"),e.children&&e.children.length>0&&(i.shift(4),o+=i.move((t?"\n":" ")+n.indentLines(n.containerFlow(e,i.current()),t?mapAll:mapExceptFirst)));return a(),o},footnoteReference:footnoteReference},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function mapExceptFirst(e,t,r){return 0===t?e:mapAll(e,t,r)}function mapAll(e,t,r){return(r?"":"    ")+e}function gfmStrikethroughFromMarkdown(){return{canContainEols:["delete"],enter:{strikethrough:enterStrikethrough},exit:{strikethrough:exitStrikethrough}}}function gfmStrikethroughToMarkdown(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:constructsWithoutStrikethrough}],handlers:{delete:handleDelete}}}function enterStrikethrough(e){this.enter({type:"delete",children:[]},e)}function exitStrikethrough(e){this.exit(e)}function handleDelete(e,t,r,n){const s=r.createTracker(n),i=r.enter("strikethrough");let o=s.move("~~");return o+=r.containerPhrasing(e,{...s.current(),before:o,after:"~"}),o+=s.move("~~"),i(),o}function peekDelete(){return"~"}function defaultStringLength(e){return e.length}function markdownTable(e,t){const r=t||{},n=(r.align||[]).concat(),s=r.stringLength||defaultStringLength,i=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<e.length;){const t=[],n=[];let i=-1;for(e[u].length>c&&(c=e[u].length);++i<e[u].length;){const o=serialize(e[u][i]);if(!1!==r.alignDelimiters){const e=s(o);n[i]=e,(void 0===l[i]||e>l[i])&&(l[i]=e)}t.push(o)}o[u]=t,a[u]=n}let d=-1;if("object"==typeof n&&"length"in n)for(;++d<c;)i[d]=toAlignment(n[d]);else{const e=toAlignment(n);for(;++d<c;)i[d]=e}d=-1;const p=[],m=[];for(;++d<c;){const e=i[d];let t="",n="";99===e?(t=":",n=":"):108===e?t=":":114===e&&(n=":");let s=!1===r.alignDelimiters?1:Math.max(1,l[d]-t.length-n.length);const o=t+"-".repeat(s)+n;!1!==r.alignDelimiters&&(s=t.length+s+n.length,s>l[d]&&(l[d]=s),m[d]=s),p[d]=o}o.splice(1,0,p),a.splice(1,0,m),u=-1;const x=[];for(;++u<o.length;){const e=o[u],t=a[u];d=-1;const n=[];for(;++d<c;){const s=e[d]||"";let o="",a="";if(!1!==r.alignDelimiters){const e=l[d]-(t[d]||0),r=i[d];114===r?o=" ".repeat(e):99===r?e%2?(o=" ".repeat(e/2+.5),a=" ".repeat(e/2-.5)):(o=" ".repeat(e/2),a=o):a=" ".repeat(e)}!1===r.delimiterStart||d||n.push("|"),!1===r.padding||!1===r.alignDelimiters&&""===s||!1===r.delimiterStart&&!d||n.push(" "),!1!==r.alignDelimiters&&n.push(o),n.push(s),!1!==r.alignDelimiters&&n.push(a),!1!==r.padding&&n.push(" "),!1===r.delimiterEnd&&d===c-1||n.push("|")}x.push(!1===r.delimiterEnd?n.join("").replace(/ +$/,""):n.join(""))}return x.join("\n")}function serialize(e){return null==e?"":String(e)}function toAlignment(e){const t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function blockquote(e,t,r,n){const s=r.enter("blockquote"),i=r.createTracker(n);i.move("> "),i.shift(2);const o=r.indentLines(r.containerFlow(e,i.current()),map$1);return s(),o}function map$1(e,t,r){return">"+(r?"":" ")+e}function patternInScope(e,t){return listInScope(e,t.inConstruct,!0)&&!listInScope(e,t.notInConstruct,!1)}function listInScope(e,t,r){if("string"==typeof t&&(t=[t]),!t||0===t.length)return r;let n=-1;for(;++n<t.length;)if(e.includes(t[n]))return!0;return!1}function hardBreak(e,t,r,n){let s=-1;for(;++s<r.unsafe.length;)if("\n"===r.unsafe[s].character&&patternInScope(r.stack,r.unsafe[s]))return/[ \t]/.test(n.before)?"":" ";return"\\\n"}function longestStreak(e,t){const r=String(e);let n=r.indexOf(t),s=n,i=0,o=0;if("string"!=typeof t)throw new TypeError("Expected substring");for(;-1!==n;)n===s?++i>o&&(o=i):i=1,s=n+t.length,n=r.indexOf(t,s);return o}function formatCodeAsIndented(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function checkFence(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function code$1(e,t,r,n){const s=checkFence(r),i=e.value||"",o="`"===s?"GraveAccent":"Tilde";if(formatCodeAsIndented(e,r)){const e=r.enter("codeIndented"),t=r.indentLines(i,map);return e(),t}const a=r.createTracker(n),l=s.repeat(Math.max(longestStreak(i,s)+1,3)),c=r.enter("codeFenced");let u=a.move(l);if(e.lang){const t=r.enter(`codeFencedLang${o}`);u+=a.move(r.safe(e.lang,{before:u,after:" ",encode:["`"],...a.current()})),t()}if(e.lang&&e.meta){const t=r.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(r.safe(e.meta,{before:u,after:"\n",encode:["`"],...a.current()})),t()}return u+=a.move("\n"),i&&(u+=a.move(i+"\n")),u+=a.move(l),c(),u}function map(e,t,r){return(r?"":"    ")+e}function checkQuote(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function definition(e,t,r,n){const s=checkQuote(r),i='"'===s?"Quote":"Apostrophe",o=r.enter("definition");let a=r.enter("label");const l=r.createTracker(n);let c=l.move("[");return c+=l.move(r.safe(r.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(e.url,{before:c,after:e.title?" ":"\n",...l.current()}))),a(),e.title&&(a=r.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(r.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),o(),c}function checkEmphasis(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function encodeCharacterReference(e){return"&#x"+e.toString(16).toUpperCase()+";"}function encodeInfo(e,t,r){const n=classifyCharacter(e),s=classifyCharacter(t);return void 0===n?void 0===s?"_"===r?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===s?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===n?void 0===s?{inside:!1,outside:!1}:1===s?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===s?{inside:!1,outside:!1}:1===s?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function emphasis(e,t,r,n){const s=checkEmphasis(r),i=r.enter("emphasis"),o=r.createTracker(n),a=o.move(s);let l=o.move(r.containerPhrasing(e,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),u=encodeInfo(n.before.charCodeAt(n.before.length-1),c,s);u.inside&&(l=encodeCharacterReference(c)+l.slice(1));const d=l.charCodeAt(l.length-1),p=encodeInfo(n.after.charCodeAt(0),d,s);p.inside&&(l=l.slice(0,-1)+encodeCharacterReference(d));const m=o.move(s);return i(),r.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},a+l+m}function emphasisPeek(e,t,r){return r.options.emphasis||"*"}function formatHeadingAsSetext(e,t){let r=!1;return visit(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return r=!0,EXIT}),Boolean((!e.depth||e.depth<3)&&toString$1(e)&&(t.options.setext||r))}function heading(e,t,r,n){const s=Math.max(Math.min(6,e.depth||1),1),i=r.createTracker(n);if(formatHeadingAsSetext(e,r)){const t=r.enter("headingSetext"),n=r.enter("phrasing"),o=r.containerPhrasing(e,{...i.current(),before:"\n",after:"\n"});return n(),t(),o+"\n"+(1===s?"=":"-").repeat(o.length-(Math.max(o.lastIndexOf("\r"),o.lastIndexOf("\n"))+1))}const o="#".repeat(s),a=r.enter("headingAtx"),l=r.enter("phrasing");i.move(o+" ");let c=r.containerPhrasing(e,{before:"# ",after:"\n",...i.current()});return/^[\t ]/.test(c)&&(c=encodeCharacterReference(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,r.options.closeAtx&&(c+=" "+o),l(),a(),c}function html(e){return e.value||""}function htmlPeek(){return"<"}function image(e,t,r,n){const s=checkQuote(r),i='"'===s?"Quote":"Apostrophe",o=r.enter("image");let a=r.enter("label");const l=r.createTracker(n);let c=l.move("![");return c+=l.move(r.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=r.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(r.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),c+=l.move(")"),o(),c}function imagePeek(){return"!"}function imageReference(e,t,r,n){const s=e.referenceType,i=r.enter("imageReference");let o=r.enter("label");const a=r.createTracker(n);let l=a.move("![");const c=r.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=r.stack;r.stack=[],o=r.enter("reference");const d=r.safe(r.associationId(e),{before:l,after:"]",...a.current()});return o(),r.stack=u,i(),"full"!==s&&c&&c===d?"shortcut"===s?l=l.slice(0,-1):l+=a.move("]"):l+=a.move(d+"]"),l}function imageReferencePeek(){return"!"}function inlineCode(e,t,r){let n=e.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(n);)s+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++i<r.unsafe.length;){const e=r.unsafe[i],t=r.compilePattern(e);let s;if(e.atBreak)for(;s=t.exec(n);){let e=s.index;10===n.charCodeAt(e)&&13===n.charCodeAt(e-1)&&e--,n=n.slice(0,e)+" "+n.slice(s.index+1)}}return s+n+s}function inlineCodePeek(){return"`"}function formatLinkAsAutolink(e,t){const r=toString$1(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function link(e,t,r,n){const s=checkQuote(r),i='"'===s?"Quote":"Apostrophe",o=r.createTracker(n);let a,l;if(formatLinkAsAutolink(e,r)){const t=r.stack;r.stack=[],a=r.enter("autolink");let n=o.move("<");return n+=o.move(r.containerPhrasing(e,{before:n,after:">",...o.current()})),n+=o.move(">"),a(),r.stack=t,n}a=r.enter("link"),l=r.enter("label");let c=o.move("[");return c+=o.move(r.containerPhrasing(e,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(r.safe(e.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=r.enter("destinationRaw"),c+=o.move(r.safe(e.url,{before:c,after:e.title?" ":")",...o.current()}))),l(),e.title&&(l=r.enter(`title${i}`),c+=o.move(" "+s),c+=o.move(r.safe(e.title,{before:c,after:s,...o.current()})),c+=o.move(s),l()),c+=o.move(")"),a(),c}function linkPeek(e,t,r){return formatLinkAsAutolink(e,r)?"<":"["}function linkReference(e,t,r,n){const s=e.referenceType,i=r.enter("linkReference");let o=r.enter("label");const a=r.createTracker(n);let l=a.move("[");const c=r.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=r.stack;r.stack=[],o=r.enter("reference");const d=r.safe(r.associationId(e),{before:l,after:"]",...a.current()});return o(),r.stack=u,i(),"full"!==s&&c&&c===d?"shortcut"===s?l=l.slice(0,-1):l+=a.move("]"):l+=a.move(d+"]"),l}function linkReferencePeek(){return"["}function checkBullet(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function checkBulletOther(e){const t=checkBullet(e),r=e.options.bulletOther;if(!r)return"*"===t?"-":"*";if("*"!==r&&"+"!==r&&"-"!==r)throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function checkBulletOrdered(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function checkRule(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function list(e,t,r,n){const s=r.enter("list"),i=r.bulletCurrent;let o=e.ordered?checkBulletOrdered(r):checkBullet(r);const a=e.ordered?"."===o?")":".":checkBulletOther(r);let l=!(!t||!r.bulletLastUsed)&&o===r.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==o&&"-"!==o||!t||t.children&&t.children[0]||"list"!==r.stack[r.stack.length-1]||"listItem"!==r.stack[r.stack.length-2]||"list"!==r.stack[r.stack.length-3]||"listItem"!==r.stack[r.stack.length-4]||0!==r.indexStack[r.indexStack.length-1]||0!==r.indexStack[r.indexStack.length-2]||0!==r.indexStack[r.indexStack.length-3]||(l=!0),checkRule(r)===o&&t){let t=-1;for(;++t<e.children.length;){const r=e.children[t];if(r&&"listItem"===r.type&&r.children&&r.children[0]&&"thematicBreak"===r.children[0].type){l=!0;break}}}}l&&(o=a),r.bulletCurrent=o;const c=r.containerFlow(e,n);return r.bulletLastUsed=o,r.bulletCurrent=i,s(),c}function checkListItemIndent(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function listItem(e,t,r,n){const s=checkListItemIndent(r);let i=r.bulletCurrent||checkBullet(r);t&&"list"===t.type&&t.ordered&&(i=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===r.options.incrementListMarker?0:t.children.indexOf(e))+i);let o=i.length+1;("tab"===s||"mixed"===s&&(t&&"list"===t.type&&t.spread||e.spread))&&(o=4*Math.ceil(o/4));const a=r.createTracker(n);a.move(i+" ".repeat(o-i.length)),a.shift(o);const l=r.enter("listItem"),c=r.indentLines(r.containerFlow(e,a.current()),function(e,t,r){if(t)return(r?"":" ".repeat(o))+e;return(r?i:i+" ".repeat(o-i.length))+e});return l(),c}function paragraph(e,t,r,n){const s=r.enter("paragraph"),i=r.enter("phrasing"),o=r.containerPhrasing(e,n);return i(),s(),o}function root(e,t,r,n){return(e.children.some(function(e){return phrasing(e)})?r.containerPhrasing:r.containerFlow).call(r,e,n)}function checkStrong(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}function strong(e,t,r,n){const s=checkStrong(r),i=r.enter("strong"),o=r.createTracker(n),a=o.move(s+s);let l=o.move(r.containerPhrasing(e,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),u=encodeInfo(n.before.charCodeAt(n.before.length-1),c,s);u.inside&&(l=encodeCharacterReference(c)+l.slice(1));const d=l.charCodeAt(l.length-1),p=encodeInfo(n.after.charCodeAt(0),d,s);p.inside&&(l=l.slice(0,-1)+encodeCharacterReference(d));const m=o.move(s+s);return i(),r.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},a+l+m}function strongPeek(e,t,r){return r.options.strong||"*"}function text$1(e,t,r,n){return r.safe(e.value,n)}function checkRuleRepetition(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function thematicBreak(e,t,r){const n=(checkRule(r)+(r.options.ruleSpaces?" ":"")).repeat(checkRuleRepetition(r));return r.options.ruleSpaces?n.slice(0,-1):n}function gfmTableFromMarkdown(){return{enter:{table:enterTable,tableData:enterCell,tableHeader:enterCell,tableRow:enterRow},exit:{codeText:exitCodeText,table:exitTable,tableData:exit,tableHeader:exit,tableRow:exit}}}function enterTable(e){const t=e._align;this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function exitTable(e){this.exit(e),this.data.inTable=void 0}function enterRow(e){this.enter({type:"tableRow",children:[]},e)}function exit(e){this.exit(e)}function enterCell(e){this.enter({type:"tableCell",children:[]},e)}function exitCodeText(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,replace));const r=this.stack[this.stack.length-1];ok$1("inlineCode"===r.type),r.value=t,this.exit(e)}function replace(e,t){return"|"===t?t:e}function gfmTableToMarkdown(e){const t=e||{},r=t.tableCellPadding,n=t.tablePipeAlign,s=t.stringLength,i=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,r){let n=handle.inlineCode(e,t,r);r.stack.includes("tableCell")&&(n=n.replace(/\|/g,"\\$&"));return n},table:function(e,t,r,n){return a(function(e,t,r){const n=e.children;let s=-1;const i=[],o=t.enter("table");for(;++s<n.length;)i[s]=l(n[s],t,r);return o(),i}(e,r,n),e.align)},tableCell:o,tableRow:function(e,t,r,n){const s=a([l(e,r,n)]);return s.slice(0,s.indexOf("\n"))}}};function o(e,t,r,n){const s=r.enter("tableCell"),o=r.enter("phrasing"),a=r.containerPhrasing(e,{...n,before:i,after:i});return o(),s(),a}function a(e,t){return markdownTable(e,{align:t,alignDelimiters:n,padding:r,stringLength:s})}function l(e,t,r){const n=e.children;let s=-1;const i=[],a=t.enter("tableRow");for(;++s<n.length;)i[s]=o(n[s],0,t,r);return a(),i}}function gfmTaskListItemFromMarkdown(){return{exit:{taskListCheckValueChecked:exitCheck,taskListCheckValueUnchecked:exitCheck,paragraph:exitParagraphWithTaskListItem}}}function gfmTaskListItemToMarkdown(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:listItemWithTaskListItem}}}function exitCheck(e){const t=this.stack[this.stack.length-2];ok$1("listItem"===t.type),t.checked="taskListCheckValueChecked"===e.type}function exitParagraphWithTaskListItem(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){const e=this.stack[this.stack.length-1];ok$1("paragraph"===e.type);const r=e.children[0];if(r&&"text"===r.type){const n=t.children;let s,i=-1;for(;++i<n.length;){const e=n[i];if("paragraph"===e.type){s=e;break}}s===e&&(r.value=r.value.slice(1),0===r.value.length?e.children.shift():e.position&&r.position&&"number"==typeof r.position.start.offset&&(r.position.start.column++,r.position.start.offset++,e.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function listItemWithTaskListItem(e,t,r,n){const s=e.children[0],i="boolean"==typeof e.checked&&s&&"paragraph"===s.type,o="["+(e.checked?"x":" ")+"] ",a=r.createTracker(n);i&&a.move(o);let l=handle.listItem(e,t,r,{...n,...a.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+o})),l}function gfmFromMarkdown(){return[gfmAutolinkLiteralFromMarkdown(),gfmFootnoteFromMarkdown(),gfmStrikethroughFromMarkdown(),gfmTableFromMarkdown(),gfmTaskListItemFromMarkdown()]}function gfmToMarkdown(e){return{extensions:[gfmAutolinkLiteralToMarkdown(),gfmFootnoteToMarkdown(e),gfmStrikethroughToMarkdown(),gfmTableToMarkdown(e),gfmTaskListItemToMarkdown()]}}function gfmAutolinkLiteral(){return{text:text}}function tokenizeEmailAutolink(e,t,r){const n=this;let s,i;return function(t){if(!gfmAtext(t)||!previousEmail.call(n,n.previous)||previousUnbalanced(n.events))return r(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(t)};function o(t){return gfmAtext(t)?(e.consume(t),o):64===t?(e.consume(t),a):r(t)}function a(t){return 46===t?e.check(emailDomainDotTrail,c,l)(t):45===t||95===t||asciiAlphanumeric(t)?(i=!0,e.consume(t),a):c(t)}function l(t){return e.consume(t),s=!0,a}function c(o){return i&&s&&asciiAlpha(n.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(o)):r(o)}}function tokenizeWwwAutolink(e,t,r){const n=this;return function(t){if(87!==t&&119!==t||!previousWww.call(n,n.previous)||previousUnbalanced(n.events))return r(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(wwwPrefix,e.attempt(domain,e.attempt(path,s),r),r)(t)};function s(r){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(r)}}function tokenizeProtocolAutolink(e,t,r){const n=this;let s="",i=!1;return function(t){if((72===t||104===t)&&previousProtocol.call(n,n.previous)&&!previousUnbalanced(n.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(t),e.consume(t),o;return r(t)};function o(t){if(asciiAlpha(t)&&s.length<5)return s+=String.fromCodePoint(t),e.consume(t),o;if(58===t){const r=s.toLowerCase();if("http"===r||"https"===r)return e.consume(t),a}return r(t)}function a(t){return 47===t?(e.consume(t),i?l:(i=!0,a)):r(t)}function l(t){return null===t||asciiControl(t)||markdownLineEndingOrSpace(t)||unicodeWhitespace(t)||unicodePunctuation(t)?r(t):e.attempt(domain,e.attempt(path,c),r)(t)}function c(r){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(r)}}function tokenizeWwwPrefix(e,t,r){let n=0;return function t(i){if((87===i||119===i)&&n<3)return n++,e.consume(i),t;if(46===i&&3===n)return e.consume(i),s;return r(i)};function s(e){return null===e?r(e):t(e)}}function tokenizeDomain(e,t,r){let n,s,i;return o;function o(t){return 46===t||95===t?e.check(trail,l,a)(t):null===t||markdownLineEndingOrSpace(t)||unicodeWhitespace(t)||45!==t&&unicodePunctuation(t)?l(t):(i=!0,e.consume(t),o)}function a(t){return 95===t?n=!0:(s=n,n=void 0),e.consume(t),o}function l(e){return s||n||!i?r(e):t(e)}}function tokenizePath(e,t){let r=0,n=0;return s;function s(o){return 40===o?(r++,e.consume(o),s):41===o&&n<r?i(o):33===o||34===o||38===o||39===o||41===o||42===o||44===o||46===o||58===o||59===o||60===o||63===o||93===o||95===o||126===o?e.check(trail,t,i)(o):null===o||markdownLineEndingOrSpace(o)||unicodeWhitespace(o)?t(o):(e.consume(o),s)}function i(t){return 41===t&&n++,e.consume(t),s}}function tokenizeTrail(e,t,r){return n;function n(o){return 33===o||34===o||39===o||41===o||42===o||44===o||46===o||58===o||59===o||63===o||95===o||126===o?(e.consume(o),n):38===o?(e.consume(o),i):93===o?(e.consume(o),s):60===o||null===o||markdownLineEndingOrSpace(o)||unicodeWhitespace(o)?t(o):r(o)}function s(e){return null===e||40===e||91===e||markdownLineEndingOrSpace(e)||unicodeWhitespace(e)?t(e):n(e)}function i(e){return asciiAlpha(e)?o(e):r(e)}function o(t){return 59===t?(e.consume(t),n):asciiAlpha(t)?(e.consume(t),o):r(t)}}function tokenizeEmailDomainDotTrail(e,t,r){return function(t){return e.consume(t),n};function n(e){return asciiAlphanumeric(e)?r(e):t(e)}}function previousWww(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||markdownLineEndingOrSpace(e)}function previousProtocol(e){return!asciiAlpha(e)}function previousEmail(e){return!(47===e||gfmAtext(e))}function gfmAtext(e){return 43===e||45===e||46===e||95===e||asciiAlphanumeric(e)}function previousUnbalanced(e){let t=e.length,r=!1;for(;t--;){const n=e[t][1];if(("labelLink"===n.type||"labelImage"===n.type)&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}function gfmFootnote(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:tokenizeDefinitionStart,continuation:{tokenize:tokenizeDefinitionContinuation},exit:gfmFootnoteDefinitionEnd}},text:{91:{name:"gfmFootnoteCall",tokenize:tokenizeGfmFootnoteCall},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:tokenizePotentialGfmFootnoteCall,resolveTo:resolveToPotentialGfmFootnoteCall}}}}function tokenizePotentialGfmFootnoteCall(e,t,r){const n=this;let s=n.events.length;const i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let o;for(;s--;){const e=n.events[s][1];if("labelImage"===e.type){o=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(s){if(!o||!o._balanced)return r(s);const a=normalizeIdentifier(n.sliceSerialize({start:o.end,end:n.now()}));if(94!==a.codePointAt(0)||!i.includes(a.slice(1)))return r(s);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),t(s)}}function resolveToPotentialGfmFootnoteCall(e,t){let r=e.length;for(;r--;)if("labelImage"===e[r][1].type&&"enter"===e[r][0]){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},a=[e[r+1],e[r+2],["enter",n,t],e[r+3],e[r+4],["enter",s,t],["exit",s,t],["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",n,t]];return e.splice(r,e.length-r+1,...a),e}function tokenizeGfmFootnoteCall(e,t,r){const n=this,s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i,o=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),a};function a(t){return 94!==t?r(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(a){if(o>999||93===a&&!i||null===a||91===a||markdownLineEndingOrSpace(a))return r(a);if(93===a){e.exit("chunkString");const i=e.exit("gfmFootnoteCallString");return s.includes(normalizeIdentifier(n.sliceSerialize(i)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(a),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(a)}return markdownLineEndingOrSpace(a)||(i=!0),o++,e.consume(a),92===a?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),o++,l):l(t)}}function tokenizeDefinitionStart(e,t,r){const n=this,s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i,o,a=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):r(t)}function c(t){if(a>999||93===t&&!o||null===t||91===t||markdownLineEndingOrSpace(t))return r(t);if(93===t){e.exit("chunkString");const r=e.exit("gfmFootnoteDefinitionLabelString");return i=normalizeIdentifier(n.sliceSerialize(r)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return markdownLineEndingOrSpace(t)||(o=!0),a++,e.consume(t),92===t?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),a++,c):c(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s.includes(i)||s.push(i),factorySpace(e,p,"gfmFootnoteDefinitionWhitespace")):r(t)}function p(e){return t(e)}}function tokenizeDefinitionContinuation(e,t,r){return e.check(blankLine,t,e.attempt(indent,t,r))}function gfmFootnoteDefinitionEnd(e){e.exit("gfmFootnoteDefinition")}function tokenizeIndent(e,t,r){const n=this;return factorySpace(e,function(e){const s=n.events[n.events.length-1];return s&&"gfmFootnoteDefinitionIndent"===s[1].type&&4===s[2].sliceSerialize(s[1],!0).length?t(e):r(e)},"gfmFootnoteDefinitionIndent",5)}function gfmStrikethrough(e){let t=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:function(e,r,n){const s=this.previous,i=this.events;let o=0;return function(t){if(126===s&&"characterEscape"!==i[i.length-1][1].type)return n(t);return e.enter("strikethroughSequenceTemporary"),a(t)};function a(i){const l=classifyCharacter(s);if(126===i)return o>1?n(i):(e.consume(i),o++,a);if(o<2&&!t)return n(i);const c=e.exit("strikethroughSequenceTemporary"),u=classifyCharacter(i);return c._open=!u||2===u&&Boolean(l),c._close=!l||2===l&&Boolean(u),r(i)}},resolveAll:function(e,t){let r=-1;for(;++r<e.length;)if("enter"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._close){let n=r;for(;n--;)if("exit"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._open&&e[r][1].end.offset-e[r][1].start.offset===e[n][1].end.offset-e[n][1].start.offset){e[r][1].type="strikethroughSequence",e[n][1].type="strikethroughSequence";const s={type:"strikethrough",start:Object.assign({},e[n][1].start),end:Object.assign({},e[r][1].end)},i={type:"strikethroughText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[r][1].start)},o=[["enter",s,t],["enter",e[n][1],t],["exit",e[n][1],t],["enter",i,t]],a=t.parser.constructs.insideSpan.null;a&&splice(o,o.length,0,resolveAll(a,e.slice(n+1,r),t)),splice(o,o.length,0,[["exit",i,t],["enter",e[r][1],t],["exit",e[r][1],t],["exit",s,t]]),splice(e,n-1,r-n+3,o),r=n+o.length-2;break}}r=-1;for(;++r<e.length;)"strikethroughSequenceTemporary"===e[r][1].type&&(e[r][1].type="data");return e}};return null==t&&(t=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}}}function addImplementation(e,t,r,n){let s=0;if(0!==r||0!==n.length){for(;s<e.map.length;){if(e.map[s][0]===t)return e.map[s][1]+=r,void e.map[s][2].push(...n);s+=1}e.map.push([t,r,n])}}function gfmTableAlign(e,t){let r=!1;const n=[];for(;t<e.length;){const s=e[t];if(r){if("enter"===s[0])"tableContent"===s[1].type&&n.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===s[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=n.length-1;n[e]="left"===n[e]?"center":"right"}}else if("tableDelimiterRow"===s[1].type)break}else"enter"===s[0]&&"tableDelimiterRow"===s[1].type&&(r=!0);t+=1}return n}function gfmTable(){return{flow:{null:{name:"table",tokenize:tokenizeTable,resolveAll:resolveTable}}}}function tokenizeTable(e,t,r){const n=this;let s,i=0,o=0;return function(e){let t=n.events.length-1;for(;t>-1;){const e=n.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const s=t>-1?n.events[t][1].type:null,i="tableHead"===s||"tableRow"===s?b:a;if(i===b&&n.parser.lazy[n.now().line])return r(e);return i(e)};function a(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return l(e);return s=!0,o+=1,l(e)}(t)}function l(t){return null===t?r(t):markdownLineEnding(t)?o>1?(o=0,n.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):r(t):markdownSpace(t)?factorySpace(e,l,"whitespace")(t):(o+=1,s&&(s=!1,i+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),s=!0,l):(e.enter("data"),c(t)))}function c(t){return null===t||124===t||markdownLineEndingOrSpace(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return 92===t||124===t?(e.consume(t),c):c(t)}function d(t){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(t):(e.enter("tableDelimiterRow"),s=!1,markdownSpace(t)?factorySpace(e,p,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):p(t))}function p(t){return 45===t||58===t?x(t):124===t?(s=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),m):j(t)}function m(t){return markdownSpace(t)?factorySpace(e,x,"whitespace")(t):x(t)}function x(t){return 58===t?(o+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),f):45===t?(o+=1,f(t)):null===t||markdownLineEnding(t)?y(t):j(t)}function f(t){return 45===t?(e.enter("tableDelimiterFiller"),h(t)):j(t)}function h(t){return 45===t?(e.consume(t),h):58===t?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),g):(e.exit("tableDelimiterFiller"),g(t))}function g(t){return markdownSpace(t)?factorySpace(e,y,"whitespace")(t):y(t)}function y(r){return 124===r?p(r):(null===r||markdownLineEnding(r))&&s&&i===o?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(r)):j(r)}function j(e){return r(e)}function b(t){return e.enter("tableRow"),v(t)}function v(r){return 124===r?(e.enter("tableCellDivider"),e.consume(r),e.exit("tableCellDivider"),v):null===r||markdownLineEnding(r)?(e.exit("tableRow"),t(r)):markdownSpace(r)?factorySpace(e,v,"whitespace")(r):(e.enter("data"),E(r))}function E(t){return null===t||124===t||markdownLineEndingOrSpace(t)?(e.exit("data"),v(t)):(e.consume(t),92===t?R:E)}function R(t){return 92===t||124===t?(e.consume(t),E):E(t)}}function resolveTable(e,t){let r,n,s,i=-1,o=!0,a=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,d=0;const p=new EditMap;for(;++i<e.length;){const m=e[i],x=m[1];"enter"===m[0]?"tableHead"===x.type?(u=!1,0!==d&&(flushTableEnd(p,t,d,r,n),n=void 0,d=0),r={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},p.add(i,0,[["enter",r,t]])):"tableRow"===x.type||"tableDelimiterRow"===x.type?(o=!0,s=void 0,l=[0,0,0,0],c=[0,i+1,0,0],u&&(u=!1,n={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},p.add(i,0,[["enter",n,t]])),a="tableDelimiterRow"===x.type?2:n?3:1):!a||"data"!==x.type&&"tableDelimiterMarker"!==x.type&&"tableDelimiterFiller"!==x.type?"tableCellDivider"===x.type&&(o?o=!1:(0!==l[1]&&(c[0]=c[1],s=flushCell(p,t,l,a,void 0,s)),l=c,c=[l[1],i,0,0])):(o=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],s=flushCell(p,t,l,a,void 0,s),l=[0,0,0,0]),c[2]=i)):"tableHead"===x.type?(u=!0,d=i):"tableRow"===x.type||"tableDelimiterRow"===x.type?(d=i,0!==l[1]?(c[0]=c[1],s=flushCell(p,t,l,a,i,s)):0!==c[1]&&(s=flushCell(p,t,c,a,i,s)),a=0):!a||"data"!==x.type&&"tableDelimiterMarker"!==x.type&&"tableDelimiterFiller"!==x.type||(c[3]=i)}for(0!==d&&flushTableEnd(p,t,d,r,n),p.consume(t.events),i=-1;++i<t.events.length;){const e=t.events[i];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=gfmTableAlign(t.events,i))}return e}function flushCell(e,t,r,n,s,i){const o=1===n?"tableHeader":2===n?"tableDelimiter":"tableData";0!==r[0]&&(i.end=Object.assign({},getPoint(t.events,r[0])),e.add(r[0],0,[["exit",i,t]]));const a=getPoint(t.events,r[1]);if(i={type:o,start:Object.assign({},a),end:Object.assign({},a)},e.add(r[1],0,[["enter",i,t]]),0!==r[2]){const s=getPoint(t.events,r[2]),i=getPoint(t.events,r[3]),o={type:"tableContent",start:Object.assign({},s),end:Object.assign({},i)};if(e.add(r[2],0,[["enter",o,t]]),2!==n){const n=t.events[r[2]],s=t.events[r[3]];if(n[1].end=Object.assign({},s[1].end),n[1].type="chunkText",n[1].contentType="text",r[3]>r[2]+1){const t=r[2]+1,n=r[3]-r[2]-1;e.add(t,n,[])}}e.add(r[3]+1,0,[["exit",o,t]])}return void 0!==s&&(i.end=Object.assign({},getPoint(t.events,s)),e.add(s,0,[["exit",i,t]]),i=void 0),i}function flushTableEnd(e,t,r,n,s){const i=[],o=getPoint(t.events,r);s&&(s.end=Object.assign({},o),i.push(["exit",s,t])),n.end=Object.assign({},o),i.push(["exit",n,t]),e.add(r+1,0,i)}function getPoint(e,t){const r=e[t],n="enter"===r[0]?"start":"end";return r[1][n]}function gfmTaskListItem(){return{text:{91:tasklistCheck}}}function tokenizeTasklistCheck(e,t,r){const n=this;return function(t){if(null!==n.previous||!n._gfmTasklistFirstContentOfListItem)return r(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),s};function s(t){return markdownLineEndingOrSpace(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),i):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),i):r(t)}function i(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):r(t)}function o(n){return markdownLineEnding(n)?t(n):markdownSpace(n)?e.check({tokenize:spaceThenNonSpace},t,r)(n):r(n)}}function spaceThenNonSpace(e,t,r){return factorySpace(e,function(e){return null===e?r(e):t(e)},"whitespace")}function gfm(e){return combineExtensions([gfmAutolinkLiteral(),gfmFootnote(),gfmStrikethrough(e),gfmTable(),gfmTaskListItem()])}function remarkGfm(e){const t=e||emptyOptions,r=this.data(),n=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);n.push(gfm(t)),s.push(gfmFromMarkdown()),i.push(gfmToMarkdown(t))}function formatUrlForDisplay(e){try{return decodeURIComponent(e).replace(detectHttp,"")}catch(e3){return e}}function encodeDecode(e){try{return encodeURI(decodeURIComponent(e))}catch(t){return e}}function MessageBounceModal({MessageBouncePrompt:e,...t}){return React$2.createElement(Modal,{className:"str-chat__message-bounce-modal",...t},React$2.createElement(MessageBounceProvider,null,React$2.createElement(e,{onClose:t.onClose})))}function MessageBouncePrompt({children:e,onClose:t}){const{handleDelete:r,handleEdit:n,handleRetry:s}=useMessageBounceContext("MessageBouncePrompt"),{t:i}=useTranslationContext("MessageBouncePrompt");function o(e){return r=>{e(r),null==t||t(r)}}return React$2.createElement("div",{className:"str-chat__message-bounce-prompt","data-testid":"message-bounce-prompt"},React$2.createElement("div",{className:"str-chat__message-bounce-prompt-header"},e??i("This message did not meet our content guidelines")),React$2.createElement("div",{className:"str-chat__message-bounce-actions"},React$2.createElement("button",{className:"str-chat__message-bounce-edit","data-testid":"message-bounce-edit",onClick:o(n),type:"button"},i("Edit Message")),React$2.createElement("button",{className:"str-chat__message-bounce-send","data-testid":"message-bounce-send",onClick:o(s)},i("Send Anyway")),React$2.createElement("button",{className:"str-chat__message-bounce-delete","data-testid":"message-bounce-delete",onClick:o(r)},i("Delete"))))}function useManagePollVotesRealtime(e,t,r){const{client:n}=useChatContext(),[s,i]=reactExports.useState((null==t?void 0:t.getLatestValue().items)??[]);return reactExports.useEffect(()=>null==t?void 0:t.subscribeWithSelector(e=>[e.latestPageItems],([e])=>i(t=>[...t,...e])),[t]),reactExports.useEffect(()=>{const t=t=>{if(!t.poll_vote)return;const n=isVoteAnswer(t.poll_vote);"answer"===e&&!n||"vote"===e&&(n||t.poll_vote.option_id!==r)||("poll.vote_removed"===t.type&&i(e=>t.poll_vote?e.filter(e=>e.id!==t.poll_vote.id):e),"poll.vote_changed"===t.type&&i(e=>t.poll_vote?e.filter(e=>e.id!==t.poll_vote.id):e),["poll.vote_casted","poll.vote_changed"].includes(t.type)&&i(e=>t.poll_vote?[t.poll_vote,...e]:e))},s=n.on("poll.vote_casted",t),o=n.on("poll.vote_removed",t),a=n.on("poll.vote_changed",t);return()=>{s.unsubscribe(),o.unsubscribe(),a.unsubscribe()}},[n,r,e]),s}function MessageErrorText({message:e,theme:t}){var r;const{t:n}=useTranslationContext("MessageText");return"error"!==e.type||isMessageBounced(e)?"failed"===e.status?React$2.createElement("div",{className:`str-chat__${t}-message--error-message str-chat__message--error-message`},403!==(null==(r=e.error)?void 0:r.status)?n("Message Failed  Click to try again"):n("Message Failed  Unauthorized")):null:React$2.createElement("div",{className:`str-chat__${t}-message--error-message str-chat__message--error-message`},n("Error  Unsent"))}function isIntroMessage(e){return e.customType===CUSTOM_MESSAGE_TYPE.intro}function isDateSeparatorMessage(e){return null!==e&&"object"==typeof e&&e.customType===CUSTOM_MESSAGE_TYPE.date&&isDate(e.date)}function isLocalMessage(e){return!isDateSeparatorMessage(e)&&!isIntroMessage(e)}function useMessageListScrollManager(e){const{loadMoreScrollThreshold:t,onScrollBy:r,scrollContainerMeasures:n,scrolledUpThreshold:s,scrollToBottom:i,showNewMessages:o}=e,{client:a}=useChatContext("useMessageListScrollManager"),l=reactExports.useRef({offsetHeight:0,scrollHeight:0}),c=reactExports.useRef(void 0),u=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{var d,p,m;const x=l.current,f=c.current,h=e.messages,g=h[h.length-1]||{},y=null==f?void 0:f[f.length-1],j=n(),b=x.scrollHeight-x.offsetHeight-u.current<s;if(void 0!==f)if(f.length<h.length)if((null==y?void 0:y.id)===g.id){if(u.current<t){const e=j.scrollHeight-x.scrollHeight;r(e)}}else{(null==(d=g.user)?void 0:d.id)===a.userID||b?i():o()}else{const e=(null==(p=null==y?void 0:y.latest_reactions)?void 0:p.length)!==(null==(m=g.latest_reactions)?void 0:m.length),t=(null==y?void 0:y.reply_count)!==g.reply_count;(e||t)&&b&&i()}c.current=h,l.current=j},[l,c,e.messages]),e=>{u.current=e}}function getPreviousLastMessage(e,t){if(!t)return;let r;for(let n=e.length-1;n>=0;n--){const s=e[n];if(!(null==s?void 0:s.id))break;if(s.id!==t.id){r=s;break}}return r}function defaultRenderMessages({channelUnreadUiState:e,components:t,customClasses:r,lastReceivedMessageId:n,messageGroupStyles:s,messages:i,readData:o,sharedMessageProps:a}){const{DateSeparator:l=DateSeparator,HeaderComponent:c,MessageSystem:u=EventComponent,UnreadMessagesSeparator:d=UnreadMessagesSeparator}=t,p=[];let m,x;for(let f=0;f<i.length;f++){const t=i[f];if(isDateSeparatorMessage(t))p.push(React$2.createElement("li",{key:`${t.date.toISOString()}-i`},React$2.createElement(l,{date:t.date,formatDate:a.formatDate,unread:t.unread})));else if(isIntroMessage(t))c&&p.push(React$2.createElement("li",{key:"intro"},React$2.createElement(c,null)));else if("system"===t.type)p.push(React$2.createElement("li",{"data-message-id":t.id,key:t.id||t.created_at.toISOString()},React$2.createElement(u,{message:t})));else{m||(m=t);const i=s[t.id]||"",l=(null==r?void 0:r.message)||`str-chat__li str-chat__li--${i}`,c=getIsFirstUnreadMessage({firstUnreadMessageId:null==e?void 0:e.first_unread_message_id,isFirstMessage:!!(null==m?void 0:m.id)&&m.id===t.id,lastReadDate:null==e?void 0:e.last_read,lastReadMessageId:null==e?void 0:e.last_read_message_id,message:t,previousMessage:x,unreadMessageCount:null==e?void 0:e.unread_messages});p.push(React$2.createElement(reactExports.Fragment,{key:t.id||t.created_at.toISOString()},c&&d&&React$2.createElement("li",{className:"str-chat__li str-chat__unread-messages-separator-wrapper"},React$2.createElement(d,{unreadCount:null==e?void 0:e.unread_messages})),React$2.createElement("li",{className:l,"data-message-id":t.id,"data-testid":l},React$2.createElement(Message,{groupStyles:[i],lastReceivedId:n,message:t,readBy:o[t.id]||[],...a})))),x=t}}return p}function useNewMessageNotification(e,t,r){const[n,s]=reactExports.useState(!1),[i,o]=reactExports.useState(!0),a=reactExports.useRef(!1),l=reactExports.useRef(""),c=reactExports.useRef(!1);return reactExports.useEffect(()=>{var n;if(r)return void s(!0);if(!(null==e?void 0:e.length))return;const i=e[e.length-1],o=l.current;l.current=i.id||"",i.id!==o&&(c.current||((null==(n=i.user)?void 0:n.id)!==t&&a.current&&s(!0),a.current=!0))},[t,e,r]),{atBottom:c,isMessageListScrolledToBottom:i,newMessagesNotification:n,setIsMessageListScrolledToBottom:o,setNewMessagesNotification:s}}function usePrependedMessagesCount(e,t){const r=t?1:0,n=reactExports.useRef(void 0),s=reactExports.useRef(void 0),i=reactExports.useRef(0);return reactExports.useMemo(()=>{var t,o;if(!e||!e.length)return i.current=0,0;const a=null==e?void 0:e[r],l=(null==a?void 0:a.id)===(null==(t=s.current)?void 0:t.id),c=isLocalMessage(a)?a.status:void 0,u=!(!c||!STATUSES_EXCLUDED_FROM_PREPEND[c]);if(l||u)return i.current;n.current||(n.current=a),s.current=a;for(let s=i.current;s<e.length;s+=1){if(e[s].id===(null==(o=n.current)?void 0:o.id))return i.current=s-r,i.current}return n.current=a,i.current=0,0},[r,e,null==e?void 0:e.length])}function useShouldForceScrollToBottom(e,t){const r=reactExports.useRef(""),n=reactExports.useRef(!1);function s(){var n;if(e&&e.length>0){const s=e[e.length-1];if((null==(n=s.user)?void 0:n.id)===t&&r.current!==s.id)return r.current=s.id,!0}return!1}return reactExports.useEffect(()=>{e&&e.length&&!n.current&&(n.current=!0,s())},[e,null==e?void 0:e.length]),s}function calculateItemIndex(e,t){return e+t-PREPEND_OFFSET}function calculateFirstItemIndex(e){return PREPEND_OFFSET-e}function captureResizeObserverExceededError(e){"ResizeObserver loop completed with undelivered notifications."!==e.message&&"ResizeObserver loop limit exceeded"!==e.message||e.stopImmediatePropagation()}function useCaptureResizeObserverExceededError(){reactExports.useEffect(()=>(window.addEventListener("error",captureResizeObserverExceededError),()=>{window.removeEventListener("error",captureResizeObserverExceededError)}),[])}function fractionalItemSize(e){return e.getBoundingClientRect().height}function findMessageIndex(e,t){return e.findIndex(e=>e.id===t)}function calculateInitialTopMostItemIndex(e,t){if(t){const r=findMessageIndex(e,t);if(-1!==r)return{align:"center",index:r}}return e.length-1}function VirtualizedMessageList(e){const{jumpToLatestMessage:t,loadMore:r,loadMoreNewer:n}=useChannelActionContext("VirtualizedMessageList"),{channel:s,channelUnreadUiState:i,hasMore:o,hasMoreNewer:a,highlightedMessageId:l,loadingMore:c,loadingMoreNewer:u,messages:d,notifications:p,read:m,suppressAutoscroll:x}=useChannelStateContext("VirtualizedMessageList"),f=e.messages||d;return React$2.createElement(VirtualizedMessageListWithContext,{channel:s,channelUnreadUiState:e.channelUnreadUiState??i,hasMore:!!o,hasMoreNewer:!!a,highlightedMessageId:l,jumpToLatestMessage:t,loadingMore:!!c,loadingMoreNewer:!!u,loadMore:r,loadMoreNewer:n,messages:f,notifications:p,read:m,suppressAutoscroll:x,...e})}function useFetchReactions(e){const{handleFetchReactions:t}=useMessageContext(),[r,n]=reactExports.useState([]),{handleFetchReactions:s,reactionType:i,shouldFetch:o,sort:a}=e,[l,c]=reactExports.useState(o),u=s??t;return reactExports.useEffect(()=>{if(!o)return;let e=!1;return(async()=>{try{c(!0);const t=await u(i,a);e||n(t)}catch(e3){e||n([])}finally{e||c(!1)}})(),()=>{e=!0}},[u,i,o,a]),{isLoading:l,reactions:r}}function ReactionsListModal({handleFetchReactions:e,onSelectedReactionTypeChange:t,reactionDetailsSort:r,reactions:n,selectedReactionType:s,sortReactionDetails:i,...o}){const a=n.find(({reactionType:e})=>e===s),l=(null==a?void 0:a.EmojiComponent)??null,{reactionDetailsSort:c,sortReactionDetails:u}=useMessageContext(),d=i??u,p=r??c??defaultReactionDetailsSort,{isLoading:m,reactions:x}=useFetchReactions({handleFetchReactions:e,reactionType:s,shouldFetch:o.open,sort:p}),f=reactExports.useMemo(()=>d?[...x].sort(d):x,[d,x]);return React$2.createElement(Modal,{...o,className:clsx("str-chat__message-reactions-details-modal",o.className)},React$2.createElement("div",{className:"str-chat__message-reactions-details","data-testid":"reactions-list-modal"},React$2.createElement("div",{className:"str-chat__message-reactions-details-reaction-types"},n.map(({EmojiComponent:e,reactionCount:r,reactionType:n})=>e&&React$2.createElement("div",{className:clsx("str-chat__message-reactions-details-reaction-type",{"str-chat__message-reactions-details-reaction-type--selected":s===n}),"data-testid":`reaction-details-selector-${n}`,key:n,onClick:()=>null==t?void 0:t(n)},React$2.createElement("span",{className:"str-chat__message-reaction-emoji str-chat__message-reaction-emoji--with-fallback"},React$2.createElement(e,null)),"",React$2.createElement("span",{className:"str-chat__message-reaction-count"},r)))),l&&React$2.createElement("div",{className:"str-chat__message-reaction-emoji str-chat__message-reaction-emoji--with-fallback str-chat__message-reaction-emoji-big"},React$2.createElement(l,null)),React$2.createElement("div",{className:"str-chat__message-reactions-details-reacting-users","data-testid":"all-reacting-users"},m?React$2.createElement(LoadingIndicator,null):f.map(({user:e})=>React$2.createElement("div",{className:"str-chat__message-reactions-details-reacting-user",key:null==e?void 0:e.id},React$2.createElement(Avatar,{className:"stream-chat__avatar--reaction","data-testid":"avatar",image:null==e?void 0:e.image,name:(null==e?void 0:e.name)||(null==e?void 0:e.id)}),React$2.createElement("span",{className:"str-chat__user-item--name","data-testid":"reaction-user-username"},(null==e?void 0:e.name)||(null==e?void 0:e.id)))))))}function MessageEditedTimestamp({message:e,open:t,...r}){const{t:n}=useTranslationContext("MessageEditedTimestamp"),{message:s}=useMessageContext(),{Timestamp:i=Timestamp}=useComponentContext(),o=e||s;return isMessageEdited(o)?React$2.createElement("div",{className:clsx("str-chat__message-edited-timestamp",t?"str-chat__message-edited-timestamp--open":"str-chat__message-edited-timestamp--collapsed"),"data-testid":"message-edited-timestamp"},n("Edited")," ",React$2.createElement(i,{timestamp:o.message_text_updated_at,...r})):null}function createObserver(e){return"function"==typeof e?{next:e}:e}function calculateNodeHeight(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=1/0),hiddenTextarea||((hiddenTextarea=document.createElement("textarea")).setAttribute("tabindex","-1"),hiddenTextarea.setAttribute("aria-hidden","true"),forceHiddenStyles$1(hiddenTextarea)),null===hiddenTextarea.parentNode&&document.body.appendChild(hiddenTextarea);var s=e.paddingSize,i=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(e){var t=e;hiddenTextarea.style[t]=o[t]}),forceHiddenStyles$1(hiddenTextarea),hiddenTextarea.value=t;var l=getHeight(hiddenTextarea,e);hiddenTextarea.value=t,l=getHeight(hiddenTextarea,e),hiddenTextarea.value="x";var c=hiddenTextarea.scrollHeight-s,u=c*r;"border-box"===a&&(u=u+s+i),l=Math.max(u,l);var d=c*n;return"border-box"===a&&(d=d+s+i),[l=Math.min(d,l),c]}function useListener(e,t,r){var n=useLatest(r);reactExports.useLayoutEffect(function(){var r=function(e){return n.current(e)};if(e)return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}},[])}function toFileWithPath(e,t,r){const n=withMimeType(e),{webkitRelativePath:s}=e,i="string"==typeof t?t:"string"==typeof s&&s.length>0?s:`./${e.name}`;return"string"!=typeof n.path&&setObjProp(n,"path",i),setObjProp(n,"relativePath",i),n}function withMimeType(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const r=t.split(".").pop().toLowerCase(),n=COMMON_MIME_TYPES.get(r);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}function setObjProp(e,t,r){Object.defineProperty(e,t,{value:r,writable:!1,configurable:!1,enumerable:!0})}function fromEvent(e){return __awaiter(this,void 0,void 0,function*(){return isObject(e)&&isDataTransfer(e.dataTransfer)?getDataTransferFiles(e.dataTransfer,e.type):isChangeEvt(e)?getInputFiles(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?getFsHandleFiles(e):[]})}function isDataTransfer(e){return isObject(e)}function isChangeEvt(e){return isObject(e)&&isObject(e.target)}function isObject(e){return"object"==typeof e&&null!==e}function getInputFiles(e){return fromList(e.target.files).map(e=>toFileWithPath(e))}function getFsHandleFiles(e){return __awaiter(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>toFileWithPath(e))})}function getDataTransferFiles(e,t){return __awaiter(this,void 0,void 0,function*(){if(e.items){const r=fromList(e.items).filter(e=>"file"===e.kind);if("drop"!==t)return r;return noIgnoredFiles(flatten(yield Promise.all(r.map(toFilePromises))))}return noIgnoredFiles(fromList(e.files).map(e=>toFileWithPath(e)))})}function noIgnoredFiles(e){return e.filter(e=>-1===FILES_TO_IGNORE.indexOf(e.name))}function fromList(e){if(null===e)return[];const t=[];for(let r=0;r<e.length;r++){const n=e[r];t.push(n)}return t}function toFilePromises(e){if("function"!=typeof e.webkitGetAsEntry)return fromDataTransferItem(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?fromDirEntry(t):fromDataTransferItem(e,t)}function flatten(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?flatten(t):[t]],[])}function fromDataTransferItem(e,t){return __awaiter(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error(`${e} is not a File`);if(void 0!==t){const e=yield t.getFile();return e.handle=t,toFileWithPath(e)}}const n=e.getAsFile();if(!n)throw new Error(`${e} is not a File`);return toFileWithPath(n,null!==(r=null==t?void 0:t.fullPath)&&void 0!==r?r:void 0)})}function fromEntry(e){return __awaiter(this,void 0,void 0,function*(){return e.isDirectory?fromDirEntry(e):fromFileEntry(e)})}function fromDirEntry(e){const t=e.createReader();return new Promise((e,r)=>{const n=[];!function s(){t.readEntries(t=>__awaiter(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(fromEntry));n.push(e),s()}else try{const t=yield Promise.all(n);e(t)}catch(i){r(i)}}),e=>{r(e)})}()})}function fromFileEntry(e){return __awaiter(this,void 0,void 0,function*(){return new Promise((t,r)=>{e.file(r=>{const n=toFileWithPath(r,e.fullPath);t(n)},e=>{r(e)})})})}function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray$1(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function ownKeys$1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(r),!0).forEach(function(t){_defineProperty$1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_unsupportedIterableToArray$1(e,t)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(e,t):void 0}}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit$1(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i=[],o=!0,a=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(l){a=!0,s=l}finally{try{o||null==r.return||r.return()}finally{if(a)throw s}}return i}}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}function fileAccepted(e,t){var r="application/x-moz-file"===e.type||accepts(e,t);return[r,r?null:getInvalidTypeRejectionErr(t)]}function fileMatchSize(e,t,r){if(isDefined(e.size))if(isDefined(t)&&isDefined(r)){if(e.size>r)return[!1,getTooLargeRejectionErr(r)];if(e.size<t)return[!1,getTooSmallRejectionErr(t)]}else{if(isDefined(t)&&e.size<t)return[!1,getTooSmallRejectionErr(t)];if(isDefined(r)&&e.size>r)return[!1,getTooLargeRejectionErr(r)]}return[!0,null]}function isDefined(e){return null!=e}function allFilesAccepted(e){var t=e.files,r=e.accept,n=e.minSize,s=e.maxSize,i=e.multiple,o=e.maxFiles,a=e.validator;return!(!i&&t.length>1||i&&o>=1&&t.length>o)&&t.every(function(e){var t=_slicedToArray$1(fileAccepted(e,r),1)[0],i=_slicedToArray$1(fileMatchSize(e,n,s),1)[0],o=a?a(e):null;return t&&i&&!o})}function isPropagationStopped(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function isEvtWithFiles(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function onDocumentDragOver(e){e.preventDefault()}function isIe(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function isEdge(e){return-1!==e.indexOf("Edge/")}function isIeOrEdge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return isIe(e)||isEdge(e)}function composeEventHandlers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return t.some(function(t){return!isPropagationStopped(e)&&t&&t.apply(void 0,[e].concat(n)),isPropagationStopped(e)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(e){return isDefined(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=_slicedToArray$1(e,2),r=t[0],n=t[1],s=!0;return isMIMEType(r)||(console.warn('Skipped "'.concat(r,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),Array.isArray(n)&&n.every(isExt)||(console.warn('Skipped "'.concat(r,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(e,t){var r=_slicedToArray$1(t,2),n=r[0],s=r[1];return _objectSpread$1(_objectSpread$1({},e),{},_defineProperty$1({},n,s))},{})}]:e}function acceptPropAsAcceptAttr(e){if(isDefined(e))return Object.entries(e).reduce(function(e,t){var r=_slicedToArray$1(t,2),n=r[0],s=r[1];return[].concat(_toConsumableArray$1(e),[n],_toConsumableArray$1(s))},[]).filter(function(e){return isMIMEType(e)||isExt(e)}).join(",")}function isAbort(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}function isSecurityError(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}function isMIMEType(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function isExt(e){return/^.*\.[\w]+$/.test(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i=[],o=!0,a=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(l){a=!0,s=l}finally{try{o||null==r.return||r.return()}finally{if(a)throw s}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,s=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}function useDropzone(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_objectSpread(_objectSpread({},defaultProps),e),r=t.accept,n=t.disabled,s=t.getFilesFromEvent,i=t.maxSize,o=t.minSize,a=t.multiple,l=t.maxFiles,c=t.onDragEnter,u=t.onDragLeave,d=t.onDragOver,p=t.onDrop,m=t.onDropAccepted,x=t.onDropRejected,f=t.onFileDialogCancel,h=t.onFileDialogOpen,g=t.useFsAccessApi,y=t.autoFocus,j=t.preventDropOnDocument,b=t.noClick,v=t.noKeyboard,E=t.noDrag,R=t.noDragEventsBubbling,S=t.onError,w=t.validator,$=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(r)},[r]),N=reactExports.useMemo(function(){return pickerOptionsFromAccept(r)},[r]),_=reactExports.useMemo(function(){return"function"==typeof h?h:noop},[h]),C=reactExports.useMemo(function(){return"function"==typeof f?f:noop},[f]),O=reactExports.useRef(null),T=reactExports.useRef(null),P=_slicedToArray(reactExports.useReducer(reducer,initialState$1),2),A=P[0],k=P[1],I=A.isFocused,D=A.isFileDialogActive,M=reactExports.useRef("undefined"!=typeof window&&window.isSecureContext&&g&&canUseFileSystemAccessAPI()),L=function(){!M.current&&D&&setTimeout(function(){T.current&&(T.current.files.length||(k({type:"closeDialog"}),C()))},300)};reactExports.useEffect(function(){return window.addEventListener("focus",L,!1),function(){window.removeEventListener("focus",L,!1)}},[T,D,C,M]);var F=reactExports.useRef([]),B=function(e){O.current&&O.current.contains(e.target)||(e.preventDefault(),F.current=[])};reactExports.useEffect(function(){return j&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",B,!1)),function(){j&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",B))}},[O,j]),reactExports.useEffect(function(){return!n&&y&&O.current&&O.current.focus(),function(){}},[O,y,n]);var U=reactExports.useCallback(function(e){S?S(e):console.error(e)},[S]),H=reactExports.useCallback(function(e){e.preventDefault(),e.persist(),te(e),F.current=[].concat(_toConsumableArray(F.current),[e.target]),isEvtWithFiles(e)&&Promise.resolve(s(e)).then(function(t){if(!isPropagationStopped(e)||R){var r=t.length,n=r>0&&allFilesAccepted({files:t,accept:$,minSize:o,maxSize:i,multiple:a,maxFiles:l,validator:w});k({isDragAccept:n,isDragReject:r>0&&!n,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e)}}).catch(function(e){return U(e)})},[s,c,U,R,$,o,i,a,l,w]),V=reactExports.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=isEvtWithFiles(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(r){}return t&&d&&d(e),!1},[d,R]),q=reactExports.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=F.current.filter(function(e){return O.current&&O.current.contains(e)}),r=t.indexOf(e.target);-1!==r&&t.splice(r,1),F.current=t,t.length>0||(k({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(e)&&u&&u(e))},[O,u,R]),W=reactExports.useCallback(function(e,t){var r=[],n=[];e.forEach(function(e){var t=_slicedToArray(fileAccepted(e,$),2),s=t[0],a=t[1],l=_slicedToArray(fileMatchSize(e,o,i),2),c=l[0],u=l[1],d=w?w(e):null;if(s&&c&&!d)r.push(e);else{var p=[a,u];d&&(p=p.concat(d)),n.push({file:e,errors:p.filter(function(e){return e})})}}),(!a&&r.length>1||a&&l>=1&&r.length>l)&&(r.forEach(function(e){n.push({file:e,errors:[TOO_MANY_FILES_REJECTION]})}),r.splice(0)),k({acceptedFiles:r,fileRejections:n,isDragReject:n.length>0,type:"setFiles"}),p&&p(r,n,t),n.length>0&&x&&x(n,t),r.length>0&&m&&m(r,t)},[k,a,$,o,i,l,p,m,x,w]),G=reactExports.useCallback(function(e){e.preventDefault(),e.persist(),te(e),F.current=[],isEvtWithFiles(e)&&Promise.resolve(s(e)).then(function(t){isPropagationStopped(e)&&!R||W(t,e)}).catch(function(e){return U(e)}),k({type:"reset"})},[s,W,U,R]),z=reactExports.useCallback(function(){if(M.current){k({type:"openDialog"}),_();var e={multiple:a,types:N};window.showOpenFilePicker(e).then(function(e){return s(e)}).then(function(e){W(e,null),k({type:"closeDialog"})}).catch(function(e){isAbort(e)?(C(e),k({type:"closeDialog"})):isSecurityError(e)?(M.current=!1,T.current?(T.current.value=null,T.current.click()):U(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):U(e)})}else T.current&&(k({type:"openDialog"}),_(),T.current.value=null,T.current.click())},[k,_,C,g,W,U,N,a]),K=reactExports.useCallback(function(e){O.current&&O.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),z()))},[O,z]),Q=reactExports.useCallback(function(){k({type:"focus"})},[]),Y=reactExports.useCallback(function(){k({type:"blur"})},[]),X=reactExports.useCallback(function(){b||(isIeOrEdge()?setTimeout(z,0):z())},[b,z]),J=function(e){return n?null:e},Z=function(e){return v?null:J(e)},ee=function(e){return E?null:J(e)},te=function(e){R&&e.stopPropagation()},re=reactExports.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,s=e.role,i=e.onKeyDown,o=e.onFocus,a=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,d=e.onDragLeave,p=e.onDrop,m=_objectWithoutProperties(e,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:Z(composeEventHandlers(i,K)),onFocus:Z(composeEventHandlers(o,Q)),onBlur:Z(composeEventHandlers(a,Y)),onClick:J(composeEventHandlers(l,X)),onDragEnter:ee(composeEventHandlers(c,H)),onDragOver:ee(composeEventHandlers(u,V)),onDragLeave:ee(composeEventHandlers(d,q)),onDrop:ee(composeEventHandlers(p,G)),role:"string"==typeof s&&""!==s?s:"presentation"},r,O),n||v?{}:{tabIndex:0}),m)}},[O,K,Q,Y,X,H,V,q,G,v,E,n]),ne=reactExports.useCallback(function(e){e.stopPropagation()},[]),se=reactExports.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,n=e.onChange,s=e.onClick,i=_objectWithoutProperties(e,_excluded4);return _objectSpread(_objectSpread({},_defineProperty({accept:$,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:J(composeEventHandlers(n,G)),onClick:J(composeEventHandlers(s,ne)),tabIndex:-1},r,T)),i)}},[T,r,a,G,n]);return _objectSpread(_objectSpread({},A),{},{isFocused:I&&!n,getRootProps:re,getInputProps:se,rootRef:O,inputRef:T,open:J(z)})}function reducer(e,t){switch(t.type){case"focus":return _objectSpread(_objectSpread({},e),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},e),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState$1),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return _objectSpread({},initialState$1);default:return e}}function noop(){}function getCssDimensionsVariables(e){const t={"--original-height":1e6,"--original-width":1e6};if(test(e,"url")){const r=new URL(e).searchParams,n=Number(r.get("oh")),s=Number(r.get("ow")),i=n>1?n:1e6,o=s>1?s:1e6;t["--original-width"]=o,t["--original-height"]=i}return t}function isValidUser(e){return e&&void 0!==e.id&&e.email}function StreamMessagesPage(){const[e,t]=reactExports.useState(null),[r,n]=reactExports.useState(null),[s,i]=reactExports.useState(!0),[o,a]=reactExports.useState(null),[l,c]=reactExports.useState(!1),[u,d]=reactExports.useState(""),[p,m]=reactExports.useState("messaging"),[x,f]=reactExports.useState([]),[h,g]=reactExports.useState([]),{user:y}=useAuth(),{toast:j}=useToast();reactExports.useEffect(()=>((async()=>{if(isValidUser(y))try{i(!0),console.log(" Initializing Stream Chat...");if(!(await fetch("/api/stream/sync-users",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to sync users to Stream");console.log(" Users synced to Stream successfully");const e=await fetch("/api/stream/token",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:y.id.toString()})});if(!e.ok)throw new Error("Failed to get Stream token");const{token:r,apiKey:n}=await e.json();console.log(" Stream token received");const s=StreamChat.getInstance(n);await s.connectUser({id:y.id.toString(),name:y.firstName?`${y.firstName} ${y.lastName||""}`.trim():y.email},r),console.log(" Connected to Stream Chat"),t(s);const o=await(async()=>{try{const e=await fetch("/api/users",{credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();return(Array.isArray(t)?t:t.users||[]).filter(e=>e.isActive&&e.id!==(isValidUser(y)?y.id:null)&&e.email).map(e=>({id:e.id.toString(),name:e.firstName?`${e.firstName} ${e.lastName||""}`.trim():e.email,email:e.email}))}return[]}catch(e){return console.error("Failed to fetch users:",e),[]}})();g(o),a(null)}catch(e){console.error("Stream Chat initialization failed:",e),a(e.message),j({title:"Connection Failed",description:"Unable to connect to messaging service. Please try again.",variant:"destructive"})}finally{i(!1)}})(),()=>{e&&e.disconnectUser()}),[isValidUser(y)?y.id:null]);if(s)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Connecting to Stream Chat..."})]})});if(o)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx(Card$1,{className:"p-6 max-w-md",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"h-8 w-8 text-muted-foreground mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Connection Error"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-4",children:o}),jsxRuntimeExports.jsx(Button,{onClick:()=>window.location.reload(),children:"Try Again"})]})})});if(!e)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Stream Chat not initialized"})});const b={members:{$in:[isValidUser(y)?y.id.toString():""]}};return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"border-b p-4 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-semibold",children:"Stream Chat Messages"})]}),jsxRuntimeExports.jsxs(Dialog,{open:l,onOpenChange:c,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"New Channel"]})}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Create New Channel"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Start a new conversation with team members"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"channelName",children:"Channel Name"}),jsxRuntimeExports.jsx(Input,{id:"channelName",value:u,onChange:e=>d(e.target.value),placeholder:"Enter channel name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"channelType",children:"Channel Type"}),jsxRuntimeExports.jsxs("select",{id:"channelType",value:p,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"messaging",children:"Direct Message"}),jsxRuntimeExports.jsx("option",{value:"team",children:"Team Channel"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{children:"Select Users"}),jsxRuntimeExports.jsx("div",{className:"max-h-40 overflow-y-auto border rounded-md p-2 space-y-2",children:h.map(e=>jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:`user-${e.id}`,checked:x.includes(e.id),onChange:()=>{return t=e.id,void f(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"rounded"}),jsxRuntimeExports.jsx("label",{htmlFor:`user-${e.id}`,className:"text-sm",children:e.name})]},e.id))})]}),jsxRuntimeExports.jsx(Button,{onClick:async()=>{if(e&&u.trim())try{i(!0);const t=y;let r;r="messaging"===p?e.channel(p,{members:[t.id.toString(),...x]}):e.channel(p,u,{members:[t.id.toString(),...x]}),await r.create(),n(r),c(!1),d(""),f([]),j({title:"Channel Created",description:`${u||"Direct message"} has been created successfully.`})}catch(t){console.error("Failed to create channel:",t),j({title:"Creation Failed",description:"Unable to create channel. Please try again.",variant:"destructive"})}finally{i(!1)}},className:"w-full",disabled:!u.trim()||s,children:s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create Channel"})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex",children:jsxRuntimeExports.jsxs(Chat,{client:e,theme:"str-chat__theme-light",children:[jsxRuntimeExports.jsx("div",{className:"w-80 border-r",children:jsxRuntimeExports.jsx(ChannelList,{filters:b,sort:[{last_message_at:-1}],showChannelSearch:!0})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:r?jsxRuntimeExports.jsxs(Channel,{channel:r,children:[jsxRuntimeExports.jsxs(Window,{children:[jsxRuntimeExports.jsx(ChannelHeader,{}),jsxRuntimeExports.jsx(MessageList,{}),jsxRuntimeExports.jsx(MessageInput,{})]}),jsxRuntimeExports.jsx(Thread,{})]}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Hash$2,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select a Channel"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Choose a channel from the sidebar to start messaging"})]})})})]})})]})}function DirectMessages(){const[e,t]=reactExports.useState([]),[r,n]=reactExports.useState([]),[s,i]=reactExports.useState(null),[o,a]=reactExports.useState([]),[l,c]=reactExports.useState(!0),[u,d]=reactExports.useState(!1),[p,m]=reactExports.useState(""),[x,f]=reactExports.useState(""),[h,g]=reactExports.useState(""),[y,j]=reactExports.useState(""),[b,v]=reactExports.useState(!1),{user:E}=useAuth(),{toast:R}=useToast(),S=(e,t)=>`${(null==e?void 0:e[0])||""}${(null==t?void 0:t[0])||""}`.toUpperCase()||"U",w=async()=>{var t;try{c(!0);const r=await fetch("/api/messaging/conversations",{credentials:"include",headers:{"Content-Type":"application/json"}});if(r.ok){const s=await r.json();console.log("Conversations data:",s);const i=new Map;null==(t=s.messages)||t.forEach(t=>{const r=null==E?void 0:E.id,n=t.senderId===r?t.recipientId:t.senderId,s=t.senderId===r?t.recipientName:t.senderName;if(!i.has(n)){const r=e.find(e=>e.id===n)||{id:n,firstName:s.split(" ")[0]||"Unknown",lastName:s.split(" ")[1]||"User",email:"unknown@email.com",isActive:!0};i.set(n,{otherUser:r,lastMessage:t,unreadCount:0})}const o=i.get(n);new Date(t.createdAt)>new Date(o.lastMessage.createdAt)&&(o.lastMessage=t),t.isRead||t.recipientId!==r||o.unreadCount++}),n(Array.from(i.values()))}}catch(r){console.error("Error fetching conversations:",r)}finally{c(!1)}},$=async e=>{try{const t=await fetch(`/api/messaging/conversation/${e}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(t.ok){const e=await t.json();a(e.messages||[])}}catch(t){console.error("Error fetching conversation messages:",t)}},N=async()=>{if(s&&p.trim())try{v(!0);(await fetch("/api/messaging/send",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientIds:[s.otherUser.id],content:`Re: ${s.lastMessage.subject}\n\n${p}`,contextType:"direct"})})).ok&&(m(""),await $(s.otherUser.id),await w(),R({title:"Message Sent",description:"Your reply has been sent successfully"}))}catch(e){console.error("Error sending message:",e),R({title:"Error",description:"Failed to send message",variant:"destructive"})}finally{v(!1)}};return reactExports.useEffect(()=>{E&&(async()=>{try{const e=await fetch("/api/users",{credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){const r=await e.json(),n=Array.isArray(r)?r:r.users||[];t(n.filter(e=>e.isActive&&e.id!==(null==E?void 0:E.id)))}}catch(e){console.error("Error fetching users:",e)}})()},[E]),reactExports.useEffect(()=>{e.length>0&&w()},[e]),l?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-8 w-8 animate-spin text-primary"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading conversations..."})]})}):jsxRuntimeExports.jsxs("div",{className:"h-full flex",children:[jsxRuntimeExports.jsxs("div",{className:"w-1/3 border-r bg-background",children:[jsxRuntimeExports.jsx("div",{className:"p-4 border-b",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"h-5 w-5"}),"Conversations"]}),jsxRuntimeExports.jsxs(Dialog,{open:u,onOpenChange:d,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{size:"sm",className:"gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"New"]})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Compose New Message"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Send a direct message to another user"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"recipient",children:"Recipient"}),jsxRuntimeExports.jsxs(Select,{value:x,onValueChange:f,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"mt-1",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select recipient..."})}),jsxRuntimeExports.jsx(SelectContent,{children:e.map(e=>jsxRuntimeExports.jsxs(SelectItem,{value:e.id,children:[e.firstName," ",e.lastName," (",e.email,")"]},e.id))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"subject",children:"Subject"}),jsxRuntimeExports.jsx(Input,{id:"subject",value:h,onChange:e=>g(e.target.value),placeholder:"Enter message subject",className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"body",children:"Message"}),jsxRuntimeExports.jsx(Textarea,{id:"body",value:y,onChange:e=>j(e.target.value),placeholder:"Type your message here...",className:"mt-1 min-h-[120px]"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:async()=>{if(x&&h.trim()&&y.trim())try{v(!0);(await fetch("/api/messaging/send",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientIds:[x],content:`Subject: ${h}\n\n${y}`,contextType:"direct"})})).ok&&(f(""),g(""),j(""),d(!1),await w(),R({title:"Message Sent",description:"Your message has been sent successfully"}))}catch(e){console.error("Error sending message:",e),R({title:"Error",description:"Failed to send message",variant:"destructive"})}finally{v(!1)}else R({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"})},disabled:b,children:b?jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 animate-spin"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Send$c,{className:"h-4 w-4 mr-2"}),"Send Message"]})})]})]})]})]})]})}),jsxRuntimeExports.jsx(ScrollArea,{className:"h-[calc(100vh-180px)]",children:0===r.length?jsxRuntimeExports.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[jsxRuntimeExports.jsx(Mail,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),jsxRuntimeExports.jsx("p",{children:"No conversations yet"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Start a new conversation to get started"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-1 p-2",children:r.map(e=>jsxRuntimeExports.jsx("div",{onClick:()=>{i(e),$(e.otherUser.id)},className:"p-3 rounded-lg cursor-pointer transition-colors "+((null==s?void 0:s.otherUser.id)===e.otherUser.id?"bg-primary/10 border-primary/20":"hover:bg-muted/50"),children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Avatar$1,{className:"h-10 w-10",children:jsxRuntimeExports.jsx(AvatarFallback,{className:"bg-primary/10 text-primary",children:S(e.otherUser.firstName,e.otherUser.lastName)})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("p",{className:"font-medium truncate",children:[e.otherUser.firstName," ",e.otherUser.lastName]}),e.unreadCount>0&&jsxRuntimeExports.jsx(Badge,{variant:"default",className:"h-5 min-w-[20px] text-xs",children:e.unreadCount})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.lastMessage.subject}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[jsxRuntimeExports.jsx(Clock,{className:"h-3 w-3 text-muted-foreground"}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-muted-foreground",children:[formatDistanceToNow(new Date(e.lastMessage.createdAt))," ago"]})]})]})]})},e.otherUser.id))})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex flex-col",children:s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"p-4 border-b bg-background",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Avatar$1,{className:"h-10 w-10",children:jsxRuntimeExports.jsx(AvatarFallback,{className:"bg-primary/10 text-primary",children:S(s.otherUser.firstName,s.otherUser.lastName)})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold",children:[s.otherUser.firstName," ",s.otherUser.lastName]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:s.otherUser.email})]})]})}),jsxRuntimeExports.jsx(ScrollArea,{className:"flex-1 p-4",children:jsxRuntimeExports.jsx("div",{className:"space-y-4",children:o.map(e=>{const t=e.senderId===(null==E?void 0:E.id);return jsxRuntimeExports.jsx("div",{className:"flex "+(t?"justify-end":"justify-start"),children:jsxRuntimeExports.jsxs("div",{className:"max-w-[70%] rounded-lg p-3 "+(t?"bg-primary text-primary-foreground":"bg-muted"),children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium mb-1",children:e.subject}),jsxRuntimeExports.jsx("div",{className:"text-sm whitespace-pre-wrap",children:e.body}),jsxRuntimeExports.jsxs("div",{className:"text-xs mt-2 "+(t?"text-primary-foreground/70":"text-muted-foreground"),children:[formatDistanceToNow(new Date(e.createdAt))," ago"]})]})},e.id)})})}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t bg-background",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Input,{value:p,onChange:e=>m(e.target.value),placeholder:"Type a quick reply...",onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&N(),className:"flex-1"}),jsxRuntimeExports.jsx(Button,{onClick:N,disabled:!p.trim()||b,children:b?jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 animate-spin"}):jsxRuntimeExports.jsx(Send$c,{className:"h-4 w-4"})})]})})]}):jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-muted-foreground",children:[jsxRuntimeExports.jsx(Users,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select a conversation"}),jsxRuntimeExports.jsx("p",{children:"Choose a conversation from the sidebar to start messaging"})]})})})]})}function useHelp(){const e=reactExports.useContext(HelpContext);if(!e)throw new Error("useHelp must be used within a HelpProvider");return e}function HelpProvider({children:e}){const[t,r]=reactExports.useState(new Map),[n,s]=reactExports.useState(()=>{const e=localStorage.getItem("help-mode-enabled");return!e||JSON.parse(e)}),i=reactExports.useCallback((e,t)=>{r(r=>new Map(r.set(e,t)))},[]),o=reactExports.useCallback(e=>{console.log("Showing help:",e)},[]),a=reactExports.useCallback(e=>{console.log("Hiding help:",e)},[]),l=reactExports.useCallback(()=>{const e=!n;s(e),localStorage.setItem("help-mode-enabled",JSON.stringify(e))},[n]),c=reactExports.useCallback(e=>t.get(e)||null,[t]);reactExports.useEffect(()=>{[["dashboard-welcome",{id:"dashboard-welcome",title:"Welcome to TSP!",message:"I'm so glad you're here! This dashboard is your central hub for everything related to The Sandwich Project. From here, you can track collections, connect with your team, and make a real difference in your community.",tone:"encouraging",character:"friend",position:"bottom",showOnFirstVisit:!0}],["collections-form",{id:"collections-form",title:"Recording Your Collections",message:"Every sandwich you record here represents a meal for someone in need. Don't worry about making mistakes - you can always edit entries later. Just do your best, and know that your contribution matters so much!",tone:"supportive",character:"mentor",position:"right"}],["navigation-help",{id:"navigation-help",title:"Finding Your Way Around",message:"Think of this sidebar as your map to everything TSP! Each section is designed to help you contribute in your own unique way. Take your time exploring - there's no rush.",tone:"informative",character:"guide",position:"right"}],["team-chat",{id:"team-chat",title:"Connect with Your Team",message:"This is where the magic happens! Chat with your fellow volunteers, share updates, and celebrate each other's wins. We're all in this together, and your voice matters here.",tone:"encouraging",character:"friend",position:"top"}],["reports-analytics",{id:"reports-analytics",title:"See Your Impact",message:"These numbers tell the story of our collective impact! Every chart and statistic represents real people whose lives we've touched. You should feel proud - you're part of something beautiful.",tone:"celebratory",character:"coach",position:"bottom"}],["directory-contacts",{id:"directory-contacts",title:"Your TSP Family",message:"Here's everyone who's part of our wonderful community! Don't hesitate to reach out to anyone - we're all here to support each other in this important work.",tone:"supportive",character:"friend",position:"left"}],["meetings-schedule",{id:"meetings-schedule",title:"Stay Connected",message:"Meetings are where we come together as a team! They're not just about business - they're about connecting, sharing ideas, and supporting each other. Your participation is valued!",tone:"encouraging",character:"mentor",position:"bottom"}],["project-management",{id:"project-management",title:"Making Things Happen",message:"Projects might seem overwhelming, but remember - every big change starts with small steps. You don't have to do everything at once. Just pick something that speaks to you and take it one task at a time!",tone:"supportive",character:"coach",position:"right"}],["data-entry-tips",{id:"data-entry-tips",title:"Data Entry Made Easy",message:"I know forms can feel tedious, but think of each entry as a story of generosity! Take breaks when you need them, and remember - accuracy matters more than speed. You're doing great!",tone:"encouraging",character:"mentor",position:"top"}],["first-time-user",{id:"first-time-user",title:"New Here? You're Welcome!",message:"Starting something new can feel a bit overwhelming, but you've joined an incredibly supportive community! Take things at your own pace, ask questions whenever you need to, and know that everyone here wants to see you succeed.",tone:"supportive",character:"friend",position:"bottom",showOnFirstVisit:!0,actions:[{label:"Take a Quick Tour",action:()=>console.log("Starting tour"),primary:!0},{label:"I'll Explore on My Own",action:()=>console.log("Self exploration")}]}]].forEach(([e,t])=>{i(e,t)})},[i]);const u={showHelp:o,hideHelp:a,registerHelp:i,isHelpEnabled:n,toggleHelpMode:l,getHelpContent:c};return jsxRuntimeExports.jsx(HelpContext.Provider,{value:u,children:e})}function HelpToggle({className:e=""}){const{isHelpEnabled:t,toggleHelpMode:r}=useHelp();return jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",className:`flex items-center space-x-2 text-slate-600 hover:text-teal-600 hover:bg-teal-50 transition-colors ${e}`,onClick:r,title:t?"Hide help bubbles":"Show help bubbles",children:[jsxRuntimeExports.jsx(CircleHelp,{className:"w-4 h-4"}),t?jsxRuntimeExports.jsx(EyeOff,{className:"w-3 h-3"}):jsxRuntimeExports.jsx(Eye,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{className:"text-xs sm:text-sm hidden sm:block",children:t?"Hide Help":"Show Help"})]})}function DocumentCard({document:e,onPreview:t}){return jsxRuntimeExports.jsxs(Card$1,{className:"hover:shadow-md transition-shadow duration-200 h-full flex flex-col p-4 sm:p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"shrink-0",children:getFileIcon(e.type)}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100 leading-tight",children:e.name}),jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:`mt-2 text-xs ${getCategoryColor(e.category)}`,children:e.category})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col",children:[e.description&&jsxRuntimeExports.jsx(CardDescription,{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:e.description}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-auto",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>t(e),className:"w-full text-xs sm:text-sm h-8 sm:h-9",children:[jsxRuntimeExports.jsx(Eye,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"Preview"]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>((e,t)=>{const r=window.document.createElement("a");r.href=e,r.download=t,r.target="_blank",window.document.body.appendChild(r),r.click(),window.document.body.removeChild(r)})(e.path,e.name),className:"flex-1 text-xs sm:text-sm h-8 sm:h-9",children:[jsxRuntimeExports.jsx(Download,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Download"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"DL"})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>window.open(e.path,"_blank"),className:"px-2 sm:px-3 h-8 sm:h-9",children:jsxRuntimeExports.jsx(ExternalLink,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]})]})]})}function ToolkitTabs(){const[e,t]=reactExports.useState(null);return e?jsxRuntimeExports.jsxs("div",{className:"space-y-4 p-4 sm:p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[getFileIcon(e.type),jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-base sm:text-lg md:text-xl font-semibold text-gray-900 dark:text-gray-100 leading-tight",children:e.name}),jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:`mt-2 text-xs ${getCategoryColor(e.category)}`,children:e.category})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{const t=document.createElement("a");t.href=e.path,t.download=e.name,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"text-xs sm:text-sm h-9",children:[jsxRuntimeExports.jsx(Download,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Download"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"DL"})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:()=>t(null),className:"text-xs sm:text-sm h-9",children:[jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Back to Toolkit"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Back"})]})]})]}),jsxRuntimeExports.jsx(DocumentPreview,{documentPath:e.path,documentName:e.name,documentType:e.type,onClose:()=>t(null)})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-[#FBAD3F] rounded-lg flex items-center justify-center shrink-0",children:jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4 sm:h-5 sm:w-5 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 dark:text-gray-100 font-roboto leading-tight",children:"Toolkit & Resources"}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm md:text-base text-gray-600 dark:text-gray-400 leading-tight mt-1",children:"Essential documents, guidelines, and resources for volunteers and hosts"})]})]}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"safety",className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-3 h-auto p-1",children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"safety",className:"flex items-center gap-1 sm:gap-2 py-3 px-2 sm:px-4 text-xs sm:text-sm font-medium",children:[jsxRuntimeExports.jsx(Shield,{className:"h-3 w-3 sm:h-4 sm:w-4 shrink-0"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Safety"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Safe"})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"labels",className:"flex items-center gap-1 sm:gap-2 py-3 px-2 sm:px-4 text-xs sm:text-sm font-medium",children:[jsxRuntimeExports.jsx(Tag,{className:"h-3 w-3 sm:h-4 sm:w-4 shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Labels"})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"sandwich-making",className:"flex items-center gap-1 sm:gap-2 py-3 px-2 sm:px-4 text-xs sm:text-sm font-medium",children:[jsxRuntimeExports.jsx(Sandwich,{className:"h-3 w-3 sm:h-4 sm:w-4 shrink-0"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Sandwich Making"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Making"})]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"safety",className:"space-y-4 mt-6",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 lg:gap-6",children:safetyDocuments.map((e,r)=>jsxRuntimeExports.jsx(DocumentCard,{document:e,onPreview:t},r))})}),jsxRuntimeExports.jsx(TabsContent,{value:"labels",className:"space-y-4 mt-6",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 lg:gap-6",children:labelDocuments.map((e,r)=>jsxRuntimeExports.jsx(DocumentCard,{document:e,onPreview:t},r))})}),jsxRuntimeExports.jsx(TabsContent,{value:"sandwich-making",className:"space-y-4 mt-6",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 lg:gap-6",children:sandwichMakingDocuments.map((e,r)=>jsxRuntimeExports.jsx(DocumentCard,{document:e,onPreview:t},r))})})]})]})}function Dashboard({initialSection:e="dashboard"}){var t,r,n;const[s]=useLocation(),[i,o]=reactExports.useState(e);reactExports.useEffect(()=>{if(console.log("Current URL location:",s),s.startsWith("/projects/")){const e=s.split("/projects/")[1];if(e){const t=`project-${e}`;console.log("Setting activeSection to project ID:",t),o(t)}}else{const e=s.substring(1)||"dashboard";e!==i&&e!==s.substring(1)&&(console.log("Setting activeSection to:",e),o(e))}},[s]),reactExports.useEffect(()=>{console.log("Dashboard activeSection changed to:",i)},[i]);const a=e=>{console.log(" Dashboard setActiveSection called with:",e),o(e)},[l,c]=reactExports.useState([]),[u,d]=reactExports.useState(!1),[p,m]=reactExports.useState(!1),{user:x,loading:f}=useAuth(),{data:h,isLoading:g}=useQuery({queryKey:["/api/auth/user",null==x?void 0:x.id],enabled:!!x}),y=h||x,j=f||g;reactExports.useEffect(()=>(window.dashboardSetActiveSection=a,()=>{delete window.dashboardSetActiveSection}),[]),hasPermission(y,PERMISSIONS.VIEW_HOSTS),hasPermission(y,PERMISSIONS.VIEW_RECIPIENTS),hasPermission(y,PERMISSIONS.VIEW_DRIVERS),hasPermission(y,PERMISSIONS.VIEW_MEETINGS),hasPermission(y,PERMISSIONS.VIEW_ANALYTICS),hasPermission(y,PERMISSIONS.VIEW_REPORTS),hasPermission(y,PERMISSIONS.VIEW_PROJECTS),hasPermission(y,PERMISSIONS.VIEW_COMMITTEE),hasPermission(y,PERMISSIONS.VIEW_SUGGESTIONS),hasPermission(y,PERMISSIONS.MANAGE_USERS);return j?jsxRuntimeExports.jsx("div",{className:"bg-slate-50 min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})}):y?jsxRuntimeExports.jsx(HelpProvider,{children:jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-yellow-50 min-h-screen flex flex-col overflow-x-hidden",children:[jsxRuntimeExports.jsx(AnnouncementBanner,{}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-white to-orange-50/30 border-b-2 border-amber-200 shadow-sm px-2 sm:px-4 md:px-6 py-2 sm:py-3 flex items-center relative z-50 flex-wrap",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-shrink-0",children:[jsxRuntimeExports.jsx("button",{onClick:()=>d(!u),className:"md:hidden p-2 rounded-lg text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors touch-manipulation relative z-60","aria-label":"Toggle navigation menu",children:u?jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Menu$d,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("img",{src:sandwichLogo,alt:"Sandwich Logo",className:"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0"}),jsxRuntimeExports.jsx("h1",{className:"text-base sm:text-lg font-semibold text-teal-800 hidden sm:block",children:"The Sandwich Project"}),jsxRuntimeExports.jsx("h1",{className:"text-sm font-semibold text-teal-800 sm:hidden",children:"TSP"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[y&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-1.5 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200 shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-gradient-to-r from-teal-100 to-teal-200 rounded-full flex items-center justify-center shadow-sm",children:jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-teal-800",children:(null==(t=null==y?void 0:y.firstName)?void 0:t.charAt(0))||(null==(r=null==y?void 0:y.email)?void 0:r.charAt(0))||"U"})}),jsxRuntimeExports.jsxs("div",{className:"hidden sm:flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-teal-800",children:(null==y?void 0:y.firstName)?`${y.firstName} ${(null==y?void 0:y.lastName)||""}`.trim():null==y?void 0:y.email}),jsxRuntimeExports.jsx("span",{className:"text-xs text-amber-600",children:null==y?void 0:y.email})]}),jsxRuntimeExports.jsx("div",{className:"sm:hidden",children:jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-teal-800",children:(null==y?void 0:y.firstName)?`${y.firstName}`:(null==(n=null==y?void 0:y.email)?void 0:n.split("@")[0])||"User"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 relative z-50 flex-shrink-0",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{console.log("Messages button clicked"),o("messages"),d(!1)},className:"p-2 rounded-lg transition-colors relative z-50 pointer-events-auto touch-manipulation "+("messages"===i?"bg-[#236383] hover:bg-[#1d5470] text-white border border-[#236383] shadow-sm":"text-teal-600 hover:bg-teal-50 hover:text-teal-800"),title:"Messages","aria-label":"Messages",children:jsxRuntimeExports.jsx(MessageCircle,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),jsxRuntimeExports.jsx(MessageNotifications$1,{user:y}),jsxRuntimeExports.jsx(HelpToggle,{}),jsxRuntimeExports.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Profile button clicked, current section:",i),o("profile"),window.history.pushState({},"","/dashboard?section=profile"),d(!1)},className:"p-2 rounded-lg transition-colors relative z-50 pointer-events-auto touch-manipulation "+("profile"===i?"bg-[#236383] hover:bg-[#1d5470] text-white border border-[#236383] shadow-sm":"text-teal-600 hover:bg-teal-50 hover:text-teal-800"),title:"Account Settings","aria-label":"Account Settings",children:jsxRuntimeExports.jsx(UserCog,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),jsxRuntimeExports.jsxs("button",{onClick:async()=>{try{await supabase.auth.signOut(),queryClient.clear(),window.location.href="/"}catch(e){console.error("Logout error:",e),queryClient.clear(),window.location.href="/"}},className:"flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 text-amber-700 hover:text-amber-900 rounded-lg hover:bg-amber-50 transition-colors touch-manipulation border border-amber-200 hover:border-amber-300","aria-label":"Logout",children:[jsxRuntimeExports.jsx(LogOut,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-xs sm:text-sm hidden sm:block",children:"Logout"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-1 relative flex-col md:flex-row",children:[u&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>d(!1)}),jsxRuntimeExports.jsxs("div",{className:`${u?"translate-x-0":"-translate-x-full"} md:translate-x-0 fixed md:relative z-50 ${p?"w-16":"w-64 sm:w-72"} bg-gradient-to-b from-white to-orange-50/30 border-r-2 border-amber-200 shadow-lg flex flex-col transition-all duration-300 ease-in-out h-full md:h-auto md:min-h-screen`,children:[jsxRuntimeExports.jsx("div",{className:"hidden md:flex justify-end p-2 border-b border-amber-200",children:jsxRuntimeExports.jsx("button",{onClick:()=>m(!p),className:"p-1.5 rounded-lg hover:bg-amber-100 transition-colors","aria-label":p?"Expand sidebar":"Collapse sidebar",children:p?jsxRuntimeExports.jsx("img",{src:squareSandwichLogo,alt:"Expand",className:"w-5 h-5"}):jsxRuntimeExports.jsx(ChevronDown,{className:"w-4 h-4 text-amber-700 rotate-90"})})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto pb-6 touch-pan-y overscroll-contain",children:jsxRuntimeExports.jsx(SimpleNav,{activeSection:i,onSectionChange:e=>{console.log("Dashboard setActiveSection called with:",e),o(e),d(!1);const t="dashboard"===e?"/dashboard":`/dashboard?section=${e}`;window.history.pushState({},"",t)},isCollapsed:p})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden w-full md:w-auto relative z-10 bg-gradient-to-br from-white to-orange-50/20",children:jsxRuntimeExports.jsx("div",{className:"h-full overflow-y-auto overflow-x-hidden",children:jsxRuntimeExports.jsx("div",{className:("gmail-inbox"===i?"p-2":"p-1 sm:p-4 md:p-6")+" pb-20 min-h-full",children:jsxRuntimeExports.jsx("div",{className:"max-w-full overflow-x-auto",children:(()=>{const e=i.match(/^project-(\d+)$/),t=e?parseInt(e[1]):null;if(t)return jsxRuntimeExports.jsx(ProjectDetailClean,{projectId:t});switch(i){case"dashboard":return jsxRuntimeExports.jsx(DashboardOverview,{onSectionChange:o});case"collections":return jsxRuntimeExports.jsx(SandwichCollectionLog,{});case"projects":return console.log("Rendering ProjectsClean component"),jsxRuntimeExports.jsx(ProjectsClean,{});case"real-time-messages":return jsxRuntimeExports.jsx(RealTimeMessages,{});case"messages":return jsxRuntimeExports.jsx(DirectMessages,{});case"gmail-inbox":return jsxRuntimeExports.jsx(GmailStyleInbox,{});case"inbox":return jsxRuntimeExports.jsx(Inbox,{});case"stream-messages":return jsxRuntimeExports.jsx(StreamMessagesPage,{});case"chat":return jsxRuntimeExports.jsx(EnhancedChat,{});case"profile":return jsxRuntimeExports.jsx(UserProfile,{});case"meetings":return jsxRuntimeExports.jsx(UnifiedMeetings,{});case"reports":return jsxRuntimeExports.jsx(ReportingDashboard,{isEmbedded:!0});case"toolkit":return jsxRuntimeExports.jsx(ToolkitTabs,{});case"hosts":return jsxRuntimeExports.jsx(HostsManagementConsolidated,{});case"recipients":return jsxRuntimeExports.jsx(RecipientsManagement,{});case"drivers":return jsxRuntimeExports.jsx(DriversManagement,{});case"phone-directory":return jsxRuntimeExports.jsx(PhoneDirectoryFixed,{});case"analytics":return jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-main-heading text-primary dark:text-secondary",children:"Analytics Dashboard"}),jsxRuntimeExports.jsx("p",{className:"font-body text-muted-foreground",children:"Data insights and impact visualization"})]}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"data",className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-2 h-9 sm:h-10",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"data",className:"text-xs sm:text-sm",children:"Data Analytics"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"impact",className:"text-xs sm:text-sm",children:"Impact Dashboard"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"data",className:"mt-6",children:jsxRuntimeExports.jsx(AnalyticsDashboard,{})}),jsxRuntimeExports.jsx(TabsContent,{value:"impact",className:"mt-6",children:jsxRuntimeExports.jsx(ImpactDashboard,{})})]})]});case"role-demo":return jsxRuntimeExports.jsx(RoleDemo,{});case"work-log":return jsxRuntimeExports.jsx(WorkLogPage,{});case"suggestions":return jsxRuntimeExports.jsx(SuggestionsPortal,{});case"google-sheets":return jsxRuntimeExports.jsx(GoogleSheetsPage,{});case"governance":return jsxRuntimeExports.jsx(Governance,{});case"committee":case"committee-chat":return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl",style:{backgroundColor:"var(--tsp-teal-light)"},children:jsxRuntimeExports.jsx(MessageCircle,{className:"w-6 h-6",style:{color:"var(--tsp-teal)"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Committee Communications"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Internal committee discussions and collaboration"})]})]}),jsxRuntimeExports.jsx(CommitteeChat,{})]});case"user-management":return jsxRuntimeExports.jsx(UserManagement,{});case"development":return jsxRuntimeExports.jsx(Development,{});case"admin":return jsxRuntimeExports.jsx(AdminPage,{});default:if(t)return jsxRuntimeExports.jsx(ProjectDetailClean,{projectId:t});if(i.startsWith("project-")){const e=parseInt(i.replace("project-",""));if(!isNaN(e))return jsxRuntimeExports.jsx(ProjectDetailClean,{projectId:e})}return jsxRuntimeExports.jsx(DashboardOverview,{onSectionChange:o})}})()})})})})]})]})}):(window.location.href="/",null)}function SignupPage(){const[e,r]=reactExports.useState(1),[n,s]=reactExports.useState([]),[i,o]=reactExports.useState([]),{toast:a}=useToast(),l=useForm({resolver:t(signupSchema),defaultValues:{firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",role:"volunteer",availability:[],interests:[],emergencyContact:"",agreeToTerms:!1,agreeToBackground:!1}}),c=useMutation({mutationFn:async e=>await apiRequest("/api/auth/signup","POST",e),onSuccess:()=>{a({title:"Registration Successful",description:"Welcome to The Sandwich Project! Please check your email for next steps."}),r(4)},onError:e=>{a({title:"Registration Failed",description:e.message||"There was an error creating your account. Please try again.",variant:"destructive"})}});return 4===e?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsx(Card$1,{className:"w-full max-w-md",children:jsxRuntimeExports.jsxs(CardContent$1,{className:"p-8 text-center",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome Aboard!"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Your registration has been submitted successfully. We'll review your application and contact you soon with next steps."}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(Button,{asChild:!0,className:"w-full",children:jsxRuntimeExports.jsx(Link$1,{href:"/",children:"Return to Home"})}),jsxRuntimeExports.jsx(Button,{variant:"outline",asChild:!0,className:"w-full",children:jsxRuntimeExports.jsx(Link$1,{href:"/login",children:"Sign In"})})]})]})})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(Card$1,{className:"w-full max-w-2xl",children:[jsxRuntimeExports.jsxs(CardHeader$1,{className:"text-center",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-3xl font-bold text-gray-900",children:"Join The Sandwich Project"}),jsxRuntimeExports.jsxs(CardDescription,{className:"text-lg",children:["Help us fight hunger in our community - Step ",e," of 3"]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-4",children:jsxRuntimeExports.jsx("div",{className:"flex space-x-2",children:[1,2,3].map(t=>jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full "+(t<=e?"bg-[#236383]":"bg-gray-300")},t))})})]}),jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx(Form,{...l,children:jsxRuntimeExports.jsxs("form",{onSubmit:l.handleSubmit(e=>{const t={...e,availability:n,interests:i};c.mutate(t)}),className:"space-y-6",children:[1===e&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[jsxRuntimeExports.jsx(Users,{className:"w-5 h-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:"Personal Information"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(FormField,{control:l.control,name:"firstName",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"First Name"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Enter your first name",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:l.control,name:"lastName",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Last Name"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Enter your last name",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})})]}),jsxRuntimeExports.jsx(FormField,{control:l.control,name:"email",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Email Address"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{type:"email",placeholder:"your.email@example.com",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:l.control,name:"phone",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Phone Number"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"(555) 123-4567",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsx(FormField,{control:l.control,name:"city",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"City"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Your city",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:l.control,name:"state",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"State"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"State",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:l.control,name:"zipCode",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"ZIP Code"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"12345",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})})]}),jsxRuntimeExports.jsx(FormField,{control:l.control,name:"address",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Address"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"123 Main Street",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})})]}),2===e&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[jsxRuntimeExports.jsx(Shield,{className:"w-5 h-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:"Your Role & Availability"})]}),jsxRuntimeExports.jsx(FormField,{control:l.control,name:"role",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"How would you like to help?"}),jsxRuntimeExports.jsxs(Select,{onValueChange:e.onChange,defaultValue:e.value,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select your preferred role"})})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"volunteer",children:"General Volunteer"}),jsxRuntimeExports.jsx(SelectItem,{value:"host",children:"Host Location"}),jsxRuntimeExports.jsx(SelectItem,{value:"driver",children:"Driver/Transportation"}),jsxRuntimeExports.jsx(SelectItem,{value:"coordinator",children:"Team Coordinator"})]})]}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"When are you available? (Select all that apply)"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:availabilityOptions.map(e=>jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Checkbox,{id:e,checked:n.includes(e),onCheckedChange:t=>{s(t?[...n,e]:n.filter(t=>t!==e))}}),jsxRuntimeExports.jsx(Label$1,{htmlFor:e,className:"text-sm",children:e})]},e))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Areas of Interest (Optional)"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:interestOptions.map(e=>jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Checkbox,{id:e,checked:i.includes(e),onCheckedChange:t=>{o(t?[...i,e]:i.filter(t=>t!==e))}}),jsxRuntimeExports.jsx(Label$1,{htmlFor:e,className:"text-sm",children:e})]},e))})]}),jsxRuntimeExports.jsx(FormField,{control:l.control,name:"emergencyContact",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Emergency Contact Information"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Name and phone number of emergency contact",...e})}),jsxRuntimeExports.jsx(FormMessage,{})]})})]}),3===e&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:"Terms & Agreement"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-2",children:"The Sandwich Project Terms of Service"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 space-y-2 max-h-40 overflow-y-auto",children:[jsxRuntimeExports.jsx("p",{children:"By joining The Sandwich Project, you agree to:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Volunteer in a safe and respectful manner"}),jsxRuntimeExports.jsx("li",{children:"Follow all food safety and handling guidelines"}),jsxRuntimeExports.jsx("li",{children:"Represent the organization professionally"}),jsxRuntimeExports.jsx("li",{children:"Respect the privacy of all community members"}),jsxRuntimeExports.jsx("li",{children:"Participate in required training sessions"}),jsxRuntimeExports.jsx("li",{children:"Report any safety concerns immediately"})]})]})]}),jsxRuntimeExports.jsx(FormField,{control:l.control,name:"agreeToTerms",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex flex-row items-start space-x-3 space-y-0",children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Checkbox,{checked:e.value,onCheckedChange:e.onChange})}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 leading-none",children:[jsxRuntimeExports.jsx(FormLabel,{children:"I agree to the terms and conditions of The Sandwich Project"}),jsxRuntimeExports.jsx(FormMessage,{})]})]})}),jsxRuntimeExports.jsx(FormField,{control:l.control,name:"agreeToBackground",render:({field:e})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex flex-row items-start space-x-3 space-y-0",children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Checkbox,{checked:e.value,onCheckedChange:e.onChange})}),jsxRuntimeExports.jsx("div",{className:"space-y-1 leading-none",children:jsxRuntimeExports.jsx(FormLabel,{children:"I consent to a background check (required for certain volunteer roles)"})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-800",children:[jsxRuntimeExports.jsx("strong",{children:"Next Steps:"})," After submitting your application, our volunteer coordinator will review your information and contact you within 2-3 business days with orientation details and next steps."]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between pt-6",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>{e>1&&r(e-1)},disabled:1===e,children:"Previous"}),e<3?jsxRuntimeExports.jsx(Button,{type:"button",onClick:()=>{e<3&&r(e+1)},children:"Next"}):jsxRuntimeExports.jsx(Button,{type:"submit",disabled:c.isPending,children:c.isPending?"Submitting...":"Complete Registration"})]})]})}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",jsxRuntimeExports.jsx(Link$1,{href:"/login",className:"text-blue-600 hover:underline",children:"Sign in here"})]})})]})]})})}function NotFound(){return jsxRuntimeExports.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsx(Card$1,{className:"w-full max-w-md mx-4",children:jsxRuntimeExports.jsxs(CardContent$1,{className:"pt-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex mb-4 gap-2",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"h-8 w-8 text-red-500"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function ProtectedRoute({children:e}){const{user:t,loading:r}=useAuth();return r?jsxRuntimeExports.jsx(LoadingState,{text:"Authenticating...",size:"lg",className:"min-h-screen"}):t?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e}):jsxRuntimeExports.jsx(Redirect,{to:"/login"})}function Router(){const{user:e,loading:t}=useAuth();return useAnalytics(),useEnhancedTracking(),t?jsxRuntimeExports.jsx(LoadingState,{text:"Loading...",size:"lg",className:"min-h-screen"}):jsxRuntimeExports.jsxs(Switch$2,{children:[jsxRuntimeExports.jsx(Route,{path:"/login",children:()=>e?jsxRuntimeExports.jsx(Redirect,{to:"/dashboard"}):jsxRuntimeExports.jsx(LoginForm,{})}),jsxRuntimeExports.jsx(Route,{path:"/signup",children:()=>e?jsxRuntimeExports.jsx(Redirect,{to:"/dashboard"}):jsxRuntimeExports.jsx(SignupPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/reset-password",component:ResetPassword}),jsxRuntimeExports.jsx(Route,{path:"/messages",children:()=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{initialSection:"messages"})})}),jsxRuntimeExports.jsx(Route,{path:"/stream-messages",children:()=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{initialSection:"stream-messages"})})}),jsxRuntimeExports.jsx(Route,{path:"/inbox",children:()=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{initialSection:"inbox"})})}),jsxRuntimeExports.jsx(Route,{path:"/suggestions",children:()=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{initialSection:"suggestions"})})}),jsxRuntimeExports.jsx(Route,{path:"/governance",children:()=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{initialSection:"governance"})})}),jsxRuntimeExports.jsx(Route,{path:"/google-sheets",children:()=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{initialSection:"google-sheets"})})}),jsxRuntimeExports.jsx(Route,{path:"/meetings",children:()=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{initialSection:"meetings"})})}),jsxRuntimeExports.jsx(Route,{path:"/projects",children:()=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{initialSection:"projects"})})}),jsxRuntimeExports.jsx(Route,{path:"/projects/:id",children:e=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{initialSection:`project-${e.id}`})})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",children:()=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{})})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard/:section",children:e=>jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{initialSection:e.section})})}),jsxRuntimeExports.jsx(Route,{path:"/",children:()=>e?jsxRuntimeExports.jsx(Redirect,{to:"/dashboard"}):jsxRuntimeExports.jsx(Redirect,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{component:NotFound})]})}function App(){return reactExports.useEffect(()=>{console.warn("Missing required Google Analytics key: VITE_GA_MEASUREMENT_ID")},[]),jsxRuntimeExports.jsx(ErrorBoundary$1,{children:jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsxs(TooltipProvider,{children:[jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(Router,{})]})})})})}
